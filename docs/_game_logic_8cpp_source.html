<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Richard Boegli&#39;s CnC_Generals_Zero_Hour Fork: Code/GameEngine/Source/GameLogic/System/GameLogic.cpp Source File</title>
<link rel="icon" href="sam_smile.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="sam_smile.png"/></td>
  <td id="projectalign">
   <div id="projectname">Richard Boegli&#39;s CnC_Generals_Zero_Hour Fork<span id="projectnumber">&#160;WIP</span>
   </div>
   <div id="projectbrief">This is documentation of Richard Boegil&#39;s Zero Hour Fork</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_game_logic_8cpp_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">GameLogic.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="_game_logic_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">**  Command &amp; Conquer Generals Zero Hour(tm)</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">**  Copyright 2025 Electronic Arts Inc.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">**</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">**  This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">**  it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">**  the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">**  (at your option) any later version.</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">**</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">**  This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">**  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">**  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">**  GNU General Public License for more details.</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">**</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">**  You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">**  along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">*/</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">//                                                                                                                                                      //</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment">//  (c) 2001-2003 Electronic Arts Inc.                                                                              //</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">//                                                                                                                                                      //</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">// FILE: GameLogic.cpp ////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="comment">// GameLogic class implementation</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment">// Author: Michael S. Booth, October 2000</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="_pre_r_t_s_8h.html">PreRTS.h</a>&quot;</span> <span class="comment">// This must go first in EVERY cpp file int the GameEngine</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="_audio_affect_8h.html">Common/AudioAffect.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="_audio_handle_special_values_8h.html">Common/AudioHandleSpecialValues.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="_build_assistant_8h.html">Common/BuildAssistant.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="_copy_protection_8h.html">Common/CopyProtection.h</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="_c_r_c_debug_8h.html">Common/CRCDebug.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;<a class="code" href="_game_audio_8h.html">Common/GameAudio.h</a>&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;<a class="code" href="_game_engine_8h.html">Common/GameEngine.h</a>&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;<a class="code" href="_game_l_o_d_8h.html">Common/GameLOD.h</a>&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &quot;<a class="code" href="_game_state_8h.html">Common/GameState.h</a>&quot;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &quot;<a class="code" href="_game_engine_2_include_2_common_2_i_n_i_8h.html">Common/INI.h</a>&quot;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;<a class="code" href="_latch_restore_8h.html">Common/LatchRestore.h</a>&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;<a class="code" href="_map_object_8h.html">Common/MapObject.h</a>&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;<a class="code" href="_multiplayer_settings_8h.html">Common/MultiplayerSettings.h</a>&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;<a class="code" href="_perf_timer_8h.html">Common/PerfTimer.h</a>&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &quot;<a class="code" href="_player_8h.html">Common/Player.h</a>&quot;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#include &quot;<a class="code" href="_player_list_8h.html">Common/PlayerList.h</a>&quot;</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &quot;<a class="code" href="_player_template_8h.html">Common/PlayerTemplate.h</a>&quot;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;<a class="code" href="_radar_8h.html">Common/Radar.h</a>&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#include &quot;<a class="code" href="_random_value_8h.html">Common/RandomValue.h</a>&quot;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &quot;<a class="code" href="_recorder_8h.html">Common/Recorder.h</a>&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#include &quot;<a class="code" href="_stats_collector_8h.html">Common/StatsCollector.h</a>&quot;</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#include &quot;<a class="code" href="_thing_factory_8h.html">Common/ThingFactory.h</a>&quot;</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#include &quot;<a class="code" href="_team_8h.html">Common/Team.h</a>&quot;</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#include &quot;<a class="code" href="_thing_template_8h.html">Common/ThingTemplate.h</a>&quot;</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#include &quot;<a class="code" href="_water_8h.html">GameClient/Water.h</a>&quot;</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#include &quot;<a class="code" href="_snow_8h.html">GameClient/Snow.h</a>&quot;</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#include &quot;<a class="code" href="_well_known_keys_8h.html">Common/WellKnownKeys.h</a>&quot;</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#include &quot;<a class="code" href="_xfer_8h.html">Common/Xfer.h</a>&quot;</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#include &quot;<a class="code" href="_xfer_c_r_c_8h.html">Common/XferCRC.h</a>&quot;</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">#include &quot;<a class="code" href="_xfer_deep_c_r_c_8h.html">Common/XferDeepCRC.h</a>&quot;</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="preprocessor">#include &quot;<a class="code" href="_game_spy_misc_preferences_8h.html">Common/GameSpyMiscPreferences.h</a>&quot;</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="preprocessor">#include &quot;<a class="code" href="_control_bar_8h.html">GameClient/ControlBar.h</a>&quot;</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="preprocessor">#include &quot;<a class="code" href="_drawable_8h.html">GameClient/Drawable.h</a>&quot;</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="preprocessor">#include &quot;<a class="code" href="_game_client_8h.html">GameClient/GameClient.h</a>&quot;</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="preprocessor">#include &quot;<a class="code" href="_game_engine_2_include_2_game_client_2_game_text_8h.html">GameClient/GameText.h</a>&quot;</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="preprocessor">#include &quot;<a class="code" href="_g_u_i_callbacks_8h.html">GameClient/GUICallbacks.h</a>&quot;</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="preprocessor">#include &quot;<a class="code" href="_in_game_u_i_8h.html">GameClient/InGameUI.h</a>&quot;</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="preprocessor">#include &quot;<a class="code" href="_load_screen_8h.html">GameClient/LoadScreen.h</a>&quot;</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="preprocessor">#include &quot;<a class="code" href="_map_util_8h.html">GameClient/MapUtil.h</a>&quot;</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="preprocessor">#include &quot;<a class="code" href="_mouse_8h.html">GameClient/Mouse.h</a>&quot;</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="preprocessor">#include &quot;<a class="code" href="_particle_sys_8h.html">GameClient/ParticleSys.h</a>&quot;</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="preprocessor">#include &quot;<a class="code" href="_terrain_visual_8h.html">GameClient/TerrainVisual.h</a>&quot;</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="preprocessor">#include &quot;<a class="code" href="_view_8h.html">GameClient/View.h</a>&quot;</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="preprocessor">#include &quot;<a class="code" href="_control_bar_8h.html">GameClient/ControlBar.h</a>&quot;</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="preprocessor">#include &quot;<a class="code" href="_campaign_manager_8h.html">GameClient/CampaignManager.h</a>&quot;</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="preprocessor">#include &quot;<a class="code" href="_game_window_transitions_8h.html">GameClient/GameWindowTransitions.h</a>&quot;</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="preprocessor">#include &quot;<a class="code" href="_a_i_8h.html">GameLogic/AI.h</a>&quot;</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="preprocessor">#include &quot;<a class="code" href="_a_i_pathfind_8h.html">GameLogic/AIPathfind.h</a>&quot;</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="preprocessor">#include &quot;<a class="code" href="_cave_system_8h.html">GameLogic/CaveSystem.h</a>&quot;</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="preprocessor">#include &quot;<a class="code" href="_crate_system_8h.html">GameLogic/CrateSystem.h</a>&quot;</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="preprocessor">#include &quot;<a class="code" href="_f_p_u_control_8h.html">GameLogic/FPUControl.h</a>&quot;</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="preprocessor">#include &quot;<a class="code" href="_game_logic_8h.html">GameLogic/GameLogic.h</a>&quot;</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="preprocessor">#include &quot;<a class="code" href="_locomotor_8h.html">GameLogic/Locomotor.h</a>&quot;</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="preprocessor">#include &quot;<a class="code" href="_object_8h.html">GameLogic/Object.h</a>&quot;</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="preprocessor">#include &quot;<a class="code" href="_a_i_update_8h.html">GameLogic/Module/AIUpdate.h</a>&quot;</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="preprocessor">#include &quot;<a class="code" href="_body_module_8h.html">GameLogic/Module/BodyModule.h</a>&quot;</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="preprocessor">#include &quot;<a class="code" href="_create_module_8h.html">GameLogic/Module/CreateModule.h</a>&quot;</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="preprocessor">#include &quot;<a class="code" href="_destroy_module_8h.html">GameLogic/Module/DestroyModule.h</a>&quot;</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="preprocessor">#include &quot;<a class="code" href="_open_contain_8h.html">GameLogic/Module/OpenContain.h</a>&quot;</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="preprocessor">#include &quot;<a class="code" href="_partition_manager_8h.html">GameLogic/PartitionManager.h</a>&quot;</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="preprocessor">#include &quot;<a class="code" href="_polygon_trigger_8h.html">GameLogic/PolygonTrigger.h</a>&quot;</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="preprocessor">#include &quot;<a class="code" href="_script_actions_8h.html">GameLogic/ScriptActions.h</a>&quot;</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="preprocessor">#include &quot;<a class="code" href="_game_engine_2_include_2_game_logic_2_script_conditions_8h.html">GameLogic/ScriptConditions.h</a>&quot;</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="preprocessor">#include &quot;<a class="code" href="_script_engine_8h.html">GameLogic/ScriptEngine.h</a>&quot;</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="preprocessor">#include &quot;<a class="code" href="_sides_list_8h.html">GameLogic/SidesList.h</a>&quot;</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="preprocessor">#include &quot;<a class="code" href="_victory_conditions_8h.html">GameLogic/VictoryConditions.h</a>&quot;</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="preprocessor">#include &quot;<a class="code" href="_weapon_8h.html">GameLogic/Weapon.h</a>&quot;</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="preprocessor">#include &quot;<a class="code" href="_ghost_object_8h.html">GameLogic/GhostObject.h</a>&quot;</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="preprocessor">#include &quot;<a class="code" href="_data_chunk_8h.html">Common/DataChunk.h</a>&quot;</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="preprocessor">#include &quot;<a class="code" href="_scripts_8h.html">GameLogic/Scripts.h</a>&quot;</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="preprocessor">#include &quot;<a class="code" href="_buddy_thread_8h.html">GameNetwork/GameSpy/BuddyThread.h</a>&quot;</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="preprocessor">#include &quot;<a class="code" href="_peer_defs_8h.html">GameNetwork/GameSpy/PeerDefs.h</a>&quot;</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="preprocessor">#include &quot;<a class="code" href="_thread_utils_8h.html">GameNetwork/GameSpy/ThreadUtils.h</a>&quot;</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="preprocessor">#include &quot;<a class="code" href="_l_a_n_a_p_i_callbacks_8h.html">GameNetwork/LANAPICallbacks.h</a>&quot;</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span><span class="preprocessor">#include &quot;<a class="code" href="_network_interface_8h.html">GameNetwork/NetworkInterface.h</a>&quot;</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span><span class="preprocessor">#include &quot;<a class="code" href="_persistent_storage_thread_8h.html">GameNetwork/GameSpy/PersistentStorageThread.h</a>&quot;</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="preprocessor">#include &lt;<a class="code" href="_include_2rts_2profile_8h.html">rts/profile.h</a>&gt;</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span><a class="code hl_define" href="_perf_timer_8h.html#a7d02d33334b68a982bf218d69c748d08">DECLARE_PERF_TIMER</a>(SleepyMaintenance)</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="preprocessor">#include &quot;Common/UnitTimings.h&quot; </span><span class="comment">//Contains the DO_UNIT_TIMINGS define jba.       </span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="comment">// If defined, the game times various units.</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="preprocessor">#ifdef DO_UNIT_TIMINGS</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="preprocessor">#pragma MESSAGE(&quot;*** WARNING *** DOING DO_UNIT_TIMINGS!!!!&quot;)</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> g_UT_gotUnit = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="keyword">const</span> <a class="code hl_class" href="class_thing_template.html">ThingTemplate</a> *g_UT_curThing = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> g_UT_startTiming = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>FILE *g_UT_timingLog=<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>FILE *g_UT_commaLog=<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="comment">// Note - this is only for gathering timing data!  DO NOT DO THIS IN REGULAR CODE!!!  JBA</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span><span class="preprocessor">#define BRUTAL_TIMING_HACK</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span><span class="preprocessor">#include &quot;../../gameenginedevice/include/W3DDevice/GameClient/Module/W3DModelDraw.h&quot;</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span><span class="keyword">extern</span> <span class="keywordtype">void</span> externalAddTree(<a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> location, <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> <a class="code hl_function" href="_game_mtl_8cpp.html#aa1230864bc0353a2618c7203a063c1fa">scale</a>, <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> angle, <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> name);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="preprocessor">#ifdef _INTERNAL</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span><span class="comment">// for occasional debugging...</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span><span class="comment">//#pragma optimize(&quot;&quot;, off)</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span><span class="comment">//#pragma MESSAGE(&quot;************************************** WARNING, optimization disabled for debugging purposes&quot;)</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span><span class="comment">// I&#39;m making this larger now that we know how big our maps are going to be. </span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#ac2527b31255f98602bb90b294898b750a71d5bfd8044506fc901ad00c15ca377f">  143</a></span><span class="keyword">enum</span> { <a class="code hl_enumvalue" href="_game_logic_8cpp.html#ac2527b31255f98602bb90b294898b750a71d5bfd8044506fc901ad00c15ca377f">OBJ_HASH_SIZE</a>   = 8192 };</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno"><a class="line" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">  146</a></span><a class="code hl_class" href="class_game_logic.html">GameLogic</a> *<a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a> = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span><span class="keyword">static</span> <span class="keywordtype">void</span> findAndSelectCommandCenter(<a class="code hl_class" href="class_object.html">Object</a> *obj, <span class="keywordtype">void</span>* alreadyFound);</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="keyword">enum</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>{</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a3e47e39a419e759be759bf064fa67725">  156</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a3e47e39a419e759be759bf064fa67725">LOAD_PROGRESS_START</a> =0,</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4f33f6d6d87a3c96413210ce83b6e713">  157</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4f33f6d6d87a3c96413210ce83b6e713">LOAD_PROGRESS_POST_PARTICLE_INI_LOAD</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a3e47e39a419e759be759bf064fa67725">LOAD_PROGRESS_START</a> + 1,</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ad6bf0ed607c199f5dcddc10c1b57fa44">  158</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ad6bf0ed607c199f5dcddc10c1b57fa44">LOAD_PROGRESS_POST_LOAD_MAP</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4f33f6d6d87a3c96413210ce83b6e713">LOAD_PROGRESS_POST_PARTICLE_INI_LOAD</a> + 1,</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2f506e7307098fe1446af85aca344277">  159</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2f506e7307098fe1446af85aca344277">LOAD_PROGRESS_SIDE_POPULATION</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ad6bf0ed607c199f5dcddc10c1b57fa44">LOAD_PROGRESS_POST_LOAD_MAP</a> + 1,  <span class="comment">// Increment the next one by at least MAX_SLOTS</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4909a69faed1e61725130db4e06aded7">  160</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4909a69faed1e61725130db4e06aded7">LOAD_PROGRESS_POST_SIDE_LIST_INIT</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2f506e7307098fe1446af85aca344277">LOAD_PROGRESS_SIDE_POPULATION</a> + 1 + MAX_SLOTS,</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ac68a8ab5d06c826e4966eff6ec700069">  161</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ac68a8ab5d06c826e4966eff6ec700069">LOAD_PROGRESS_POST_PLAYER_LIST_RESET</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4909a69faed1e61725130db4e06aded7">LOAD_PROGRESS_POST_SIDE_LIST_INIT</a> + 1,</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078aac03a90876860f854d16252d7b912331">  162</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078aac03a90876860f854d16252d7b912331">LOAD_PROGRESS_POST_SCRIPT_ENGINE_NEW_MAP</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ac68a8ab5d06c826e4966eff6ec700069">LOAD_PROGRESS_POST_PLAYER_LIST_RESET</a> + 1,</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ace735895822780026d0b9a8fa926f32e">  163</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ace735895822780026d0b9a8fa926f32e">LOAD_PROGRESS_POST_VICTORY_CONDITION_SETUP</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078aac03a90876860f854d16252d7b912331">LOAD_PROGRESS_POST_SCRIPT_ENGINE_NEW_MAP</a> + 2,</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a0ab8bf9c2f4d489cc33868c0d35f4c9a">  164</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a0ab8bf9c2f4d489cc33868c0d35f4c9a">LOAD_PROGRESS_POST_VICTORY_CONDITION_SET_VICTORY_CONDITION</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ace735895822780026d0b9a8fa926f32e">LOAD_PROGRESS_POST_VICTORY_CONDITION_SETUP</a> + 1,</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078abc7da6018cb124960e629c7c9f41f5d9">  165</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078abc7da6018cb124960e629c7c9f41f5d9">LOAD_PROGRESS_POST_GHOST_OBJECT_MANAGER_RESET</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a0ab8bf9c2f4d489cc33868c0d35f4c9a">LOAD_PROGRESS_POST_VICTORY_CONDITION_SET_VICTORY_CONDITION</a> + 1,</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2add60c090efb19d795853a5ee655d67">  166</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2add60c090efb19d795853a5ee655d67">LOAD_PROGRESS_POST_TERRAIN_LOGIC_NEW_MAP</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078abc7da6018cb124960e629c7c9f41f5d9">LOAD_PROGRESS_POST_GHOST_OBJECT_MANAGER_RESET</a> + 1,</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a407040a0a1a136686862ff000d3e4fa3">  167</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a407040a0a1a136686862ff000d3e4fa3">LOAD_PROGRESS_POST_BRIDGE_LOAD</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2add60c090efb19d795853a5ee655d67">LOAD_PROGRESS_POST_TERRAIN_LOGIC_NEW_MAP</a> + 1,</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a64185d9b8a0774657697848e1eb552c1">  168</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a64185d9b8a0774657697848e1eb552c1">LOAD_PROGRESS_POST_PATHFINDER_NEW_MAP</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a407040a0a1a136686862ff000d3e4fa3">LOAD_PROGRESS_POST_BRIDGE_LOAD</a> + 1,</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a340b12b0b911214e8001157bb7124a23">  170</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a340b12b0b911214e8001157bb7124a23">LOAD_PROGRESS_LOOP_ALL_THE_FREAKN_OBJECTS</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a407040a0a1a136686862ff000d3e4fa3">LOAD_PROGRESS_POST_BRIDGE_LOAD</a> + 1,</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ac618133255d5254282192dbf3228e4eb">  171</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ac618133255d5254282192dbf3228e4eb">LOAD_PROGRESS_MAX_ALL_THE_FREAKN_OBJECTS</a> = 80,<span class="comment">// THE END OF THE BIG ASS PROGRESS PAUSE</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ad51e96c1d571e42099fc49262e2de4ab">  173</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ad51e96c1d571e42099fc49262e2de4ab">LOAD_PROGRESS_LOOP_INITIAL_NETWORK_BUILDINGS</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ac618133255d5254282192dbf3228e4eb">LOAD_PROGRESS_MAX_ALL_THE_FREAKN_OBJECTS</a> + 1,  <span class="comment">// Increment the next one by at least MAX_SLOTS</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2c2fa8217cf7eb250c0f01137ed58c9d">  174</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2c2fa8217cf7eb250c0f01137ed58c9d">LOAD_PROGRESS_POST_INITIAL_NETWORK_BUILDINGS</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ad51e96c1d571e42099fc49262e2de4ab">LOAD_PROGRESS_LOOP_INITIAL_NETWORK_BUILDINGS</a> + MAX_SLOTS + 1,</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span> </div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4b6b4dae8f5dfd7ce8aa67be3bd7257f">  176</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4b6b4dae8f5dfd7ce8aa67be3bd7257f">LOAD_PROGRESS_POST_PRELOAD_ASSETS</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2c2fa8217cf7eb250c0f01137ed58c9d">LOAD_PROGRESS_POST_INITIAL_NETWORK_BUILDINGS</a> + 1,</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a3b9f1b73e085fc1e9c3a4233d9fc8988">  177</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a3b9f1b73e085fc1e9c3a4233d9fc8988">LOAD_PROGRESS_POST_STARTING_CAMERA</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4b6b4dae8f5dfd7ce8aa67be3bd7257f">LOAD_PROGRESS_POST_PRELOAD_ASSETS</a> + 1,</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a5fdb38ef82870c121ee3291dbfd32683">  178</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a5fdb38ef82870c121ee3291dbfd32683">LOAD_PROGRESS_POST_STARTING_CAMERA_2</a> = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a3b9f1b73e085fc1e9c3a4233d9fc8988">LOAD_PROGRESS_POST_STARTING_CAMERA</a> + 1,</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ae3e9c9d448da068dfa8d1b5bad24a4a8">  179</a></span>    <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ae3e9c9d448da068dfa8d1b5bad24a4a8">LOAD_PROGRESS_END</a> = 100,</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>};</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span><span class="keyword">static</span> <a class="code hl_class" href="class_waypoint.html">Waypoint</a> * findNamedWaypoint(<a class="code hl_class" href="class_ascii_string.html">AsciiString</a> name)</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>{</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="class_waypoint.html">Waypoint</a> *way = <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getFirstWaypoint(); way; way = way-&gt;getNext())</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    {</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="keywordflow">if</span> (way-&gt;getName() == name)</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        {</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            <span class="keywordflow">return</span> way;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        }</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    }</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>}</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen00198" data-start="{" data-end="}">
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno"><a class="line" href="_f_p_u_control_8h.html#ac898939fad383b7b6cb129bdd759cf0f">  198</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="_game_logic_8cpp.html#ac898939fad383b7b6cb129bdd759cf0f">setFPMode</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>{</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  <span class="comment">// Set floating point round mode to CHOP, which only comes</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  <span class="comment">// into play when precision is exceeded.  This is necessary</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>  <span class="comment">// for the fast float to int routines used elsewhere in the</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  <span class="comment">// system.</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    <span class="comment">// Also set floating point precision to low.  It could be</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <span class="comment">// anything as long as it is consistent, really, but this</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <span class="comment">// is in the (vain?) hope of any slight speed boost.</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    _fpreset();</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> curVal = _statusfp();</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> newVal = curVal;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    newVal = (newVal &amp; ~_MCW_RC) | (_RC_NEAR &amp; _MCW_RC);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <span class="comment">//newVal = (newVal &amp; ~_MCW_RC) | (_RC_CHOP &amp; _MCW_RC);</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    newVal = (newVal &amp; ~_MCW_PC) | (_PC_24   &amp; _MCW_PC);</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span> </div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    _controlfp(newVal, _MCW_PC | _MCW_RC);</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>}</div>
</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen00223" data-start="{" data-end="}">
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno"><a class="line" href="class_game_logic.html#a11c1bfd7580029022fe63e84f0eb694d">  223</a></span><a class="code hl_function" href="class_game_logic.html#a11c1bfd7580029022fe63e84f0eb694d">GameLogic::GameLogic</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>{</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    <span class="comment">//Added By Sadullah Nader</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="comment">//Initializations missing and necessary </span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    m_background = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    m_CRC = 0;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    m_isInUpdate = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    m_rankPointsToAddAtGameStart = 0;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    <span class="keywordflow">for</span>(<a class="code hl_union" href="union_int.html">Int</a> i = 0; i &lt; MAX_SLOTS; i++)</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    {</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        m_progressComplete[i] = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        m_progressCompleteTimeout[i] = 0;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    }</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span> </div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    m_shouldValidateCRCs = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    </div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    m_startNewGame = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    m_frame = 0;</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    m_frameObjectsChangedTriggerAreas = 0;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    m_width = 0;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    m_height = 0;</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    m_objList = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    m_curUpdateModule = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    m_nextObjID = <a class="code hl_enumvalue" href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5a789b09c76a8e51e8db09218745ca3039">INVALID_ID</a>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    m_startNewGame = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    m_gameMode = <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa32b74fc29edec4aaf73e05477d1f5602">GAME_NONE</a>;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    m_rankLevelLimit = 1000;</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    m_gamePaused = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    m_inputEnabledMemory = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    m_mouseVisibleMemory = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    m_loadScreen = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    m_forceGameStartByTimeOut = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span><span class="preprocessor">#ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    m_overallFailedPathfinds = 0;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span> </div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    m_loadingMap = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    m_loadingSave = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    m_clearingGameData = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>}</div>
</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="keywordtype">void</span> GameLogic::setDefaults( <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> loadingSaveGame )</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>{</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    m_frame = 0;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    m_width = <a class="code hl_define" href="_game_type_8h.html#a6fd5a65863598cf1d82736a1a91abab3">DEFAULT_WORLD_WIDTH</a>;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    m_height = <a class="code hl_define" href="_game_type_8h.html#ac681bef95b630ddeda5bb36410870977">DEFAULT_WORLD_HEIGHT</a>;</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    m_objList = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span><span class="preprocessor">#ifdef ALLOW_NONSLEEPY_UPDATES</span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    m_normalUpdates.clear();</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <span class="keywordflow">for</span> (std::vector&lt;UpdateModulePtr&gt;::iterator it = m_sleepyUpdates.begin(); it != m_sleepyUpdates.end(); ++it)</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    {</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        (*it)-&gt;friend_setIndexInLogic(-1);</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    }</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    m_sleepyUpdates.clear();</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    m_curUpdateModule = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    <span class="comment">// only reset the next object ID allocater counter when we&#39;re not loading a save game.</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="comment">// for save games, we read this value out of the save game file and it is important</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="comment">// that we preserve it as we load and execute the game</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <span class="keywordflow">if</span>( loadingSaveGame == <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> )</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        m_nextObjID = (<a class="code hl_enumeration" href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5">ObjectID</a>)1;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>}</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen00299" data-start="{" data-end="}">
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno"><a class="line" href="class_game_logic.html#a279e112e6bd4a5511b0c9938a073b711">  299</a></span><a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> <a class="code hl_function" href="class_game_logic.html#a279e112e6bd4a5511b0c9938a073b711">GameLogic::isInSinglePlayerGame</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>{</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    <span class="keywordflow">return</span> (m_gameMode == <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaee1a5a47561a06e03984ff31602e2529">GAME_SINGLE_PLAYER</a> ||</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        (<a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a> &amp;&amp; <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;getMode() == <a class="code hl_enumvalue" href="_recorder_8h.html#abebff8e1caf81029565d318be12ea230a4236aa876d9bb2efcb5da861afe2f5ba">RECORDERMODETYPE_PLAYBACK</a> &amp;&amp; <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;getGameMode() == <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaee1a5a47561a06e03984ff31602e2529">GAME_SINGLE_PLAYER</a>));</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>}</div>
</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span> </div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span><span class="keywordtype">void</span> GameLogic::destroyAllObjectsImmediate()</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>{</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <span class="comment">// destroy all remaining objects</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <a class="code hl_class" href="class_object.html">Object</a> *obj;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <a class="code hl_class" href="class_object.html">Object</a> *nextObj;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="keywordflow">for</span>( obj = m_objList; obj; obj = nextObj )</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    {</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        nextObj = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>();</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        <a class="code hl_function" href="class_game_logic.html#a5875c63d5b64103411d99060d68c5623">destroyObject</a>( obj );</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="comment">// process the destroy list immediately</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    processDestroyList();</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>( m_objList == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<span class="stringliteral">&quot;destroyAllObjectsImmediate: Object list not cleared\n&quot;</span>) );</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>}  <span class="comment">// end destroyAllObjectsImmediate</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen00330" data-start="{" data-end="}">
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno"><a class="line" href="class_game_logic.html#a63a7acf778535b5f74d469de2cd39b16">  330</a></span><a class="code hl_function" href="class_game_logic.html#a63a7acf778535b5f74d469de2cd39b16">GameLogic::~GameLogic</a>()</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>{</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="comment">// clear any object TOC we might have</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    m_objectTOC.clear();</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="keywordflow">if</span> (m_background)</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    {</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        m_background-&gt;destroyWindows();</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        m_background-&gt;deleteInstance();</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        m_background = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    }</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span> </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="comment">// destroy all remaining objects</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    destroyAllObjectsImmediate();</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span> </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <span class="comment">// delete the logical terrain</span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>;</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a> = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span> </div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="_ghost_object_8h.html#a026d8f8301288c28b954b0eb5ea3283f">TheGhostObjectManager</a>;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <a class="code hl_variable" href="_ghost_object_8h.html#a026d8f8301288c28b954b0eb5ea3283f">TheGhostObjectManager</a>=<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span> </div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <span class="comment">// delete the partition manager</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a> = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span> </div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="_script_actions_8h.html#a0b725c73e6f96faa7917f2c08b5c7e08">TheScriptActions</a>;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    <a class="code hl_variable" href="_script_actions_8h.html#a0b725c73e6f96faa7917f2c08b5c7e08">TheScriptActions</a> = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="_game_engine_2_include_2_game_logic_2_script_conditions_8h.html#ac5f94909bd75f9fd27b9b3bc9898de0a">TheScriptConditions</a>;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <a class="code hl_variable" href="_game_engine_2_include_2_game_logic_2_script_conditions_8h.html#ac5f94909bd75f9fd27b9b3bc9898de0a">TheScriptConditions</a> = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span> </div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    <span class="comment">// delete the Script Engine</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a>;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a> = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    </div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <span class="comment">// Null out TheGameLogic</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a> = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>}</div>
</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span> </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen00374" data-start="{" data-end="}">
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno"><a class="line" href="class_game_logic.html#a940eaebd466e8d037c6531347f321db1">  374</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a940eaebd466e8d037c6531347f321db1">GameLogic::init</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>{</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span> </div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    <a class="code hl_function" href="_f_p_u_control_8h.html#ac898939fad383b7b6cb129bdd759cf0f">setFPMode</a>();</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span></div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    setDefaults( <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> );</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span> </div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    <span class="comment">// create the partition manager</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a> = NEW <a class="code hl_class" href="class_partition_manager.html">PartitionManager</a>;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;init();</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;setName(<span class="stringliteral">&quot;ThePartitionManager&quot;</span>);</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span> </div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <span class="comment">// Create system for holding deleted objects that are</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <span class="comment">// still in the partition manager because player has a fogged</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    <span class="comment">// view of them.</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    <a class="code hl_variable" href="_ghost_object_8h.html#a026d8f8301288c28b954b0eb5ea3283f">TheGhostObjectManager</a> = createGhostObjectManager();</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <span class="comment">// create the terrain logic</span></div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a> = createTerrainLogic();</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;init();</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;setName(<span class="stringliteral">&quot;TheTerrainLogic&quot;</span>);</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="comment">// Create script engine system.</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <a class="code hl_variable" href="_script_actions_8h.html#a0b725c73e6f96faa7917f2c08b5c7e08">TheScriptActions</a> = NEW <a class="code hl_class" href="class_script_actions.html">ScriptActions</a>;       <span class="comment">// Basically, a subsystem of TheScriptEngine.</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <a class="code hl_variable" href="_game_engine_2_include_2_game_logic_2_script_conditions_8h.html#ac5f94909bd75f9fd27b9b3bc9898de0a">TheScriptConditions</a> = NEW <a class="code hl_class" href="class_script_conditions.html">ScriptConditions</a>;   <span class="comment">// Basically, a subsystem of TheScriptEngine.</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a> = NEW <a class="code hl_class" href="class_script_engine.html">ScriptEngine</a>;</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a>-&gt;init();</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a>-&gt;setName(<span class="stringliteral">&quot;TheScriptEngine&quot;</span>);</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    <span class="comment">// create a team for the player</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="comment">//DEBUG_ASSERTCRASH(ThePlayerList, (&quot;null ThePlayerList&quot;));</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="comment">//ThePlayerList-&gt;setLocalPlayer(0);</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span> </div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    m_CRC = 0;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    m_gamePaused = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    m_inputEnabledMemory = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    m_mouseVisibleMemory = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <span class="keywordflow">for</span>(<a class="code hl_union" href="union_int.html">Int</a> i = 0; i &lt; MAX_SLOTS; ++i)</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    {</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        m_progressComplete[i] = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        m_progressCompleteTimeout[i] = 0;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    }</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    m_forceGameStartByTimeOut = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    m_isScoringEnabled = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    m_showBehindBuildingMarkers = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    m_drawIconUI = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    m_showDynamicLOD = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    m_scriptHulkMaxLifetimeOverride = -1;</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    m_isInUpdate = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> </div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>    m_rankPointsToAddAtGameStart = 0;</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>}</div>
</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span> </div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen00434" data-start="{" data-end="}">
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno"><a class="line" href="class_game_logic.html#a50a656afa006216dbfc0f4d7a4210841">  434</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a50a656afa006216dbfc0f4d7a4210841">GameLogic::reset</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>{</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    m_thingTemplateBuildableOverrides.clear();</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    m_controlBarOverrides.clear();</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    <span class="comment">// set the hash to be rather large. We need to optimize this value later.</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span><span class="comment">//  m_objHash.clear();</span></div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span><span class="comment">//  m_objHash.resize(OBJ_HASH_SIZE);</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    m_objVector.clear();</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    m_objVector.resize(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#ac2527b31255f98602bb90b294898b750a71d5bfd8044506fc901ad00c15ca377f">OBJ_HASH_SIZE</a>, <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span> </div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    m_gamePaused = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    m_inputEnabledMemory = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    m_mouseVisibleMemory = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <a class="code hl_function" href="_f_p_u_control_8h.html#ac898939fad383b7b6cb129bdd759cf0f">setFPMode</a>();</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span> </div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    <span class="comment">// destroy all objects</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    destroyAllObjectsImmediate();</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span> </div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    m_nextObjID = (<a class="code hl_enumeration" href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5">ObjectID</a>)1;</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span> </div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    m_frameObjectsChangedTriggerAreas = 0;</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span> </div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    <a class="code hl_variable" href="_ghost_object_8h.html#a026d8f8301288c28b954b0eb5ea3283f">TheGhostObjectManager</a>-&gt;reset();</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;reset();</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;reset();</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;reset();</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a>-&gt;reset();</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    m_CRC = 0;</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    <span class="keywordflow">for</span>(<a class="code hl_union" href="union_int.html">Int</a> i = 0; i &lt; MAX_SLOTS; ++i)</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    {</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        m_progressComplete[i] = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>        m_progressCompleteTimeout[i] = 0;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    }</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    m_forceGameStartByTimeOut = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span> </div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="_stats_collector_8h.html#a37ff26b22956783a5eb4aef155579af0">TheStatsCollector</a>)</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    {</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>        <span class="keyword">delete</span> <a class="code hl_variable" href="_stats_collector_8h.html#a37ff26b22956783a5eb4aef155579af0">TheStatsCollector</a>;</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        <a class="code hl_variable" href="_stats_collector_8h.html#a37ff26b22956783a5eb4aef155579af0">TheStatsCollector</a> = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    }</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span> </div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    <span class="comment">// clear any table of contents we have</span></div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    m_objectTOC.clear();</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span> </div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    setDefaults( <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> );</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span> </div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    m_isScoringEnabled = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    m_showBehindBuildingMarkers = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    m_drawIconUI = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    m_showDynamicLOD = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    m_scriptHulkMaxLifetimeOverride = -1;</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <span class="comment">// Clean up any water transparency overrides that were generated for this map.</span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <a class="code hl_class" href="class_water_transparency_setting.html">WaterTransparencySetting</a> *wt = (<a class="code hl_class" href="class_water_transparency_setting.html">WaterTransparencySetting</a>*) <a class="code hl_variable" href="_water_8h.html#a41a96d36a0d764a140a0225f54975f75">TheWaterTransparency</a>.getNonOverloadedPointer();</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    <a class="code hl_variable" href="_water_8h.html#a41a96d36a0d764a140a0225f54975f75">TheWaterTransparency</a> = (<a class="code hl_class" href="class_water_transparency_setting.html">WaterTransparencySetting</a>*) wt-&gt;<a class="code hl_function" href="class_overridable.html#a05af2dea9b733421367c222b163296f3">deleteOverrides</a>();</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span> </div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    <span class="comment">// Clean up any weather overrides that were generated for this map.</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <a class="code hl_class" href="class_weather_setting.html">WeatherSetting</a> *ws = (<a class="code hl_class" href="class_weather_setting.html">WeatherSetting</a>*) <a class="code hl_variable" href="_snow_8h.html#a4123cca1e6cb5c0f7e82b19fc9b7b0d7">TheWeatherSetting</a>.getNonOverloadedPointer();</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    <a class="code hl_variable" href="_snow_8h.html#a4123cca1e6cb5c0f7e82b19fc9b7b0d7">TheWeatherSetting</a> = (<a class="code hl_class" href="class_weather_setting.html">WeatherSetting</a>*) ws-&gt;deleteOverrides();</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span> </div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    m_rankPointsToAddAtGameStart = 0;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>}  <span class="comment">// end reset</span></div>
</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span> </div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span><span class="keyword">static</span> <a class="code hl_class" href="class_object.html">Object</a> * placeObjectAtPosition(<a class="code hl_union" href="union_int.html">Int</a> slotNum, <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> objectTemplateName, <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a>&amp; pos, <a class="code hl_class" href="class_player.html">Player</a> *pPlayer,</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>                                                                    <span class="keyword">const</span> <a class="code hl_class" href="class_player_template.html">PlayerTemplate</a> *pTemplate)</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>{</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>    <span class="keyword">const</span> <a class="code hl_class" href="class_thing_template.html">ThingTemplate</a>* btt = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;findTemplate(objectTemplateName);</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span> </div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(btt, (<span class="stringliteral">&quot;TheThingFactory didn&#39;t find a template in placeObjectAtPosition()&quot;</span>) );</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span> </div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    <a class="code hl_class" href="class_object.html">Object</a> *obj = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;newObject( btt, pPlayer-&gt;<a class="code hl_function" href="class_player.html#a0edc41192c6424e9b37abb5c024d9b74">getDefaultTeam</a>() );</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(obj, (<span class="stringliteral">&quot;TheThingFactory didn&#39;t give me a valid Object for player %d&#39;s (%ls) starting building\n&quot;</span>,</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        slotNum, pTemplate-&gt;<a class="code hl_function" href="class_player_template.html#af9ee5b148f14290cdc2d7a17ea176db5">getDisplayName</a>().<a class="code hl_function" href="class_unicode_string.html#ab80e621deccff2aa3abfaebc99c5c170">str</a>()));</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    <span class="keywordflow">if</span> (obj)</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    {</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        obj-&gt;<a class="code hl_function" href="class_thing.html#a93da041338677d5058d9948cb424fb6f">setOrientation</a>(obj-&gt;<a class="code hl_function" href="class_thing.html#a8028ae31000ce547b400838afe6eb335">getTemplate</a>()-&gt;<a class="code hl_function" href="class_thing_template.html#a0198b90dc4417df78d26bcf1da4daa29">getPlacementViewAngle</a>()); </div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        obj-&gt;<a class="code hl_function" href="class_thing.html#a9fcbcf27ec45b3aa4883a03a56663bd9">setPosition</a>( &amp;pos );</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span> </div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>        <span class="comment">//DEBUG_LOG((&quot;Placed a starting building for %s at waypoint %s\n&quot;, playerName.str(), waypointName.str()));</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#a023b97a0c1e8b6ca71beb11b8f091617">CRCDEBUG_LOG</a>((<span class="stringliteral">&quot;Placed an object for %ls at pos (%g,%g,%g)\n&quot;</span>, pPlayer-&gt;<a class="code hl_function" href="class_player.html#af4f86ea6bed3a1a4aec20dee8caf6c88">getPlayerDisplayName</a>().<a class="code hl_function" href="class_unicode_string.html#ab80e621deccff2aa3abfaebc99c5c170">str</a>(),</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>            pos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>, pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a>, pos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a>));</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#a9bf4719cf42eb6c25a094cb7f750e10d">DUMPCOORD3D</a>(&amp;pos);</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span> </div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        <a class="code hl_class" href="class_team.html">Team</a> *team = pPlayer-&gt;<a class="code hl_function" href="class_player.html#a0edc41192c6424e9b37abb5c024d9b74">getDefaultTeam</a>();</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>        <span class="comment">// Now onCreates were called at the constructor.  This magically created</span></div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>        <span class="comment">// thing needs to be considered as Built for Game specific stuff.</span></div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>        <span class="keywordflow">for</span> (<a class="code hl_class" href="class_behavior_module.html">BehaviorModule</a>** m = obj-&gt;<a class="code hl_function" href="class_object.html#ac31c977e6871a6a24c903af3a0210f26">getBehaviorModules</a>(); *m; ++m)</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>        {</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>            <a class="code hl_class" href="class_create_module_interface.html">CreateModuleInterface</a>* create = (*m)-&gt;getCreate();</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>            <span class="keywordflow">if</span> (!create)</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>            create-&gt;<a class="code hl_function" href="class_create_module_interface.html#a87fb59cb29bead86fd61a4a8db938453">onBuildComplete</a>();</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>        }</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span> </div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>        <span class="comment">// Since the team now has members, activate it.</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>        <span class="comment">// srj sez: team should not be null, but could be for ill-formed user maps. so don&#39;t crash.</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>        <span class="keywordflow">if</span> (team)</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            team-&gt;<a class="code hl_function" href="class_team.html#ac6c120cfa0b92e90b9d1c8c48139a0e0">setActive</a>();</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;pathfinder()-&gt;addObjectToPathfindMap(obj);</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        <span class="keywordflow">if</span> (obj-&gt;<a class="code hl_function" href="class_object.html#ad67789da3db49c3827e5a2abf8fe68a0">getAIUpdateInterface</a>() &amp;&amp; !obj-&gt;<a class="code hl_function" href="class_thing.html#a7978985fe2e1e1b1b91bb822f62df5e9">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba6233ebfa55eca2ce51104aa269e7eeff">KINDOF_IMMOBILE</a>)) {</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>            <a class="code hl_define" href="_c_r_c_debug_8h.html#a023b97a0c1e8b6ca71beb11b8f091617">CRCDEBUG_LOG</a>((<span class="stringliteral">&quot;Not immobile - adjusting dest\n&quot;</span>));</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;pathfinder()-&gt;adjustDestination(obj, obj-&gt;<a class="code hl_function" href="class_object.html#ad67789da3db49c3827e5a2abf8fe68a0">getAIUpdateInterface</a>()-&gt;<a class="code hl_function" href="class_a_i_update_interface.html#a9d1bacc674f8a0d6021504f594f8b096">getLocomotorSet</a>(), &amp;pos)) {</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>                <a class="code hl_define" href="_c_r_c_debug_8h.html#a9bf4719cf42eb6c25a094cb7f750e10d">DUMPCOORD3D</a>(&amp;pos);</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>                <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;pathfinder()-&gt;updateGoal(obj, &amp;pos, <a class="code hl_enumvalue" href="_game_type_8h.html#ad3f93f81e65d56ae3f63a604a262a7c5a5dfdb3bdd47dd17758e834c7b7d33b78">LAYER_GROUND</a>);  <span class="comment">// Units always start on the ground for now.  jba.</span></div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>                obj-&gt;<a class="code hl_function" href="class_thing.html#a9fcbcf27ec45b3aa4883a03a56663bd9">setPosition</a>( &amp;pos );</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>            }</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>        }</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    }</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span> </div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="keywordflow">return</span> obj;</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>}</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span> </div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span><span class="keyword">static</span> <span class="keywordtype">void</span> placeNetworkBuildingsForPlayer(<a class="code hl_union" href="union_int.html">Int</a> slotNum, <span class="keyword">const</span> <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *pSlot, <a class="code hl_class" href="class_player.html">Player</a> *pPlayer, <span class="keyword">const</span> <a class="code hl_class" href="class_player_template.html">PlayerTemplate</a> *pTemplate)</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>{</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    <a class="code hl_union" href="union_int.html">Int</a> startPos = pSlot-&gt;<a class="code hl_function" href="class_game_slot.html#a345769e8467aeb9ace50242c5e01a758">getStartPos</a>();</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> waypointName;</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    waypointName.<a class="code hl_function" href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">format</a>(<span class="stringliteral">&quot;Player_%d_Start&quot;</span>, startPos+1); <span class="comment">// start pos waypoints are 1-based</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span> </div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> rallyWaypointName;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    rallyWaypointName.<a class="code hl_function" href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">format</a>(<span class="stringliteral">&quot;Player_%d_Rally&quot;</span>, startPos+1); <span class="comment">// start pos waypoints are 1-based</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span> </div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <a class="code hl_class" href="class_waypoint.html">Waypoint</a> *waypoint = findNamedWaypoint(waypointName);</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <a class="code hl_class" href="class_waypoint.html">Waypoint</a> *rallyWaypoint = findNamedWaypoint(rallyWaypointName);</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(waypoint, (<span class="stringliteral">&quot;Player %d has no starting waypoint (Player_%d_Start)\n&quot;</span>, slotNum, startPos));</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <span class="keywordflow">if</span> (!waypoint)</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span> </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> pos = *waypoint-&gt;<a class="code hl_function" href="class_waypoint.html#a69182fc2ac0a792b330e71407012ff6b">getLocation</a>();</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    pos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> = <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getGroundHeight( pos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>, pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> );</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span> </div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> buildingTemplateName = pTemplate-&gt;<a class="code hl_function" href="class_player_template.html#aa58192adcbb169f23bc6af0ceddcba25">getStartingBuilding</a>();</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span> </div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(!buildingTemplateName.<a class="code hl_function" href="class_ascii_string.html#ae9efb39159f617363aa0acdb6cdecab8">isEmpty</a>(), (<span class="stringliteral">&quot;no starting building type for player %d (playertemplate %ls)\n&quot;</span>,</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        slotNum, pTemplate-&gt;<a class="code hl_function" href="class_player_template.html#af9ee5b148f14290cdc2d7a17ea176db5">getDisplayName</a>().<a class="code hl_function" href="class_unicode_string.html#ab80e621deccff2aa3abfaebc99c5c170">str</a>()));</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    <span class="keywordflow">if</span> (buildingTemplateName.<a class="code hl_function" href="class_ascii_string.html#ae9efb39159f617363aa0acdb6cdecab8">isEmpty</a>())</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span> </div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Placing starting building at waypoint %s\n&quot;</span>, waypointName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>()));</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    <a class="code hl_class" href="class_object.html">Object</a> *conYard = placeObjectAtPosition(slotNum, buildingTemplateName, pos, pPlayer, pTemplate);</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span> </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <span class="keywordflow">if</span> (!conYard)</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span> </div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    pPlayer-&gt;<a class="code hl_function" href="class_player.html#af89ee8c6dbb2904e3cb4c86ea01cfd06">onStructureCreated</a>(<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, conYard);</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    pPlayer-&gt;<a class="code hl_function" href="class_player.html#a88975e3025e7f2cc48539b8ede59f556">onStructureConstructionComplete</a>(<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, conYard, <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span> </div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    <span class="comment">//pos.x -= conYard-&gt;getGeometryInfo().getBoundingSphereRadius()/2;</span></div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> -= conYard-&gt;<a class="code hl_function" href="class_object.html#a479266462a8ceb0be975d351f259bfa4">getGeometryInfo</a>().<a class="code hl_function" href="class_geometry_info.html#a82ed0ab3866c6fac48a8a8251470a4ab">getBoundingSphereRadius</a>()/2;</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    pos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> = <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getGroundHeight( pos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>, pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> );</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span> </div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <span class="keywordflow">if</span> (rallyWaypoint)</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    {</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        pos = *rallyWaypoint-&gt;<a class="code hl_function" href="class_waypoint.html#a69182fc2ac0a792b330e71407012ff6b">getLocation</a>();</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>        pos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> = <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getGroundHeight( pos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>, pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> );</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    }</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span> </div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>    <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> i=0; i&lt;<a class="code hl_define" href="_player_template_8h.html#a5805755846028c077129d86a215e711f">MAX_MP_STARTING_UNITS</a>; ++i)</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    {</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>        <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> objName = pTemplate-&gt;<a class="code hl_function" href="class_player_template.html#a75fe39cbc6827fcc63b288f91ada837d">getStartingUnit</a>(i);</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        <span class="keywordflow">if</span> (objName.<a class="code hl_function" href="class_ascii_string.html#a1fc6bac368662343097a55184c7cbf75">isNotEmpty</a>())</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>        {</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>            <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> objPos = pos;</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>            <a class="code hl_struct" href="struct_find_position_options.html">FindPositionOptions</a> options;</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>            options.<a class="code hl_variable" href="struct_find_position_options.html#ac99bca759f2d16c3aa141891e682cfb2">minRadius</a> = conYard-&gt;<a class="code hl_function" href="class_object.html#a479266462a8ceb0be975d351f259bfa4">getGeometryInfo</a>().<a class="code hl_function" href="class_geometry_info.html#a82ed0ab3866c6fac48a8a8251470a4ab">getBoundingSphereRadius</a>() * 0.7f;</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>            options.<a class="code hl_variable" href="struct_find_position_options.html#a156fa438782b4e067b6784835cc1f909">maxRadius</a> = conYard-&gt;<a class="code hl_function" href="class_object.html#a479266462a8ceb0be975d351f259bfa4">getGeometryInfo</a>().<a class="code hl_function" href="class_geometry_info.html#a82ed0ab3866c6fac48a8a8251470a4ab">getBoundingSphereRadius</a>() * 1.3f;</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Placing starting object %d (%s)\n&quot;</span>, i, objName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>()));</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>            <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;update();</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>            <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> foundPos = <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;findPositionAround(&amp;pos, &amp;options, &amp;objPos);</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>            <span class="keywordflow">if</span> (foundPos)</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>            {</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>                <a class="code hl_class" href="class_object.html">Object</a> *unit = placeObjectAtPosition(slotNum, objName, objPos, pPlayer, pTemplate);</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>                <span class="keywordflow">if</span> (unit) {</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>                    pPlayer-&gt;<a class="code hl_function" href="class_player.html#ae0fd3a0c125a79124fbec71815c8fba4">onUnitCreated</a>(<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, unit);</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>                }</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>            }</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>            {</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Could not find position\n&quot;</span>));</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>            }</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>        }</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    }</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>}</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span> </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span><a class="code hl_class" href="class_load_screen.html">LoadScreen</a> *GameLogic::getLoadScreen( <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> loadingSaveGame )</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>{</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <span class="keywordflow">switch</span> (m_gameMode) </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    {</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaa68174262e15b5ba918b03bb8b56b04f">GAME_SHELL</a>:</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>        <span class="keywordflow">return</span> NEW ShellGameLoadScreen;</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>        <span class="keywordflow">break</span>;                         </div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaee1a5a47561a06e03984ff31602e2529">GAME_SINGLE_PLAYER</a>:</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    {</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>        Campaign* currentCampaign = <a class="code hl_variable" href="_campaign_manager_8h.html#afd7ce7f7a3f20ff00212a798910d50db">TheCampaignManager</a>-&gt;<a class="code hl_function" href="class_campaign_manager.html#a28868fa91221a4074bc1ce4e95eb6bc7">getCurrentCampaign</a>();</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>        <span class="keywordflow">if</span>( currentCampaign &amp;&amp; loadingSaveGame == <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> )</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>        {</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>            <span class="keywordflow">if</span> ( currentCampaign-&gt;<a class="code hl_variable" href="class_campaign.html#a90093c60335f4b154635c190cf72b737">m_isChallengeCampaign</a>) </div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>            {</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>                <span class="keywordflow">return</span> NEW ChallengeLoadScreen;</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>            }</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>            <span class="keywordflow">return</span> NEW SinglePlayerLoadScreen;</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        }</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>            <span class="keywordflow">return</span> NEW ShellGameLoadScreen;</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    }</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa6cb49fab20f61c2ca2931eb2ff138178">GAME_SKIRMISH</a>:</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>        <span class="keywordflow">return</span> NEW MultiPlayerLoadScreen;</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa79dfaaa99c696274de2cc199568ac473">GAME_LAN</a>:</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        <span class="keywordflow">return</span> NEW MultiPlayerLoadScreen;</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aac6fc8943a041e5db95cc3e770e862470">GAME_REPLAY</a>:</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>        <span class="keywordflow">return</span> NEW ShellGameLoadScreen;</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa56de6b891eaab5ce88f6ca0d48e6750c">GAME_INTERNET</a>:</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        <span class="keywordflow">return</span> NEW GameSpyLoadScreen;</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa32b74fc29edec4aaf73e05477d1f5602">GAME_NONE</a>:</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>    }</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span> </div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>}</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span> </div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen00664" data-start="{" data-end="}">
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a10e76c8febfd93e5cc2ae4258697e440">  664</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="_game_logic_8cpp.html#a10e76c8febfd93e5cc2ae4258697e440">handleNameChange</a>( <a class="code hl_class" href="class_map_object.html">MapObject</a> *mapObj )</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>{</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    <span class="keywordflow">if</span>( !mapObj-&gt;<a class="code hl_function" href="class_map_object.html#a93586c6d08a76ab16102a72199730ff6">getName</a>().<a class="code hl_function" href="class_ascii_string.html#a5dd96b28d1e8a60b0000691f0c845c70">compare</a>( <span class="stringliteral">&quot;AmericaTankLeopard&quot;</span> ) )</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    {</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>        mapObj-&gt;<a class="code hl_function" href="class_map_object.html#a20f6a62e3ac2e6370afdde01255d7771">setName</a>( <span class="stringliteral">&quot;AmericaTankCrusader&quot;</span> );</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>        <span class="keyword">const</span> <a class="code hl_class" href="class_thing_template.html">ThingTemplate</a> *thingTemplate = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;findTemplate( mapObj-&gt;<a class="code hl_function" href="class_map_object.html#a93586c6d08a76ab16102a72199730ff6">getName</a>() );</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>        mapObj-&gt;<a class="code hl_function" href="class_map_object.html#a9c57ed617e184687a50bf21eed9e4f8b">setThingTemplate</a>( thingTemplate );</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    }</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    <span class="keywordflow">if</span>( !mapObj-&gt;<a class="code hl_function" href="class_map_object.html#a93586c6d08a76ab16102a72199730ff6">getName</a>().<a class="code hl_function" href="class_ascii_string.html#a5dd96b28d1e8a60b0000691f0c845c70">compare</a>( <span class="stringliteral">&quot;AmericaVehicleHumVee&quot;</span> ) )</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    {</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        mapObj-&gt;<a class="code hl_function" href="class_map_object.html#a20f6a62e3ac2e6370afdde01255d7771">setName</a>( <span class="stringliteral">&quot;AmericaVehicleHumvee&quot;</span> );</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>        <span class="keyword">const</span> <a class="code hl_class" href="class_thing_template.html">ThingTemplate</a> *thingTemplate = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;findTemplate( mapObj-&gt;<a class="code hl_function" href="class_map_object.html#a93586c6d08a76ab16102a72199730ff6">getName</a>() );</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        mapObj-&gt;<a class="code hl_function" href="class_map_object.html#a9c57ed617e184687a50bf21eed9e4f8b">setThingTemplate</a>( thingTemplate );</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    }</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>}</div>
</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span> </div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span><span class="keyword">static</span> <span class="keywordtype">void</span> checkForDuplicateColors( <a class="code hl_class" href="class_game_info.html">GameInfo</a> *game )</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>{</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    <span class="keywordflow">if</span>(!game)</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    <a class="code hl_union" href="union_int.html">Int</a> i;</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span> </div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    <span class="comment">// In QuickMatch, people can possibly set preferred color and house.</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>    <span class="comment">// Here, we check for collisions in the color choice.  If there is a</span></div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    <span class="comment">// collision, the first player will get the color, and the other(s)</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    <span class="comment">// will map to random.</span></div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    <span class="keywordflow">for</span> (i=MAX_SLOTS-1; i&gt;=0; --i)</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>    {</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>        <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(i);</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span> </div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>        <span class="keywordflow">if</span> (!slot || !slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>())</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span> </div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>        <a class="code hl_union" href="union_int.html">Int</a> colorIdx = slot-&gt;<a class="code hl_function" href="class_game_slot.html#affc251c6fd75f08adbafa455d7d78c1f">getColor</a>();</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>        <span class="keywordflow">if</span> (colorIdx &lt; 0 || colorIdx &gt;= <a class="code hl_variable" href="_multiplayer_settings_8h.html#afa7bab8d42a3c23accb7fa0f172ea106">TheMultiplayerSettings</a>-&gt;getNumColors())</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>            <span class="keywordflow">continue</span>; <span class="comment">// don&#39;t need to fix up random ones</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span> </div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>        slot-&gt;<a class="code hl_function" href="class_game_slot.html#a80adc49e687dd28bf330b881247cd7fb">setColor</a>(-1);</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>        <span class="keywordflow">if</span> (!game-&gt;<a class="code hl_function" href="class_game_info.html#a4d94f11e0772377d42687d84503becc8">isColorTaken</a>(colorIdx))</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        {</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>            <span class="comment">// we were the only one using the color.  it is safe to keep using it.</span></div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>            slot-&gt;<a class="code hl_function" href="class_game_slot.html#a80adc49e687dd28bf330b881247cd7fb">setColor</a>(colorIdx);</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>        }</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (colorIdx &gt;= 0)</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>        {</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Clearing color %d for player %d\n&quot;</span>, colorIdx, i));</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>        }</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    }</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>}</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span> </div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span><span class="keyword">static</span> <span class="keywordtype">void</span> populateRandomSideAndColor( <a class="code hl_class" href="class_game_info.html">GameInfo</a> *game )</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>{</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    <span class="keywordflow">if</span>(!game)</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>    <a class="code hl_union" href="union_int.html">Int</a> i;</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span><span class="preprocessor">#define MORE_RANDOM</span></div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span><span class="preprocessor">#ifdef MORE_RANDOM</span></div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>    std::vector&lt;Int&gt; startSlots;</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;getPlayerTemplateCount(); ++i)</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    {</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>        <span class="keyword">const</span> <a class="code hl_class" href="class_player_template.html">PlayerTemplate</a>* ptTest = <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;getNthPlayerTemplate(i);</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>        <span class="keywordflow">if</span> (!ptTest || ptTest-&gt;<a class="code hl_function" href="class_player_template.html#aa58192adcbb169f23bc6af0ceddcba25">getStartingBuilding</a>().<a class="code hl_function" href="class_ascii_string.html#ae9efb39159f617363aa0acdb6cdecab8">isEmpty</a>())</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span> </div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>        <span class="keywordflow">if</span> ( game-&gt;<a class="code hl_function" href="class_game_info.html#ae98082cf410e55274a4879d1e4b92387">oldFactionsOnly</a>() &amp;&amp; !ptTest-&gt;<a class="code hl_function" href="class_player_template.html#a5f8632f1c6458b5de88e5f6af3ccfa91">isOldFaction</a>() )</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span> </div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        <span class="comment">// Prevent from selecting the disabled Generals.</span></div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>        <span class="comment">// This is also enforced at GUI setup (GUIUtil.cpp).</span></div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>        <span class="comment">// @todo: unlock these when something rad happens</span></div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>        <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> disallowLockedGenerals = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>        <span class="keyword">const</span> <a class="code hl_class" href="class_general_persona.html">GeneralPersona</a> *general = <a class="code hl_variable" href="_challenge_generals_8h.html#a8af75611f9a13ced88b3dc2f8baa4ebe">TheChallengeGenerals</a>-&gt;getGeneralByTemplateName(ptTest-&gt;<a class="code hl_function" href="class_player_template.html#abd70efc4be868d8ac02493f54b46987f">getName</a>());</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>        <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> startsLocked = general ? !general-&gt;<a class="code hl_function" href="class_general_persona.html#a87a510feeeb6446ababb9bdbd1629568">isStartingEnabled</a>() : <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>        <span class="keywordflow">if</span> (disallowLockedGenerals &amp;&amp; startsLocked)</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span> </div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>        startSlots.push_back(i);</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    }</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span> </div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>    <span class="keywordflow">for</span> (i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>    {</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>        <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(i);</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span> </div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>        <span class="keywordflow">if</span> (!slot || !slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>())</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span> </div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        <span class="comment">// clean up random factions</span></div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>        <a class="code hl_union" href="union_int.html">Int</a> playerTemplateIdx = slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>();</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Player %d has playerTemplate index %d\n&quot;</span>, i, playerTemplateIdx));</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>        <span class="keywordflow">while</span> (playerTemplateIdx != <a class="code hl_enumvalue" href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3">PLAYERTEMPLATE_OBSERVER</a> &amp;&amp; (playerTemplateIdx &lt; 0 || playerTemplateIdx &gt;= <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;getPlayerTemplateCount()))</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>        {</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(playerTemplateIdx == <a class="code hl_enumvalue" href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a09547da2ebf73f1fd78b99b47098cd75">PLAYERTEMPLATE_RANDOM</a>, (<span class="stringliteral">&quot;Non-random bad playerTemplate %d in slot %d\n&quot;</span>, playerTemplateIdx, i));</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span><span class="preprocessor">#ifdef MORE_RANDOM</span></div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>            <span class="comment">// our RNG is basically shit -- horribly nonrandom at the start of the sequence.</span></div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>            <span class="comment">// get a few values at random to get rid of the dreck.</span></div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>            <span class="comment">// there&#39;s no mathematical basis for this, but empirically, it helps a lot.</span></div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>            <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> silly = <a class="code hl_function" href="_random_value_8h.html#ad5bdbd358527333bbfbe271b645ceef2">GetGameLogicRandomSeed</a>() % 7;</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>            <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> poo = 0; poo &lt; silly; ++poo) </div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>            {</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>                <a class="code hl_define" href="_logic_random_value_8h.html#a08fef680b145104e4eba32092fe8809b">GameLogicRandomValue</a>(0, 1); <span class="comment">// ignore result</span></div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>            }</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>            <a class="code hl_union" href="union_int.html">Int</a> idxIdx = <a class="code hl_define" href="_logic_random_value_8h.html#a08fef680b145104e4eba32092fe8809b">GameLogicRandomValue</a>(0, 1000) % startSlots.size();</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>            playerTemplateIdx = startSlots[idxIdx];</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>            playerTemplateIdx = <a class="code hl_define" href="_logic_random_value_8h.html#a08fef680b145104e4eba32092fe8809b">GameLogicRandomValue</a>(0, <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;getPlayerTemplateCount()-1);</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>            <span class="keyword">const</span> <a class="code hl_class" href="class_player_template.html">PlayerTemplate</a>* pt = <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;getNthPlayerTemplate(playerTemplateIdx);</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>            <span class="keywordflow">if</span> (!pt || pt-&gt;<a class="code hl_function" href="class_player_template.html#aa58192adcbb169f23bc6af0ceddcba25">getStartingBuilding</a>().<a class="code hl_function" href="class_ascii_string.html#ae9efb39159f617363aa0acdb6cdecab8">isEmpty</a>())</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>            {</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span><span class="preprocessor">#ifdef MORE_RANDOM</span></div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>((<span class="stringliteral">&quot;should not be possible&quot;</span>));</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>                playerTemplateIdx = -1; <span class="comment">// only pick playable factions</span></div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>            }</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>            {</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Setting playerTemplateIdx %d to %d\n&quot;</span>, i, playerTemplateIdx));</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>                slot-&gt;<a class="code hl_function" href="class_game_slot.html#a33de4f6783077e7b376774a01c1afa86">setPlayerTemplate</a>(playerTemplateIdx);</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>            }</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>        }</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span> </div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>        <a class="code hl_union" href="union_int.html">Int</a> colorIdx = slot-&gt;<a class="code hl_function" href="class_game_slot.html#affc251c6fd75f08adbafa455d7d78c1f">getColor</a>();</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>        <span class="keywordflow">if</span> (colorIdx &lt; 0 || colorIdx &gt;= <a class="code hl_variable" href="_multiplayer_settings_8h.html#afa7bab8d42a3c23accb7fa0f172ea106">TheMultiplayerSettings</a>-&gt;getNumColors())</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>        {</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(colorIdx == -1, (<span class="stringliteral">&quot;Non-random bad color %d in slot %d\n&quot;</span>, colorIdx, i));</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>            <span class="keywordflow">while</span> (colorIdx == -1)</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>            {</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>                colorIdx = <a class="code hl_define" href="_logic_random_value_8h.html#a08fef680b145104e4eba32092fe8809b">GameLogicRandomValue</a>(0, <a class="code hl_variable" href="_multiplayer_settings_8h.html#afa7bab8d42a3c23accb7fa0f172ea106">TheMultiplayerSettings</a>-&gt;getNumColors()-1);</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>                <span class="keywordflow">if</span> (game-&gt;<a class="code hl_function" href="class_game_info.html#a4d94f11e0772377d42687d84503becc8">isColorTaken</a>(colorIdx))</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>                    colorIdx = -1;</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>            }</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Setting color %d to %d\n&quot;</span>, i, colorIdx));</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>            slot-&gt;<a class="code hl_function" href="class_game_slot.html#a80adc49e687dd28bf330b881247cd7fb">setColor</a>(colorIdx);</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>        }</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    }</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>}</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span> </div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span><span class="keyword">static</span> <span class="keywordtype">void</span> populateRandomStartPosition( <a class="code hl_class" href="class_game_info.html">GameInfo</a> *game )</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>{</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>    <span class="keywordflow">if</span>(!game)</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span> </div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>    <a class="code hl_union" href="union_int.html">Int</a> i;</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>    <a class="code hl_union" href="union_int.html">Int</a> numPlayers = MAX_SLOTS;</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    <span class="keyword">const</span> <a class="code hl_class" href="class_map_meta_data.html">MapMetaData</a> *md = <a class="code hl_variable" href="_map_util_8h.html#a2f01cf10092dbdc0eeafefe3ea67cb18">TheMapCache</a>-&gt;findMap( game-&gt;<a class="code hl_function" href="class_game_info.html#abdca6b2a03f70690ced38035cfe93ca5">getMap</a>() );</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>  <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>( md , (<span class="stringliteral">&quot;Could not find map %s in the mapcache&quot;</span>, game-&gt;<a class="code hl_function" href="class_game_info.html#abdca6b2a03f70690ced38035cfe93ca5">getMap</a>().<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>()));</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>    <span class="keywordflow">if</span> (md)</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>        numPlayers = md-&gt;<a class="code hl_variable" href="class_map_meta_data.html#a0f980135518636fcfde7a2e06bd25548">m_numPlayers</a>;</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span> </div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>    <span class="comment">// generate a map of start spot distances</span></div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>    <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> startSpotDistance[MAX_SLOTS][MAX_SLOTS];</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>    <span class="keywordflow">for</span> (i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>    {</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> j=0; j&lt;MAX_SLOTS; ++j)</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>        {</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>            <span class="keywordflow">if</span> (i != j &amp;&amp; (i&lt;numPlayers &amp;&amp; j&lt;numPlayers))</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>            {</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>                <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> w1, w2;</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>                w1.<a class="code hl_function" href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">format</a>(<span class="stringliteral">&quot;Player_%d_Start&quot;</span>, i+1);</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>                w2.<a class="code hl_function" href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">format</a>(<span class="stringliteral">&quot;Player_%d_Start&quot;</span>, j+1);</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>                WaypointMap::const_iterator c1 = md-&gt;<a class="code hl_variable" href="class_map_meta_data.html#a966662364b537af4ff412219bcb1106a">m_waypoints</a>.find(w1);</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>                WaypointMap::const_iterator c2 = md-&gt;<a class="code hl_variable" href="class_map_meta_data.html#a966662364b537af4ff412219bcb1106a">m_waypoints</a>.find(w2);</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>                <span class="keywordflow">if</span> (c1 == md-&gt;<a class="code hl_variable" href="class_map_meta_data.html#a966662364b537af4ff412219bcb1106a">m_waypoints</a>.end() || c2 == md-&gt;<a class="code hl_variable" href="class_map_meta_data.html#a966662364b537af4ff412219bcb1106a">m_waypoints</a>.end())</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>                {</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>                    <span class="comment">// couldn&#39;t find a waypoint.  must be kinda far away.</span></div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>                    startSpotDistance[i][j] = 1000000.0f;</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>                }</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>                {</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>                    <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> p1 = c1-&gt;second;</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>                    <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> p2 = c2-&gt;second;</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>                    startSpotDistance[i][j] = sqrt( <a class="code hl_function" href="_base_type_8h.html#a14225aed20ec8648b7e87b04aa650d04">sqr</a>(p1.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>-p2.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>) + <a class="code hl_function" href="_base_type_8h.html#a14225aed20ec8648b7e87b04aa650d04">sqr</a>(p1.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a>-p2.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a>) );</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>                }</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>            }</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>            {</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>                startSpotDistance[i][j] = 0.0f; <span class="comment">// not gonna need this</span></div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>            }</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>        }</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    }</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span> </div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    <span class="comment">// see if a start spot has been chosen at all yet</span></div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> hasStartSpotBeenPicked = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> taken[MAX_SLOTS];</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    <span class="keywordflow">for</span> (i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>    {</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>        taken[i] = (i&lt;numPlayers)?<a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>:<a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    }</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <span class="keywordflow">for</span> (i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    {</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>        <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(i);</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span> </div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>        <span class="keywordflow">if</span> (!slot || !slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>() || slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>() == <a class="code hl_enumvalue" href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3">PLAYERTEMPLATE_OBSERVER</a>)</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span> </div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>        <a class="code hl_union" href="union_int.html">Int</a> posIdx = slot-&gt;<a class="code hl_function" href="class_game_slot.html#a345769e8467aeb9ace50242c5e01a758">getStartPos</a>();</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>        <span class="keywordflow">if</span> (posIdx &gt;= 0 || posIdx &gt;= numPlayers)</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>        {</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>            hasStartSpotBeenPicked = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>            taken[posIdx] = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>        }</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>    }</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span> </div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span><span class="preprocessor">#if 0  </span><span class="comment">//GS  The old way puts everyone as far apart as possible.</span></div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>    <span class="comment">// now pick non-observer spots</span></div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    <span class="keywordflow">for</span> (i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>    {</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(i);</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span> </div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>        <span class="keywordflow">if</span> (!slot || !slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>() || slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>() == <a class="code hl_enumvalue" href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3">PLAYERTEMPLATE_OBSERVER</a>)</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span> </div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>        <span class="comment">// clean up random start spots</span></div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        <a class="code hl_union" href="union_int.html">Int</a> posIdx = slot-&gt;<a class="code hl_function" href="class_game_slot.html#a345769e8467aeb9ace50242c5e01a758">getStartPos</a>();</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>        <span class="keywordflow">if</span> (posIdx &lt; 0 || posIdx &gt;= numPlayers)</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        {</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(posIdx == -1, (<span class="stringliteral">&quot;Non-random bad start position %d in slot %d\n&quot;</span>, posIdx, i));</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>            <span class="keywordflow">if</span> (hasStartSpotBeenPicked)</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>            {</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>                <span class="comment">// pick the farthest spot away</span></div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>                <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> farthestDistance = 0.0f;</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>                <a class="code hl_union" href="union_int.html">Int</a> farthestIndex = -1;</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>                <span class="keywordflow">for</span> (posIdx = 0; posIdx &lt; numPlayers; ++posIdx)</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>                {</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>                    <span class="keywordflow">if</span> (!taken[posIdx])</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>                    {</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>                        <span class="keywordflow">if</span> (farthestIndex &lt; 0)</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>                        {</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>                            farthestIndex = posIdx; <span class="comment">// take this one as best if none else</span></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>                            <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> n=0; n&lt;numPlayers; ++n)</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>                            {</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>                                <span class="keywordflow">if</span> (taken[n] &amp;&amp; n != posIdx)</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>                                    farthestDistance += startSpotDistance[posIdx][n];</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>                            }</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>                        }</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>                        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>                        {</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>                            <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> dist = 0.0f;</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>                            <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> n=0; n&lt;numPlayers; ++n)</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>                            {</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>                                <span class="keywordflow">if</span> (taken[n] &amp;&amp; n != posIdx)</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>                                    dist += startSpotDistance[posIdx][n];</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>                            }</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>                            <span class="keywordflow">if</span> (dist &gt; farthestDistance)</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>                            {</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>                                farthestDistance = dist;</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>                                farthestIndex = posIdx;</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>                            }</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>                        }</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>                    }</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>                }</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(farthestIndex &gt;= 0, (<span class="stringliteral">&quot;Couldn&#39;t find a farthest spot!\n&quot;</span>));</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>                slot-&gt;<a class="code hl_function" href="class_game_slot.html#a02e19a62360f323af3b58b8f1febc1df">setStartPos</a>(farthestIndex);</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>                taken[farthestIndex] = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>            }</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>            {</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>                <span class="comment">// We&#39;re the first real spot.  Pick randomly.</span></div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>                <span class="comment">// This while loop shouldn&#39;t be neccessary, since we&#39;re first.  Why not, though?</span></div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>                <span class="keywordflow">while</span> (posIdx == -1)</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>                {</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>                    posIdx = <a class="code hl_define" href="_logic_random_value_8h.html#a08fef680b145104e4eba32092fe8809b">GameLogicRandomValue</a>(0, numPlayers-1);</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>                    <span class="keywordflow">if</span> (game-&gt;<a class="code hl_function" href="class_game_info.html#aff38b24c5f14fb61daa1578ac3c6f681">isStartPositionTaken</a>(posIdx))</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>                        posIdx = -1;</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>                }</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Setting start position %d to %d (random choice)\n&quot;</span>, i, posIdx));</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>                slot-&gt;<a class="code hl_function" href="class_game_slot.html#a02e19a62360f323af3b58b8f1febc1df">setStartPos</a>(posIdx);</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>                taken[posIdx] = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>                hasStartSpotBeenPicked = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>            }</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>        }</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>    }</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span><span class="preprocessor">#else  </span><span class="comment">//GS  The new way puts teammates next to each other.</span></div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>    <a class="code hl_union" href="union_int.html">Int</a> teamPosIdx[MAX_SLOTS];</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>    <span class="keywordflow">for</span> (i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>        teamPosIdx[i] = -1;  <span class="comment">//team has no starting position yet</span></div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span> </div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>    <span class="comment">// now pick non-observer spots</span></div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>    <span class="keywordflow">for</span> (i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>    {</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>        <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(i);</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span> </div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>        <span class="keywordflow">if</span> (!slot || !slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>() || slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>() == <a class="code hl_enumvalue" href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3">PLAYERTEMPLATE_OBSERVER</a>)</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>            <span class="keywordflow">continue</span>;  <span class="comment">//slot not used</span></div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span> </div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        <a class="code hl_union" href="union_int.html">Int</a> posIdx = slot-&gt;<a class="code hl_function" href="class_game_slot.html#a345769e8467aeb9ace50242c5e01a758">getStartPos</a>();</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>        <span class="keywordflow">if</span> (posIdx &gt;= 0  &amp;&amp;  posIdx &lt; numPlayers)</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>            <span class="keywordflow">continue</span>;  <span class="comment">//position already assigned</span></div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(posIdx == -1, (<span class="stringliteral">&quot;Non-random bad start position %d in slot %d\n&quot;</span>, posIdx, i));</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span> </div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>        <span class="comment">//choose a starting position</span></div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>        <a class="code hl_union" href="union_int.html">Int</a> team = slot-&gt;<a class="code hl_function" href="class_game_slot.html#ae34ae3ab00e825e289ccf0d18fd49625">getTeamNumber</a>();</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>        <span class="keywordflow">if</span>( !hasStartSpotBeenPicked )</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>        {   <span class="comment">// We&#39;re the first real spot.  Pick randomly.</span></div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>            <span class="keywordflow">while</span> (posIdx == -1)</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>            {   <span class="comment">// This while loop shouldn&#39;t be neccessary, since we&#39;re first.  Why not, though?</span></div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                posIdx = <a class="code hl_define" href="_logic_random_value_8h.html#a08fef680b145104e4eba32092fe8809b">GameLogicRandomValue</a>(0, numPlayers-1);</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>                <span class="keywordflow">if</span> (game-&gt;<a class="code hl_function" href="class_game_info.html#aff38b24c5f14fb61daa1578ac3c6f681">isStartPositionTaken</a>(posIdx))</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>                    posIdx = -1;</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>            }</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Setting start position %d to %d (random choice)\n&quot;</span>, i, posIdx));</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>            hasStartSpotBeenPicked = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>            slot-&gt;<a class="code hl_function" href="class_game_slot.html#a02e19a62360f323af3b58b8f1febc1df">setStartPos</a>(posIdx);</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>            taken[posIdx] = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>            <span class="keywordflow">if</span>( team &gt; -1 )</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>                teamPosIdx[team] = posIdx;  <span class="comment">//remember where this team is</span></div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>        } <span class="keywordflow">else</span></div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>        {   <span class="comment">//pick teams far apart, team members close together</span></div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>            <span class="keywordflow">if</span>( team &lt; 0  ||  teamPosIdx[ team ] == -1 )  <span class="comment">//if team None or team not yet placed</span></div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>            {   <span class="comment">//pick position furthest from all other teams</span></div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> farthestDistance = 0.0f;</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>                <a class="code hl_union" href="union_int.html">Int</a> farthestIndex = -1;</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>                <span class="keywordflow">for</span> (posIdx = 0; posIdx &lt; numPlayers; ++posIdx)</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>                {</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>                    <span class="keywordflow">if</span> (taken[posIdx])</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>                        <span class="keywordflow">continue</span>;  <span class="comment">//skip occupied positions</span></div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span> </div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>                    <span class="keywordflow">if</span> (farthestIndex &lt; 0)</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>                    {   <span class="comment">//take this one as best if none else</span></div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>                        farthestIndex = posIdx;</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>                        <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> n=0; n&lt;numPlayers; ++n)</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>                        {</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>                            <span class="keywordflow">if</span> (taken[n] &amp;&amp; n != posIdx)</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>                                farthestDistance += startSpotDistance[posIdx][n];</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>                        }</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>                    }</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>                    {   <span class="comment">//find empty position furthest from all taken positions</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>                        <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> dist = 0.0f;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>                        <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> n=0; n&lt;numPlayers; ++n)</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>                        {</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>                            <span class="keywordflow">if</span> (taken[n] &amp;&amp; n != posIdx)</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>                                dist += startSpotDistance[posIdx][n];</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>                        }</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>                        <span class="keywordflow">if</span> (dist &gt; farthestDistance)</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>                        {</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>                            farthestDistance = dist;</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>                            farthestIndex = posIdx;</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>                        }</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>                    }</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>                } <span class="comment">//for posInx</span></div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span> </div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(farthestIndex &gt;= 0, (<span class="stringliteral">&quot;Couldn&#39;t find a farthest spot!\n&quot;</span>));</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>                slot-&gt;<a class="code hl_function" href="class_game_slot.html#a02e19a62360f323af3b58b8f1febc1df">setStartPos</a>(farthestIndex);</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>                taken[farthestIndex] = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>                <span class="keywordflow">if</span>( team &gt; -1 )</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>                    teamPosIdx[team] = farthestIndex;  <span class="comment">//remember where this team is</span></div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>            } <span class="comment">//pick farthest</span></div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>            <span class="keywordflow">else</span>  <span class="comment">//team already has a starting position</span></div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>            {   <span class="comment">//pick position closest to team</span></div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>                <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> closestDist = FLT_MAX;</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>                <a class="code hl_union" href="union_int.html">Int</a>  closestIdx = 0;</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>                <span class="keywordflow">for</span>( <a class="code hl_union" href="union_int.html">Int</a> n=0;  n &lt; numPlayers;  ++n )</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>                {</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>                    <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> dist = startSpotDistance[ teamPosIdx[team] ][n];</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>                    <span class="keywordflow">if</span>( !taken[n]  &amp;&amp;  dist &lt; closestDist )</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>                    {   <span class="comment">//found a better match</span></div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>                        closestDist = dist;</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>                        closestIdx = n;</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>                    }</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>                } <span class="comment">//for n</span></div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>( closestDist &lt; FLT_MAX, (<span class="stringliteral">&quot;Couldn&#39;t find a closest starting positon!\n&quot;</span>));</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>                slot-&gt;<a class="code hl_function" href="class_game_slot.html#a02e19a62360f323af3b58b8f1febc1df">setStartPos</a>(closestIdx);</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>                taken[closestIdx] = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>            }</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>        }</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    } <span class="comment">//for i</span></div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span><span class="preprocessor">#endif 0</span></div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span> </div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>    <span class="comment">// now go back &amp; assign observer spots</span></div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    <a class="code hl_union" href="union_int.html">Int</a> numPlayersInGame = 0;</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>    <span class="keywordflow">for</span> (i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>    {</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        <span class="keyword">const</span> <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2a6e7c2ab46179fd86cb5e89c1ef44c2">getConstSlot</a>(i);</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>        <span class="keywordflow">if</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>() &amp;&amp; slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>() != <a class="code hl_enumvalue" href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3">PLAYERTEMPLATE_OBSERVER</a>)</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>            ++numPlayersInGame;</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>    }</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>    <span class="keywordflow">for</span> (i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>    {</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>        <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(i);</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span> </div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>        <span class="keywordflow">if</span> (!slot || !slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>())</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span> </div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        <span class="keywordflow">if</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>() != <a class="code hl_enumvalue" href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3">PLAYERTEMPLATE_OBSERVER</a>)</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span> </div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>        <span class="comment">// clean up random start spots</span></div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>        <a class="code hl_union" href="union_int.html">Int</a> posIdx = -1;</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>        <span class="keywordflow">if</span> (numPlayersInGame == 0)</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>            posIdx = 0;</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>        <span class="keywordflow">while</span> (posIdx == -1)</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>        {</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>            posIdx = <a class="code hl_define" href="_logic_random_value_8h.html#a08fef680b145104e4eba32092fe8809b">GameLogicRandomValue</a>(0, numPlayers-1);</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>            <span class="keywordflow">if</span> (!game-&gt;<a class="code hl_function" href="class_game_info.html#aff38b24c5f14fb61daa1578ac3c6f681">isStartPositionTaken</a>(posIdx))</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>                posIdx = -1;</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>        }</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Setting observer start position %d to %d\n&quot;</span>, i, posIdx));</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>        slot-&gt;<a class="code hl_function" href="class_game_slot.html#a02e19a62360f323af3b58b8f1febc1df">setStartPos</a>(posIdx);</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>    }</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>}</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span> </div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen01077" data-start="{" data-end="}">
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"><a class="line" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c"> 1077</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">GameLogic::updateLoadProgress</a>( <a class="code hl_union" href="union_int.html">Int</a> progress )</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>{</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>    </div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>    <span class="keywordflow">if</span>( m_loadScreen )</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>        m_loadScreen-&gt;update( progress );</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span> </div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>}  <span class="comment">// end updateLoadProgress</span></div>
</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span> </div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen01088" data-start="{" data-end="}">
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"><a class="line" href="class_game_logic.html#a3f7618eb22e8b5ad02b26ea3e2c10b5c"> 1088</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a3f7618eb22e8b5ad02b26ea3e2c10b5c">GameLogic::deleteLoadScreen</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>{</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span> </div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>    <span class="keywordflow">if</span>( m_loadScreen )</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>    {</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span> </div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>        <span class="keyword">delete</span> m_loadScreen;</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        m_loadScreen = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span> </div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>    }  <span class="comment">// end if</span></div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span> </div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>}  <span class="comment">// end deleteLoadScreen</span></div>
</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span> </div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen01105" data-start="{" data-end="}">
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"><a class="line" href="class_game_logic.html#a21afe87aa4d7194faf958982a93f77d8"> 1105</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a21afe87aa4d7194faf958982a93f77d8">GameLogic::startNewGame</a>( <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> loadingSaveGame )</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>{</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span> </div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span><span class="preprocessor">    #ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>    __int64 startTime64;</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>    __int64 endTime64,freq64;</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>    GetPrecisionTimerTicksPerSec(&amp;freq64);</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>    <a class="code hl_function" href="timing_test_8cpp.html#afb66d20624c8efed5b7aa8f8287a096f">GetPrecisionTimer</a>(&amp;startTime64);</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span><span class="preprocessor">    #endif</span></div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span> </div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <a class="code hl_function" href="class_game_logic.html#ad9e803410ebd9db6df8da7c3dd27a1de">setLoadingMap</a>( <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span> </div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>    <span class="keywordflow">if</span>( loadingSaveGame == <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> )</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>    {</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span> </div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>        <span class="comment">// record pristine map name when we&#39;re loading from the map (not a save game)</span></div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>        <a class="code hl_variable" href="_game_state_8h.html#a20058921fe5602a8f70b082e98b2aae2">TheGameState</a>-&gt;setPristineMapName( <a class="code hl_define" href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a>-&gt;m_mapName );</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span> </div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>        <span class="comment">//</span></div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>        <span class="comment">// sanity, the pristine map should never start with &quot;Save&quot;, otherwise that would be</span></div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>        <span class="comment">// a map from the save directory</span></div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>        <span class="comment">//</span></div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_game_state_8h.html#a20058921fe5602a8f70b082e98b2aae2">TheGameState</a>-&gt;isInSaveDirectory(<a class="code hl_define" href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a>-&gt;m_mapName))</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>        {</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span> </div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>(( <span class="stringliteral">&quot;FATAL SAVE/LOAD ERROR! - Setting a pristine map name that refers to a map in the save directory.  The pristine map should always refer to the ORIGINAL map in the Maps directory, if the pristine map string is corrupt then map.ini files will not load correctly.\n&quot;</span> ));</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span> </div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>        }  <span class="comment">// end if</span></div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span> </div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>        <span class="keywordflow">if</span>( m_startNewGame == <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> )</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>        {</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>            <span class="comment">// Failing that, we just set the flag so the actual game can start from a uniform</span></div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>            <span class="comment">// entry point (startNewGame() called from update()).</span></div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>            <span class="keywordflow">if</span>( m_gameMode == <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaee1a5a47561a06e03984ff31602e2529">GAME_SINGLE_PLAYER</a> )</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>            {</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span> </div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>                <span class="keywordflow">if</span>(m_background)</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>                {</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>                    m_background-&gt;destroyWindows();</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>                    m_background-&gt;deleteInstance();</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>                    m_background = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>                }</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>                m_loadScreen = getLoadScreen( loadingSaveGame );</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>                <span class="keywordflow">if</span>(m_loadScreen)</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>                {</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>                    <a class="code hl_variable" href="_global_data_8h.html#af21446132278f7786d102327938763d2">TheWritableGlobalData</a>-&gt;m_loadScreenRender = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;  </div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>                    m_loadScreen-&gt;init(<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>                }</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span> </div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>            }</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span> </div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>            m_startNewGame = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span> </div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>        }  </div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span> </div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>    }  <span class="comment">// end if</span></div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span> </div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>    m_rankLevelLimit = 1000;    <span class="comment">// this is reset every game.</span></div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>    setDefaults( loadingSaveGame );</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>    <a class="code hl_variable" href="_global_data_8h.html#af21446132278f7786d102327938763d2">TheWritableGlobalData</a>-&gt;m_loadScreenRender = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;  </div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>    <a class="code hl_variable" href="_global_data_8h.html#af21446132278f7786d102327938763d2">TheWritableGlobalData</a>-&gt;m_TiVOFastMode = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;    <span class="comment">//always disable the TIVO fast-forward mode at the start of a new game.</span></div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span> </div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>    m_showBehindBuildingMarkers = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>    m_drawIconUI = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>    m_showDynamicLOD = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>    m_scriptHulkMaxLifetimeOverride = -1;</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span> </div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>    <a class="code hl_class" href="class_campaign.html">Campaign</a>* currentCampaign = <a class="code hl_variable" href="_campaign_manager_8h.html#afd7ce7f7a3f20ff00212a798910d50db">TheCampaignManager</a>-&gt;getCurrentCampaign();</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> isChallengeCampaign = m_gameMode == <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaee1a5a47561a06e03984ff31602e2529">GAME_SINGLE_PLAYER</a> &amp;&amp; currentCampaign &amp;&amp; currentCampaign-&gt;<a class="code hl_variable" href="class_campaign.html#a90093c60335f4b154635c190cf72b737">m_isChallengeCampaign</a>;</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span> </div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>    <span class="comment">// Fill in the game color and Factions before we do the Load Screen</span></div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>    <a class="code hl_class" href="class_game_info.html">GameInfo</a> *game = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>    <a class="code hl_variable" href="_game_info_8h.html#a668626b88b7bde6490b9146b8c587a22">TheGameInfo</a> = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>    <a class="code hl_union" href="union_int.html">Int</a> localSlot = 0;</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>)</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>    {</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_l_a_n_a_p_i_callbacks_8h.html#a1c5a01c95e368937f01fcb2e5d5c33d8">TheLAN</a>)</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>        {</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Starting network game\n&quot;</span>));</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>            <a class="code hl_variable" href="_game_info_8h.html#a668626b88b7bde6490b9146b8c587a22">TheGameInfo</a> = game = <a class="code hl_variable" href="_l_a_n_a_p_i_callbacks_8h.html#a1c5a01c95e368937f01fcb2e5d5c33d8">TheLAN</a>-&gt;GetMyGame();</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>        }</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>        {</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Starting gamespy game\n&quot;</span>));</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>            <a class="code hl_variable" href="_game_info_8h.html#a668626b88b7bde6490b9146b8c587a22">TheGameInfo</a> = game = <a class="code hl_variable" href="_staging_room_game_info_8h.html#a5a7f6f896bca06403d708f72e912c05c">TheGameSpyGame</a>;   </div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>        }</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>    }</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>    {</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a> &amp;&amp; <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;getMode() == <a class="code hl_enumvalue" href="_recorder_8h.html#abebff8e1caf81029565d318be12ea230a4236aa876d9bb2efcb5da861afe2f5ba">RECORDERMODETYPE_PLAYBACK</a>)</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>        {</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>            <a class="code hl_variable" href="_game_info_8h.html#a668626b88b7bde6490b9146b8c587a22">TheGameInfo</a> = game = <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;getGameInfo();</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>        }</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(m_gameMode == <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa6cb49fab20f61c2ca2931eb2ff138178">GAME_SKIRMISH</a>)</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>        {</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>          <a class="code hl_variable" href="_game_info_8h.html#a668626b88b7bde6490b9146b8c587a22">TheGameInfo</a> = game = <a class="code hl_variable" href="_game_info_8h.html#a9179e0b132fd565e5e5962402d1e6c47">TheSkirmishGameInfo</a>;</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>        }</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(isChallengeCampaign)</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>        {</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>            <a class="code hl_variable" href="_game_info_8h.html#a668626b88b7bde6490b9146b8c587a22">TheGameInfo</a> = game = <a class="code hl_variable" href="_game_info_8h.html#a7c536799f93fe8c010176c8fc20941a6">TheChallengeGameInfo</a>;</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>        }</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    }</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span> </div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>  <span class="comment">// On a NEW game, we need to copy the superweapon restrictions from the game info to here</span></div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>  <span class="comment">// (because TheGameInfo is not always saved and doesn&#39;t carry over to replays). On a save</span></div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>  <span class="comment">// game, we save the superweapon restrictions in GameLogic::xfer()</span></div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>  <span class="keywordflow">if</span> ( !loadingSaveGame )</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>  {</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    <span class="keywordflow">if</span> ( <a class="code hl_variable" href="_game_info_8h.html#a668626b88b7bde6490b9146b8c587a22">TheGameInfo</a> )</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>    {</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>      m_superweaponRestriction = <a class="code hl_variable" href="_game_info_8h.html#a668626b88b7bde6490b9146b8c587a22">TheGameInfo</a>-&gt;getSuperweaponRestriction();</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>    }</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    {</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>      <span class="comment">// ??? Apparently this is legit? Oh well, use defaults</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>      m_superweaponRestriction = 0;</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>    }</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>  }</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span> </div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>    checkForDuplicateColors( game );</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span> </div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> isSkirmishOrSkirmishReplay = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>    <span class="keywordflow">if</span> (game)</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>    {</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>        <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>        {</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>            <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(i);</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>            <span class="keywordflow">if</span> (!loadingSaveGame) {</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>                slot-&gt;<a class="code hl_function" href="class_game_slot.html#a00022f447c9409f0452671cfe3e710b1">saveOffOriginalInfo</a>();</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>            }</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>            <span class="keywordflow">if</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#a56ae6a4b522cefb0309f257fd5f998c6">isAI</a>())</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>            {</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>                isSkirmishOrSkirmishReplay = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>            }</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>        }</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>        <span class="keywordflow">if</span> (m_gameMode == <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaee1a5a47561a06e03984ff31602e2529">GAME_SINGLE_PLAYER</a>) {</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_game_info_8h.html#a9179e0b132fd565e5e5962402d1e6c47">TheSkirmishGameInfo</a>) {</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>                <span class="keyword">delete</span> <a class="code hl_variable" href="_game_info_8h.html#a9179e0b132fd565e5e5962402d1e6c47">TheSkirmishGameInfo</a>;</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>                <a class="code hl_variable" href="_game_info_8h.html#a9179e0b132fd565e5e5962402d1e6c47">TheSkirmishGameInfo</a> = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>            }</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>        }</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    }</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span> </div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>    populateRandomSideAndColor( game );</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>    populateRandomStartPosition( game );</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span> </div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    <span class="comment">//****************************//</span></div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    <span class="comment">// Start the LoadScreen Now!    //</span></div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>    <span class="comment">//****************************//</span></div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span> </div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>    <span class="comment">// Get the m_loadScreen for this kind of game</span></div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>    <span class="keywordflow">if</span>(!m_loadScreen)</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    {</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>        m_loadScreen = getLoadScreen( loadingSaveGame );</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>        <span class="keywordflow">if</span>(m_loadScreen)</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>        {</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>            <a class="code hl_variable" href="_mouse_8h.html#a8874928c689c1d5e8446353aea92f975">TheMouse</a>-&gt;setVisibility(<a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>            m_loadScreen-&gt;init(game);</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span> </div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>            <span class="comment">// </span></div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>            <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>( <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a3e47e39a419e759be759bf064fa67725">LOAD_PROGRESS_START</a> );</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>        }</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>    }</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    <span class="keywordflow">if</span>(m_background)</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    {</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>        m_background-&gt;destroyWindows();</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>        m_background-&gt;deleteInstance();</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>        m_background = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    }</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    <a class="code hl_function" href="_f_p_u_control_8h.html#ac898939fad383b7b6cb129bdd759cf0f">setFPMode</a>();</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="_campaign_manager_8h.html#afd7ce7f7a3f20ff00212a798910d50db">TheCampaignManager</a>)</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>        <a class="code hl_variable" href="_campaign_manager_8h.html#afd7ce7f7a3f20ff00212a798910d50db">TheCampaignManager</a>-&gt;SetVictorious(<a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>    m_startNewGame = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span> </div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>    <span class="keywordflow">if</span>(m_loadScreen)</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>        <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4f33f6d6d87a3c96413210ce83b6e713">LOAD_PROGRESS_POST_PARTICLE_INI_LOAD</a>);</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span> </div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>    <span class="comment">// reset the frame counter</span></div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>    m_frame = 0;</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span> </div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>    <span class="comment">// before loading the map, load the map.ini file in the same directory.</span></div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    <a class="code hl_function" href="class_game_logic.html#a1b4ff734e63a1ed08f7699397e07514b">loadMapINI</a>( <a class="code hl_define" href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a>-&gt;m_mapName );</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span> </div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>    <span class="comment">// load a map</span></div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>    <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;loadMap( <a class="code hl_define" href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a>-&gt;m_mapName, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>    <span class="comment">// anytime the world&#39;s size changes, must reset the partition mgr</span></div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>    <span class="comment">//ThePartitionManager-&gt;init();</span></div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span> </div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ad6bf0ed607c199f5dcddc10c1b57fa44">LOAD_PROGRESS_POST_LOAD_MAP</a>);</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span> </div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span><span class="preprocessor">    #ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>    <a class="code hl_function" href="timing_test_8cpp.html#afb66d20624c8efed5b7aa8f8287a096f">GetPrecisionTimer</a>(&amp;endTime64);</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>    <span class="keywordtype">char</span> Buf[256];</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>    sprintf(Buf,<span class="stringliteral">&quot;After terrainlogic-&gt;loadmap=%f\n&quot;</span>,((<span class="keywordtype">double</span>)(endTime64-startTime64)/(<span class="keywordtype">double</span>)(freq64)*1000.0));</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>        <span class="comment">//DEBUG_LOG((&quot;Placed a starting building for %s at waypoint %s\n&quot;, playerName.str(), waypointName.str()));</span></div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;%s&quot;</span>, Buf));</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span><span class="preprocessor">    #endif</span></div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span> </div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>    <a class="code hl_union" href="union_int.html">Int</a> progressCount = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2f506e7307098fe1446af85aca344277">LOAD_PROGRESS_SIDE_POPULATION</a>;</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>    <span class="keywordflow">if</span> (game)</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>    {</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>         </div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_game_engine_8h.html#a7b087ae962882e2f9b42ce0a7bd53309">TheGameEngine</a>-&gt;isMultiplayerSession() || isSkirmishOrSkirmishReplay)</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>        {</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>            <span class="comment">// Saves off any player, and resets the sides to 0 players so we can add the skirmish players.</span></div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>            <a class="code hl_variable" href="_sides_list_8h.html#a17ae77f929dc1b8d38b381d55204f94e">TheSidesList</a>-&gt;prepareForMP_or_Skirmish();</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>        }</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span> </div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>        <span class="comment">//DEBUG_LOG((&quot;Starting LAN game with %d players\n&quot;, game-&gt;getNumPlayers()));</span></div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>        <a class="code hl_class" href="class_dict.html">Dict</a> d;</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>        {</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>            <span class="comment">// Add a Side to TheSidesList</span></div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>            <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(i);</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span> </div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>            <span class="keywordflow">if</span> (!slot || !slot-&gt;<a class="code hl_function" href="class_game_slot.html#a9b32369af7f5fd37c9eba1cbd30f4738">isHuman</a>())</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>            {</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>                m_progressComplete[i] = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>                lastHeardFrom(i);</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>            }</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span> </div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>            <span class="keywordflow">if</span> (!slot || !slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>())</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span> </div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>            d.<a class="code hl_function" href="class_dict.html#abf50a79a1369ac6aca3f7e5f57148aaf">clear</a>();</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> playerName;</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>            playerName.<a class="code hl_function" href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">format</a>(<span class="stringliteral">&quot;player%d&quot;</span>, i);</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>            d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_playerName, playerName);</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>            d.<a class="code hl_function" href="class_dict.html#a5021fe67d7478087d5d248d72e48ba80">setBool</a>(TheKey_playerIsHuman, slot-&gt;<a class="code hl_function" href="class_game_slot.html#a9b32369af7f5fd37c9eba1cbd30f4738">isHuman</a>());</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>            d.<a class="code hl_function" href="class_dict.html#a87de1ba756c8a038a654a452bf46efad">setUnicodeString</a>(TheKey_playerDisplayName, slot-&gt;<a class="code hl_function" href="class_game_slot.html#afb54c162a9a3bdae4b64cfb50aa2f10f">getName</a>());</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>            <span class="keyword">const</span> <a class="code hl_class" href="class_player_template.html">PlayerTemplate</a>* pt;</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>            <span class="keywordflow">if</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>() &gt;= 0)</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>                pt = <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;getNthPlayerTemplate(slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>());</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>                pt = <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;findPlayerTemplate( <a class="code hl_variable" href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a>-&gt;nameToKey(<span class="stringliteral">&quot;FactionObserver&quot;</span>) );</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>            <span class="keywordflow">if</span> (pt)</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>            {</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>                d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_playerFaction, <a class="code hl_function" href="_name_key_generator_8h.html#ab7c32cd34773bce0b60659d7fa4fbee1">KEYNAME</a>(pt-&gt;<a class="code hl_function" href="class_player_template.html#a7351c0cf4411380b95468cad521605d9">getNameKey</a>()));</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>            }</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>            </div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>            <span class="keywordflow">if</span> (game-&gt;<a class="code hl_function" href="class_game_info.html#a390b9a38b30cec984bb724c2a7334908">isPlayerPreorder</a>(i))</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>            {</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>                d.<a class="code hl_function" href="class_dict.html#a5021fe67d7478087d5d248d72e48ba80">setBool</a>(TheKey_playerIsPreorder, <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>            }</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>                    </div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> enemiesString, alliesString;</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>            <a class="code hl_union" href="union_int.html">Int</a> team = slot-&gt;<a class="code hl_function" href="class_game_slot.html#ae34ae3ab00e825e289ccf0d18fd49625">getTeamNumber</a>();</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Looking for allies of player %d, team %d\n&quot;</span>, i, team));</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j &lt; MAX_SLOTS; ++j)</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>            {</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>                <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *teamSlot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(j);</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>                <span class="comment">// for check to see if we&#39;re trying to add ourselves</span></div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>                <span class="keywordflow">if</span>(i == j || !teamSlot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>())</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>                </div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Player %d is team %d\n&quot;</span>, j, teamSlot-&gt;<a class="code hl_function" href="class_game_slot.html#ae34ae3ab00e825e289ccf0d18fd49625">getTeamNumber</a>()));</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span> </div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>                <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> teamPlayerName;</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>                teamPlayerName.<a class="code hl_function" href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">format</a>(<span class="stringliteral">&quot;player%d&quot;</span>, j);</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>                <span class="comment">// if our team is None, or our team is not equal to their team, </span></div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>                <span class="comment">// then their our enemy</span></div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>                <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> isEnemy = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>                <span class="keywordflow">if</span>(team == -1 || teamSlot-&gt;<a class="code hl_function" href="class_game_slot.html#ae34ae3ab00e825e289ccf0d18fd49625">getTeamNumber</a>() != team ) isEnemy = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Player %d is %s\n&quot;</span>, j, (isEnemy)?<span class="stringliteral">&quot;enemy&quot;</span>:<span class="stringliteral">&quot;ally&quot;</span>));</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span> </div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>                <span class="keywordflow">if</span> (isEnemy)</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>                {</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>                    <span class="keywordflow">if</span>(!enemiesString.<a class="code hl_function" href="class_ascii_string.html#ae9efb39159f617363aa0acdb6cdecab8">isEmpty</a>())</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>                        enemiesString.<a class="code hl_function" href="class_ascii_string.html#a396495f839d5f880b2754f36a79a9bb1">concat</a>(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>                    enemiesString.<a class="code hl_function" href="class_ascii_string.html#a396495f839d5f880b2754f36a79a9bb1">concat</a>(teamPlayerName);</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>                }</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>                {</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>                    <span class="comment">// he&#39;s on our team, add him!</span></div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>                    <span class="keywordflow">if</span>(!alliesString.<a class="code hl_function" href="class_ascii_string.html#ae9efb39159f617363aa0acdb6cdecab8">isEmpty</a>())</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>                        alliesString.<a class="code hl_function" href="class_ascii_string.html#a396495f839d5f880b2754f36a79a9bb1">concat</a>(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>                    alliesString.<a class="code hl_function" href="class_ascii_string.html#a396495f839d5f880b2754f36a79a9bb1">concat</a>(teamPlayerName);</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>                }               </div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>            }</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>            d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_playerAllies, alliesString);</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>            d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_playerEnemies, enemiesString);</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Player %d&#39;s teams are: allies=%s, enemies=%s\n&quot;</span>, i,alliesString.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>(),enemiesString.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>()));</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span><span class="comment">/*</span></div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span><span class="comment"></span> </div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span><span class="comment">            Int colorIdx = slot-&gt;getColor();</span></div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span><span class="comment">            if (colorIdx &lt; 0 || colorIdx &gt;= TheMultiplayerSettings-&gt;getNumColors())</span></div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span><span class="comment">            {</span></div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span><span class="comment">                DEBUG_ASSERTCRASH(colorIdx == -1, (&quot;Non-random bad color %d in slot %d\n&quot;, colorIdx, i));</span></div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span><span class="comment">                while (colorIdx == -1)</span></div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span><span class="comment">                {</span></div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span><span class="comment">                    colorIdx = GameLogicRandomValue(0, TheMultiplayerSettings-&gt;getNumColors()-1);</span></div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span><span class="comment">                    if (game-&gt;isColorTaken(colorIdx))</span></div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span><span class="comment">                        colorIdx = -1;</span></div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span><span class="comment">                }</span></div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span><span class="comment">                DEBUG_LOG((&quot;Setting color %d to %d\n&quot;, i, colorIdx));</span></div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span><span class="comment">                slot-&gt;setColor(colorIdx);</span></div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span><span class="comment">            }</span></div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span><span class="comment">            */</span></div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span> </div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>            d.<a class="code hl_function" href="class_dict.html#adc07f7a7cc04b4e2718a284e99acf490">setInt</a>(TheKey_playerColor, <a class="code hl_variable" href="_multiplayer_settings_8h.html#afa7bab8d42a3c23accb7fa0f172ea106">TheMultiplayerSettings</a>-&gt;getColor(slot-&gt;<a class="code hl_function" href="class_game_slot.html#affc251c6fd75f08adbafa455d7d78c1f">getColor</a>())-&gt;getColor());</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>            d.<a class="code hl_function" href="class_dict.html#adc07f7a7cc04b4e2718a284e99acf490">setInt</a>(TheKey_playerNightColor, <a class="code hl_variable" href="_multiplayer_settings_8h.html#afa7bab8d42a3c23accb7fa0f172ea106">TheMultiplayerSettings</a>-&gt;getColor(slot-&gt;<a class="code hl_function" href="class_game_slot.html#affc251c6fd75f08adbafa455d7d78c1f">getColor</a>())-&gt;getNightColor());</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>            d.<a class="code hl_function" href="class_dict.html#adc07f7a7cc04b4e2718a284e99acf490">setInt</a>(TheKey_multiplayerStartIndex, slot-&gt;<a class="code hl_function" href="class_game_slot.html#a345769e8467aeb9ace50242c5e01a758">getStartPos</a>());</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span><span class="comment">//          d.setBool(TheKey_multiplayerIsLocal, slot-&gt;isLocalPlayer());</span></div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span><span class="comment">//          d.setBool(TheKey_multiplayerIsLocal, slot-&gt;getIP() == game-&gt;getLocalIP());</span></div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>            d.<a class="code hl_function" href="class_dict.html#a5021fe67d7478087d5d248d72e48ba80">setBool</a>(TheKey_multiplayerIsLocal, slot-&gt;<a class="code hl_function" href="class_game_slot.html#a9b32369af7f5fd37c9eba1cbd30f4738">isHuman</a>() &amp;&amp; (slot-&gt;<a class="code hl_function" href="class_game_slot.html#afb54c162a9a3bdae4b64cfb50aa2f10f">getName</a>().<a class="code hl_function" href="class_unicode_string.html#ac14da6f02dc1c81ee9211923e9e0a786">compare</a>(game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(game-&gt;<a class="code hl_function" href="class_game_info.html#a47906ed9d2c4d978d962c1fd08027c22">getLocalSlotNum</a>())-&gt;<a class="code hl_function" href="class_game_slot.html#afb54c162a9a3bdae4b64cfb50aa2f10f">getName</a>().<a class="code hl_function" href="class_unicode_string.html#ab80e621deccff2aa3abfaebc99c5c170">str</a>()) == 0));</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span> </div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span><span class="comment">/*</span></div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span><span class="comment">            if (slot-&gt;getIP() == game-&gt;getLocalIP())</span></div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span><span class="comment">            {</span></div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span><span class="comment">                localSlot = i;</span></div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span><span class="comment">                DEBUG_LOG((&quot;GameLogic::StartNewGame - local slot is %d\n&quot;, localSlot));</span></div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span><span class="comment">            }</span></div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span><span class="comment">*/</span></div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span> </div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>            <span class="keywordflow">if</span> (isSkirmishOrSkirmishReplay) </div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>            {</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>                d.<a class="code hl_function" href="class_dict.html#a5021fe67d7478087d5d248d72e48ba80">setBool</a>(TheKey_playerIsSkirmish, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>                <span class="keywordflow">switch</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#a0873a19870745dbe58a9dd9e25b18e70">getState</a>()) {</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_info_8h.html#a6dceaf27b902936176bb32b7b1ea7436a4d208760849537e2a790b3fe8ed02d49">SLOT_EASY_AI</a> : d.<a class="code hl_function" href="class_dict.html#adc07f7a7cc04b4e2718a284e99acf490">setInt</a>(TheKey_skirmishDifficulty, <a class="code hl_enumvalue" href="_game_common_8h.html#a022afd659100232d71e5cf905098a11aa95f48065472a7866854a3c9b9ea8347e">DIFFICULTY_EASY</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_info_8h.html#a6dceaf27b902936176bb32b7b1ea7436a0165ed2df1f949da38e4d8118ae371dc">SLOT_MED_AI</a> : d.<a class="code hl_function" href="class_dict.html#adc07f7a7cc04b4e2718a284e99acf490">setInt</a>(TheKey_skirmishDifficulty, <a class="code hl_enumvalue" href="_game_common_8h.html#a022afd659100232d71e5cf905098a11aa599e2a9348d6630a59c4224deee53991">DIFFICULTY_NORMAL</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="_game_info_8h.html#a6dceaf27b902936176bb32b7b1ea7436ae72ff76a235f2295d3a763258ac1561b">SLOT_BRUTAL_AI</a> : d.<a class="code hl_function" href="class_dict.html#adc07f7a7cc04b4e2718a284e99acf490">setInt</a>(TheKey_skirmishDifficulty, <a class="code hl_enumvalue" href="_game_common_8h.html#a022afd659100232d71e5cf905098a11aa0d7385205eaa38cd67abe052bc39e431">DIFFICULTY_HARD</a>); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>                    <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;  <span class="comment">// no setting.</span></div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>                }</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>            }</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span> </div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> slotNameAscii;</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>            slotNameAscii.<a class="code hl_function" href="class_ascii_string.html#ac6de156d7974b64a9440ef3fa9915257">translate</a>(slot-&gt;<a class="code hl_function" href="class_game_slot.html#afb54c162a9a3bdae4b64cfb50aa2f10f">getName</a>());</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>            <span class="keywordflow">if</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#a9b32369af7f5fd37c9eba1cbd30f4738">isHuman</a>() &amp;&amp; game-&gt;<a class="code hl_function" href="class_game_info.html#a01fda0d1ea81d32f32c3ebd6bd285257">getSlotNum</a>(slotNameAscii) == game-&gt;<a class="code hl_function" href="class_game_info.html#a47906ed9d2c4d978d962c1fd08027c22">getLocalSlotNum</a>()) {</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>                localSlot = i;</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>            }</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>            <a class="code hl_variable" href="_sides_list_8h.html#a17ae77f929dc1b8d38b381d55204f94e">TheSidesList</a>-&gt;addSide(&amp;d);</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span> </div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> playerTeamName;</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>            playerTeamName.<a class="code hl_function" href="class_ascii_string.html#a9dfe04dc3a0bc8d7a1923193e90f146a">set</a>(<span class="stringliteral">&quot;team&quot;</span>);</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>            playerTeamName.<a class="code hl_function" href="class_ascii_string.html#a396495f839d5f880b2754f36a79a9bb1">concat</a>(playerName);</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span> </div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>            d.<a class="code hl_function" href="class_dict.html#abf50a79a1369ac6aca3f7e5f57148aaf">clear</a>();</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>            d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_teamName, playerTeamName);</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>            d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_teamOwner, playerName);</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>            d.<a class="code hl_function" href="class_dict.html#a5021fe67d7478087d5d248d72e48ba80">setBool</a>(TheKey_teamIsSingleton, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>            <a class="code hl_variable" href="_sides_list_8h.html#a17ae77f929dc1b8d38b381d55204f94e">TheSidesList</a>-&gt;addTeam(&amp;d);</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span> </div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Added side %d\n&quot;</span>, i));</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>            <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(progressCount + i);</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>        }       </div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>    }</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>    <span class="comment">//if(m_gameMode != GAME_REPLAY)</span></div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>    <span class="comment">//{</span></div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>    </div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>        <span class="comment">// Always add in an observer Player</span></div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>        <a class="code hl_class" href="class_dict.html">Dict</a> d;</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>        d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_playerName, <span class="stringliteral">&quot;ReplayObserver&quot;</span>);</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>        d.<a class="code hl_function" href="class_dict.html#a5021fe67d7478087d5d248d72e48ba80">setBool</a>(TheKey_playerIsHuman, <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>        d.<a class="code hl_function" href="class_dict.html#a87de1ba756c8a038a654a452bf46efad">setUnicodeString</a>(TheKey_playerDisplayName, <a class="code hl_class" href="class_unicode_string.html">UnicodeString</a>(L<span class="stringliteral">&quot;Observer&quot;</span>));</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>        <span class="keyword">const</span> <a class="code hl_class" href="class_player_template.html">PlayerTemplate</a>* pt;</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>        pt = <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;findPlayerTemplate( <a class="code hl_variable" href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a>-&gt;nameToKey(<span class="stringliteral">&quot;FactionObserver&quot;</span>) );</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>        <span class="keywordflow">if</span> (pt)</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>        {</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>            d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_playerFaction, <a class="code hl_function" href="_name_key_generator_8h.html#ab7c32cd34773bce0b60659d7fa4fbee1">KEYNAME</a>(pt-&gt;<a class="code hl_function" href="class_player_template.html#a7351c0cf4411380b95468cad521605d9">getNameKey</a>()));</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>        }</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>        d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_playerAllies, <a class="code hl_variable" href="class_ascii_string.html#aa469ba29748958e5d120d6b806e45249">AsciiString::TheEmptyString</a>);</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>        d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_playerEnemies, <a class="code hl_variable" href="class_ascii_string.html#aa469ba29748958e5d120d6b806e45249">AsciiString::TheEmptyString</a>);</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>        d.<a class="code hl_function" href="class_dict.html#adc07f7a7cc04b4e2718a284e99acf490">setInt</a>(TheKey_playerColor, <a class="code hl_variable" href="_multiplayer_settings_8h.html#afa7bab8d42a3c23accb7fa0f172ea106">TheMultiplayerSettings</a>-&gt;getColor(0)-&gt;getColor());</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>        d.<a class="code hl_function" href="class_dict.html#adc07f7a7cc04b4e2718a284e99acf490">setInt</a>(TheKey_playerNightColor, <a class="code hl_variable" href="_multiplayer_settings_8h.html#afa7bab8d42a3c23accb7fa0f172ea106">TheMultiplayerSettings</a>-&gt;getColor(0)-&gt;getNightColor());</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>        d.<a class="code hl_function" href="class_dict.html#adc07f7a7cc04b4e2718a284e99acf490">setInt</a>(TheKey_multiplayerStartIndex, 0);</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>        d.<a class="code hl_function" href="class_dict.html#a5021fe67d7478087d5d248d72e48ba80">setBool</a>(TheKey_multiplayerIsLocal, <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span> </div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>        <a class="code hl_variable" href="_sides_list_8h.html#a17ae77f929dc1b8d38b381d55204f94e">TheSidesList</a>-&gt;addSide(&amp;d);  </div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>        d.<a class="code hl_function" href="class_dict.html#abf50a79a1369ac6aca3f7e5f57148aaf">clear</a>();</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>        d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_teamName, <span class="stringliteral">&quot;teamReplayObserver&quot;</span>);</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>        d.<a class="code hl_function" href="class_dict.html#a3806c8ea0782591ee380217216e31048">setAsciiString</a>(TheKey_teamOwner, <span class="stringliteral">&quot;ReplayObserver&quot;</span>);</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>        d.<a class="code hl_function" href="class_dict.html#a5021fe67d7478087d5d248d72e48ba80">setBool</a>(TheKey_teamIsSingleton, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>        <a class="code hl_variable" href="_sides_list_8h.html#a17ae77f929dc1b8d38b381d55204f94e">TheSidesList</a>-&gt;addTeam(&amp;d);</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>    <span class="comment">//}</span></div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>    <a class="code hl_variable" href="_sides_list_8h.html#a17ae77f929dc1b8d38b381d55204f94e">TheSidesList</a>-&gt;validateSides();      </div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span> </div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4909a69faed1e61725130db4e06aded7">LOAD_PROGRESS_POST_SIDE_LIST_INIT</a>);</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span> </div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>    <span class="comment">// update the player list to match the new map.</span></div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>    <a class="code hl_variable" href="_team_8h.html#a3a04fc491dc4566b61f2f8100b070cd6">TheTeamFactory</a>-&gt;reset();</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>    <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;newGame();</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>    </div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ac68a8ab5d06c826e4966eff6ec700069">LOAD_PROGRESS_POST_PLAYER_LIST_RESET</a>);</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span> </div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>    <span class="comment">// Tell the script engine that a newe set of scripts is loaded.</span></div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>    <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a>-&gt;newMap();</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span> </div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078aac03a90876860f854d16252d7b912331">LOAD_PROGRESS_POST_SCRIPT_ENGINE_NEW_MAP</a>);</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span> </div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_game_engine_8h.html#a7b087ae962882e2f9b42ce0a7bd53309">TheGameEngine</a>-&gt;isMultiplayerSession() || isSkirmishOrSkirmishReplay)</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>    {</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>        <span class="comment">// if there are no other teams (happens for debugging) don&#39;t end the game immediately</span></div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>        <a class="code hl_union" href="union_int.html">Int</a> numTeams = 0; <span class="comment">// this can be higher than expected, but is accurate for determining 0, 1, 2+</span></div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>        <a class="code hl_union" href="union_int.html">Int</a> lastTeam = -1;</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>        <span class="keywordflow">if</span> (game)</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>        {</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>            {</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>                <span class="keyword">const</span> <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2a6e7c2ab46179fd86cb5e89c1ef44c2">getConstSlot</a>(i);</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>                <span class="keywordflow">if</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>() &amp;&amp; slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>() != <a class="code hl_enumvalue" href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3">PLAYERTEMPLATE_OBSERVER</a>)</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>                {</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>                    <span class="keywordflow">if</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#ae34ae3ab00e825e289ccf0d18fd49625">getTeamNumber</a>() == -1 || slot-&gt;<a class="code hl_function" href="class_game_slot.html#ae34ae3ab00e825e289ccf0d18fd49625">getTeamNumber</a>() != lastTeam)</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>                    {</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>                        ++numTeams;</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>                        lastTeam = slot-&gt;<a class="code hl_function" href="class_game_slot.html#ae34ae3ab00e825e289ccf0d18fd49625">getTeamNumber</a>();</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>                    }</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>                }</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>            }</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>        }</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span> </div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>        <span class="keywordflow">if</span> (numTeams &gt; 1)</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>        {</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>            <span class="comment">// add in the multiplayer victory/defeat scripts</span></div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> path = <span class="stringliteral">&quot;Data\\Scripts\\MultiplayerScripts.scb&quot;</span>;</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>            <a class="code hl_class" href="class_cached_file_input_stream.html">CachedFileInputStream</a> theInputStream;</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>            <span class="keywordflow">if</span> (theInputStream.<a class="code hl_function" href="class_cached_file_input_stream.html#aacf153f06b4317624617ca728a309bec">open</a>(path))</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>            { </div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>                <a class="code hl_class" href="class_chunk_input_stream.html">ChunkInputStream</a> *pStrm = &amp;theInputStream;</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>                <a class="code hl_class" href="class_data_chunk_input.html">DataChunkInput</a> file( pStrm );</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>                file.<a class="code hl_function" href="class_data_chunk_input.html#a18a2ccd8de5cd2733f9b7d2d85176300">registerParser</a>( <a class="code hl_class" href="class_ascii_string.html">AsciiString</a>(<span class="stringliteral">&quot;PlayerScriptsList&quot;</span>), <a class="code hl_variable" href="class_ascii_string.html#aa469ba29748958e5d120d6b806e45249">AsciiString::TheEmptyString</a>, <a class="code hl_function" href="class_script_list.html#a946ba75bdfd5fdf1f8c0d17918ccac6d">ScriptList::ParseScriptsDataChunk</a> );</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>                <span class="keywordflow">if</span> (!file.<a class="code hl_function" href="class_data_chunk_input.html#a53c55822ea5f10bf49a7029c877c75f1">parse</a>(<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>                    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;ERROR - Unable to read in multiplayer scripts.\n&quot;</span>));</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>                }</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>                <a class="code hl_class" href="class_script_list.html">ScriptList</a> *scripts[<a class="code hl_enumvalue" href="_game_common_8h.html#a9c619318e7a6cdf38897480033ae8660aa33778b47f5c9394a6eb2c5164bcd3d5">MAX_PLAYER_COUNT</a>];</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>                <a class="code hl_union" href="union_int.html">Int</a> count = <a class="code hl_function" href="class_script_list.html#a6fb4b162e518f3c0a0ee4343b3744ed6">ScriptList::getReadScripts</a>(scripts);</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>                <span class="keywordflow">if</span> (count)</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>                {</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>                    <a class="code hl_class" href="class_script_list.html">ScriptList</a> *pSL = <a class="code hl_variable" href="_sides_list_8h.html#a17ae77f929dc1b8d38b381d55204f94e">TheSidesList</a>-&gt;getSideInfo(0)-&gt;getScriptList();</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>                    <a class="code hl_class" href="class_script.html">Script</a> *next = scripts[0]-&gt;<a class="code hl_function" href="class_script_list.html#afab0b7fd509a69aab993c5fdd4ea2ad1">getScript</a>();</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>                    <span class="keywordflow">while</span> (next)</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>                    {</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>                        <a class="code hl_class" href="class_script.html">Script</a> *dupe = next-&gt;<a class="code hl_function" href="class_script.html#a509ab330ee27705de3f369386bf57031">duplicate</a>();</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>                        pSL-&gt;<a class="code hl_function" href="class_script_list.html#a6f1c53a392d3f89ea50c2c922310fcb8">addScript</a>(dupe, 0);</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>                        next = next-&gt;<a class="code hl_function" href="class_script.html#afdaed0fb8742f81901882ddcc048af38">getNext</a>();</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>                    }</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>                }</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>                <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> i=0; i&lt;count; ++i)</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>                {</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>                    scripts[i]-&gt;<a class="code hl_function" href="class_memory_pool_object.html#a39991eb8d6e0a3ef336a1551005753b1">deleteInstance</a>();</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>                }</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>            }</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>        }</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span> </div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>        <span class="comment">/*</span></div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span><span class="comment">        // add multiplayer single-player defeat script</span></div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span><span class="comment">        if (numTeams &gt; 1)</span></div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span><span class="comment">        {</span></div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span><span class="comment">            AsciiString name;</span></div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span><span class="comment">            name.format(&quot;MultiplayerPlayerDefeat&quot;); // name is for the ui in the editor</span></div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span><span class="comment">            Script *pNewScript = newInstance(Script);</span></div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span><span class="comment">            pNewScript-&gt;setName(name);</span></div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span><span class="comment"></span> </div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span><span class="comment">            Condition *pFalse1 = newInstance(Condition)(Condition::MULTIPLAYER_PLAYER_DEFEAT);</span></div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span><span class="comment">            OrCondition *pOr = newInstance(OrCondition);</span></div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span><span class="comment">            pOr-&gt;setFirstAndCondition(pFalse1);</span></div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span><span class="comment">            pNewScript-&gt;setOrCondition(pOr);</span></div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span><span class="comment"></span> </div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span><span class="comment">            ScriptAction *action = newInstance(ScriptAction)(ScriptAction::LOCALDEFEAT);</span></div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span><span class="comment">            pNewScript-&gt;setAction(action);</span></div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span><span class="comment"></span> </div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span><span class="comment">            ScriptList *pSL = TheSidesList-&gt;getSideInfo(0)-&gt;getScriptList();</span></div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span><span class="comment">            pSL-&gt;addScript(pNewScript, 0); // adds this as the player&#39;s first script (index 0)</span></div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span><span class="comment">        }</span></div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span><span class="comment"></span> </div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span><span class="comment">        // add multiplayer victory scripts</span></div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span><span class="comment">        if (numTeams &gt; 1)</span></div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span><span class="comment">        {</span></div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span><span class="comment">            AsciiString name;</span></div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span><span class="comment">            name.format(&quot;MultiplayerVictory&quot;); // name is for the ui in the editor</span></div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span><span class="comment">            Script *pNewScript = newInstance( Script );</span></div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span><span class="comment">            pNewScript-&gt;setName(name);</span></div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span><span class="comment"></span> </div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span><span class="comment">            Condition *pFalse1 = newInstance(Condition)(Condition::MULTIPLAYER_ALLIED_VICTORY);</span></div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span><span class="comment">            OrCondition *pOr = newInstance(OrCondition);</span></div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span><span class="comment">            pOr-&gt;setFirstAndCondition(pFalse1);</span></div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span><span class="comment">            pNewScript-&gt;setOrCondition(pOr);</span></div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span><span class="comment"></span> </div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span><span class="comment">            ScriptAction *action = newInstance(ScriptAction)(ScriptAction::VICTORY);</span></div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span><span class="comment">            pNewScript-&gt;setAction(action);</span></div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span><span class="comment"></span> </div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span><span class="comment">            ScriptList *pSL = TheSidesList-&gt;getSideInfo(0)-&gt;getScriptList();</span></div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span><span class="comment">            pSL-&gt;addScript(pNewScript, 0); // adds this as the player&#39;s first script (index 0)</span></div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span><span class="comment">        }</span></div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span><span class="comment"></span> </div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span><span class="comment">        // add multiplayer defeat scripts</span></div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span><span class="comment">        if (numTeams &gt; 1)</span></div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span><span class="comment">        {</span></div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span><span class="comment">            AsciiString name;</span></div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span><span class="comment">            name.format(&quot;MultiplayerDefeat&quot;); // name is for the ui in the editor</span></div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span><span class="comment">            Script *pNewScript = newInstance(Script);</span></div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span><span class="comment">            pNewScript-&gt;setName(name);</span></div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span><span class="comment"></span> </div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span><span class="comment">            Condition *pFalse1 = newInstance(Condition)(Condition::MULTIPLAYER_ALLIED_DEFEAT);</span></div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span><span class="comment">            OrCondition *pOr = newInstance(OrCondition);</span></div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span><span class="comment">            pOr-&gt;setFirstAndCondition(pFalse1);</span></div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span><span class="comment">            pNewScript-&gt;setOrCondition(pOr);</span></div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span><span class="comment"></span> </div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span><span class="comment">            ScriptAction *action = newInstance(ScriptAction)(ScriptAction::DEFEAT);</span></div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span><span class="comment">            pNewScript-&gt;setAction(action);</span></div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span><span class="comment"></span> </div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span><span class="comment">            ScriptList *pSL = TheSidesList-&gt;getSideInfo(0)-&gt;getScriptList();</span></div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span><span class="comment">            pSL-&gt;addScript(pNewScript, 0); // adds this as the player&#39;s first script (index 0)</span></div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span><span class="comment">        }</span></div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span><span class="comment">        */</span></div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>    }</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span> </div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ace735895822780026d0b9a8fa926f32e">LOAD_PROGRESS_POST_VICTORY_CONDITION_SETUP</a>);</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span> </div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>    <span class="comment">// set the radar as on a new map</span></div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>    <a class="code hl_variable" href="_radar_8h.html#af392ab5e5de710c69949cefe3f4676b6">TheRadar</a>-&gt;newMap( <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a> );</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>    <a class="code hl_variable" href="_in_game_u_i_8h.html#a0de3624c7699c1ad0dea332a3c44c931">TheInGameUI</a>-&gt;setClientQuiet( <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> ); <span class="comment">// okay to start beeping and stuff</span></div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span> </div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>    <span class="comment">// Tell the multiplayer victory condition singleton that the players are created</span></div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>    <a class="code hl_variable" href="_victory_conditions_8h.html#a8d23f837125a00053da4631eac1be46d">TheVictoryConditions</a>-&gt;cachePlayerPtrs();</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>    <a class="code hl_variable" href="_victory_conditions_8h.html#a8d23f837125a00053da4631eac1be46d">TheVictoryConditions</a>-&gt;setVictoryConditions(<a class="code hl_enumvalue" href="_victory_conditions_8h.html#a57662e4d1d248e4cfa1382870a550794a2e721c91499ee367ef6bb800ab9d4454">VICTORY_NOBUILDINGS</a>);</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span> </div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a0ab8bf9c2f4d489cc33868c0d35f4c9a">LOAD_PROGRESS_POST_VICTORY_CONDITION_SET_VICTORY_CONDITION</a>);</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span> </div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>    <span class="comment">// set the world extents to that of the map</span></div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>    <a class="code hl_struct" href="struct_region3_d.html">Region3D</a> extent;</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>    <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getExtent( &amp;extent );</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span> </div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>    <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;setWidth( extent.<a class="code hl_variable" href="struct_region3_d.html#a65bfbbfbf1402ac0abc7dad049a70557">hi</a>.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a> - extent.<a class="code hl_variable" href="struct_region3_d.html#a88e23dece4caa6c4c0680e72486e09b9">lo</a>.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a> );</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>    <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;setHeight( extent.<a class="code hl_variable" href="struct_region3_d.html#a65bfbbfbf1402ac0abc7dad049a70557">hi</a>.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> - extent.<a class="code hl_variable" href="struct_region3_d.html#a88e23dece4caa6c4c0680e72486e09b9">lo</a>.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> );</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span> </div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>    <span class="comment">// anytime the world&#39;s size changes, must reset the partition mgr</span></div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>    <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;init();</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>    <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;refreshShroudForLocalPlayer();<span class="comment">// Can&#39;t do this until after init, and doesn&#39;t seem right to do in init</span></div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span> </div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>    <a class="code hl_variable" href="_ghost_object_8h.html#a026d8f8301288c28b954b0eb5ea3283f">TheGhostObjectManager</a>-&gt;setLocalPlayerIndex(<a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getLocalPlayer()-&gt;getPlayerIndex());</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>    <a class="code hl_variable" href="_ghost_object_8h.html#a026d8f8301288c28b954b0eb5ea3283f">TheGhostObjectManager</a>-&gt;reset();</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>    </div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078abc7da6018cb124960e629c7c9f41f5d9">LOAD_PROGRESS_POST_GHOST_OBJECT_MANAGER_RESET</a>);</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span> </div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>    <span class="comment">// update the terrain logic now that all is loaded</span></div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>    <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;newMap( loadingSaveGame );</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span> </div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2add60c090efb19d795853a5ee655d67">LOAD_PROGRESS_POST_TERRAIN_LOGIC_NEW_MAP</a>);</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span> </div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span><span class="preprocessor">    #ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>    <a class="code hl_function" href="timing_test_8cpp.html#afb66d20624c8efed5b7aa8f8287a096f">GetPrecisionTimer</a>(&amp;endTime64);</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>    sprintf(Buf,<span class="stringliteral">&quot;After terrainlogic-&gt;newmap=%f\n&quot;</span>,((<span class="keywordtype">double</span>)(endTime64-startTime64)/(<span class="keywordtype">double</span>)(freq64)*1000.0));</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;%s&quot;</span>, Buf));</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span><span class="preprocessor">    #endif</span></div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span> </div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>        <span class="comment">// Special case, load any bridge map objects.</span></div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>    <span class="keyword">const</span> <a class="code hl_class" href="class_thing_template.html">ThingTemplate</a> *thingTemplate;</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>    <a class="code hl_class" href="class_map_object.html">MapObject</a> *pMapObj;</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>    <span class="keywordflow">for</span> (pMapObj = <a class="code hl_function" href="class_map_object.html#a828e198ddc383dc90586fdab44065575">MapObject::getFirstMapObject</a>(); pMapObj; pMapObj = pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#ad84208bcfeba66aaf59e6412b282f235">getNext</a>()) </div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>    {</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span> </div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>        <span class="keywordflow">if</span> (pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a8e43ce383edfca39680e698ed3b93f57">getFlag</a>(<a class="code hl_enumvalue" href="_map_object_8h.html#af97f51458499ef9ba19c259cd65c0c55ad1b8795a3c7f204224fbce28ada13397">FLAG_BRIDGE_FLAGS</a>) || pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a8e43ce383edfca39680e698ed3b93f57">getFlag</a>(<a class="code hl_enumvalue" href="_map_object_8h.html#af97f51458499ef9ba19c259cd65c0c55a7b6db8bf7098b1e5ebf4790479d311ff">FLAG_ROAD_FLAGS</a>)) </div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>            <span class="keywordflow">continue</span>;   <span class="comment">// these roads &amp; bridges are special cased in the terrain side.</span></div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span> </div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>        <span class="comment">// get thing template based from map object name</span></div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>        thingTemplate = pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a43d8ebadf0ff0a0d5c5fbcf90acdbe31">getThingTemplate</a>();</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>        <span class="keywordflow">if</span>( thingTemplate == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>            <span class="keywordflow">continue</span>;   </div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span> </div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>        <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> isBridgeLikeObject = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span> </div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>        <span class="keywordflow">if</span> (thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#afb2fa64bc3507e5599a3cec2cbf85e2f">isBridge</a>()) </div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>            isBridgeLikeObject = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>        <span class="keywordflow">if</span> (thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa985d5f63f13b78714246ab248d55b3f">KINDOF_WALK_ON_TOP_OF_WALL</a>)) </div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>            isBridgeLikeObject = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span> </div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>        <span class="keywordflow">if</span> (!isBridgeLikeObject)</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span> </div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>        <a class="code hl_class" href="class_team.html">Team</a> *team = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getNeutralPlayer()-&gt;getDefaultTeam();</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>        <span class="comment">// create new object in the world</span></div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>        <a class="code hl_class" href="class_object.html">Object</a> *obj = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;newObject( thingTemplate, team ); <span class="comment">//, OBJECT_STATUS_LOADING_FROM_MAP );</span></div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>        <span class="keywordflow">if</span>( obj )</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>        {</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>            <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> pos = *pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a28c0b1eed74cc71be3e361444414a0bc">getLocation</a>();</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>            pos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> += <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getGroundHeight( pos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>, pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> );</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span> </div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>            <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> angle = <a class="code hl_function" href="_game_common_8h.html#a6b82567dea14f55d2df66aece04b0510">normalizeAngle</a>(pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#adbb94f89e42f756f52a2625e4ee3eb61">getAngle</a>());  </div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>            obj-&gt;<a class="code hl_function" href="class_thing.html#a93da041338677d5058d9948cb424fb6f">setOrientation</a>(angle);</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>            obj-&gt;<a class="code hl_function" href="class_thing.html#a9fcbcf27ec45b3aa4883a03a56663bd9">setPosition</a>( &amp;pos );</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>            <span class="keywordflow">if</span> (thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#afb2fa64bc3507e5599a3cec2cbf85e2f">isBridge</a>()) {</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>                <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;addLandmarkBridgeToLogic(obj);</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>            }</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>            <span class="keywordflow">if</span> (thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa985d5f63f13b78714246ab248d55b3f">KINDOF_WALK_ON_TOP_OF_WALL</a>)) {</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>                <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;pathfinder()-&gt;addWallPiece(obj);</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>            }</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span> </div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>            <span class="comment">// Do this after positioning the object, because we may place objects in response to keys</span></div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>            <span class="comment">// in the map object properties.</span></div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>            <span class="comment">// update this object instance with properties from the map object</span></div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>            obj-&gt;<a class="code hl_function" href="class_object.html#a551e20771c012a247a605df8795a097a">updateObjValuesFromMapProperties</a>( pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a814161c97e5b497ab631333411e86a28">getProperties</a>() );</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>        }  <span class="comment">// end if</span></div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span> </div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>    }   <span class="comment">// for, loading bridge map objects</span></div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span> </div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a407040a0a1a136686862ff000d3e4fa3">LOAD_PROGRESS_POST_BRIDGE_LOAD</a>);</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span> </div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>    <span class="comment">// refresh the radar to reflect loaded bridges</span></div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>    <a class="code hl_variable" href="_radar_8h.html#af392ab5e5de710c69949cefe3f4676b6">TheRadar</a>-&gt;refreshTerrain( <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a> );</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span> </div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>    <span class="comment">// tell the AI about it</span></div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>    <span class="comment">// Note that it is important that the pathfinder be called before the map objects are loaded.</span></div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>    <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;pathfinder()-&gt;newMap( );</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span> </div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a64185d9b8a0774657697848e1eb552c1">LOAD_PROGRESS_POST_PATHFINDER_NEW_MAP</a>);</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span> </div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>    <span class="comment">// reveal the map for the permanent observer</span></div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>    <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;revealMapForPlayerPermanently( <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;findPlayerWithNameKey(<a class="code hl_variable" href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a>-&gt;nameToKey(<span class="stringliteral">&quot;ReplayObserver&quot;</span>))-&gt;getPlayerIndex() );</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Reveal shroud for %ls whose index is %d\n&quot;</span>, <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;findPlayerWithNameKey(<a class="code hl_variable" href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a>-&gt;nameToKey(<span class="stringliteral">&quot;ReplayObserver&quot;</span>))-&gt;getPlayerDisplayName().str(),<a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;findPlayerWithNameKey(<a class="code hl_variable" href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a>-&gt;nameToKey(<span class="stringliteral">&quot;ReplayObserver&quot;</span>))-&gt;getPlayerIndex()));</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>    </div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>    <span class="keywordflow">if</span> (game)</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>    {</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>        {</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>            <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(i);</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>            </div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>            <span class="keywordflow">if</span> (!slot || !slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>())</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>            </div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> playerName;</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>            playerName.<a class="code hl_function" href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">format</a>(<span class="stringliteral">&quot;player%d&quot;</span>, i);</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>            <a class="code hl_class" href="class_player.html">Player</a> *player = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;findPlayerWithNameKey(<a class="code hl_variable" href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a>-&gt;nameToKey(playerName));</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>            </div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>            <span class="keywordflow">if</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>() == <a class="code hl_enumvalue" href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3">PLAYERTEMPLATE_OBSERVER</a>)</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>            {</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Clearing shroud for observer %s in playerList slot %d\n&quot;</span>, playerName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>(), player-&gt;<a class="code hl_function" href="class_player.html#ab0e83f07d1399949f6162c31b7eda951">getPlayerIndex</a>()));</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>                <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;revealMapForPlayerPermanently( player-&gt;<a class="code hl_function" href="class_player.html#ab0e83f07d1399949f6162c31b7eda951">getPlayerIndex</a>() );</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>            }</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>            {</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>                <span class="comment">// remove shroud for the player in MP games</span></div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="_multiplayer_settings_8h.html#afa7bab8d42a3c23accb7fa0f172ea106">TheMultiplayerSettings</a>-&gt;isShroudInMultiplayer())</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>                    <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;revealMapForPlayer( player-&gt;<a class="code hl_function" href="class_player.html#ab0e83f07d1399949f6162c31b7eda951">getPlayerIndex</a>() );</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>            }</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>        }</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>    }</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span> </div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span><span class="preprocessor">    #ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>    <a class="code hl_function" href="timing_test_8cpp.html#afb66d20624c8efed5b7aa8f8287a096f">GetPrecisionTimer</a>(&amp;endTime64);</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>    sprintf(Buf,<span class="stringliteral">&quot;Before loading objects=%f\n&quot;</span>,((<span class="keywordtype">double</span>)(endTime64-startTime64)/(<span class="keywordtype">double</span>)(freq64)*1000.0));</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;%s&quot;</span>, Buf));</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span><span class="preprocessor">    #endif</span></div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span> </div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> useTrees = <a class="code hl_define" href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a>-&gt;m_useTrees;</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span> </div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>    <span class="comment">// If forceFluffToProp == true, removable objects get created on client only. [7/14/2003]</span></div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>    <span class="comment">// If static lod is HIGH, we don&#39;t do force fluff to client side only (create logic side props, more expensive. jba)</span></div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> forceFluffToProp = <a class="code hl_variable" href="_game_l_o_d_8h.html#a2acfb8ac2fec0f7fc8f2e8676214fdea">TheGameLODManager</a>-&gt;getStaticLODLevel() != <a class="code hl_enumvalue" href="_game_l_o_d_8h.html#ae7eb59bc41294a2692dca729ae674acbad3de3925cd95f974e9198f0b42fbe537">STATIC_GAME_LOD_HIGH</a>;</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_game_l_o_d_8h.html#a2acfb8ac2fec0f7fc8f2e8676214fdea">TheGameLODManager</a>-&gt;getStaticLODLevel() == <a class="code hl_enumvalue" href="_game_l_o_d_8h.html#ae7eb59bc41294a2692dca729ae674acba891b6b81e13eca81f248312fc34e2508">STATIC_GAME_LOD_CUSTOM</a> &amp;&amp; </div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>            <a class="code hl_define" href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a>-&gt;m_useShadowVolumes) {</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>        <span class="comment">// Custom LOD, and volumetric shadows turned on - very high detail.  So use logic props too. jba. [7/14/2003]</span></div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>        forceFluffToProp = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>    }</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span> </div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a> &amp;&amp; <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;isMultiplayer()) {</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>        useTrees = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="comment">// Always use trees in multiplayer, cause we want it to sync properly. jba.</span></div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>        forceFluffToProp = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="comment">// Always do client side fluff - faster, and syncs properly. jba.</span></div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>    }</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span> </div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>    progressCount = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a340b12b0b911214e8001157bb7124a23">LOAD_PROGRESS_LOOP_ALL_THE_FREAKN_OBJECTS</a>;</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>    <a class="code hl_union" href="union_int.html">Int</a> <a class="code hl_variable" href="_options_menu_8cpp.html#a38ec2e55ad51a493102f2d60343cfbec">timer</a> = timeGetTime();</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>    <span class="keywordflow">if</span>( loadingSaveGame ) {</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>        <span class="comment">// Loading a loadingSaveGame, need to add the trees to the client. jba. [8/11/2003]</span></div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>        <span class="keywordflow">for</span> (pMapObj = <a class="code hl_function" href="class_map_object.html#a828e198ddc383dc90586fdab44065575">MapObject::getFirstMapObject</a>(); pMapObj; pMapObj = pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#ad84208bcfeba66aaf59e6412b282f235">getNext</a>()) </div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>        {</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>            <span class="comment">// get thing template based from map object name</span></div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>            thingTemplate = pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a43d8ebadf0ff0a0d5c5fbcf90acdbe31">getThingTemplate</a>();</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>            <span class="keywordflow">if</span>( thingTemplate == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>            <span class="comment">// don&#39;t create trees and shrubs if this is one and we have that option off</span></div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>            <span class="keywordflow">if</span>( thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>( <a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba408d50c624ea9e764c39a3c11206ebee">KINDOF_SHRUBBERY</a> ) &amp;&amp; !useTrees )</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span> </div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>            <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> pos = *pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a28c0b1eed74cc71be3e361444414a0bc">getLocation</a>();</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>            pos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> += <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getGroundHeight( pos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>, pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> );</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>            <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> angle = <a class="code hl_function" href="_game_common_8h.html#a6b82567dea14f55d2df66aece04b0510">normalizeAngle</a>(pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#adbb94f89e42f756f52a2625e4ee3eb61">getAngle</a>());</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>            <span class="keywordflow">if</span> (thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44badb098d27919361dd3aaabe859e1b0280">KINDOF_OPTIMIZED_TREE</a>)) {</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>                <span class="comment">// Opt trees and props just get drawables to tell the client about it, then deleted. jba [6/5/2003]</span></div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>                <span class="comment">// This way there is no logic object to slow down partition manager and core logic stuff.               </span></div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>                <a class="code hl_class" href="class_drawable.html">Drawable</a> *<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a> = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;newDrawable(thingTemplate, <a class="code hl_enumvalue" href="_drawable_8h.html#a526cc3a830b78c55ad850db018a40403aff2de2c3642428be0eaee54c1e72b9a0">DRAWABLE_STATUS_NONE</a>);</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>) {</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>                    <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>-&gt;setOrientation(angle);</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>                    <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>-&gt;setPosition( &amp;pos );</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>                    <a class="code hl_variable" href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a>-&gt;destroyDrawable(<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>);</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>                }</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>            }</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>        }</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>    } </div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>    <span class="keywordflow">else</span> </div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>    {</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span> </div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>        <span class="keywordflow">for</span> (pMapObj = <a class="code hl_function" href="class_map_object.html#a828e198ddc383dc90586fdab44065575">MapObject::getFirstMapObject</a>(); pMapObj; pMapObj = pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#ad84208bcfeba66aaf59e6412b282f235">getNext</a>()) </div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>        {</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>        </div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>            <span class="keywordflow">if</span> (pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a8e43ce383edfca39680e698ed3b93f57">getFlag</a>(<a class="code hl_enumvalue" href="_map_object_8h.html#af97f51458499ef9ba19c259cd65c0c55ad1b8795a3c7f204224fbce28ada13397">FLAG_BRIDGE_FLAGS</a>) || pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a8e43ce383edfca39680e698ed3b93f57">getFlag</a>(<a class="code hl_enumvalue" href="_map_object_8h.html#af97f51458499ef9ba19c259cd65c0c55a7b6db8bf7098b1e5ebf4790479d311ff">FLAG_ROAD_FLAGS</a>)) {</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>                <span class="keywordflow">continue</span>;   <span class="comment">// roads &amp; bridges are special cased in the terrain side.</span></div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>            }</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>            <span class="comment">//Kris: Added this function so that we can rename objects and preserve them. If the patch</span></div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>            <span class="comment">//      entry is missing for a particular unit, it doesn&#39;t get added to the world.</span></div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>            <a class="code hl_function" href="_game_logic_8cpp.html#a10e76c8febfd93e5cc2ae4258697e440">handleNameChange</a>( pMapObj );</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span> </div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>            <span class="comment">// get thing template based from map object name</span></div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>            thingTemplate = pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a43d8ebadf0ff0a0d5c5fbcf90acdbe31">getThingTemplate</a>();</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span> </div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>            <span class="comment">//</span></div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>            <span class="comment">// if no template continue, some map objects don&#39;t have thing templates like</span></div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>            <span class="comment">// lights (handled in the device).  Objects that are test objects have a </span></div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>            <span class="comment">// test string (designated with *** and the define TEST_STRING) and will </span></div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>            <span class="comment">// have temporary templates created &#39;on the fly&#39; during a </span></div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>            <span class="comment">// ThingFactory-&gt;findTemplate() call when loading from the map file</span></div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>            <span class="comment">//</span></div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>            <span class="keywordflow">if</span>( thingTemplate == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span> </div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>            <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> isBridgeLikeObject = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>            <span class="keywordflow">if</span> (thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#afb2fa64bc3507e5599a3cec2cbf85e2f">isBridge</a>()) isBridgeLikeObject = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>            <span class="keywordflow">if</span> (thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa985d5f63f13b78714246ab248d55b3f">KINDOF_WALK_ON_TOP_OF_WALL</a>)) isBridgeLikeObject = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>            <span class="keywordflow">if</span> (isBridgeLikeObject)</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>                <span class="keywordflow">continue</span>;   <span class="comment">// bridges have to be added earlier.</span></div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span> </div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>            <span class="comment">// don&#39;t create trees and shrubs if this is one and we have that option off</span></div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>            <span class="keywordflow">if</span>( thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>( <a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba408d50c624ea9e764c39a3c11206ebee">KINDOF_SHRUBBERY</a> ) &amp;&amp; !useTrees )</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span> </div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>            <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> pos = *pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a28c0b1eed74cc71be3e361444414a0bc">getLocation</a>();</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>            pos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> += <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getGroundHeight( pos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>, pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> );</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>            <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> angle = <a class="code hl_function" href="_game_common_8h.html#a6b82567dea14f55d2df66aece04b0510">normalizeAngle</a>(pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#adbb94f89e42f756f52a2625e4ee3eb61">getAngle</a>());</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>            <span class="keywordflow">if</span> (thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44badb098d27919361dd3aaabe859e1b0280">KINDOF_OPTIMIZED_TREE</a>)) {</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>                <span class="comment">// Opt trees and props just get drawables to tell the client about it, then deleted. jba [6/5/2003]</span></div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>                <span class="comment">// This way there is no logic object to slow down partition manager and core logic stuff.</span></div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>                </div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>                <a class="code hl_class" href="class_drawable.html">Drawable</a> *<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a> = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;newDrawable(thingTemplate, <a class="code hl_enumvalue" href="_drawable_8h.html#a526cc3a830b78c55ad850db018a40403aff2de2c3642428be0eaee54c1e72b9a0">DRAWABLE_STATUS_NONE</a>);</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>) {</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>                    <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>-&gt;setOrientation(angle);</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>                    <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>-&gt;setPosition( &amp;pos );</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span> </div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>                    <a class="code hl_variable" href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a>-&gt;destroyDrawable(<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>);</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>                }</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>            }</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span><span class="preprocessor">#if 1</span></div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>            <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> isProp = thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba6423a64f42ab2e86cf87533b395d021c">KINDOF_PROP</a>);</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>            <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> isFluff = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>            <span class="keywordflow">if</span> (thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa7f7eb0418b3065bbdd152f9ae454ab3">KINDOF_CLEARED_BY_BUILD</a>)) {</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>                <span class="keywordflow">if</span> (thingTemplate-&gt;<a class="code hl_function" href="class_thing_template.html#a7cfa59eb309ad5e9acb02cf21c152d6a">getFenceWidth</a>() == 0.0f) {</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>                    <span class="comment">// Objects that are cleared by building, but aren&#39;t fences, are fluff. jba. [7/14/2003]</span></div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>                    isFluff = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>                }</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>            }</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>            <span class="keywordflow">if</span> (isProp || (isFluff &amp;&amp; forceFluffToProp)) {</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>                <a class="code hl_variable" href="_terrain_visual_8h.html#ae0df8d943c5de97fa7786e3a64c604a7">TheTerrainVisual</a>-&gt;addProp(thingTemplate, &amp;pos, angle);</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>            }</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>            </div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>            <span class="comment">// Get the team information</span></div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a814161c97e5b497ab631333411e86a28">getProperties</a>()-&gt;<a class="code hl_function" href="class_dict.html#ae7bcd4b77d4a3786450f4453114c782b">getType</a>(TheKey_originalOwner) == <a class="code hl_enumvalue" href="class_dict.html#a359a727d62aeb4ed07136e2301104a99a4b920a83e4a740004815eed7247aa05c">Dict::DICT_ASCIISTRING</a>, (<span class="stringliteral">&quot;unit %s has no original owner specified (obsolete map file)\n&quot;</span>,pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a93586c6d08a76ab16102a72199730ff6">getName</a>().<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>()));</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> originalOwner = pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a814161c97e5b497ab631333411e86a28">getProperties</a>()-&gt;<a class="code hl_function" href="class_dict.html#af33cc96ce013f19a52e658222b7ef20d">getAsciiString</a>(TheKey_originalOwner);</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>            <a class="code hl_class" href="class_team.html">Team</a> *team = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;validateTeam(originalOwner);</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span> </div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>            <span class="comment">// create new object in the world</span></div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>            <a class="code hl_class" href="class_object.html">Object</a> *obj = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;newObject( thingTemplate, team ); <span class="comment">//, OBJECT_STATUS_LOADING_FROM_MAP );</span></div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>            <span class="keywordflow">if</span>( obj )</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>            {</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>                <span class="keywordflow">if</span>(pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a8e43ce383edfca39680e698ed3b93f57">getFlag</a>(<a class="code hl_enumvalue" href="_map_object_8h.html#af97f51458499ef9ba19c259cd65c0c55a77278735cf1f0142c2d12e698cde6a80">FLAG_DRAWS_IN_MIRROR</a>) || obj-&gt;<a class="code hl_function" href="class_thing.html#a7978985fe2e1e1b1b91bb822f62df5e9">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44bac5435ae11d322e3163ae71aa93db7d40">KINDOF_CAN_CAST_REFLECTIONS</a>)) </div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>                {</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>                    <a class="code hl_class" href="class_drawable.html">Drawable</a>* <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a> = obj-&gt;<a class="code hl_function" href="class_object.html#a1d1b6d9787b5fd41324930b71427fc95">getDrawable</a>();</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>                    <span class="keywordflow">if</span>(<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>)</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>                        <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>-&gt;setDrawableStatus( <a class="code hl_enumvalue" href="_drawable_8h.html#a526cc3a830b78c55ad850db018a40403a672d93ad5409fcb60966da42eae95625">DRAWABLE_STATUS_DRAWS_IN_MIRROR</a> );</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>                }</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>                obj-&gt;<a class="code hl_function" href="class_thing.html#a93da041338677d5058d9948cb424fb6f">setOrientation</a>(angle);</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>                obj-&gt;<a class="code hl_function" href="class_thing.html#a9fcbcf27ec45b3aa4883a03a56663bd9">setPosition</a>( &amp;pos );</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span> </div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>                <span class="comment">// Do this after positioning the object, because we may place objects in response to keys</span></div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>                <span class="comment">// in the map object properties.</span></div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>                <span class="comment">// update this object instance with properties from the map object</span></div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>                obj-&gt;<a class="code hl_function" href="class_object.html#a551e20771c012a247a605df8795a097a">updateObjValuesFromMapProperties</a>( pMapObj-&gt;<a class="code hl_function" href="class_map_object.html#a814161c97e5b497ab631333411e86a28">getProperties</a>() );</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span> </div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>                <a class="code hl_enumeration" href="_game_type_8h.html#ad3f93f81e65d56ae3f63a604a262a7c5">PathfindLayerEnum</a>  layer = <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getLayerForDestination(&amp;pos);</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>                obj-&gt;<a class="code hl_function" href="class_object.html#a5cc06ec18801e7edc6f92a4dbbff89e3">setLayer</a>(layer);</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>                <span class="comment">// Now onCreates were called at the constructor.  This magically created</span></div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>                <span class="comment">// thing needs to be considered as Built for Game specific stuff.</span></div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>                <span class="keywordflow">for</span> (<a class="code hl_class" href="class_behavior_module.html">BehaviorModule</a>** m = obj-&gt;<a class="code hl_function" href="class_object.html#ac31c977e6871a6a24c903af3a0210f26">getBehaviorModules</a>(); *m; ++m)</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>                {</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>                    <a class="code hl_class" href="class_create_module_interface.html">CreateModuleInterface</a>* create = (*m)-&gt;getCreate();</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>                    <span class="keywordflow">if</span> (!create)</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>                    create-&gt;<a class="code hl_function" href="class_create_module_interface.html#a87fb59cb29bead86fd61a4a8db938453">onBuildComplete</a>();</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>                }</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span> </div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>                <span class="comment">// Since the team now has members, activate it.</span></div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>                team-&gt;<a class="code hl_function" href="class_team.html#ac6c120cfa0b92e90b9d1c8c48139a0e0">setActive</a>();</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>                <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;pathfinder()-&gt;addObjectToPathfindMap( obj );</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span> </div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>            }  <span class="comment">// end if</span></div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>        </div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>            <span class="keywordflow">if</span>(timeGetTime() &gt; <a class="code hl_variable" href="_options_menu_8cpp.html#a38ec2e55ad51a493102f2d60343cfbec">timer</a> + 500)</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>            {</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>                <span class="keywordflow">if</span>(progressCount &lt; <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ac618133255d5254282192dbf3228e4eb">LOAD_PROGRESS_MAX_ALL_THE_FREAKN_OBJECTS</a>)</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>                    progressCount ++;</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>                <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(progressCount);</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>                <a class="code hl_variable" href="_options_menu_8cpp.html#a38ec2e55ad51a493102f2d60343cfbec">timer</a> = timeGetTime();</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>            }</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span> </div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>        }   <span class="comment">// for, loading map objects</span></div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span> </div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>    }  <span class="comment">// end if, not loading save game</span></div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span> </div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span><span class="preprocessor">    #ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>    <a class="code hl_function" href="timing_test_8cpp.html#afb66d20624c8efed5b7aa8f8287a096f">GetPrecisionTimer</a>(&amp;endTime64);</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>    sprintf(Buf,<span class="stringliteral">&quot;After loading objects=%f\n&quot;</span>,((<span class="keywordtype">double</span>)(endTime64-startTime64)/(<span class="keywordtype">double</span>)(freq64)*1000.0));</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;%s&quot;</span>, Buf));</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span><span class="preprocessor">    #endif</span></div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span> </div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>    progressCount = <a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ad51e96c1d571e42099fc49262e2de4ab">LOAD_PROGRESS_LOOP_INITIAL_NETWORK_BUILDINGS</a>;</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>    <span class="comment">// place initial network buildings/units</span></div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>    <span class="keywordflow">if</span> (game &amp;&amp; !loadingSaveGame)</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>    {</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>        {</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>            <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(i);</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>            </div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>            <span class="keywordflow">if</span> (!slot || !slot-&gt;<a class="code hl_function" href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">isOccupied</a>())</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>            </div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> playerName;</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>            playerName.<a class="code hl_function" href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">format</a>(<span class="stringliteral">&quot;player%d&quot;</span>, i);</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>            <a class="code hl_class" href="class_player.html">Player</a> *player = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;findPlayerWithNameKey(<a class="code hl_variable" href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a>-&gt;nameToKey(playerName));</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>            </div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>            <span class="keywordflow">if</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>() == <a class="code hl_enumvalue" href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3">PLAYERTEMPLATE_OBSERVER</a>)</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>            {</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>                slot-&gt;<a class="code hl_function" href="class_game_slot.html#a33de4f6783077e7b376774a01c1afa86">setPlayerTemplate</a>(0);</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>                <span class="keyword">const</span> <a class="code hl_class" href="class_player_template.html">PlayerTemplate</a> *pt = <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;findPlayerTemplate( <a class="code hl_variable" href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a>-&gt;nameToKey(<span class="stringliteral">&quot;FactionObserver&quot;</span>) );</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>                <span class="keywordflow">if</span> (pt)</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>                {</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>                    <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> j=0; j&lt;<a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;getPlayerTemplateCount(); ++j)</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>                    {</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>                        <span class="keywordflow">if</span> (pt == <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;getNthPlayerTemplate(j))</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>                        {</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>                            slot-&gt;<a class="code hl_function" href="class_game_slot.html#a33de4f6783077e7b376774a01c1afa86">setPlayerTemplate</a>(j);</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>                        }</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>                    }</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>                }</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Setting observer&#39;s playerTemplate to %d in slot %d\n&quot;</span>, slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>(), i));</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>            }</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>            {</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>                <span class="keyword">const</span> <a class="code hl_class" href="class_player_template.html">PlayerTemplate</a>* pt = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>                pt = <a class="code hl_variable" href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a>-&gt;getNthPlayerTemplate(slot-&gt;<a class="code hl_function" href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">getPlayerTemplate</a>());</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span> </div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>                <span class="comment">// Prevent from loading the disabled Generals, in case your game peer hacked their GUI.</span></div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>                <span class="comment">// The game will start, but the cheater will be instantly defeated because he has no troops.</span></div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>                <span class="comment">// This is also enforced at GUI setup (GUIUtil.cpp and UserPreferences.cpp).</span></div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>                <span class="comment">// @todo: unlock these when something rad happens</span></div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>                <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> disallowLockedGenerals = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>                <span class="keyword">const</span> <a class="code hl_class" href="class_general_persona.html">GeneralPersona</a> *general = <a class="code hl_variable" href="_challenge_generals_8h.html#a8af75611f9a13ced88b3dc2f8baa4ebe">TheChallengeGenerals</a>-&gt;getGeneralByTemplateName(pt-&gt;<a class="code hl_function" href="class_player_template.html#abd70efc4be868d8ac02493f54b46987f">getName</a>());</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>                <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> startsLocked = general ? !general-&gt;<a class="code hl_function" href="class_general_persona.html#a87a510feeeb6446ababb9bdbd1629568">isStartingEnabled</a>() : <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>                <span class="keywordflow">if</span> (disallowLockedGenerals &amp;&amp; startsLocked)</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span> </div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>                <span class="comment">// prevent from loading disallowed templates, in case your peer hacked their GUI.</span></div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>        </div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span> </div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>        <span class="comment">// So that the global flag for restricting factions to &quot;OLD&quot; is applied only in the appropriate context!</span></div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>        <span class="comment">// Trouble was that skirmish games would get no command centers upon start, if this was set true in a GameSpyMenu</span></div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>        <span class="keywordflow">if</span> ( <a class="code hl_function" href="class_game_logic.html#abd661c781e9c8b2f66536a0987a51183">isInInternetGame</a>() )</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>        {</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>                  <span class="keywordflow">if</span> ( game-&gt;<a class="code hl_function" href="class_game_info.html#ae98082cf410e55274a4879d1e4b92387">oldFactionsOnly</a>() &amp;&amp; !pt-&gt;<a class="code hl_function" href="class_player_template.html#a5f8632f1c6458b5de88e5f6af3ccfa91">isOldFaction</a>() )</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>        }</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span> </div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span> </div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span> </div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span> </div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>                placeNetworkBuildingsForPlayer(i, slot, player, pt);</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>            }</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span> </div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>            <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(progressCount++);</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span> </div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>        }</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>    }</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2c2fa8217cf7eb250c0f01137ed58c9d">LOAD_PROGRESS_POST_INITIAL_NETWORK_BUILDINGS</a>);</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span> </div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>    <span class="comment">// tell the client to pre-load some assets that we will use such as faction things we</span></div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>    <span class="comment">// will build and various damage states for all the structures on the map so that we</span></div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>    <span class="comment">// don&#39;t have big pauses when building those objects or switching to those states</span></div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>    <span class="keywordflow">if</span>( <a class="code hl_define" href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a>-&gt;m_preloadAssets )</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>    {</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a>-&gt;m_preloadEverything)</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>        {</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>            <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> td = <a class="code hl_enumvalue" href="_game_type_8h.html#a458f126bc12933b550a9292a42eb5b94a38230108079211c60cc174e37181b873">TIME_OF_DAY_FIRST</a>; td &lt; <a class="code hl_enumvalue" href="_game_type_8h.html#a458f126bc12933b550a9292a42eb5b94a2178e2ee077874b54c232b6f9d35ef80">TIME_OF_DAY_COUNT</a>; ++td)</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>                <a class="code hl_variable" href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a>-&gt;preloadAssets((<a class="code hl_enumeration" href="_game_type_8h.html#a458f126bc12933b550a9292a42eb5b94">TimeOfDay</a>)td);</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>        }</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>        {</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>            <a class="code hl_variable" href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a>-&gt;preloadAssets( <a class="code hl_define" href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a>-&gt;m_timeOfDay );</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>        }</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>    }</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span> </div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>    <span class="comment">//put this here somewhat randomly.</span></div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>    <a class="code hl_variable" href="_control_bar_8h.html#a2fc730445768f7da72770274a791997b">TheControlBar</a>-&gt;hideCommunicator( <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> );</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span> </div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4b6b4dae8f5dfd7ce8aa67be3bd7257f">LOAD_PROGRESS_POST_PRELOAD_ASSETS</a>);</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span> </div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>    <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;setAngleAndPitchToDefault();</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>    <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;setZoomToDefault();</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span> </div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a> )</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>        <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;initControls();</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span> </div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>    <span class="comment">// Note - WorldBuilderDoc.cpp also uses initial camera position, so if changed, update both.  jba</span></div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>    <span class="comment">// Note - We construct the multiplayer start spot name manually here, so change this if you</span></div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>    <span class="comment">//        change TheKey_Player_1_Start etc.  mdc</span></div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>    <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> startingCamName = <a class="code hl_variable" href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a>-&gt;keyToName(TheKey_InitialCameraPosition);</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>    <span class="keywordflow">if</span> (game)</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>    {</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>        <a class="code hl_class" href="class_game_slot.html">GameSlot</a> *slot = game-&gt;<a class="code hl_function" href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">getSlot</a>(localSlot);</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(slot, (<span class="stringliteral">&quot;Starting a LAN game without ourselves!&quot;</span>));</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>        </div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>        <span class="keywordflow">if</span> (slot-&gt;<a class="code hl_function" href="class_game_slot.html#a9b32369af7f5fd37c9eba1cbd30f4738">isHuman</a>())</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>        {</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>            <a class="code hl_union" href="union_int.html">Int</a> startPos = slot-&gt;<a class="code hl_function" href="class_game_slot.html#a345769e8467aeb9ace50242c5e01a758">getStartPos</a>();</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>            startingCamName.<a class="code hl_function" href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">format</a>(<span class="stringliteral">&quot;Player_%d_Start&quot;</span>, startPos+1); <span class="comment">// start pos waypoints are 1-based</span></div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Using %s as the multiplayer initial camera position\n&quot;</span>, startingCamName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>()));</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>        }</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>    }</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span> </div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a3b9f1b73e085fc1e9c3a4233d9fc8988">LOAD_PROGRESS_POST_STARTING_CAMERA</a>);</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span> </div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>    <a class="code hl_class" href="class_waypoint.html">Waypoint</a> *way = findNamedWaypoint(startingCamName);</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>    <span class="keywordflow">if</span> (way)</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>    {</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>        <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> pos = *way-&gt;<a class="code hl_function" href="class_waypoint.html#a69182fc2ac0a792b330e71407012ff6b">getLocation</a>();</div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>        <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;lookAt( &amp;pos );</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>    }</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>    {</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>        <span class="comment">// Just look somewhere.  lookAt does some terrain specific setup, so it is good</span></div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>        <span class="comment">// to call it.  jba</span></div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>        <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> pos;</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>        pos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a> = 50;</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>        pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> = 50;</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>        pos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> = 0;</div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>        <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;lookAt( &amp;pos );</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Failed to find initial camera position waypoint %s\n&quot;</span>, startingCamName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>()));</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>    }</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span> </div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>    <span class="comment">// Set up the camera height based on the map height &amp; globalData.</span></div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>    <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;initHeightForMap();</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>    <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;setAngleAndPitchToDefault();</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>    <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;setZoomToDefault();</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span> </div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>    <span class="comment">// update the loadscreen </span></div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a5fdb38ef82870c121ee3291dbfd32683">LOAD_PROGRESS_POST_STARTING_CAMERA_2</a>);</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span> </div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>    <span class="comment">// update partition info - We need to do the initial update so that it can be queried</span></div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>    <span class="comment">// during the first frame.  jba.</span></div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>    <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;update();</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span> </div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span><span class="preprocessor">    #ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>    <a class="code hl_function" href="timing_test_8cpp.html#afb66d20624c8efed5b7aa8f8287a096f">GetPrecisionTimer</a>(&amp;endTime64);</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>    sprintf(Buf,<span class="stringliteral">&quot;After partition manager update=%f\n&quot;</span>,((<span class="keywordtype">double</span>)(endTime64-startTime64)/(<span class="keywordtype">double</span>)(freq64)*1000.0));</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;%s&quot;</span>, Buf));</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span><span class="preprocessor">    #endif</span></div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span> </div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span> </div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>    <span class="comment">// final step, run newMap for all players</span></div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>    <span class="keywordflow">if</span>( loadingSaveGame == <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> )</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>        <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;newMap();</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span> </div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>    <span class="keywordflow">if</span> ( isChallengeCampaign )</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>    {</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>        <span class="comment">// Establish local player relationships with other teams as</span></div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>        <span class="comment">// they&#39;re set up for &quot;ThePlayer&quot; in challenge mode map.</span></div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>        <span class="comment">// Some designers have used &quot;ThePlayer&quot; as an empty player for Generals&#39; </span></div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>        <span class="comment">// Challenge maps which they reference in script and by which they set </span></div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>        <span class="comment">// player relationships.  The skirmish local player will receive these</span></div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>        <span class="comment">// relationships.  If there is no &quot;ThePlayer&quot;, we have to assume that</span></div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>        <span class="comment">// all players on the map are the local player&#39;s enemy, except neutral</span></div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>        <span class="comment">// and civilian players.</span></div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>        <a class="code hl_class" href="class_player.html">Player</a> *localPlayer = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getLocalPlayer();</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(localPlayer, (<span class="stringliteral">&quot;Local player has not been established for Challenge map.&quot;</span>));</div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>        <a class="code hl_class" href="class_player.html">Player</a> *placeholderThePlayer = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;findPlayerWithNameKey(<a class="code hl_function" href="_name_key_generator_8h.html#a0928e3a3f7bf4833b472cc839d35b1ae">NAMEKEY</a>(<span class="stringliteral">&quot;ThePlayer&quot;</span>));</div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(placeholderThePlayer, (<span class="stringliteral">&quot;Challenge maps without player \&quot;ThePlayer\&quot; assume that the local player is mutual enemies with all other players except the neutral and civilian players.&quot;</span>));</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span> </div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>        <span class="keywordflow">if</span> (placeholderThePlayer)</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>        {</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>            <a class="code hl_typedef" href="_game_common_8h.html#abe83707dc5d6c282831f5b9b5a652f7e">PlayerMaskType</a> thePlayerEnemysMask = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getPlayersWithRelationship(placeholderThePlayer-&gt;<a class="code hl_function" href="class_player.html#ab0e83f07d1399949f6162c31b7eda951">getPlayerIndex</a>(), <a class="code hl_enumvalue" href="_player_list_8h.html#a365ca4fd9d87866471e752a423d0dca8a8234e58111fd7351b16b5a20257761bb">ALLOW_ENEMIES</a>);</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>            <span class="keywordflow">while</span>( thePlayerEnemysMask )</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span>            {</div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>                <span class="comment">// set local player enemy relationships based on &quot;ThePlayer&quot; enemy relationships</span></div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>                <a class="code hl_class" href="class_player.html">Player</a> *thePlayerEnemy = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getEachPlayerFromMask(thePlayerEnemysMask);</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>                thePlayerEnemy-&gt;<a class="code hl_function" href="class_player.html#a055ea4f18367e339df53e90dd408acba">setPlayerRelationship</a>(localPlayer, <a class="code hl_enumvalue" href="_game_common_8h.html#a9d625fe894d9313ec78df1d78553f32ea34b0b186496be864abe64d22d95f7f22">ENEMIES</a>);</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>                localPlayer-&gt;<a class="code hl_function" href="class_player.html#a055ea4f18367e339df53e90dd408acba">setPlayerRelationship</a>(thePlayerEnemy, <a class="code hl_enumvalue" href="_game_common_8h.html#a9d625fe894d9313ec78df1d78553f32ea34b0b186496be864abe64d22d95f7f22">ENEMIES</a>);</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>            }</div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>        } </div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>        <span class="keywordflow">else</span> </div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>        {</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>            <span class="comment">// This map has no &quot;ThePlayer&quot; by which to model the local player&#39;s </span></div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>            <span class="comment">// relationships, so make assumptions.</span></div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>            <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> i = 0; i &lt; <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getPlayerCount(); i++)</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>            {</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>                <a class="code hl_enumeration" href="_game_common_8h.html#a9d625fe894d9313ec78df1d78553f32e">Relationship</a> rel = <a class="code hl_enumvalue" href="_game_common_8h.html#a9d625fe894d9313ec78df1d78553f32eaf46d14eb9d5d71afc9f6e747689fcb56">NEUTRAL</a>;</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>                <a class="code hl_class" href="class_player.html">Player</a> *thatPlayer = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getNthPlayer(i);</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>                <span class="keywordflow">if</span> (thatPlayer == localPlayer)</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>                {</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>                    rel = <a class="code hl_enumvalue" href="_game_common_8h.html#a9d625fe894d9313ec78df1d78553f32ead0a00add06fd8d61ef0f1f366bea2546">ALLIES</a>;</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>                } </div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (thatPlayer != <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getNeutralPlayer()</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>                    &amp;&amp; thatPlayer != <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;findPlayerWithNameKey(<a class="code hl_function" href="_name_key_generator_8h.html#a0928e3a3f7bf4833b472cc839d35b1ae">NAMEKEY</a>(<span class="stringliteral">&quot;PlyrCivilian&quot;</span>)))</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>                {</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>                    rel = <a class="code hl_enumvalue" href="_game_common_8h.html#a9d625fe894d9313ec78df1d78553f32ea34b0b186496be864abe64d22d95f7f22">ENEMIES</a>;</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>                } </div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>                thatPlayer-&gt;<a class="code hl_function" href="class_player.html#a055ea4f18367e339df53e90dd408acba">setPlayerRelationship</a>(localPlayer, rel);</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>                localPlayer-&gt;<a class="code hl_function" href="class_player.html#a055ea4f18367e339df53e90dd408acba">setPlayerRelationship</a>(thatPlayer, rel);</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>            }</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>        }</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>    }</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span> </div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span> </div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>    <span class="comment">// reset all the skill points in a single player game</span></div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>    <span class="keywordflow">if</span>(loadingSaveGame == <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> &amp;&amp; <a class="code hl_function" href="class_game_logic.html#a279e112e6bd4a5511b0c9938a073b711">isInSinglePlayerGame</a>())</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>    {</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>        <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> i=0; i&lt;<a class="code hl_enumvalue" href="_game_common_8h.html#a9c619318e7a6cdf38897480033ae8660aa33778b47f5c9394a6eb2c5164bcd3d5">MAX_PLAYER_COUNT</a>; ++i)</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>        {</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>            <a class="code hl_class" href="class_player.html">Player</a> *pPlayer = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getNthPlayer(i);</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>            <span class="keywordflow">if</span> (pPlayer &amp;&amp; pPlayer-&gt;<a class="code hl_function" href="class_player.html#ad8c11f93daa076d7ee15c3a6579fc8ea">getPlayerType</a>() != <a class="code hl_enumvalue" href="_game_common_8h.html#abe590f3c9109f404f003d5d7e4f0fccfa76e70a1268fda9d1b672cbf762b2f6e5">PLAYER_HUMAN</a>)</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>                pPlayer = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span> </div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>            <span class="keywordflow">if</span> (pPlayer)</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>            {</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>                pPlayer-&gt;<a class="code hl_function" href="class_player.html#a8b5ebaa7ac0053aa545d5dfa4be5bbcd">addSkillPoints</a>(m_rankPointsToAddAtGameStart);</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;GameLogic::startNewGame() - adding m_rankPointsToAddAtGameStart==%d to player %d(%ls)\n&quot;</span>,</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>                    m_rankPointsToAddAtGameStart, i, pPlayer-&gt;<a class="code hl_function" href="class_player.html#af4f86ea6bed3a1a4aec20dee8caf6c88">getPlayerDisplayName</a>().<a class="code hl_function" href="class_unicode_string.html#ab80e621deccff2aa3abfaebc99c5c170">str</a>()));</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>            }</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>        }</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>    }</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span> </div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>    <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(<a class="code hl_enumvalue" href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ae3e9c9d448da068dfa8d1b5bad24a4a8">LOAD_PROGRESS_END</a>);</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span> </div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="class_game_logic.html#a39053c1c656152b0735e162acb0d9486">isInMultiplayerGame</a>() &amp;&amp; <a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>)</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>    {</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>        <a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>-&gt;loadProgressComplete();</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>        <a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>-&gt;liteupdate();</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>    }</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span> </div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>    <span class="keywordflow">while</span>(!<a class="code hl_function" href="class_game_logic.html#a18ff9040f0bae50c985949d18946ffa0">isProgressComplete</a>())</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>    {</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>        <a class="code hl_function" href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">updateLoadProgress</a>(101); <span class="comment">// keep greater then 100</span></div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>        testTimeOut();</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>        Sleep(100);</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>    }</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span> </div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>    <span class="comment">// if we&#39;re in a load game, don&#39;t fade yet</span></div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>    <span class="keywordflow">if</span>( loadingSaveGame == <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> )</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>    {</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>        <a class="code hl_variable" href="_game_window_transitions_8h.html#adaf97fac49e60b8298db8a43a93a01da">TheTransitionHandler</a>-&gt;setGroup(<span class="stringliteral">&quot;FadeWholeScreen&quot;</span>);</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>        <span class="keywordflow">while</span>(!<a class="code hl_variable" href="_game_window_transitions_8h.html#adaf97fac49e60b8298db8a43a93a01da">TheTransitionHandler</a>-&gt;isFinished())</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>        {</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>            <a class="code hl_variable" href="_game_window_manager_8h.html#a801a121f8f968f2f359bb3492d2642f2">TheWindowManager</a>-&gt;update();</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>            <span class="keywordflow">if</span>(!<a class="code hl_variable" href="_game_window_transitions_8h.html#adaf97fac49e60b8298db8a43a93a01da">TheTransitionHandler</a>-&gt;isFinished())</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>            {</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>                <a class="code hl_variable" href="_display_8h.html#af0e94ff29c3f0eaefc701cb5c71479e6">TheDisplay</a>-&gt;draw();</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>                <a class="code hl_function" href="_f_p_u_control_8h.html#ac898939fad383b7b6cb129bdd759cf0f">setFPMode</a>();</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>                Sleep(33);</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>            }</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>            </div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>        }</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>    }</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span> </div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>    <span class="keywordflow">if</span>(m_loadScreen)</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>    {</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>        <a class="code hl_variable" href="_mouse_8h.html#a8874928c689c1d5e8446353aea92f975">TheMouse</a>-&gt;setVisibility(<a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span> </div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span><span class="comment">/*</span></div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span><span class="comment">        //</span></div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span><span class="comment">        // delete load screen only when not loading a save game, for save games we still</span></div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span><span class="comment">        // have more work to do and the load screen will be deleted elsewhere after</span></div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span><span class="comment">        // we&#39;re all done with the load game progress</span></div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span><span class="comment">        //</span></div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span><span class="comment">        if( loadingSaveGame == FALSE )</span></div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span><span class="comment">*/</span></div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>            <a class="code hl_function" href="class_game_logic.html#a3f7618eb22e8b5ad02b26ea3e2c10b5c">deleteLoadScreen</a>();</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span> </div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>    }</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>    </div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span><span class="preprocessor">    #ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>    <a class="code hl_function" href="timing_test_8cpp.html#afb66d20624c8efed5b7aa8f8287a096f">GetPrecisionTimer</a>(&amp;endTime64);</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>    sprintf(Buf,<span class="stringliteral">&quot;After delete load screen=%f\n&quot;</span>,((<span class="keywordtype">double</span>)(endTime64-startTime64)/(<span class="keywordtype">double</span>)(freq64)*1000.0));</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;%s&quot;</span>, Buf));</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span><span class="preprocessor">    #endif</span></div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span> </div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>    <span class="keywordflow">if</span>(m_gameMode == <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaa68174262e15b5ba918b03bb8b56b04f">GAME_SHELL</a>)</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>    {</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="_shell_8h.html#a2afa78b8811c042f7d61dcffa19fba95">TheShell</a>-&gt;getScreenCount() == 0)</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>            <a class="code hl_variable" href="_shell_8h.html#a2afa78b8811c042f7d61dcffa19fba95">TheShell</a>-&gt;push( <a class="code hl_class" href="class_ascii_string.html">AsciiString</a>(<span class="stringliteral">&quot;Menus/MainMenu.wnd&quot;</span>) );</div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="_shell_8h.html#a2afa78b8811c042f7d61dcffa19fba95">TheShell</a>-&gt;top())</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>        {</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>            <a class="code hl_variable" href="_shell_8h.html#a2afa78b8811c042f7d61dcffa19fba95">TheShell</a>-&gt;top()-&gt;hide(<a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>            <a class="code hl_variable" href="_shell_8h.html#a2afa78b8811c042f7d61dcffa19fba95">TheShell</a>-&gt;top()-&gt;bringForward();</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>        }</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>        <a class="code hl_function" href="_g_u_i_callbacks_8h.html#a235e9f10284bd5f5b07cadcfb4c12bf6">HideControlBar</a>();</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>    }</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>    {</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>        </div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span><span class="comment">//      TheShell-&gt;hideShell();</span></div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="_stats_collector_8h.html#a37ff26b22956783a5eb4aef155579af0">TheStatsCollector</a>)</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span>        {</div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>            <a class="code hl_variable" href="_stats_collector_8h.html#a37ff26b22956783a5eb4aef155579af0">TheStatsCollector</a>-&gt;reset();</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>        }</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_define" href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a>-&gt;m_playStats &gt; 0)</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>        {</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>            <a class="code hl_variable" href="_stats_collector_8h.html#a37ff26b22956783a5eb4aef155579af0">TheStatsCollector</a> = NEW <a class="code hl_class" href="class_stats_collector.html">StatsCollector</a>;</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>            <a class="code hl_variable" href="_stats_collector_8h.html#a37ff26b22956783a5eb4aef155579af0">TheStatsCollector</a>-&gt;reset();</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>        }</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span></div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span> </div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>        <span class="comment">// explicitly set the Control bar to Observer Mode</span></div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>        <span class="keywordflow">if</span>(m_gameMode == <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aac6fc8943a041e5db95cc3e770e862470">GAME_REPLAY</a> )</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>        {</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>            </div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>            <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;setLocalPlayer(<a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;findPlayerWithNameKey(<a class="code hl_variable" href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a>-&gt;nameToKey(<span class="stringliteral">&quot;ReplayObserver&quot;</span>)));</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>            <a class="code hl_variable" href="_radar_8h.html#af392ab5e5de710c69949cefe3f4676b6">TheRadar</a>-&gt;forceOn(<a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>            <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;refreshShroudForLocalPlayer();</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>            <a class="code hl_variable" href="_control_bar_8h.html#a2fc730445768f7da72770274a791997b">TheControlBar</a>-&gt;setControlBarSchemeByPlayer( <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getLocalPlayer());</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Start of a replay game %ls, %d\n&quot;</span>,<a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getLocalPlayer()-&gt;getPlayerDisplayName().str(), <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getLocalPlayer()-&gt;getPlayerIndex()));</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>        }</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>            <a class="code hl_variable" href="_control_bar_8h.html#a2fc730445768f7da72770274a791997b">TheControlBar</a>-&gt;setControlBarSchemeByPlayer(<a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getLocalPlayer());</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span><span class="comment">//      ShowControlBar();</span></div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>        </div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>    }</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>    <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;setOkToAdjustHeight(<a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span> </div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span><span class="comment">// If defined, the game times various units.</span></div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span><span class="preprocessor">#ifdef DO_UNIT_TIMINGS</span></div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>    g_UT_curThing = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;firstTemplate();</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>    g_UT_startTiming = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>    g_UT_gotUnit = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>    g_UT_timingLog = fopen(<span class="stringliteral">&quot;TimingLog.txt&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>);    </div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>    g_UT_commaLog = fopen(<span class="stringliteral">&quot;TimingCDL.txt&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>    fputs(<span class="stringliteral">&quot;Full,100*ms,NoPart-NoSpawn,,No Spawn,100*ms,Logic,100*ms,Thing,Model,Kind,Side,DrawCalls All,DrawCalls NoPart-NoSpawn,DrawCalls NoSpawn\n&quot;</span>, g_UT_commaLog); </div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span> </div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>    <span class="comment">// Turn off shadows</span></div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>    <a class="code hl_variable" href="_global_data_8h.html#af21446132278f7786d102327938763d2">TheWritableGlobalData</a>-&gt;m_useShadowVolumes = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>    <a class="code hl_variable" href="_global_data_8h.html#af21446132278f7786d102327938763d2">TheWritableGlobalData</a>-&gt;m_debugIgnoreAsserts = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span> </div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>    <span class="comment">// Just look somewhere.  lookAt does some terrain specific setup, so it is good</span></div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>    <span class="comment">// to call it.  jba</span></div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>    <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> thePos;</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>    thePos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a> = 50;</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>    thePos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> = 50;</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>    thePos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> = 0;</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>        <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;lookAt( &amp;thePos );</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span> </div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span> </div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>    <span class="comment">// @todo remove this hack</span></div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span><span class="comment">//  TheGlobalData-&gt;m_inGame = TRUE;</span></div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span> </div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>    <span class="comment">// If we are now starting a multiplayer or skirmish game, let us set the local players selectionto be the command center</span></div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>    <span class="comment">// We&#39;ll ask the Recorder, so we survive replays</span></div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;isMultiplayer() )</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>    {</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>        <span class="comment">// Iterate through each player&#39;s objects, and ask if the object </span></div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>        <span class="comment">//is a command center, and if so, select it for that player</span></div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>        <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> i = 0; i &lt; <a class="code hl_enumvalue" href="_game_common_8h.html#a9c619318e7a6cdf38897480033ae8660aa33778b47f5c9394a6eb2c5164bcd3d5">MAX_PLAYER_COUNT</a>; ++i) </div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>        {</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>            <a class="code hl_class" href="class_player.html">Player</a> *player = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getNthPlayer(i);</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>            <span class="keywordflow">if</span> (player &amp;&amp; player-&gt;<a class="code hl_function" href="class_player.html#a1189c38f2319c6d0272a482508d06b05">isPlayerActive</a>())</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>            {</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>                <span class="comment">// we need to iterate their objects, and select the first Command Center we find</span></div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>                <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> alreadyFound = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>                player-&gt;<a class="code hl_function" href="class_player.html#a965771701be0d9bdafdffe39c3b4e71d">iterateObjects</a>(findAndSelectCommandCenter, &amp;alreadyFound);</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>            }</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>        }</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>    }</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>    <a class="code hl_variable" href="_control_bar_8h.html#a2fc730445768f7da72770274a791997b">TheControlBar</a>-&gt;initSpecialPowershortcutBar(<a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getLocalPlayer());</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span> </div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>    <span class="keywordflow">if</span>(m_gameMode == <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaa68174262e15b5ba918b03bb8b56b04f">GAME_SHELL</a>)</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>    {</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>        <a class="code hl_function" href="_g_u_i_callbacks_8h.html#a235e9f10284bd5f5b07cadcfb4c12bf6">HideControlBar</a>();</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>    }</div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>    {</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>        <a class="code hl_function" href="_g_u_i_callbacks_8h.html#ad6aae74c82f2b64a900f5050a499f469">ShowControlBar</a>(<a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>    }</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span> </div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span><span class="preprocessor">#ifdef DO_UNIT_TIMINGS</span></div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>    <span class="comment">// Turn off the UI</span></div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>    <a class="code hl_function" href="_g_u_i_callbacks_8h.html#a235e9f10284bd5f5b07cadcfb4c12bf6">HideControlBar</a>();</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>    <a class="code hl_variable" href="_global_data_8h.html#af21446132278f7786d102327938763d2">TheWritableGlobalData</a>-&gt;m_loadScreenRender = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;    </div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>    </div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>    <span class="comment">// if we&#39;re in a gamespy game, mark us as playing</span></div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_buddy_thread_8h.html#a3d461c6ded3da3111657380a7732e71b">TheGameSpyBuddyMessageQueue</a> &amp;&amp; <a class="code hl_variable" href="_staging_room_game_info_8h.html#a5a7f6f896bca06403d708f72e912c05c">TheGameSpyGame</a> &amp;&amp; <a class="code hl_function" href="class_game_logic.html#abd661c781e9c8b2f66536a0987a51183">isInInternetGame</a>())</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>    {</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>        <a class="code hl_class" href="class_buddy_request.html">BuddyRequest</a> req;</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>        req.<a class="code hl_variable" href="class_buddy_request.html#ad3623210a69654248f082f98dc62dca9">buddyRequestType</a> = <a class="code hl_enumvalue" href="class_buddy_request.html#a4c88e57b2e0c98526ac4b9cb1606d1f9acf869c4f0c08c04706d640dc11124af5">BuddyRequest::BUDDYREQUEST_SETSTATUS</a>;</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>        req.<a class="code hl_variable" href="class_buddy_request.html#a517a70544621f9e16b296bbd07d02509">arg</a>.<a class="code hl_variable" href="class_buddy_request.html#ad3d0df4e47003727a428b12168b1b278">status</a>.status = GP_PLAYING;</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>        strcpy(req.<a class="code hl_variable" href="class_buddy_request.html#a517a70544621f9e16b296bbd07d02509">arg</a>.<a class="code hl_variable" href="class_buddy_request.html#ad3d0df4e47003727a428b12168b1b278">status</a>.statusString, <span class="stringliteral">&quot;Playing&quot;</span>);</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>        sprintf(req.<a class="code hl_variable" href="class_buddy_request.html#a517a70544621f9e16b296bbd07d02509">arg</a>.<a class="code hl_variable" href="class_buddy_request.html#ad3d0df4e47003727a428b12168b1b278">status</a>.locationString, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code hl_function" href="_thread_utils_8h.html#a0ac3f0d3c3ff1e719f4d40593d98644a">WideCharStringToMultiByte</a>(<a class="code hl_variable" href="_staging_room_game_info_8h.html#a5a7f6f896bca06403d708f72e912c05c">TheGameSpyGame</a>-&gt;getGameName().str()).c_str());</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>        <a class="code hl_variable" href="_buddy_thread_8h.html#a3d461c6ded3da3111657380a7732e71b">TheGameSpyBuddyMessageQueue</a>-&gt;addRequest(req);</div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>    }   </div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>    </div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>  <span class="keywordflow">if</span>( loadingSaveGame == <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> )</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>  {</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>    <span class="comment">// Drawables need to do some work on level start; give them a chance to do it</span></div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>    <a class="code hl_class" href="class_drawable.html">Drawable</a> * drawable = <a class="code hl_variable" href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a>-&gt;getDrawableList();</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>  </div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>    <span class="keywordflow">while</span> ( drawable != <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>    {</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>      drawable-&gt;<a class="code hl_function" href="class_drawable.html#ab92ffacaf5f1b28ed591abbef0598a18">onLevelStart</a>();</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>      drawable = drawable-&gt;<a class="code hl_function" href="class_drawable.html#a321ab53564ec72eed151e789734e871d">getNextDrawable</a>();</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>    }</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>  }</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>  </div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>    <span class="comment">//Added By Sadullah Nader</span></div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>    <span class="comment">//Added to fix the quit menu </span></div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span>    <span class="comment">//ReAllows quit menu to work during loading scene</span></div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>    <span class="comment">//setGameLoading(FALSE);</span></div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>    <a class="code hl_function" href="class_game_logic.html#ad9e803410ebd9db6df8da7c3dd27a1de">setLoadingMap</a>( <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> );</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span> </div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span><span class="preprocessor">#ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>    <a class="code hl_function" href="timing_test_8cpp.html#afb66d20624c8efed5b7aa8f8287a096f">GetPrecisionTimer</a>(&amp;endTime64);</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>    sprintf(Buf,<span class="stringliteral">&quot;Total startnewgame=%f\n&quot;</span>,((<span class="keywordtype">double</span>)(endTime64-startTime64)/(<span class="keywordtype">double</span>)(freq64)*1000.0));</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;%s&quot;</span>, Buf));</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span> </div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>    <span class="comment">//Assume that getting this far means we&#39;ve successfully entered an online game.</span></div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>    <span class="comment">//Add an additional disconnection to player stats in case he doesn&#39;t complete this game. -MW</span></div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_peer_defs_8h.html#aed3b185ffc93626cf677446b83c549b7">TheGameSpyInfo</a>)</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>        <a class="code hl_variable" href="_peer_defs_8h.html#aed3b185ffc93626cf677446b83c549b7">TheGameSpyInfo</a>-&gt;updateAdditionalGameSpyDisconnections(1);</div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span> </div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>  </div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>  <span class="keywordflow">if</span> ( <a class="code hl_function" href="class_game_logic.html#a8edd77410b1adede844e79fec01398aa">isInReplayGame</a>() &amp;&amp; <a class="code hl_variable" href="_in_game_u_i_8h.html#a0de3624c7699c1ad0dea332a3c44c931">TheInGameUI</a> &amp;&amp; <a class="code hl_variable" href="_game_engine_2_include_2_game_client_2_game_text_8h.html#a31e9c012208c1d10bb7f73848d34e5d3">TheGameText</a> )</div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>  {</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>        <a class="code hl_variable" href="_in_game_u_i_8h.html#a0de3624c7699c1ad0dea332a3c44c931">TheInGameUI</a>-&gt;message( <a class="code hl_variable" href="_game_engine_2_include_2_game_client_2_game_text_8h.html#a31e9c012208c1d10bb7f73848d34e5d3">TheGameText</a>-&gt;fetch( <span class="stringliteral">&quot;GUI:FastForwardInstructions&quot;</span> ) );</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>  }</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span> </div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span> </div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>}  <span class="comment">// end startNewGame</span></div>
</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span> </div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span><span class="comment">//-----------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span><span class="keyword">static</span> <span class="keywordtype">void</span> findAndSelectCommandCenter(<a class="code hl_class" href="class_object.html">Object</a> *obj, <span class="keywordtype">void</span>* alreadyFound)</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>{</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>    <span class="keywordflow">if</span> (!((*(<a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a>*)alreadyFound)) &amp;&amp; obj &amp;&amp; obj-&gt;<a class="code hl_function" href="class_thing.html#a7978985fe2e1e1b1b91bb822f62df5e9">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44bad02923ddccb6f02c0bb5e44678cd45ec">KINDOF_COMMANDCENTER</a>) )</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>    {</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>        ((*(<a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a>*)alreadyFound)) = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>        <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;selectObject(obj, <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, obj-&gt;<a class="code hl_function" href="class_object.html#a385c1cb6707129788e07e5e24568b6c4">getControllingPlayer</a>()-&gt;<a class="code hl_function" href="class_player.html#abc2ed87b6c05581e558b847857b6765d">getPlayerMask</a>(), obj-&gt;<a class="code hl_function" href="class_object.html#a455e7057ef0ad7f34470dbd10841fb3c">isLocallyControlled</a>());</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span> </div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>    }</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>}</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span><span class="comment">//-----------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span><span class="comment">//-----------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span> </div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span> </div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span> </div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span> </div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span> </div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen02391" data-start="{" data-end="}">
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"><a class="line" href="class_game_logic.html#a1b4ff734e63a1ed08f7699397e07514b"> 2391</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a1b4ff734e63a1ed08f7699397e07514b">GameLogic::loadMapINI</a>( <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> mapName )</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>{</div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span> </div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="_map_util_8h.html#a2f01cf10092dbdc0eeafefe3ea67cb18">TheMapCache</a>) {</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>        <span class="comment">// Need the map cache to get the map and user map directories.</span></div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>    }</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span> </div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>    <span class="keywordtype">char</span> filename[_MAX_PATH];</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>    <span class="keywordtype">char</span> fullFledgeFilename[_MAX_PATH];</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span> </div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>    memset(filename, 0, _MAX_PATH);</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>    strcpy(filename, mapName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>());</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span> </div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>    <span class="comment">// if map name begins with a &quot;SAVE_DIRECTORY\&quot;, then the map refers to a map</span></div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>    <span class="comment">// that has been extracted from a save game file ... in that case we need to get</span></div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>    <span class="comment">// the pristine map name string in order to manipulate and load the right map.ini</span></div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>    <span class="comment">// for that map from it&#39;s original location</span></div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_game_state_8h.html#a20058921fe5602a8f70b082e98b2aae2">TheGameState</a>-&gt;isInSaveDirectory(filename))</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>        strcpy( filename, <a class="code hl_variable" href="_game_state_8h.html#a20058921fe5602a8f70b082e98b2aae2">TheGameState</a>-&gt;getSaveGameInfo()-&gt;pristineMapName.str() );</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span> </div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>    <span class="comment">// sanity</span></div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>    <span class="keywordtype">int</span> length = strlen(filename);</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>    <span class="keywordflow">if</span> (length &lt; 4) { </div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>    }</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span> </div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>    <span class="comment">// back up over the &quot;.map&quot; extension and to the first directory separator</span></div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>    <span class="keywordtype">char</span> *extension = filename + length - 4;</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>    <span class="keywordflow">while</span> ((extension &gt; filename) &amp;&amp; (*extension != <span class="charliteral">&#39;\\&#39;</span>) &amp;&amp; (*extension != <span class="charliteral">&#39;/&#39;</span>)) {</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>        --extension;</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>    }</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>    *extension = 0;</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span> </div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span> </div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>    sprintf(fullFledgeFilename, <span class="stringliteral">&quot;%s\\map.ini&quot;</span>, filename);</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_system_8h.html#af52760c133123201b3c138b6542c88ed">TheFileSystem</a>-&gt;doesFileExist(fullFledgeFilename)) {</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Loading map.ini\n&quot;</span>));</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>        <a class="code hl_class" href="class_i_n_i.html">INI</a> ini;</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>        ini.<a class="code hl_function" href="class_i_n_i.html#a4895c47ddf2985ef600c112597649998">load</a>( <a class="code hl_class" href="class_ascii_string.html">AsciiString</a>(fullFledgeFilename), <a class="code hl_enumvalue" href="_game_engine_2_include_2_common_2_i_n_i_8h.html#a57a31fa9337c65e33e252ca1012eb504ab84c4bff7348781390e8c309b3553017">INI_LOAD_CREATE_OVERRIDES</a>, <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> );</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>    }</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span> </div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>    sprintf(fullFledgeFilename, <span class="stringliteral">&quot;%s\\solo.ini&quot;</span>, filename);</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_system_8h.html#af52760c133123201b3c138b6542c88ed">TheFileSystem</a>-&gt;doesFileExist(fullFledgeFilename)) {</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Loading solo.ini\n&quot;</span>));</div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>        <a class="code hl_class" href="class_i_n_i.html">INI</a> ini;</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>        ini.<a class="code hl_function" href="class_i_n_i.html#a4895c47ddf2985ef600c112597649998">load</a>( <a class="code hl_class" href="class_ascii_string.html">AsciiString</a>(fullFledgeFilename), <a class="code hl_enumvalue" href="_game_engine_2_include_2_common_2_i_n_i_8h.html#a57a31fa9337c65e33e252ca1012eb504ab84c4bff7348781390e8c309b3553017">INI_LOAD_CREATE_OVERRIDES</a>, <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> );</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>    }</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>    </div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>    <span class="comment">// No error here. There could&#39;ve just *not* been a map.ini file.</span></div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span> </div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>    <span class="comment">// now look for a string file</span></div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>    sprintf(fullFledgeFilename, <span class="stringliteral">&quot;%s\\map.str&quot;</span>, filename);</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span> </div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_file_system_8h.html#af52760c133123201b3c138b6542c88ed">TheFileSystem</a>-&gt;doesFileExist(fullFledgeFilename)) {</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>        <a class="code hl_variable" href="_game_engine_2_include_2_game_client_2_game_text_8h.html#a31e9c012208c1d10bb7f73848d34e5d3">TheGameText</a>-&gt;initMapStringFile(fullFledgeFilename);</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>    }</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span> </div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>    <span class="comment">// we want to do this before doing the actual map load!</span></div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="_display_8h.html#af0e94ff29c3f0eaefc701cb5c71479e6">TheDisplay</a>)</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>    {</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>        <span class="keyword">const</span> <span class="keywordtype">char</span>* ASSET_USAGE_FILE_NAME = <span class="stringliteral">&quot;AssetUsage.txt&quot;</span>;</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>        sprintf(fullFledgeFilename, <span class="stringliteral">&quot;%s\\%s&quot;</span>, filename, ASSET_USAGE_FILE_NAME);</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>        <span class="comment">// note: call this EVEN IF THE FILE IN QUESTION DOES NOT EXIST.</span></div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>        <a class="code hl_variable" href="_display_8h.html#af0e94ff29c3f0eaefc701cb5c71479e6">TheDisplay</a>-&gt;doSmartAssetPurgeAndPreload(fullFledgeFilename);</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>    }</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span> </div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span>}</div>
</div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span> </div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span><span class="comment">//DECLARE_PERF_TIMER(processDestroyList)</span></div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span><span class="keywordtype">void</span> GameLogic::processDestroyList( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>{</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>    <span class="comment">//USE_PERF_TIMER(processDestroyList)</span></div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span> </div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>    <span class="keywordflow">for</span>( <a class="code hl_typedef" href="_s_t_l_typedefs_8h.html#ad2c789ebd1e357c3b69d2dcf79ebd156">ObjectPointerListIterator</a> iterator = m_objectsToDestroy.begin(); iterator != m_objectsToDestroy.end(); iterator++ )</div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>    {</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>        <a class="code hl_class" href="class_object.html">Object</a>* currentObject = (*iterator);</div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span> </div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span><span class="preprocessor">#ifdef ALLOW_NONSLEEPY_UPDATES</span></div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span>        <span class="keywordflow">for</span> (std::list&lt;UpdateModulePtr&gt;::iterator it = m_normalUpdates.begin(); it != m_normalUpdates.end(); <span class="comment">/* nothing */</span>)</div>
<div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>        {</div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>            <span class="keywordflow">if</span> ((*it)-&gt;friend_getObject() == currentObject)</div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>            {</div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>                it = m_normalUpdates.erase(it);</div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>            }</div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>            {</div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span>                ++it;</div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>            }</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span>        }</div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span> </div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>        <span class="comment">/*</span></div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span><span class="comment">            this looks odd, but is necessary; since erasing a single entry can shuffle others in the list</span></div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span><span class="comment">            (in order to maintain its heap-ness), we must do two passes: one to find the updates for this</span></div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span><span class="comment">            object, another to actually erase &#39;em. </span></div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span><span class="comment">            </span></div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span><span class="comment">            (in case you&#39;re wondering: yes, this is still more efficient than just deleting them</span></div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span><span class="comment">            and rebalancing the entire heap afterwards, at least for real-world maps, since an individual</span></div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span><span class="comment">            rebalance is O(log N) and a full rebalance is O(N)... so unless you are deleting the majority</span></div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span><span class="comment">            of the objects in the world every frame, we come out well ahead this way.)</span></div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span><span class="comment">        */</span></div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span> </div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> MAX_SUO = 256;</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>        <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> sleepyUpdatesForThisObject[MAX_SUO];</div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>        <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> numSUO = 0;</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span> </div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>        <span class="keywordflow">for</span> (std::vector&lt;UpdateModulePtr&gt;::iterator it2 = m_sleepyUpdates.begin(); it2 != m_sleepyUpdates.end(); ++it2)</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>        {</div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>            <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> u = *it2;</div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>            <span class="keywordflow">if</span> (u-&gt;<a class="code hl_function" href="class_update_module.html#a4b721623b028ed8f213e7c10fb887dd3">friend_getObject</a>() == currentObject &amp;&amp; numSUO &lt; MAX_SUO)</div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>            {</div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>                sleepyUpdatesForThisObject[numSUO++] = u;</div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>            }</div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>        }</div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span> </div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>        <span class="keywordflow">for</span> (--numSUO; numSUO &gt;= 0; --numSUO)</div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span>        {</div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>            <span class="comment">// have to re-get idx each time since each call to erase might change others.</span></div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>            <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> idx = sleepyUpdatesForThisObject[numSUO]-&gt;<a class="code hl_function" href="class_update_module.html#a29a244154731002ae604872755bbe31a">friend_getIndexInLogic</a>();</div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(m_sleepyUpdates[idx] == sleepyUpdatesForThisObject[numSUO], (<span class="stringliteral">&quot;Hmm, expected update mismatch here&quot;</span>));</div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>            eraseSleepyUpdate(idx);</div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(sleepyUpdatesForThisObject[numSUO]-&gt;friend_getIndexInLogic() == -1, (<span class="stringliteral">&quot;Hmm, expected index to be -1 here&quot;</span>));</div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>        }</div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span> </div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span> </div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>        currentObject-&gt;<a class="code hl_function" href="class_object.html#a7c53b900c1a2fad0076a2cfd80a8f53f">removeFromList</a>(&amp;m_objList);<span class="comment">//remove from object list</span></div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span> </div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>        <span class="comment">// remove object from lookup table</span></div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>        <a class="code hl_function" href="class_game_logic.html#a96258c03c3a75335705345fa9de00df9">removeObjectFromLookupTable</a>( currentObject );</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span> </div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>        currentObject-&gt;<a class="code hl_function" href="class_object.html#a12a0ae5b7f0fbf915ba95bd4e5a85ab2">friend_deleteInstance</a>();<span class="comment">//actual delete</span></div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>    }</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span> </div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>    m_objectsToDestroy.clear();<span class="comment">//list full of bad pointers now, clear it.  If anyone&#39;s deletion resulted</span></div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>    <span class="comment">//in the request for a new deletion (sub-object), the new object was added to the end of this list.</span></div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>}</div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span> </div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span><span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen02540" data-start="{" data-end="}">
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"><a class="line" href="class_game_logic.html#aeed023c2695b71c013b20e9f15472faa"> 2540</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#aeed023c2695b71c013b20e9f15472faa">GameLogic::processCommandList</a>( <a class="code hl_class" href="class_command_list.html">CommandList</a> *list )</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>{</div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>    m_cachedCRCs.clear();</div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>    m_shouldValidateCRCs = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span> </div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>    <a class="code hl_class" href="class_game_message.html">GameMessage</a>* <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a>;</div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span> </div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span>    <span class="keywordflow">for</span>( <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a> = list-&gt;<a class="code hl_function" href="class_game_message_list.html#a2e694a9a973979d64f5093a8c8751f86">getFirstMessage</a>(); <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a>; <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a> = <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a>-&gt;next() )</div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>    {</div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span><span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(<a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a> != <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a> != (<a class="code hl_class" href="class_game_message.html">GameMessage</a>*)0xdeadbeef, (<span class="stringliteral">&quot;bad msg&quot;</span>));</div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>        <a class="code hl_function" href="class_game_logic.html#afb2f8a3fd6bb7d9fa507d0f8a5cd23ea">logicMessageDispatcher</a>( <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a>, <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> );</div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>    }</div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span> </div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>    <span class="keywordflow">if</span> (m_shouldValidateCRCs &amp;&amp; !<a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>-&gt;sawCRCMismatch())</div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>    {</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span>        <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> sawCRCMismatch = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>        <a class="code hl_union" href="union_int.html">Int</a> numPlayers = 0;</div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(<a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>, (<span class="stringliteral">&quot;No Network!&quot;</span>));</div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>)</div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>        {</div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>            <span class="keywordflow">for</span> (<a class="code hl_union" href="union_int.html">Int</a> i=0; i&lt;MAX_SLOTS; ++i)</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>            {</div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>-&gt;isPlayerConnected(i))</div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>                    ++numPlayers;</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>            }</div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span> </div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>            <span class="keywordflow">if</span> (m_cachedCRCs.size() &lt; numPlayers)</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>            {</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>((<span class="stringliteral">&quot;Not enough CRCs!&quot;</span>));</div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>                sawCRCMismatch = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span>            }</div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>            {</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span>                <span class="comment">//DEBUG_LOG((&quot;Comparing %d CRCs on frame %d\n&quot;, m_cachedCRCs.size(), m_frame));</span></div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>                std::map&lt;Int, UnsignedInt&gt;::const_iterator crcIt = m_cachedCRCs.begin();</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>                <a class="code hl_union" href="union_int.html">Int</a> validatorCRC = crcIt-&gt;second;</div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>                <span class="comment">//DEBUG_LOG((&quot;Validator CRC from player %d is %8.8X\n&quot;, crcIt-&gt;first, validatorCRC));</span></div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>                <span class="keywordflow">while</span> (++crcIt != m_cachedCRCs.end())</div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>                {</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>                    <a class="code hl_union" href="union_int.html">Int</a> validatedCRC = crcIt-&gt;second;</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span>                    <span class="comment">//DEBUG_LOG((&quot;CRC to validate is from player %d: %8.8X\n&quot;, crcIt-&gt;first, validatedCRC));</span></div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>                    <span class="keywordflow">if</span> (validatorCRC != validatedCRC)</div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>                    {</div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>                        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>((<span class="stringliteral">&quot;CRC mismatch!&quot;</span>));</div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>                        sawCRCMismatch = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>                    }</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>                }</div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span>            }</div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span>        }</div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span> </div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span>        <span class="keywordflow">if</span> (sawCRCMismatch)</div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>        {</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span><span class="preprocessor">#ifdef DEBUG_LOGGING</span></div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;CRC Mismatch - saw %d CRCs from %d players\n&quot;</span>, m_cachedCRCs.size(), numPlayers));</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>            <span class="keywordflow">for</span> (std::map&lt;Int, UnsignedInt&gt;::const_iterator crcIt = m_cachedCRCs.begin(); crcIt != m_cachedCRCs.end(); ++crcIt)</div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>            {</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>                <a class="code hl_class" href="class_player.html">Player</a> *player = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getNthPlayer(crcIt-&gt;first);</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;CRC from player %d (%ls) = %X\n&quot;</span>, crcIt-&gt;first,</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>                    player?player-&gt;<a class="code hl_function" href="class_player.html#af4f86ea6bed3a1a4aec20dee8caf6c88">getPlayerDisplayName</a>().<a class="code hl_function" href="class_unicode_string.html#ab80e621deccff2aa3abfaebc99c5c170">str</a>():L<span class="stringliteral">&quot;&lt;NONE&gt;&quot;</span>, crcIt-&gt;second));</div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>            }</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span><span class="preprocessor">#endif DEBUG_LOGGING</span></div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>            <a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>-&gt;setSawCRCMismatch();</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>        }</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>    }</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span> </div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>}  <span class="comment">// end processCommandList</span></div>
</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span> </div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen02611" data-start="{" data-end="}">
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"><a class="line" href="class_game_logic.html#a60eafce8ea2554e2a18193d302ef3d01"> 2611</a></span><a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> <a class="code hl_function" href="class_game_logic.html#a60eafce8ea2554e2a18193d302ef3d01">GameLogic::isIntroMoviePlaying</a>()</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>{</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>    <span class="keywordflow">return</span> m_startNewGame &amp;&amp; <a class="code hl_variable" href="_display_8h.html#af0e94ff29c3f0eaefc701cb5c71479e6">TheDisplay</a>-&gt;isMoviePlaying();</div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>}</div>
</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span> </div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen02619" data-start="{" data-end="}">
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"><a class="line" href="class_game_logic.html#a43367bf5405f3413e49de58ffe619c25"> 2619</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a43367bf5405f3413e49de58ffe619c25">GameLogic::selectObject</a>(<a class="code hl_class" href="class_object.html">Object</a> *obj, <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> createNewSelection, <a class="code hl_typedef" href="_game_common_8h.html#abe83707dc5d6c282831f5b9b5a652f7e">PlayerMaskType</a> playerMask, <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> affectClient)</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>{</div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>    <span class="keywordflow">if</span> (!obj) </div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>    {</div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>    }</div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span> </div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>    <span class="keywordflow">if</span> (!obj-&gt;<a class="code hl_function" href="class_object.html#a825a65435a8edc9a9176522bc4111d21">isMassSelectable</a>() &amp;&amp; !createNewSelection) </div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span>    {</div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;GameLogic::selectObject() - Object attempted to be added to selection, but isn&#39;t mass-selectable.\n&quot;</span>));</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>    }</div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span> </div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>    <span class="keywordflow">while</span>( playerMask ) </div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>    {</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>        <a class="code hl_class" href="class_player.html">Player</a> *player = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getEachPlayerFromMask(playerMask);</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>        <span class="keywordflow">if</span>( !player ) </div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>        {</div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>        }</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span> </div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>        <a class="code hl_class" href="class_a_i_group.html">AIGroup</a> *group = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a>(( <span class="stringliteral">&quot;Creating AIGroup in GameLogic::selectObject()\n&quot;</span> ));</div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>        group = <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;createGroup();</div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>        group-&gt;<a class="code hl_function" href="class_a_i_group.html#abfc7b602502e699fc0df3cf545102a12">add</a>(obj);</div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span> </div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>        <span class="comment">// add all selected agents to the AI group</span></div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>        <span class="keywordflow">if</span> (createNewSelection) </div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>        {</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>            player-&gt;<a class="code hl_function" href="class_player.html#a4527b616c20539cd97695ebb016370c8">setCurrentlySelectedAIGroup</a>(group);</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>        } </div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>        <span class="keywordflow">else</span> </div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>        {</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>            player-&gt;<a class="code hl_function" href="class_player.html#a35d214720d51f6897d172a6086110098">addAIGroupToCurrentSelection</a>(group);</div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>        }</div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span> </div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>        <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;destroyGroup(group);</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span> </div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>        <span class="keywordflow">if</span>( affectClient ) </div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>        {</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>            <a class="code hl_class" href="class_drawable.html">Drawable</a> *<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a> = obj-&gt;<a class="code hl_function" href="class_object.html#a1d1b6d9787b5fd41324930b71427fc95">getDrawable</a>();</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a> ) </div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>            {</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>                <a class="code hl_variable" href="_in_game_u_i_8h.html#a0de3624c7699c1ad0dea332a3c44c931">TheInGameUI</a>-&gt;selectDrawable(<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>);</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>            }</div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>        }</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>    }</div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>}</div>
</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span> </div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen02670" data-start="{" data-end="}">
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"><a class="line" href="class_game_logic.html#ad2e016ba1b3054fb7c1e25ef15830bd0"> 2670</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#ad2e016ba1b3054fb7c1e25ef15830bd0">GameLogic::deselectObject</a>(<a class="code hl_class" href="class_object.html">Object</a> *obj, <a class="code hl_typedef" href="_game_common_8h.html#abe83707dc5d6c282831f5b9b5a652f7e">PlayerMaskType</a> playerMask, <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> affectClient)</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>{</div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>    <span class="keywordflow">if</span> (!obj) {</div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>    }</div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span> </div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>    <span class="keywordflow">while</span> (playerMask) {</div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>        <a class="code hl_class" href="class_player.html">Player</a> *player = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getEachPlayerFromMask(playerMask);</div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>        <span class="keywordflow">if</span> (!player) {</div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>        }</div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span> </div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>        <a class="code hl_class" href="class_a_i_group.html">AIGroup</a> *group = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a>(( <span class="stringliteral">&quot;Removing a unit from a selected group in GameLogic::deselectObject()\n&quot;</span> ));</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span>        group = <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;createGroup();</div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>        player-&gt;<a class="code hl_function" href="class_player.html#a01de9a4ddde29da6e22a1fba4987d4ce">getCurrentSelectionAsAIGroup</a>(group);</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>        </div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>        <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> deleted = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>        <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> actuallyRemoved = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>        </div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>        <span class="keywordflow">if</span> (group) {</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>            deleted = group-&gt;<a class="code hl_function" href="class_a_i_group.html#a358e8392e3575db3fb5edd177fe040c9">remove</a>(obj);</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>            actuallyRemoved = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>        }</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>        </div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>        <span class="keywordflow">if</span> (actuallyRemoved) {</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>            <span class="comment">// Set this to be the currently selected group.</span></div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>            <span class="keywordflow">if</span> (!deleted) {</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>                player-&gt;<a class="code hl_function" href="class_player.html#a4527b616c20539cd97695ebb016370c8">setCurrentlySelectedAIGroup</a>(group);</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>                <span class="comment">// Then, cleanup the group.</span></div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>                <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;destroyGroup(group);</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>                <span class="comment">// NULL will clear the group.</span></div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>                player-&gt;<a class="code hl_function" href="class_player.html#a4527b616c20539cd97695ebb016370c8">setCurrentlySelectedAIGroup</a>(<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>            }</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span> </div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>            <span class="keywordflow">if</span> (affectClient) {</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>                <a class="code hl_class" href="class_drawable.html">Drawable</a> *<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a> = obj-&gt;<a class="code hl_function" href="class_object.html#a1d1b6d9787b5fd41324930b71427fc95">getDrawable</a>();</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>) {</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>                    <a class="code hl_variable" href="_in_game_u_i_8h.html#a0de3624c7699c1ad0dea332a3c44c931">TheInGameUI</a>-&gt;deselectDrawable(<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>);</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>                }</div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>            }</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>        }</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>    }</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>}</div>
</div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span> </div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span><span class="keyword">inline</span> <span class="keywordtype">void</span> GameLogic::validateSleepyUpdate()<span class="keyword"> const</span></div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span><span class="keyword"></span>{</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span><span class="comment">// pretty slow, so do only for DEBUG for now. turn on if you suspect wonkiness.</span></div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span><span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span><span class="preprocessor">    #define SLEEPY_DEBUG</span></div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span><span class="preprocessor">#ifdef SLEEPY_DEBUG</span></div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span>    <span class="keywordtype">int</span> sz = m_sleepyUpdates.size();</div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>    <span class="keywordflow">if</span> (sz == 0)</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span> </div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>    <span class="keywordtype">int</span> i;</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>    <span class="comment">//DEBUG_LOG((&quot;\n\n&quot;));</span></div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>    <span class="comment">//for (i = 0; i &lt; sz; ++i)</span></div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>    <span class="comment">//{</span></div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>    <span class="comment">//  DEBUG_LOG((&quot;u %04d: %08lx %08lx\n&quot;,i,m_sleepyUpdates[i],m_sleepyUpdates[i]-&gt;friend_getNextCallFrame()));</span></div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>    <span class="comment">//}</span></div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span>    <span class="keywordflow">for</span> (i = 0; i &lt; sz; ++i)</div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>    {</div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(m_sleepyUpdates[i]-&gt;friend_getIndexInLogic() == i, (<span class="stringliteral">&quot;index mismatch: expected %d, got %d\n&quot;</span>,i,m_sleepyUpdates[i]-&gt;friend_getIndexInLogic()));</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>        <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> pri = m_sleepyUpdates[i]-&gt;friend_getPriority();</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>        <span class="keywordflow">if</span> (i &gt; 0)</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>        {</div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>            <a class="code hl_union" href="union_int.html">Int</a> i0 = (i+1)/2-1;</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>            <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> pri0 = m_sleepyUpdates[i0]-&gt;friend_getPriority();</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(pri &gt;= pri0, (<span class="stringliteral">&quot;sleepyUpdates are munged (0)&quot;</span>));</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>        }</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>        <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> i1 = 2*(i+1)-1;</div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>        <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> i2 = 2*(i+1);</div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>        <span class="keywordflow">if</span> (i1 &lt; sz)</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>        {</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>            <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> pri1 = m_sleepyUpdates[i1]-&gt;friend_getPriority();</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(pri &lt;= pri1, (<span class="stringliteral">&quot;sleepyUpdates are munged (1)&quot;</span>));</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>        }</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>        <span class="keywordflow">if</span> (i2 &lt; sz)</div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>        {</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>            <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> pri2 = m_sleepyUpdates[i2]-&gt;friend_getPriority();</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(pri &lt;= pri2, (<span class="stringliteral">&quot;sleepyUpdates are munged (2)&quot;</span>));</div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span>        }</div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span>    }</div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>}</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span> </div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span><span class="keywordtype">void</span> GameLogic::eraseSleepyUpdate(<a class="code hl_union" href="union_int.html">Int</a> i)</div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>{</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>    <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(SleepyMaintenance)</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span> </div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(i &gt;= 0 &amp;&amp; i &lt; m_sleepyUpdates.size(), (<span class="stringliteral">&quot;bad sleepy idx&quot;</span>));</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span> </div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>    <span class="comment">// swap with the final item, toss the final item, then rebalance</span></div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>    m_sleepyUpdates[i]-&gt;friend_setIndexInLogic(-1);</div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span> </div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>    <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> <span class="keyword">final</span> = m_sleepyUpdates.size() - 1;</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>    <span class="keywordflow">if</span> (i &lt; <span class="keyword">final</span>)</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>    {</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>        m_sleepyUpdates[i] = m_sleepyUpdates[<span class="keyword">final</span>];</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>        m_sleepyUpdates[i]-&gt;friend_setIndexInLogic(i);</div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>        m_sleepyUpdates.pop_back();</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>        rebalanceSleepyUpdate(i);</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>    }</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>    {</div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>        m_sleepyUpdates.pop_back();</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>    }</div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>}</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span> </div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen02785" data-start="{" data-end="}">
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#a907454c8770ffb3f895115a8059490cd"> 2785</a></span><span class="keyword">inline</span> <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> <a class="code hl_function" href="_game_logic_8cpp.html#a907454c8770ffb3f895115a8059490cd">isLowerPriority</a>(<span class="keyword">const</span> <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> a, <span class="keyword">const</span> <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> b)</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>{</div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>    <span class="comment">// return true iff a is lower pri than b.</span></div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>    <span class="comment">// remember: lower ordinal value means higher priority.</span></div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>    <span class="comment">// therefore, higher ordinal value means lower priority.</span></div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(a &amp;&amp; b, (<span class="stringliteral">&quot;these may no longer be null&quot;</span>));</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> f1 = a-&gt;<a class="code hl_function" href="class_update_module.html#a751c222a6cf7ab056509da1008c7bca0">friend_getPriority</a>();</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> f2 = b-&gt;<a class="code hl_function" href="class_update_module.html#a751c222a6cf7ab056509da1008c7bca0">friend_getPriority</a>();</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>    <span class="keywordflow">return</span> f1 &gt; f2;</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>}</div>
</div>
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"> 2795</span> </div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span><a class="code hl_union" href="union_int.html">Int</a> GameLogic::rebalanceParentSleepyUpdate(<a class="code hl_union" href="union_int.html">Int</a> i)</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>{</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>    <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(SleepyMaintenance)</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span> </div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(i &gt;= 0 &amp;&amp; i &lt; m_sleepyUpdates.size(), (<span class="stringliteral">&quot;bad sleepy idx&quot;</span>));</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span> </div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>    <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> parent = ((i+1)&gt;&gt;1)-1;</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span>    <span class="keywordflow">while</span> (parent &gt;= 0 &amp;&amp; <a class="code hl_function" href="_game_logic_8cpp.html#a907454c8770ffb3f895115a8059490cd">isLowerPriority</a>(m_sleepyUpdates[parent], m_sleepyUpdates[i]))</div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span>    {</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>        <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> a = m_sleepyUpdates[parent];</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>        <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> b = m_sleepyUpdates[i];</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span> </div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>        m_sleepyUpdates[i] = a;</div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span>        m_sleepyUpdates[parent] = b;</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span> </div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>        a-&gt;<a class="code hl_function" href="class_update_module.html#ac584fba98913584d40e64a90cb878487">friend_setIndexInLogic</a>(i);</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>        b-&gt;<a class="code hl_function" href="class_update_module.html#ac584fba98913584d40e64a90cb878487">friend_setIndexInLogic</a>(parent);</div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span> </div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>        i = parent;</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>        parent = ((parent+1)&gt;&gt;1)-1;</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>    }</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span> </div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>    <span class="keywordflow">return</span> i;</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>}</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span> </div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span><a class="code hl_union" href="union_int.html">Int</a> GameLogic::rebalanceChildSleepyUpdate(<a class="code hl_union" href="union_int.html">Int</a> i)</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>{</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>    <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(SleepyMaintenance)</div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span> </div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(i &gt;= 0 &amp;&amp; i &lt; m_sleepyUpdates.size(), (<span class="stringliteral">&quot;bad sleepy idx&quot;</span>));</div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span> </div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span><span class="comment">// this function gets the brunt of the work (we frequently</span></div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span><span class="comment">// balance down, not up), so this one is hand-unrolled for</span></div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span><span class="comment">// max efficiency. I have left the pristine non-unrolled</span></div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span><span class="comment">// version present for clarity. (Yes, this is worth doing.) (srj) </span></div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span><span class="preprocessor">#if 1</span></div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>    <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a>* pI = &amp;m_sleepyUpdates[i];</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span> </div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>    <span class="comment">// our children are i*2 and i*2+1</span></div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>  <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> child = ((i+1)&lt;&lt;1)-1;</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>    <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a>* pChild = &amp;m_sleepyUpdates[child];</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>    <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a>* pSZ = &amp;m_sleepyUpdates[m_sleepyUpdates.size()]; <span class="comment">// yes, this is off the end.</span></div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span> </div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>  <span class="keywordflow">while</span> (pChild &lt; pSZ) </div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span>    {</div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>        <span class="comment">// choose the higher-priority of the two children; we must be higher-pri than that.</span></div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>        <span class="keywordflow">if</span> (pChild &lt; pSZ-1 &amp;&amp; <a class="code hl_function" href="_game_logic_8cpp.html#a907454c8770ffb3f895115a8059490cd">isLowerPriority</a>(*pChild, *(pChild+1)))</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>        {</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>      ++pChild;</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>            ++child;</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>        }</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span> </div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span>        <span class="comment">// if we&#39;re higher-pri than our children, we&#39;re done.</span></div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="_game_logic_8cpp.html#a907454c8770ffb3f895115a8059490cd">isLowerPriority</a>(*pI, *pChild))</div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>        {</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>        }</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span> </div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>        <span class="comment">// doh. swap with the highest-pri child we have.</span></div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>        <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> a = *pChild;</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>        <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> b = *pI;</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span> </div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span>        *pI = a;</div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>        *pChild = b;</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span> </div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>        a-&gt;<a class="code hl_function" href="class_update_module.html#ac584fba98913584d40e64a90cb878487">friend_setIndexInLogic</a>(i);</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span>        b-&gt;<a class="code hl_function" href="class_update_module.html#ac584fba98913584d40e64a90cb878487">friend_setIndexInLogic</a>(child);</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span> </div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>        i = child;</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>        pI = pChild;</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span> </div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>        child = ((i+1)&lt;&lt;1)-1;</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>        pChild = &amp;m_sleepyUpdates[child];</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>  }</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>    <span class="comment">// our children are i*2 and i*2+1</span></div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>    <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> sz = m_sleepyUpdates.size();</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>  <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> child = ((i+1)&lt;&lt;1)-1;</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>  <span class="keywordflow">while</span> (child &lt; sz) </div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>    {</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span>        <span class="comment">// choose the higher-priority of the two children; we must be higher-pri than that.</span></div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>        <span class="keywordflow">if</span> (child &lt; sz-1 &amp;&amp; <a class="code hl_function" href="_game_logic_8cpp.html#a907454c8770ffb3f895115a8059490cd">isLowerPriority</a>(m_sleepyUpdates[child], m_sleepyUpdates[child+1]))</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>      ++child;</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>        </div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>        <span class="comment">// if we&#39;re higher-pri than our children, we&#39;re done.</span></div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="_game_logic_8cpp.html#a907454c8770ffb3f895115a8059490cd">isLowerPriority</a>(m_sleepyUpdates[i], m_sleepyUpdates[child]))</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>        {</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>        }</div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span> </div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>        <span class="comment">// doh. swap with the highest-pri child we have.</span></div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>        <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> a = m_sleepyUpdates[child];</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>        <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> b = m_sleepyUpdates[i];</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span> </div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>        m_sleepyUpdates[i] = a;</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>        m_sleepyUpdates[child] = b;</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span> </div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>        a-&gt;<a class="code hl_function" href="class_update_module.html#ac584fba98913584d40e64a90cb878487">friend_setIndexInLogic</a>(i);</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>        b-&gt;<a class="code hl_function" href="class_update_module.html#ac584fba98913584d40e64a90cb878487">friend_setIndexInLogic</a>(child);</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>        i = child;</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>        child = ((i+1)&lt;&lt;1)-1;</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>  }</div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>    <span class="keywordflow">return</span> i;</div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>}</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span> </div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span><span class="keywordtype">void</span> GameLogic::rebalanceSleepyUpdate(<a class="code hl_union" href="union_int.html">Int</a> i)</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>{</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span>    <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(SleepyMaintenance)</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span> </div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span>    i = rebalanceParentSleepyUpdate(i);</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>    i = rebalanceChildSleepyUpdate(i);</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>}</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span> </div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span><span class="keywordtype">void</span> GameLogic::remakeSleepyUpdate()</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>{</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>    <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(SleepyMaintenance)</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span> </div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>    <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> parent = m_sleepyUpdates.size() / 2;</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>  <span class="keywordflow">while</span> (<span class="keyword">true</span>) </div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>    {</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>    rebalanceChildSleepyUpdate(parent);</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>    <span class="keywordflow">if</span> (parent == 0)</div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>    --parent;</div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>  }</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span> </div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span>    validateSleepyUpdate();</div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>}</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span> </div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span><span class="keywordtype">void</span> GameLogic::pushSleepyUpdate(<a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> u)</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>{</div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span>    <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(SleepyMaintenance)</div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span> </div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(u != <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<span class="stringliteral">&quot;You may not pass null for sleepy update info&quot;</span>));</div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span> </div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>    m_sleepyUpdates.push_back(u);</div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>    u-&gt;<a class="code hl_function" href="class_update_module.html#ac584fba98913584d40e64a90cb878487">friend_setIndexInLogic</a>(m_sleepyUpdates.size() - 1);</div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>    </div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>    rebalanceParentSleepyUpdate(m_sleepyUpdates.size()-1);</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span>}</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span> </div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span><a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> GameLogic::peekSleepyUpdate()<span class="keyword"> const</span></div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span><span class="keyword"></span>{</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>    <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(SleepyMaintenance)</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span> </div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>    <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> u = m_sleepyUpdates.front();</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(u-&gt;<a class="code hl_function" href="class_update_module.html#a29a244154731002ae604872755bbe31a">friend_getIndexInLogic</a>() == 0, (<span class="stringliteral">&quot;index mismatch: expected %d, got %d\n&quot;</span>,0,u-&gt;<a class="code hl_function" href="class_update_module.html#a29a244154731002ae604872755bbe31a">friend_getIndexInLogic</a>()));</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>    <span class="keywordflow">return</span> u;</div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>}</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span> </div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span><span class="keywordtype">void</span> GameLogic::popSleepyUpdate()</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>{</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>    <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(SleepyMaintenance)</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span> </div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>    <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> sz = m_sleepyUpdates.size();</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>    <span class="keywordflow">if</span> (sz == 0)</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>    {</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>((<span class="stringliteral">&quot;should not happen&quot;</span>));</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span>    }</div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span> </div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>    m_sleepyUpdates[0]-&gt;friend_setIndexInLogic(-1);</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>    <span class="keywordflow">if</span> (sz &gt; 1)</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>    {</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>        m_sleepyUpdates[0] = m_sleepyUpdates[sz-1];</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>        m_sleepyUpdates[0]-&gt;friend_setIndexInLogic(0);</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>        m_sleepyUpdates.pop_back();</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span>        rebalanceChildSleepyUpdate(0);</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>    }</div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>    {</div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span>        m_sleepyUpdates.pop_back();</div>
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>    }</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>}</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span> </div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span><span class="comment">// this should be called only by UpdateModule, thanks.</span></div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span><span class="comment">//DECLARE_PERF_TIMER(friend_awakenUpdateModule)</span></div>
<div class="foldopen" id="foldopen02983" data-start="{" data-end="}">
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"><a class="line" href="class_game_logic.html#a4f1c0381f832810be87a2cf10e887c71"> 2983</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a4f1c0381f832810be87a2cf10e887c71">GameLogic::friend_awakenUpdateModule</a>(<a class="code hl_class" href="class_object.html">Object</a>* obj, <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> u, <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> whenToWakeUp)</div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span>{</div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>    <span class="comment">//USE_PERF_TIMER(friend_awakenUpdateModule)</span></div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> now = <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;getFrame();</div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(whenToWakeUp &gt;= now, (<span class="stringliteral">&quot;setWakeFrame frame is in the past... are you sure this is what you want?&quot;</span>));</div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span> </div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>    <span class="keywordflow">if</span> (u == m_curUpdateModule)</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>    {</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>((<span class="stringliteral">&quot;You should not call setWakeFrame() from inside your update(), because it will be ignored, in favor of the return code from update.\n&quot;</span>));</div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>    }</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span> </div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>    <span class="keywordflow">if</span> (whenToWakeUp == u-&gt;<a class="code hl_function" href="class_update_module.html#acadd3ba8e983f98462e2cd3c686dbdae">friend_getNextCallFrame</a>())</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>        <span class="keywordflow">return</span>; <span class="comment">// my, that was easy</span></div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span> </div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>    <span class="keywordflow">if</span> ((now &gt; 0) &amp;&amp; (u-&gt;<a class="code hl_function" href="class_update_module.html#acadd3ba8e983f98462e2cd3c686dbdae">friend_getNextCallFrame</a>() == now) &amp;&amp; (whenToWakeUp == now + 1))</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>    {</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>        <span class="comment">// subtle but important case: if we already awake, and someone calls </span></div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>        <span class="comment">// setWakeFrame(self, UPDATE_SLEEP_NONE), we don&#39;t want to reset our wake frame,</span></div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>        <span class="comment">// since that would prevent us from getting called THIS frame. since UPDATE_SLEEP_NONE</span></div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>        <span class="comment">// really means &quot;wake up as soon as possible&quot;, we don&#39;t want to change our status</span></div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>        <span class="comment">// if we are already awake. (srj)</span></div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>    }</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span> </div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>    <a class="code hl_union" href="union_int.html">Int</a> idx = u-&gt;<a class="code hl_function" href="class_update_module.html#a29a244154731002ae604872755bbe31a">friend_getIndexInLogic</a>();</div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>    <span class="keywordflow">if</span> (obj-&gt;<a class="code hl_function" href="class_object.html#a1b678192887e2c7f6b97af5f36d08a30">isInList</a>(&amp;m_objList))</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>    {</div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>        <span class="keywordflow">if</span> (idx &lt; 0 || idx &gt;= m_sleepyUpdates.size())</div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span>        {</div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a882bf35dd1d717c1cc8586776bcf5296">RELEASE_CRASH</a>(<span class="stringliteral">&quot;fatal error! sleepy update module illegal index.\n&quot;</span>);</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>        }</div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span> </div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span>        <span class="keywordflow">if</span> (m_sleepyUpdates[idx] != u)</div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span>        {</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a882bf35dd1d717c1cc8586776bcf5296">RELEASE_CRASH</a>(<span class="stringliteral">&quot;fatal error! sleepy update module index mismatch.\n&quot;</span>);</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span>        }</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span> </div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span>        <span class="comment">// update the value.</span></div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>        u-&gt;<a class="code hl_function" href="class_update_module.html#a80a8350bb3eb30648299487d2003cbb8">friend_setNextCallFrame</a>(whenToWakeUp);</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span> </div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>        <span class="comment">// rebalance.</span></div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>        rebalanceSleepyUpdate(idx);</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>        </div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>        <span class="comment">// validate. (harmless except in debug mode)</span></div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span>        validateSleepyUpdate();</div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span> </div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>    }</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>    {</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>        <span class="keywordflow">if</span> (idx != -1)</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>        {</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a882bf35dd1d717c1cc8586776bcf5296">RELEASE_CRASH</a>(<span class="stringliteral">&quot;fatal error! sleepy update module index mismatch.\n&quot;</span>);</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span>        }</div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span> </div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>        <span class="comment">// this can happen if stuff happens during object initialization. fortunately, </span></div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>        <span class="comment">// it&#39;s easy to deal with:</span></div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>        u-&gt;<a class="code hl_function" href="class_update_module.html#a80a8350bb3eb30648299487d2003cbb8">friend_setNextCallFrame</a>(whenToWakeUp);</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>    }</div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>}</div>
</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span> </div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span> </div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span> </div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span> </div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span> </div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span> </div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span> </div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span><span class="preprocessor">#ifdef DO_UNIT_TIMINGS</span></div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span> </div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span><span class="keywordtype">void</span> drawGraph( <span class="keyword">const</span> <span class="keywordtype">char</span>* style, <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> <a class="code hl_function" href="_game_mtl_8cpp.html#aa1230864bc0353a2618c7203a063c1fa">scale</a>, <span class="keywordtype">double</span> <a class="code hl_variable" href="_debug_window_8cpp.html#aa09f8db39b7f30bb54209b7caaca64ce">value</a> )</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>{</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>  <span class="keywordflow">for</span> ( <a class="code hl_union" href="union_int.html">Int</a> t = 0; t &lt; <a class="code hl_variable" href="_debug_window_8cpp.html#aa09f8db39b7f30bb54209b7caaca64ce">value</a>*<a class="code hl_function" href="_game_mtl_8cpp.html#aa1230864bc0353a2618c7203a063c1fa">scale</a>; ++t)</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>  {</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((style));</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>    <span class="keywordflow">if</span> ( t%200 == 199 )</div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>      <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;...\n&quot;</span>));</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>  }</div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span> </div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>  <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span> </div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>}</div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span> </div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span> </div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>    <span class="keyword">enum</span> {TIME_FRAMES=20};</div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span>    <span class="keyword">enum</span> {SETTLE_FRAMES=10};</div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span><span class="keyword">static</span> <span class="keywordtype">void</span> unitTimings(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>{</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>    <span class="keyword">static</span> <a class="code hl_union" href="union_int.html">Int</a> settleFrames = 0;</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>    <span class="keyword">static</span> <a class="code hl_union" href="union_int.html">Int</a> timeFrames = 0;</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>    <span class="keyword">enum</span> { INFANTRY, VEHICLE, STRUCTURE, OTHER, <a class="code hl_define" href="base64_8cpp.html#a29fd18bed01c4d836c7ebfe73a125c3f">END</a>}; </div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>    <span class="keyword">static</span> <a class="code hl_union" href="union_int.html">Int</a> unitTypes = INFANTRY;</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>    <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> sides[16];</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span> </div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span> </div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>    <span class="keyword">const</span> <a class="code hl_union" href="union_int.html">Int</a> UNIT_X = 10;</div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>    <span class="keyword">const</span> <a class="code hl_union" href="union_int.html">Int</a> UNIT_Y = 10;</div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>    <span class="keyword">const</span> <a class="code hl_union" href="union_int.html">Int</a> TOTAL_UNITS = UNIT_X*UNIT_Y;</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span> </div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span> </div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>    <span class="keyword">const</span> <a class="code hl_union" href="union_int.html">Int</a> UNIT_SPACING = 30;</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>    <span class="keyword">const</span> <a class="code hl_union" href="union_int.html">Int</a> UNIT_BORDER = 30;</div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span> </div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span> </div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>    <a class="code hl_union" href="union_int.html">Int</a> sideCount = 0;</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span><span class="preprocessor">  #define no_SINGLE_UNIT &quot;AmericaInfantryRanger&quot;</span></div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span> </div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span><span class="preprocessor">#define DO_FACTION</span></div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span><span class="preprocessor">#ifdef DO_FACTION</span></div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>    sides[sideCount++] = <span class="stringliteral">&quot;America&quot;</span>;</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span>    sides[sideCount++] = <span class="stringliteral">&quot;China&quot;</span>;</div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>    sides[sideCount++] = <span class="stringliteral">&quot;GLA&quot;</span>;</div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span> </div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>  <span class="comment">//The MissionDisk new &#39;sides&#39;</span></div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span>    sides[sideCount++] = <span class="stringliteral">&quot;AmericaSuperWeaponGeneral&quot;</span>;</div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>    sides[sideCount++] = <span class="stringliteral">&quot;AmericaLaserGeneral&quot;</span>;</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>    sides[sideCount++] = <span class="stringliteral">&quot;AmericaAirForceGeneral&quot;</span>;</div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span>    sides[sideCount++] = <span class="stringliteral">&quot;ChinaTankGeneral&quot;</span>;</div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span>    sides[sideCount++] = <span class="stringliteral">&quot;ChinaInfantryGeneral&quot;</span>;</div>
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span>    sides[sideCount++] = <span class="stringliteral">&quot;ChinaNukeGeneral&quot;</span>;</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>    sides[sideCount++] = <span class="stringliteral">&quot;GLAToxinGeneral&quot;</span>;</div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>    sides[sideCount++] = <span class="stringliteral">&quot;GLADemolitionGeneral&quot;</span>;</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span>    sides[sideCount++] = <span class="stringliteral">&quot;GLAStealthGeneral&quot;</span>;</div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span> </div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span><span class="comment">//  sides[sideCount++] = &quot;*&quot;; // wildcard for unspecified side</span></div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span> </div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span> </div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span> </div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span><span class="preprocessor">#define DO_CIVILIAN</span></div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span><span class="preprocessor">#ifdef DO_CIVILIAN</span></div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>    sides[sideCount++] = <span class="stringliteral">&quot;Civilian&quot;</span>;</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span> </div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span><span class="preprocessor">#define DO_SINGLE_KIND</span></div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span><span class="preprocessor">#ifdef DO_SINGLE_KIND</span></div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>    <span class="keyword">static</span> <a class="code hl_enumeration" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44b">KindOfType</a> goalKind = <a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba8f4cd61a1eb1e8142722876c9fe5d07f">KINDOF_STRUCTURE</a>;</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>    <span class="comment">//static KindOfType goalKind = KINDOF_INFANTRY;</span></div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span>    <span class="comment">//static KindOfType goalKind = KINDOF_VEHICLE;</span></div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span> </div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>    sides[sideCount] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> veryFirstTime = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span> </div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span> </div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>    <span class="keyword">static</span> <a class="code hl_union" href="union_int.html">Int</a> side = 0;</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span> </div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span>    <span class="keyword">static</span> __int64 startTime64;</div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span>    <span class="keyword">static</span> __int64 endTime64,freq64;</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>    <span class="keyword">static</span> <span class="keywordtype">int</span> drawCallTotal;</div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>    <span class="keyword">static</span> <span class="keyword">enum</span> { LOGIC, NO_PARTICLES, NO_SPAWN, ALL} mode;</div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>    <span class="keyword">static</span> <span class="keywordtype">double</span> timeAll, timeAllNoAnim, timeNoPart, timeNoSpawn, timeLogic, timeLogicNoAnim;</div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>    <span class="keyword">static</span> <span class="keywordtype">float</span> drawCallAll,drawCallNoPart,drawCallNoSpawn,drawCallLogic;</div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>    </div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>    <span class="keywordflow">if</span> (settleFrames&gt;0) {</div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>        settleFrames--;</div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>        <span class="keywordflow">if</span> (settleFrames&gt;0) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span> </div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span>        QueryPerformanceCounter((LARGE_INTEGER *)&amp;startTime64);</div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>        QueryPerformanceFrequency((LARGE_INTEGER *)&amp;freq64);</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>        timeFrames = TIME_FRAMES;</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span> </div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>        <span class="comment">// reset the draw counter</span></div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>        drawCallTotal = 0;</div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>    }</div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span>    <span class="keywordflow">if</span> (timeFrames&gt;0) {</div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span>        drawCallTotal += <a class="code hl_variable" href="_display_8h.html#af0e94ff29c3f0eaefc701cb5c71479e6">TheDisplay</a>-&gt;getLastFrameDrawCalls();</div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>        timeFrames--;</div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>        <span class="keywordflow">if</span> (timeFrames&gt;0) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>        </div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>        QueryPerformanceCounter((LARGE_INTEGER *)&amp;endTime64);</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span>        <span class="keywordtype">double</span> timeToUpdate = ((double)(endTime64-startTime64) / (double)(freq64));</div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span> </div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span><span class="comment">//      Real timeToUpdateMicrosec = timeToUpdate*1E6/(TIME_FRAMES * TOTAL_UNITS);</span></div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>        timeToUpdate *= 100.0f/TIME_FRAMES;</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span> </div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span> </div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>        <span class="keywordflow">if</span> (mode == LOGIC) {</div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>            timeLogic = timeToUpdate;</div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>            drawCallLogic = (float)drawCallTotal / (<span class="keywordtype">float</span>)(TIME_FRAMES * TOTAL_UNITS);  <span class="comment">// 100 units for TIME_FRAMES</span></div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span> </div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>            mode = ALL;</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>            settleFrames = SETTLE_FRAMES;</div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>            <span class="comment">//g_timing_no_anim = true;</span></div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>            <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> thePos;</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>            thePos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a> = 50;</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>            thePos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> = 50;</div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>            thePos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> = 0;</div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>            <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;lookAt( &amp;thePos );</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span>        }</div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>        <span class="keywordflow">if</span> (mode == ALL) {</div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>            timeAll = timeToUpdate;</div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>            drawCallAll = (float)drawCallTotal / (<span class="keywordtype">float</span>)(TIME_FRAMES * TOTAL_UNITS);  <span class="comment">// 100 units for TIME_FRAMES</span></div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span> </div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>            mode = NO_PARTICLES; </div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>            settleFrames = SETTLE_FRAMES;</div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="_particle_sys_8h.html#a13566d206afdddac74b85ff32975004f">TheParticleSystemManager</a>-&gt;getParticleCount()&gt;1) {</div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span>                <a class="code hl_variable" href="_particle_sys_8h.html#a13566d206afdddac74b85ff32975004f">TheParticleSystemManager</a>-&gt;reset();</div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Starting noParticles - \n&quot;</span>));</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>            }</div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>        } </div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>        <span class="keywordflow">if</span> (mode == NO_PARTICLES) {</div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>            timeNoPart = timeToUpdate;</div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>            drawCallNoPart = (float)drawCallTotal / (<span class="keywordtype">float</span>)(TIME_FRAMES * TOTAL_UNITS);  <span class="comment">// 100 units for TIME_FRAMES</span></div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span> </div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span>            mode = NO_SPAWN;</div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>            <a class="code hl_class" href="class_object.html">Object</a> *obj = <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;getFirstObject();</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span>            <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> gotSpawn;</div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span>            <span class="keywordflow">while</span> (obj) {</div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>                <span class="keywordflow">if</span> (obj-&gt;<a class="code hl_function" href="class_thing.html#a8028ae31000ce547b400838afe6eb335">getTemplate</a>() != g_UT_curThing) {</div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>                    <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;destroyObject(obj);</div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>                    gotSpawn = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span>                }</div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span>                obj = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>();</div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>            }   </div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>            <span class="keywordflow">if</span> (gotSpawn) {</div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Starting noSpawn - \n&quot;</span>));</div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span>                settleFrames = SETTLE_FRAMES;</div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>            }</div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>        }   </div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>        <span class="keywordflow">if</span> (mode==NO_SPAWN) {</div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>            timeNoSpawn = timeToUpdate;</div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>            drawCallNoSpawn = (float)drawCallTotal / (<span class="keywordtype">float</span>)(TIME_FRAMES * TOTAL_UNITS);  <span class="comment">// 100 units for TIME_FRAMES</span></div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span>        }</div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span>        <span class="keywordflow">if</span> (g_UT_curThing==<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span> </div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span> </div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>        <span class="keywordtype">char</span> remark[2048];</div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>    <a class="code hl_typedef" href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a> graphScale = 20.0f;</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span>        <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> thingName = g_UT_curThing-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>();</div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span>        <span class="keywordflow">if</span> (veryFirstTime) {</div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span>            thingName = <span class="stringliteral">&quot;No Object&quot;</span>;</div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span>        }</div>
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"> 3225</span> </div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>    sprintf(remark, <span class="stringliteral">&quot;All %f: (%d ms) for %d %s&#39;s\n&quot;</span>, timeAll, (<a class="code hl_union" href="union_int.html">Int</a>)(timeAll*1000/TIME_FRAMES), TOTAL_UNITS, thingName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>() );</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((remark));</div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>    drawGraph( <span class="stringliteral">&quot;@&quot;</span>, graphScale, timeAll );</div>
<div class="line"><a id="l03229" name="l03229"></a><span class="lineno"> 3229</span> </div>
<div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>        sprintf(remark, <span class="stringliteral">&quot;Without Particles %f\n&quot;</span>, timeNoPart);</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((remark));</div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span>    drawGraph( <span class="stringliteral">&quot;@&quot;</span>, graphScale, timeNoPart );</div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span>        </div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>        sprintf(remark, <span class="stringliteral">&quot;Without Spawn %f  \n&quot;</span>, timeNoSpawn );</div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((remark));</div>
<div class="line"><a id="l03236" name="l03236"></a><span class="lineno"> 3236</span>    drawGraph( <span class="stringliteral">&quot;@&quot;</span>, graphScale, timeNoSpawn );</div>
<div class="line"><a id="l03237" name="l03237"></a><span class="lineno"> 3237</span> </div>
<div class="line"><a id="l03238" name="l03238"></a><span class="lineno"> 3238</span>        sprintf(remark, <span class="stringliteral">&quot;Logic %f \n&quot;</span>, timeLogic);</div>
<div class="line"><a id="l03239" name="l03239"></a><span class="lineno"> 3239</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((remark));</div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>    drawGraph( <span class="stringliteral">&quot;@&quot;</span>, graphScale, timeLogic );</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>    </div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span>    </div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span>        sprintf(remark, <span class="stringliteral">&quot;DrawCalls for %s \n&quot;</span>, thingName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>() ) ;</div>
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"> 3244</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((remark));</div>
<div class="line"><a id="l03245" name="l03245"></a><span class="lineno"> 3245</span> </div>
<div class="line"><a id="l03246" name="l03246"></a><span class="lineno"> 3246</span>        sprintf(remark, <span class="stringliteral">&quot;All %f\n&quot;</span>, drawCallAll );</div>
<div class="line"><a id="l03247" name="l03247"></a><span class="lineno"> 3247</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((remark));</div>
<div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span>    drawGraph( <span class="stringliteral">&quot;#&quot;</span>, graphScale, drawCallAll );</div>
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"> 3249</span> </div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>        sprintf(remark, <span class="stringliteral">&quot;Without Particles %f\n&quot;</span>, drawCallNoPart );</div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((remark));</div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span>    drawGraph( <span class="stringliteral">&quot;#&quot;</span>, graphScale, drawCallNoPart );</div>
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"> 3253</span> </div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span>        sprintf(remark, <span class="stringliteral">&quot;Without Spawn %f \n&quot;</span>, drawCallNoSpawn );</div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((remark));</div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span>    drawGraph( <span class="stringliteral">&quot;#&quot;</span>, graphScale, drawCallNoSpawn );</div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span> </div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>        sprintf(remark, <span class="stringliteral">&quot;Draw Call Logic %f \n&quot;</span>, drawCallLogic );</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((remark));</div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>    drawGraph( <span class="stringliteral">&quot;#&quot;</span>, graphScale, drawCallLogic );</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span> </div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span> </div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span>        <span class="keywordflow">if</span> (g_UT_timingLog) {</div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>            fputs(remark, g_UT_timingLog);</div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span>        }</div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>        <span class="keywordflow">if</span> (g_UT_commaLog) {</div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> type;</div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>            <span class="keywordflow">if</span> (unitTypes == INFANTRY) {</div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span>                type=<span class="stringliteral">&quot;Infantry&quot;</span>;</div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>            }   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitTypes == VEHICLE) {</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span>                type=<span class="stringliteral">&quot;Vehicle&quot;</span>;</div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span>            }   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitTypes == STRUCTURE) {</div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>                type=<span class="stringliteral">&quot;Structure&quot;</span>;</div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span>            }   <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>                type=<span class="stringliteral">&quot;Other&quot;</span>;</div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span>            }                        </div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> modelName;</div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>            <a class="code hl_typedef" href="_model_state_8h.html#a5038f4bd0e6fedc55329a5cfccab742f">ModelConditionFlags</a> state;</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>            state.<a class="code hl_function" href="class_bit_flags.html#ac2aa6f31e3e6c5d10e77b71e7ba215de">clear</a>();</div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>            <span class="keyword">const</span> <a class="code hl_class" href="class_module_info.html">ModuleInfo</a>&amp; mi = g_UT_curThing-&gt;<a class="code hl_function" href="class_thing_template.html#a2737061e56af11729efc010b898be704">getDrawModuleInfo</a>();</div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span>            <span class="keywordflow">if</span> (mi.<a class="code hl_function" href="class_module_info.html#aa17e7c7922005d839dfeb9ce6f1bf44a">getCount</a>() &gt; 0)</div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>            {</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>                <span class="keyword">const</span> <a class="code hl_class" href="class_module_data.html">ModuleData</a>* mdd = mi.<a class="code hl_function" href="class_module_info.html#ae97b67d3db4f10e2f3909cdf5f2e4b80">getNthData</a>(0);</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>                <span class="keyword">const</span> <a class="code hl_class" href="class_w3_d_model_draw_module_data.html">W3DModelDrawModuleData</a>* md = mdd ? mdd-&gt;<a class="code hl_function" href="class_module_data.html#aedbebada0c51983996f480cbf869b413">getAsW3DModelDrawModuleData</a>() : <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>                <span class="keywordflow">if</span> (md)</div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>                {</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>                    modelName = md-&gt;<a class="code hl_function" href="class_w3_d_model_draw_module_data.html#ab2c7b1c8a269e8e39fd8c2dfd6813aa7">getBestModelNameForWB</a>(state);</div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>                }</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>            }</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>            <span class="keywordflow">if</span> (veryFirstTime) {</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>                modelName = <span class="stringliteral">&quot;**NO MODEL**&quot;</span>;</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>                veryFirstTime = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>            }</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>            sprintf(remark, <span class="stringliteral">&quot;%f,%d,%f,%d,%f,%d,%f,%d,%s,%s,%s,%s,%f,%f,%f\n&quot;</span>, timeAll, </div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>            (<a class="code hl_union" href="union_int.html">Int</a>)(timeAll*1000/TIME_FRAMES),timeNoPart, </div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>            (<a class="code hl_union" href="union_int.html">Int</a>)(timeNoPart*1000/TIME_FRAMES),timeNoSpawn, </div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>            (<a class="code hl_union" href="union_int.html">Int</a>)(timeNoSpawn*1000/TIME_FRAMES),timeLogic, </div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>            (<a class="code hl_union" href="union_int.html">Int</a>)(timeLogic*1000/TIME_FRAMES), thingName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>(), modelName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>(), type.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>(),</div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>            sides[side].str(),</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>            drawCallAll,drawCallNoPart,drawCallNoSpawn);</div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>            fputs(remark, g_UT_commaLog);</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>        }</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>        <a class="code hl_variable" href="_particle_sys_8h.html#a13566d206afdddac74b85ff32975004f">TheParticleSystemManager</a>-&gt;reset();</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>        g_UT_gotUnit = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>    }</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span> </div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span><span class="preprocessor">#ifdef SINGLE_UNIT</span></div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span>    <span class="keywordflow">if</span> (g_UT_curThing &amp;&amp; g_UT_startTiming) {</div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>        <span class="keywordflow">if</span> (g_UT_curThing-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>()==SINGLE_UNIT) {</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span>            <span class="keywordflow">if</span> (g_UT_timingLog) {</div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>                fclose(g_UT_timingLog);</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>                g_UT_timingLog = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span>            }</div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>            <span class="keywordflow">if</span> (g_UT_commaLog) {</div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span>                fclose(g_UT_commaLog);</div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span>                g_UT_commaLog = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span>            }</div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>        }</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span>        <span class="keywordflow">while</span> (g_UT_curThing-&gt;<a class="code hl_function" href="class_thing_template.html#ab7d99df4c7290e60593e7b5d58961b9a">friend_getNextTemplate</a>() </div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span>            &amp;&amp; g_UT_curThing-&gt;<a class="code hl_function" href="class_thing_template.html#ab7d99df4c7290e60593e7b5d58961b9a">friend_getNextTemplate</a>()-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>()!=SINGLE_UNIT) </div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>            g_UT_curThing = g_UT_curThing-&gt;<a class="code hl_function" href="class_thing_template.html#ab7d99df4c7290e60593e7b5d58961b9a">friend_getNextTemplate</a>();</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>        </div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span>    }</div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span> </div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>    <a class="code hl_class" href="class_object.html">Object</a> *obj = <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;getFirstObject();</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>    <span class="keywordflow">while</span> (obj) {</div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span>        <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;destroyObject(obj);</div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span>        obj = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>();</div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>    }                                               </div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span> </div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>    <span class="keywordflow">if</span> (g_UT_startTiming &amp;&amp; g_UT_curThing &amp;&amp; !g_UT_gotUnit) {</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>        <a class="code hl_variable" href="_global_data_8h.html#af21446132278f7786d102327938763d2">TheWritableGlobalData</a>-&gt;m_framesPerSecondLimit = 10000;</div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span>        <a class="code hl_variable" href="_global_data_8h.html#af21446132278f7786d102327938763d2">TheWritableGlobalData</a>-&gt;m_useFpsLimit = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>        <span class="keywordflow">while</span> (!g_UT_gotUnit) {</div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span>            <span class="keywordflow">if</span> (veryFirstTime) {</div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span>                g_UT_gotUnit = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>            }</div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>            g_UT_curThing = g_UT_curThing-&gt;<a class="code hl_function" href="class_thing_template.html#ab7d99df4c7290e60593e7b5d58961b9a">friend_getNextTemplate</a>();</div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span> </div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>            <span class="keywordflow">if</span> (g_UT_curThing == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>                unitTypes++;</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>                <span class="keywordflow">if</span> (unitTypes==<a class="code hl_define" href="base64_8cpp.html#a29fd18bed01c4d836c7ebfe73a125c3f">END</a>) {</div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>                    side++;</div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>                    unitTypes = INFANTRY;</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>                    <span class="keywordflow">if</span> (sides[side].isEmpty() ) <span class="comment">// end of sides list</span></div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>          {</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>                        g_UT_startTiming = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>                        <span class="keywordflow">if</span> (g_UT_timingLog) </div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>            {</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>                            fclose(g_UT_timingLog);</div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span>                            g_UT_timingLog = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span>                        }</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>                        <span class="keywordflow">if</span> (g_UT_commaLog) </div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span>            {</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span>                            fclose(g_UT_commaLog);</div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span>                            g_UT_commaLog = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span>                        }</div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>                    }</div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span>                }</div>
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"> 3364</span>                g_UT_curThing = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;firstTemplate();</div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>            }</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span> </div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>            <span class="keyword">const</span> <a class="code hl_class" href="class_thing_template.html">ThingTemplate</a>* btt = g_UT_curThing;</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span> </div>
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"> 3369</span><span class="preprocessor">#ifndef SINGLE_UNIT</span></div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span>      <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> unspecified = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span>            <span class="keywordflow">if</span> (btt-&gt;<a class="code hl_function" href="class_thing_template.html#a596466af5fb261343bdae29b96bd68eb">getDefaultOwningSide</a>() != sides[side]) </div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span>      {</div>
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"> 3373</span>        <span class="keywordflow">if</span> (sides[side] == <span class="stringliteral">&quot;*&quot;</span>)</div>
<div class="line"><a id="l03374" name="l03374"></a><span class="lineno"> 3374</span>        {</div>
<div class="line"><a id="l03375" name="l03375"></a><span class="lineno"> 3375</span>          <span class="keywordflow">if</span> ( btt-&gt;<a class="code hl_function" href="class_thing_template.html#a596466af5fb261343bdae29b96bd68eb">getDefaultOwningSide</a>() == (<span class="stringliteral">&quot;&quot;</span>) )<span class="comment">// wildcard for unspecified side</span></div>
<div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span>            unspecified = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"> 3377</span>          <span class="keywordflow">else</span></div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>        }</div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span>              <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03382" name="l03382"></a><span class="lineno"> 3382</span> </div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span>            }</div>
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"> 3384</span> </div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span>            <span class="keywordflow">if</span> (unitTypes == INFANTRY) {</div>
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"> 3386</span>                <span class="keywordflow">if</span> (!btt-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba37a5f865d7cfc71dafebcd7ddfc20161">KINDOF_INFANTRY</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>            }   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitTypes == VEHICLE) {</div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span>                <span class="keywordflow">if</span> (!btt-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa70ee392142dc2de3e74212f91749945">KINDOF_VEHICLE</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span>            }   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitTypes == STRUCTURE) {</div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span>                <span class="keywordflow">if</span> (!btt-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba8f4cd61a1eb1e8142722876c9fe5d07f">KINDOF_STRUCTURE</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span>            }   <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span>                <span class="keywordflow">if</span> (btt-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba37a5f865d7cfc71dafebcd7ddfc20161">KINDOF_INFANTRY</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span>                <span class="keywordflow">if</span> (btt-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa70ee392142dc2de3e74212f91749945">KINDOF_VEHICLE</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span>                <span class="keywordflow">if</span> (btt-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(<a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba8f4cd61a1eb1e8142722876c9fe5d07f">KINDOF_STRUCTURE</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03395" name="l03395"></a><span class="lineno"> 3395</span>            }</div>
<div class="line"><a id="l03396" name="l03396"></a><span class="lineno"> 3396</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03397" name="l03397"></a><span class="lineno"> 3397</span><span class="preprocessor">#ifdef DO_SINGLE_KIND</span></div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>            <span class="keywordflow">if</span> (!btt-&gt;<a class="code hl_function" href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">isKindOf</a>(goalKind)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"> 3400</span> </div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span> </div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>      <span class="keyword">static</span> <span class="keywordtype">char</span> *illegalTemplateNames[] = </div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span>      {</div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"> 3404</span>          <span class="stringliteral">&quot;EMPPulseBomb&quot;</span>,</div>
<div class="line"><a id="l03405" name="l03405"></a><span class="lineno"> 3405</span>          <span class="stringliteral">&quot;GLAAngryMobRockProjectileObject&quot;</span>,</div>
<div class="line"><a id="l03406" name="l03406"></a><span class="lineno"> 3406</span>          <span class="stringliteral">&quot;ClusterMinesBomb&quot;</span>,</div>
<div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span>          <span class="stringliteral">&quot;BlackNapalmFirestormSmall&quot;</span>,</div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>          <span class="stringliteral">&quot;CabooseFullOfTerrorists&quot;</span>,</div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span>          <span class="stringliteral">&quot;GLAAngryMobMolotovCocktailProjectileObject&quot;</span>,</div>
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"> 3410</span>          <span class="stringliteral">&quot;Firestorm&quot;</span>,</div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span>          <span class="stringliteral">&quot;Avalanche&quot;</span>,</div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>          <span class="stringliteral">&quot;InfernoTankShell&quot;</span>,</div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span>          <span class="stringliteral">&quot;ChinaArtilleryBarrageShell&quot;</span>,</div>
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"> 3414</span>          <span class="stringliteral">&quot;ChinaTankOverlordBattleBunker&quot;</span>,</div>
<div class="line"><a id="l03415" name="l03415"></a><span class="lineno"> 3415</span>          <span class="stringliteral">&quot;ChinaTankOverlordPropagandaTower&quot;</span>,</div>
<div class="line"><a id="l03416" name="l03416"></a><span class="lineno"> 3416</span>          <span class="stringliteral">&quot;ChinaTankOverlordGattlingCannon&quot;</span>,</div>
<div class="line"><a id="l03417" name="l03417"></a><span class="lineno"> 3417</span>          <span class="stringliteral">&quot;CINE&quot;</span>,</div>
<div class="line"><a id="l03418" name="l03418"></a><span class="lineno"> 3418</span>          <span class="stringliteral">&quot;GLAInfantryAngryMobNexus&quot;</span>,</div>
<div class="line"><a id="l03419" name="l03419"></a><span class="lineno"> 3419</span>          <span class="stringliteral">&quot;AircraftCarrier&quot;</span>,</div>
<div class="line"><a id="l03420" name="l03420"></a><span class="lineno"> 3420</span>        <span class="stringliteral">&quot;GermanMuseum&quot;</span>,</div>
<div class="line"><a id="l03421" name="l03421"></a><span class="lineno"> 3421</span>        <span class="stringliteral">&quot;Cin_&quot;</span>,</div>
<div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span>        <span class="stringliteral">&quot;Amb_&quot;</span>,</div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>        <span class="stringliteral">&quot;Ambient&quot;</span>,</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>        <span class="stringliteral">&quot;GC_&quot;</span>,</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>        <span class="stringliteral">&quot;SpecialEffectsTrainCrashObject&quot;</span>,</div>
<div class="line"><a id="l03426" name="l03426"></a><span class="lineno"> 3426</span>          <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div>
<div class="line"><a id="l03427" name="l03427"></a><span class="lineno"> 3427</span>      };</div>
<div class="line"><a id="l03428" name="l03428"></a><span class="lineno"> 3428</span> </div>
<div class="line"><a id="l03429" name="l03429"></a><span class="lineno"> 3429</span>      <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> skip = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l03430" name="l03430"></a><span class="lineno"> 3430</span> </div>
<div class="line"><a id="l03431" name="l03431"></a><span class="lineno"> 3431</span>      <span class="keywordflow">for</span> ( <a class="code hl_union" href="union_int.html">Int</a> <a class="code hl_variable" href="test6_8cpp.html#a1bd3f5fbccb1628eb13dda4cd02633a4">test</a> = 0; <a class="code hl_variable" href="test6_8cpp.html#a1bd3f5fbccb1628eb13dda4cd02633a4">test</a> &lt; <span class="keyword">sizeof</span>( illegalTemplateNames ) ; ++<a class="code hl_variable" href="test6_8cpp.html#a1bd3f5fbccb1628eb13dda4cd02633a4">test</a> )</div>
<div class="line"><a id="l03432" name="l03432"></a><span class="lineno"> 3432</span>      {</div>
<div class="line"><a id="l03433" name="l03433"></a><span class="lineno"> 3433</span>        <span class="keywordflow">if</span> ( illegalTemplateNames[<a class="code hl_variable" href="test6_8cpp.html#a1bd3f5fbccb1628eb13dda4cd02633a4">test</a>] == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l03434" name="l03434"></a><span class="lineno"> 3434</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03435" name="l03435"></a><span class="lineno"> 3435</span> </div>
<div class="line"><a id="l03436" name="l03436"></a><span class="lineno"> 3436</span>        <span class="keywordflow">if</span> (btt-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>().<a class="code hl_function" href="class_ascii_string.html#a10c2a0dd04ceb04514f3244943ef7daf">startsWith</a>(illegalTemplateNames[<a class="code hl_variable" href="test6_8cpp.html#a1bd3f5fbccb1628eb13dda4cd02633a4">test</a>])) </div>
<div class="line"><a id="l03437" name="l03437"></a><span class="lineno"> 3437</span>        {</div>
<div class="line"><a id="l03438" name="l03438"></a><span class="lineno"> 3438</span>          skip = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l03439" name="l03439"></a><span class="lineno"> 3439</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03440" name="l03440"></a><span class="lineno"> 3440</span>        }</div>
<div class="line"><a id="l03441" name="l03441"></a><span class="lineno"> 3441</span>        <span class="keywordflow">if</span> (btt-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>().<a class="code hl_function" href="class_ascii_string.html#a5e31a06b00465f1d1daba2e209a5fa0e">endsWith</a>(illegalTemplateNames[<a class="code hl_variable" href="test6_8cpp.html#a1bd3f5fbccb1628eb13dda4cd02633a4">test</a>])) </div>
<div class="line"><a id="l03442" name="l03442"></a><span class="lineno"> 3442</span>        {</div>
<div class="line"><a id="l03443" name="l03443"></a><span class="lineno"> 3443</span>          skip = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l03444" name="l03444"></a><span class="lineno"> 3444</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03445" name="l03445"></a><span class="lineno"> 3445</span>        }</div>
<div class="line"><a id="l03446" name="l03446"></a><span class="lineno"> 3446</span>        <span class="keywordflow">if</span> (btt-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>() == illegalTemplateNames[<a class="code hl_variable" href="test6_8cpp.html#a1bd3f5fbccb1628eb13dda4cd02633a4">test</a>] ) </div>
<div class="line"><a id="l03447" name="l03447"></a><span class="lineno"> 3447</span>        {</div>
<div class="line"><a id="l03448" name="l03448"></a><span class="lineno"> 3448</span>          skip = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l03449" name="l03449"></a><span class="lineno"> 3449</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03450" name="l03450"></a><span class="lineno"> 3450</span>        }</div>
<div class="line"><a id="l03451" name="l03451"></a><span class="lineno"> 3451</span>      }</div>
<div class="line"><a id="l03452" name="l03452"></a><span class="lineno"> 3452</span> </div>
<div class="line"><a id="l03453" name="l03453"></a><span class="lineno"> 3453</span>      <span class="keywordflow">if</span> ( skip ) </div>
<div class="line"><a id="l03454" name="l03454"></a><span class="lineno"> 3454</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03455" name="l03455"></a><span class="lineno"> 3455</span> </div>
<div class="line"><a id="l03456" name="l03456"></a><span class="lineno"> 3456</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;EMPPulseBomb&quot;)) continue; // 100 overloads system.</span></div>
<div class="line"><a id="l03457" name="l03457"></a><span class="lineno"> 3457</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;GLAAngryMobRockProjectileObject&quot;)) continue; // 100 overloads system.</span></div>
<div class="line"><a id="l03458" name="l03458"></a><span class="lineno"> 3458</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;ClusterMinesBomb&quot;)) continue; // 100 overloads system.</span></div>
<div class="line"><a id="l03459" name="l03459"></a><span class="lineno"> 3459</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;BlackNapalmFirestormSmall&quot;)) continue; // 100 overloads system.</span></div>
<div class="line"><a id="l03460" name="l03460"></a><span class="lineno"> 3460</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;CabooseFullOfTerrorists&quot;)) continue; // 100 overloads system.</span></div>
<div class="line"><a id="l03461" name="l03461"></a><span class="lineno"> 3461</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;GLAAngryMobMolotovCocktailProjectileObject&quot;)) continue; // 100 overloads system.</span></div>
<div class="line"><a id="l03462" name="l03462"></a><span class="lineno"> 3462</span><span class="comment">//          if (btt-&gt;getName().startsWith(&quot;Firestorm&quot;)) continue;   // 100 crashes</span></div>
<div class="line"><a id="l03463" name="l03463"></a><span class="lineno"> 3463</span><span class="comment">//          if (btt-&gt;getName().startsWith(&quot;Avalanche&quot;)) continue;   // 100 crashes</span></div>
<div class="line"><a id="l03464" name="l03464"></a><span class="lineno"> 3464</span><span class="comment">//          if (btt-&gt;getName().startsWith(&quot;InfernoTankShell&quot;))  continue;   // 100 crashes</span></div>
<div class="line"><a id="l03465" name="l03465"></a><span class="lineno"> 3465</span><span class="comment">//          </span></div>
<div class="line"><a id="l03466" name="l03466"></a><span class="lineno"> 3466</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;ChinaArtilleryBarrageShell&quot;) continue; // 100 takes really, freaking long. Doesn&#39;t crash jba.</span></div>
<div class="line"><a id="l03467" name="l03467"></a><span class="lineno"> 3467</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;ChinaTankOverlordBattleBunker&quot;) continue; // 100 seems to hang gth.</span></div>
<div class="line"><a id="l03468" name="l03468"></a><span class="lineno"> 3468</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;ChinaTankOverlordPropagandaTower&quot;) continue; // 100 seems to hang gth.</span></div>
<div class="line"><a id="l03469" name="l03469"></a><span class="lineno"> 3469</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;ChinaTankOverlordGattlingCannon&quot;) continue; // 100 seems to hang gth.</span></div>
<div class="line"><a id="l03470" name="l03470"></a><span class="lineno"> 3470</span><span class="comment">//          if (btt-&gt;getName().startsWith(&quot;CINE&quot;)) continue;</span></div>
<div class="line"><a id="l03471" name="l03471"></a><span class="lineno"> 3471</span><span class="comment">//          if (btt-&gt;getName() endsWith(&quot;GLAInfantryAngryMobNexus&quot;) continue;</span></div>
<div class="line"><a id="l03472" name="l03472"></a><span class="lineno"> 3472</span><span class="comment">//</span></div>
<div class="line"><a id="l03473" name="l03473"></a><span class="lineno"> 3473</span><span class="comment">//      //missiondisk perps</span></div>
<div class="line"><a id="l03474" name="l03474"></a><span class="lineno"> 3474</span><span class="comment">//      </span></div>
<div class="line"><a id="l03475" name="l03475"></a><span class="lineno"> 3475</span><span class="comment">//      if (btt-&gt;getName() == &quot;AmericaAircraftCarrier&quot;) continue;</span></div>
<div class="line"><a id="l03476" name="l03476"></a><span class="lineno"> 3476</span> </div>
<div class="line"><a id="l03477" name="l03477"></a><span class="lineno"> 3477</span> </div>
<div class="line"><a id="l03478" name="l03478"></a><span class="lineno"> 3478</span> </div>
<div class="line"><a id="l03479" name="l03479"></a><span class="lineno"> 3479</span><span class="preprocessor">#ifdef SINGLE_UNIT</span></div>
<div class="line"><a id="l03480" name="l03480"></a><span class="lineno"> 3480</span>            <span class="keywordflow">if</span> (btt-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>()!=SINGLE_UNIT) {</div>
<div class="line"><a id="l03481" name="l03481"></a><span class="lineno"> 3481</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Skipping %s\n&quot;</span>, btt-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>().<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>()));</div>
<div class="line"><a id="l03482" name="l03482"></a><span class="lineno"> 3482</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03483" name="l03483"></a><span class="lineno"> 3483</span>            }</div>
<div class="line"><a id="l03484" name="l03484"></a><span class="lineno"> 3484</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03485" name="l03485"></a><span class="lineno"> 3485</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;\n===Doing thing %s ===\n&quot;</span>, btt-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>().<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>()));</div>
<div class="line"><a id="l03486" name="l03486"></a><span class="lineno"> 3486</span> </div>
<div class="line"><a id="l03487" name="l03487"></a><span class="lineno"> 3487</span> </div>
<div class="line"><a id="l03488" name="l03488"></a><span class="lineno"> 3488</span><span class="preprocessor">#define dont_DO_ATTACK</span></div>
<div class="line"><a id="l03489" name="l03489"></a><span class="lineno"> 3489</span><span class="preprocessor">#ifdef DO_ATTACK</span></div>
<div class="line"><a id="l03490" name="l03490"></a><span class="lineno"> 3490</span>            <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> attackedPos;</div>
<div class="line"><a id="l03491" name="l03491"></a><span class="lineno"> 3491</span>            attackedPos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a> = UNIT_SPACING * 4.5 + UNIT_BORDER;</div>
<div class="line"><a id="l03492" name="l03492"></a><span class="lineno"> 3492</span>            attackedPos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> = UNIT_SPACING * 4.5 + UNIT_BORDER;</div>
<div class="line"><a id="l03493" name="l03493"></a><span class="lineno"> 3493</span>            attackedPos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> = <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getGroundHeight( attackedPos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>, attackedPos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> );</div>
<div class="line"><a id="l03494" name="l03494"></a><span class="lineno"> 3494</span> </div>
<div class="line"><a id="l03495" name="l03495"></a><span class="lineno"> 3495</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03496" name="l03496"></a><span class="lineno"> 3496</span> </div>
<div class="line"><a id="l03497" name="l03497"></a><span class="lineno"> 3497</span>            <a class="code hl_union" href="union_int.html">Int</a> i, j;</div>
<div class="line"><a id="l03498" name="l03498"></a><span class="lineno"> 3498</span>            <span class="keywordflow">for</span> (i=0; i&lt;10; i++) {</div>
<div class="line"><a id="l03499" name="l03499"></a><span class="lineno"> 3499</span>                <span class="keywordflow">for</span> (j=0; j&lt;10; j++) {</div>
<div class="line"><a id="l03500" name="l03500"></a><span class="lineno"> 3500</span>                    <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> pos;</div>
<div class="line"><a id="l03501" name="l03501"></a><span class="lineno"> 3501</span>                    pos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a> = UNIT_SPACING*i+UNIT_BORDER;</div>
<div class="line"><a id="l03502" name="l03502"></a><span class="lineno"> 3502</span>                    pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> = UNIT_SPACING*j+UNIT_BORDER;</div>
<div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span>                    pos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> = <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;getGroundHeight( pos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a>, pos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> );</div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span>                    <a class="code hl_class" href="class_team.html">Team</a> *team = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getNthPlayer(1)-&gt;getDefaultTeam();</div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span>                    <a class="code hl_class" href="class_object.html">Object</a> *obj = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;newObject( btt, team );</div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>                    <span class="keywordflow">if</span> (obj==<a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03507" name="l03507"></a><span class="lineno"> 3507</span><span class="preprocessor">#define dont_DO_TREE    1</span></div>
<div class="line"><a id="l03508" name="l03508"></a><span class="lineno"> 3508</span><span class="preprocessor">#ifdef DO_TREE</span></div>
<div class="line"><a id="l03509" name="l03509"></a><span class="lineno"> 3509</span>                    <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;destroyObject(obj);</div>
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"> 3510</span>                    externalAddTree(pos, 1.0f, 0.0f, <span class="stringliteral">&quot;TreeOakFall1&quot;</span>);</div>
<div class="line"><a id="l03511" name="l03511"></a><span class="lineno"> 3511</span>                    g_UT_gotUnit = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03512" name="l03512"></a><span class="lineno"> 3512</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l03513" name="l03513"></a><span class="lineno"> 3513</span>                    <span class="keywordflow">if</span> (obj)</div>
<div class="line"><a id="l03514" name="l03514"></a><span class="lineno"> 3514</span>                    {</div>
<div class="line"><a id="l03515" name="l03515"></a><span class="lineno"> 3515</span>                        g_UT_gotUnit = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03516" name="l03516"></a><span class="lineno"> 3516</span>                    </div>
<div class="line"><a id="l03517" name="l03517"></a><span class="lineno"> 3517</span>                        obj-&gt;<a class="code hl_function" href="class_thing.html#a93da041338677d5058d9948cb424fb6f">setOrientation</a>(0);   </div>
<div class="line"><a id="l03518" name="l03518"></a><span class="lineno"> 3518</span>                        obj-&gt;<a class="code hl_function" href="class_thing.html#a9fcbcf27ec45b3aa4883a03a56663bd9">setPosition</a>( &amp;pos );</div>
<div class="line"><a id="l03519" name="l03519"></a><span class="lineno"> 3519</span>                        </div>
<div class="line"><a id="l03520" name="l03520"></a><span class="lineno"> 3520</span>                        <span class="comment">// Now onCreates were called at the constructor.  This magically created</span></div>
<div class="line"><a id="l03521" name="l03521"></a><span class="lineno"> 3521</span>                        <span class="comment">// thing needs to be considered as Built for Game specific stuff.</span></div>
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"> 3522</span>                        <span class="keywordflow">for</span> (<a class="code hl_class" href="class_behavior_module.html">BehaviorModule</a>** m = obj-&gt;<a class="code hl_function" href="class_object.html#ac31c977e6871a6a24c903af3a0210f26">getBehaviorModules</a>(); *m; ++m)</div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"> 3523</span>                        {</div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"> 3524</span>                            <a class="code hl_class" href="class_create_module_interface.html">CreateModuleInterface</a>* create = (*m)-&gt;getCreate();</div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span>                            <span class="keywordflow">if</span> (!create)</div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span>                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span>                            create-&gt;<a class="code hl_function" href="class_create_module_interface.html#a87fb59cb29bead86fd61a4a8db938453">onBuildComplete</a>();</div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span>                        }</div>
<div class="line"><a id="l03529" name="l03529"></a><span class="lineno"> 3529</span>                        <span class="comment">// Since the team now has members, activate it.</span></div>
<div class="line"><a id="l03530" name="l03530"></a><span class="lineno"> 3530</span>                        team-&gt;<a class="code hl_function" href="class_team.html#ac6c120cfa0b92e90b9d1c8c48139a0e0">setActive</a>();</div>
<div class="line"><a id="l03531" name="l03531"></a><span class="lineno"> 3531</span>                        <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;pathfinder()-&gt;addObjectToPathfindMap(obj);</div>
<div class="line"><a id="l03532" name="l03532"></a><span class="lineno"> 3532</span><span class="preprocessor">#ifdef DO_ATTACK</span></div>
<div class="line"><a id="l03533" name="l03533"></a><span class="lineno"> 3533</span>                        <a class="code hl_class" href="class_a_i_update_interface.html">AIUpdateInterface</a> *myAI = obj-&gt;<a class="code hl_function" href="class_object.html#ac50efcf2ad2e22d1f83125ac238c6f45">getAI</a>();</div>
<div class="line"><a id="l03534" name="l03534"></a><span class="lineno"> 3534</span>                        <span class="keywordflow">if</span>(myAI)</div>
<div class="line"><a id="l03535" name="l03535"></a><span class="lineno"> 3535</span>                        {</div>
<div class="line"><a id="l03536" name="l03536"></a><span class="lineno"> 3536</span>                            myAI-&gt;<a class="code hl_function" href="class_a_i_command_interface.html#ace9c9c07f03a68ac4d6f18ee3dd6a3da">aiAttackPosition</a>(&amp;attackedPos, 9999, <a class="code hl_enumvalue" href="_game_common_8h.html#a80a13150ed5e8a5acfef387fd7fe43d6aa4c97af6efe4ef2a094b708ab7bac3d8">CMD_FROM_AI</a>);</div>
<div class="line"><a id="l03537" name="l03537"></a><span class="lineno"> 3537</span>                        }</div>
<div class="line"><a id="l03538" name="l03538"></a><span class="lineno"> 3538</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03539" name="l03539"></a><span class="lineno"> 3539</span>                    }</div>
<div class="line"><a id="l03540" name="l03540"></a><span class="lineno"> 3540</span><span class="preprocessor">#endif </span></div>
<div class="line"><a id="l03541" name="l03541"></a><span class="lineno"> 3541</span>                }</div>
<div class="line"><a id="l03542" name="l03542"></a><span class="lineno"> 3542</span>            }</div>
<div class="line"><a id="l03543" name="l03543"></a><span class="lineno"> 3543</span>        }</div>
<div class="line"><a id="l03544" name="l03544"></a><span class="lineno"> 3544</span>        <span class="keywordflow">if</span> (g_UT_gotUnit) {</div>
<div class="line"><a id="l03545" name="l03545"></a><span class="lineno"> 3545</span>            settleFrames = TIME_FRAMES/2;</div>
<div class="line"><a id="l03546" name="l03546"></a><span class="lineno"> 3546</span>            <a class="code hl_struct" href="struct_coord3_d.html">Coord3D</a> thePos;</div>
<div class="line"><a id="l03547" name="l03547"></a><span class="lineno"> 3547</span>            thePos.<a class="code hl_variable" href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">x</a> = 5000;</div>
<div class="line"><a id="l03548" name="l03548"></a><span class="lineno"> 3548</span>            thePos.<a class="code hl_variable" href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">y</a> = 50;</div>
<div class="line"><a id="l03549" name="l03549"></a><span class="lineno"> 3549</span>            thePos.<a class="code hl_variable" href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">z</a> = 0;</div>
<div class="line"><a id="l03550" name="l03550"></a><span class="lineno"> 3550</span>            <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;lookAt( &amp;thePos );</div>
<div class="line"><a id="l03551" name="l03551"></a><span class="lineno"> 3551</span>            mode = LOGIC;</div>
<div class="line"><a id="l03552" name="l03552"></a><span class="lineno"> 3552</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03553" name="l03553"></a><span class="lineno"> 3553</span>        }</div>
<div class="line"><a id="l03554" name="l03554"></a><span class="lineno"> 3554</span>    }</div>
<div class="line"><a id="l03555" name="l03555"></a><span class="lineno"> 3555</span>}</div>
<div class="line"><a id="l03556" name="l03556"></a><span class="lineno"> 3556</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03557" name="l03557"></a><span class="lineno"> 3557</span> </div>
<div class="line"><a id="l03558" name="l03558"></a><span class="lineno"> 3558</span><a class="code hl_define" href="_perf_timer_8h.html#a7d02d33334b68a982bf218d69c748d08">DECLARE_PERF_TIMER</a>(GameLogic_update)</div>
<div class="line"><a id="l03559" name="l03559"></a><span class="lineno"> 3559</span><a class="code hl_define" href="_perf_timer_8h.html#a7d02d33334b68a982bf218d69c748d08">DECLARE_PERF_TIMER</a>(GameLogic_update_normal)</div>
<div class="line"><a id="l03560" name="l03560"></a><span class="lineno"> 3560</span><a class="code hl_define" href="_perf_timer_8h.html#a7d02d33334b68a982bf218d69c748d08">DECLARE_PERF_TIMER</a>(GameLogic_update_sleepy)</div>
<div class="line"><a id="l03561" name="l03561"></a><span class="lineno"> 3561</span> </div>
<div class="line"><a id="l03562" name="l03562"></a><span class="lineno"> 3562</span><span class="preprocessor">#ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"> 3563</span><span class="keyword">extern</span> __int64 Total_Get_Texture_Time;</div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"> 3564</span><span class="keyword">extern</span> __int64 Total_Get_HAnim_Time;</div>
<div class="line"><a id="l03565" name="l03565"></a><span class="lineno"> 3565</span><span class="keyword">extern</span> __int64 Total_Create_Render_Obj_Time;</div>
<div class="line"><a id="l03566" name="l03566"></a><span class="lineno"> 3566</span><span class="keyword">extern</span> __int64 Total_Load_3D_Assets;</div>
<div class="line"><a id="l03567" name="l03567"></a><span class="lineno"> 3567</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03568" name="l03568"></a><span class="lineno"> 3568</span> </div>
<div class="line"><a id="l03569" name="l03569"></a><span class="lineno"> 3569</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"> 3571</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen03572" data-start="{" data-end="}">
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"><a class="line" href="class_game_logic.html#ad980155edd303f2f942a058d9f2e439b"> 3572</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#ad980155edd303f2f942a058d9f2e439b">GameLogic::update</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"> 3573</span>{</div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"> 3574</span>    <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(GameLogic_update)</div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span> </div>
<div class="line"><a id="l03576" name="l03576"></a><span class="lineno"> 3576</span>    <a class="code hl_class" href="class_latch_restore.html">LatchRestore&lt;Bool&gt;</a> inUpdateLatch(m_isInUpdate, <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a id="l03577" name="l03577"></a><span class="lineno"> 3577</span><span class="preprocessor">#ifdef DO_UNIT_TIMINGS</span></div>
<div class="line"><a id="l03578" name="l03578"></a><span class="lineno"> 3578</span>    unitTimings();</div>
<div class="line"><a id="l03579" name="l03579"></a><span class="lineno"> 3579</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03580" name="l03580"></a><span class="lineno"> 3580</span> </div>
<div class="line"><a id="l03581" name="l03581"></a><span class="lineno"> 3581</span>    <a class="code hl_function" href="_f_p_u_control_8h.html#ac898939fad383b7b6cb129bdd759cf0f">setFPMode</a>();</div>
<div class="line"><a id="l03582" name="l03582"></a><span class="lineno"> 3582</span>    </div>
<div class="line"><a id="l03584" name="l03584"></a><span class="lineno"> 3584</span>    <span class="keywordflow">if</span> ( m_startNewGame &amp;&amp; !<a class="code hl_variable" href="_display_8h.html#af0e94ff29c3f0eaefc701cb5c71479e6">TheDisplay</a>-&gt;isMoviePlaying())</div>
<div class="line"><a id="l03585" name="l03585"></a><span class="lineno"> 3585</span>    {</div>
<div class="line"><a id="l03586" name="l03586"></a><span class="lineno"> 3586</span><span class="preprocessor">    #ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l03587" name="l03587"></a><span class="lineno"> 3587</span>        Total_Get_Texture_Time=0;</div>
<div class="line"><a id="l03588" name="l03588"></a><span class="lineno"> 3588</span>        Total_Get_HAnim_Time=0;</div>
<div class="line"><a id="l03589" name="l03589"></a><span class="lineno"> 3589</span>        Total_Create_Render_Obj_Time=0;</div>
<div class="line"><a id="l03590" name="l03590"></a><span class="lineno"> 3590</span>        Total_Load_3D_Assets=0;</div>
<div class="line"><a id="l03591" name="l03591"></a><span class="lineno"> 3591</span><span class="preprocessor">    #endif</span></div>
<div class="line"><a id="l03592" name="l03592"></a><span class="lineno"> 3592</span> </div>
<div class="line"><a id="l03593" name="l03593"></a><span class="lineno"> 3593</span><span class="preprocessor">#ifdef _PROFILE</span></div>
<div class="line"><a id="l03594" name="l03594"></a><span class="lineno"> 3594</span>    <a class="code hl_function" href="class_profile.html#a2eef5e173080dfb289c3959241cea63b">Profile::StartRange</a>(<span class="stringliteral">&quot;map_load&quot;</span>);</div>
<div class="line"><a id="l03595" name="l03595"></a><span class="lineno"> 3595</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03596" name="l03596"></a><span class="lineno"> 3596</span>        <a class="code hl_function" href="class_game_logic.html#a21afe87aa4d7194faf958982a93f77d8">startNewGame</a>( <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> );</div>
<div class="line"><a id="l03597" name="l03597"></a><span class="lineno"> 3597</span><span class="preprocessor">#ifdef _PROFILE</span></div>
<div class="line"><a id="l03598" name="l03598"></a><span class="lineno"> 3598</span>    <a class="code hl_function" href="class_profile.html#af3e5146df92f171179ee7b23294dec90">Profile::StopRange</a>(<span class="stringliteral">&quot;map_load&quot;</span>);</div>
<div class="line"><a id="l03599" name="l03599"></a><span class="lineno"> 3599</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03600" name="l03600"></a><span class="lineno"> 3600</span>        m_startNewGame = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l03601" name="l03601"></a><span class="lineno"> 3601</span> </div>
<div class="line"><a id="l03602" name="l03602"></a><span class="lineno"> 3602</span><span class="preprocessor">    #ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l03603" name="l03603"></a><span class="lineno"> 3603</span>        <span class="keywordtype">char</span> Buf[1024];</div>
<div class="line"><a id="l03604" name="l03604"></a><span class="lineno"> 3604</span>        __int64 freq64;</div>
<div class="line"><a id="l03605" name="l03605"></a><span class="lineno"> 3605</span>        GetPrecisionTimerTicksPerSec(&amp;freq64);</div>
<div class="line"><a id="l03606" name="l03606"></a><span class="lineno"> 3606</span> </div>
<div class="line"><a id="l03607" name="l03607"></a><span class="lineno"> 3607</span>        sprintf(Buf,<span class="stringliteral">&quot;Texture=%f, Anim=%f, CreateRobj=%f, Load3DAssets=%f\n&quot;</span>,</div>
<div class="line"><a id="l03608" name="l03608"></a><span class="lineno"> 3608</span>            ((<span class="keywordtype">double</span>)Total_Get_Texture_Time/(<span class="keywordtype">double</span>)(freq64)*1000.0),</div>
<div class="line"><a id="l03609" name="l03609"></a><span class="lineno"> 3609</span>            ((<span class="keywordtype">double</span>)Total_Get_HAnim_Time/(<span class="keywordtype">double</span>)(freq64)*1000.0),</div>
<div class="line"><a id="l03610" name="l03610"></a><span class="lineno"> 3610</span>            ((<span class="keywordtype">double</span>)Total_Create_Render_Obj_Time/(<span class="keywordtype">double</span>)(freq64)*1000.0),</div>
<div class="line"><a id="l03611" name="l03611"></a><span class="lineno"> 3611</span>            ((<span class="keywordtype">double</span>)Total_Load_3D_Assets/(<span class="keywordtype">double</span>)(freq64)*1000.0));</div>
<div class="line"><a id="l03612" name="l03612"></a><span class="lineno"> 3612</span> </div>
<div class="line"><a id="l03613" name="l03613"></a><span class="lineno"> 3613</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;%s&quot;</span>, Buf));</div>
<div class="line"><a id="l03614" name="l03614"></a><span class="lineno"> 3614</span><span class="preprocessor">    #endif</span></div>
<div class="line"><a id="l03615" name="l03615"></a><span class="lineno"> 3615</span>    }</div>
<div class="line"><a id="l03616" name="l03616"></a><span class="lineno"> 3616</span> </div>
<div class="line"><a id="l03617" name="l03617"></a><span class="lineno"> 3617</span>    <span class="comment">// send the current time to the GameClient</span></div>
<div class="line"><a id="l03618" name="l03618"></a><span class="lineno"> 3618</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(<a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a> == <span class="keyword">this</span>, (<span class="stringliteral">&quot;hmm, TheGameLogic is not right&quot;</span>));</div>
<div class="line"><a id="l03619" name="l03619"></a><span class="lineno"> 3619</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> now = <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;getFrame();</div>
<div class="line"><a id="l03620" name="l03620"></a><span class="lineno"> 3620</span>    <a class="code hl_variable" href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a>-&gt;setFrame(now);</div>
<div class="line"><a id="l03621" name="l03621"></a><span class="lineno"> 3621</span> </div>
<div class="line"><a id="l03622" name="l03622"></a><span class="lineno"> 3622</span>    <span class="comment">// update (execute) scripts</span></div>
<div class="line"><a id="l03623" name="l03623"></a><span class="lineno"> 3623</span>    {</div>
<div class="line"><a id="l03624" name="l03624"></a><span class="lineno"> 3624</span>        <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a>-&gt;UPDATE();</div>
<div class="line"><a id="l03625" name="l03625"></a><span class="lineno"> 3625</span>    }</div>
<div class="line"><a id="l03626" name="l03626"></a><span class="lineno"> 3626</span> </div>
<div class="line"><a id="l03627" name="l03627"></a><span class="lineno"> 3627</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> freezeTime = <a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;isTimeFrozen() &amp;&amp; !<a class="code hl_variable" href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a>-&gt;isCameraMovementFinished();</div>
<div class="line"><a id="l03628" name="l03628"></a><span class="lineno"> 3628</span>    freezeTime = freezeTime || <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a>-&gt;isTimeFrozenDebug() || <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a>-&gt;isTimeFrozenScript();</div>
<div class="line"><a id="l03629" name="l03629"></a><span class="lineno"> 3629</span>    </div>
<div class="line"><a id="l03630" name="l03630"></a><span class="lineno"> 3630</span>    <span class="keywordflow">if</span> (freezeTime) </div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span>    {</div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="_message_stream_8h.html#a64f312c54b1608454f378973ddf8ebd0">TheCommandList</a>-&gt;containsMessageOfType(<a class="code hl_enumvalue" href="class_game_message.html#a5613bf5264e1e3baea9464ab89c6a039a885c0a07608d8d1d944fffab8f0e5c12">GameMessage::MSG_CLEAR_GAME_DATA</a>)) </div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span>        {</div>
<div class="line"><a id="l03634" name="l03634"></a><span class="lineno"> 3634</span>            <a class="code hl_variable" href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a>-&gt;forceUnfreezeTime();</div>
<div class="line"><a id="l03635" name="l03635"></a><span class="lineno"> 3635</span>        } </div>
<div class="line"><a id="l03636" name="l03636"></a><span class="lineno"> 3636</span>        <span class="keywordflow">else</span> </div>
<div class="line"><a id="l03637" name="l03637"></a><span class="lineno"> 3637</span>        {</div>
<div class="line"><a id="l03639" name="l03639"></a><span class="lineno"> 3639</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03640" name="l03640"></a><span class="lineno"> 3640</span>        }</div>
<div class="line"><a id="l03641" name="l03641"></a><span class="lineno"> 3641</span>    }</div>
<div class="line"><a id="l03642" name="l03642"></a><span class="lineno"> 3642</span> </div>
<div class="line"><a id="l03643" name="l03643"></a><span class="lineno"> 3643</span>    <span class="comment">// Note - TerrainLogic update needs to happen after ScriptEngine update, but before object updates.  jba.</span></div>
<div class="line"><a id="l03644" name="l03644"></a><span class="lineno"> 3644</span>    <span class="comment">// This way changes in bridges are noted in the script engine before being cleared in TerrainLogic-&gt;update</span></div>
<div class="line"><a id="l03645" name="l03645"></a><span class="lineno"> 3645</span>    {</div>
<div class="line"><a id="l03646" name="l03646"></a><span class="lineno"> 3646</span>        <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;UPDATE();</div>
<div class="line"><a id="l03647" name="l03647"></a><span class="lineno"> 3647</span>    }</div>
<div class="line"><a id="l03648" name="l03648"></a><span class="lineno"> 3648</span> </div>
<div class="line"><a id="l03649" name="l03649"></a><span class="lineno"> 3649</span>    <span class="comment">// force CRC calculation, so we can keep a cache of the last N CRCs.  We do this right where the recorder</span></div>
<div class="line"><a id="l03650" name="l03650"></a><span class="lineno"> 3650</span>    <span class="comment">// would be getting the CRC anyway, so replays can get the CRCs from the exact instant in time as the original.</span></div>
<div class="line"><a id="l03651" name="l03651"></a><span class="lineno"> 3651</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> isMPGameOrReplay = (<a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a> &amp;&amp; <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;isMultiplayer() &amp;&amp; <a class="code hl_function" href="class_game_logic.html#a018210368c32d8fffa0fc798d0763a76">getGameMode</a>() != <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaa68174262e15b5ba918b03bb8b56b04f">GAME_SHELL</a> &amp;&amp; <a class="code hl_function" href="class_game_logic.html#a018210368c32d8fffa0fc798d0763a76">getGameMode</a>() != <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa32b74fc29edec4aaf73e05477d1f5602">GAME_NONE</a>);</div>
<div class="line"><a id="l03652" name="l03652"></a><span class="lineno"> 3652</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> isSoloGameOrReplay = (<a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a> &amp;&amp; !<a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;isMultiplayer() &amp;&amp; <a class="code hl_function" href="class_game_logic.html#a018210368c32d8fffa0fc798d0763a76">getGameMode</a>() != <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaa68174262e15b5ba918b03bb8b56b04f">GAME_SHELL</a> &amp;&amp; <a class="code hl_function" href="class_game_logic.html#a018210368c32d8fffa0fc798d0763a76">getGameMode</a>() != <a class="code hl_enumvalue" href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa32b74fc29edec4aaf73e05477d1f5602">GAME_NONE</a>);</div>
<div class="line"><a id="l03653" name="l03653"></a><span class="lineno"> 3653</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> generateForMP = (isMPGameOrReplay &amp;&amp; (m_frame % <a class="code hl_variable" href="_game_info_8h.html#a668626b88b7bde6490b9146b8c587a22">TheGameInfo</a>-&gt;getCRCInterval()) == 0);</div>
<div class="line"><a id="l03654" name="l03654"></a><span class="lineno"> 3654</span><span class="preprocessor">#if defined(_DEBUG) || defined(_INTERNAL)</span></div>
<div class="line"><a id="l03655" name="l03655"></a><span class="lineno"> 3655</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> generateForSolo = isSoloGameOrReplay &amp;&amp; ((m_frame &amp;&amp; (m_frame%100 == 0)) ||</div>
<div class="line"><a id="l03656" name="l03656"></a><span class="lineno"> 3656</span>        (<a class="code hl_function" href="class_game_logic.html#a793f6a731bc5dee8f8c95c1419484fd0">getFrame</a>() &gt; TheCRCFirstFrameToLog &amp;&amp; <a class="code hl_function" href="class_game_logic.html#a793f6a731bc5dee8f8c95c1419484fd0">getFrame</a>() &lt; TheCRCLastFrameToLog &amp;&amp; ((m_frame % <a class="code hl_variable" href="_c_r_c_debug_8h.html#a25e0b30a470846c4ad2472f42475f278">REPLAY_CRC_INTERVAL</a>) == 0)));</div>
<div class="line"><a id="l03657" name="l03657"></a><span class="lineno"> 3657</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l03658" name="l03658"></a><span class="lineno"> 3658</span>    <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> generateForSolo = isSoloGameOrReplay &amp;&amp; ((m_frame % <a class="code hl_variable" href="_c_r_c_debug_8h.html#a25e0b30a470846c4ad2472f42475f278">REPLAY_CRC_INTERVAL</a>) == 0);</div>
<div class="line"><a id="l03659" name="l03659"></a><span class="lineno"> 3659</span><span class="preprocessor">#endif </span><span class="comment">// defined(_DEBUG) || defined(_INTERNAL)</span></div>
<div class="line"><a id="l03660" name="l03660"></a><span class="lineno"> 3660</span> </div>
<div class="line"><a id="l03661" name="l03661"></a><span class="lineno"> 3661</span>    <span class="keywordflow">if</span> (generateForSolo || generateForMP)</div>
<div class="line"><a id="l03662" name="l03662"></a><span class="lineno"> 3662</span>    {</div>
<div class="line"><a id="l03663" name="l03663"></a><span class="lineno"> 3663</span>        m_CRC = <a class="code hl_function" href="class_game_logic.html#a3f5df93136fb3689934822b7e5d726e5">getCRC</a>( <a class="code hl_enumvalue" href="_game_logic_8h.html#a190948c860ef2bf66df9ce6f12ce649aab6e809120e579343360eeccbd0426a7b">CRC_RECALC</a> );</div>
<div class="line"><a id="l03664" name="l03664"></a><span class="lineno"> 3664</span>        <span class="keywordflow">if</span> (isMPGameOrReplay)</div>
<div class="line"><a id="l03665" name="l03665"></a><span class="lineno"> 3665</span>        {</div>
<div class="line"><a id="l03666" name="l03666"></a><span class="lineno"> 3666</span>            <a class="code hl_class" href="class_game_message.html">GameMessage</a> *<a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a> = <a class="code hl_variable" href="_message_stream_8h.html#ab9dc75a3dc61c4ad88171b9f604e2bf0">TheMessageStream</a>-&gt;appendMessage( <a class="code hl_enumvalue" href="class_game_message.html#a5613bf5264e1e3baea9464ab89c6a039a95eb1470575b0ae6b00969f7b1dc9a82">GameMessage::MSG_LOGIC_CRC</a> );</div>
<div class="line"><a id="l03667" name="l03667"></a><span class="lineno"> 3667</span>            <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a>-&gt;appendIntegerArgument( m_CRC );</div>
<div class="line"><a id="l03668" name="l03668"></a><span class="lineno"> 3668</span>            <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a>-&gt;appendBooleanArgument( (<a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a> &amp;&amp; <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;getMode() == <a class="code hl_enumvalue" href="_recorder_8h.html#abebff8e1caf81029565d318be12ea230a4236aa876d9bb2efcb5da861afe2f5ba">RECORDERMODETYPE_PLAYBACK</a>) ); <span class="comment">// playback CRC</span></div>
<div class="line"><a id="l03669" name="l03669"></a><span class="lineno"> 3669</span>            <span class="comment">//DEBUG_LOG((&quot;Appended CRC of %8.8X on frame %d\n&quot;, m_CRC, m_frame));</span></div>
<div class="line"><a id="l03670" name="l03670"></a><span class="lineno"> 3670</span>        }</div>
<div class="line"><a id="l03671" name="l03671"></a><span class="lineno"> 3671</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l03672" name="l03672"></a><span class="lineno"> 3672</span>        {</div>
<div class="line"><a id="l03673" name="l03673"></a><span class="lineno"> 3673</span>            <a class="code hl_class" href="class_game_message.html">GameMessage</a> *<a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a> = <a class="code hl_variable" href="_message_stream_8h.html#ab9dc75a3dc61c4ad88171b9f604e2bf0">TheMessageStream</a>-&gt;appendMessage( <a class="code hl_enumvalue" href="class_game_message.html#a5613bf5264e1e3baea9464ab89c6a039a95eb1470575b0ae6b00969f7b1dc9a82">GameMessage::MSG_LOGIC_CRC</a> );</div>
<div class="line"><a id="l03674" name="l03674"></a><span class="lineno"> 3674</span>            <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a>-&gt;appendIntegerArgument( m_CRC );</div>
<div class="line"><a id="l03675" name="l03675"></a><span class="lineno"> 3675</span>            <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a>-&gt;appendBooleanArgument( (<a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a> &amp;&amp; <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;getMode() == <a class="code hl_enumvalue" href="_recorder_8h.html#abebff8e1caf81029565d318be12ea230a4236aa876d9bb2efcb5da861afe2f5ba">RECORDERMODETYPE_PLAYBACK</a>) ); <span class="comment">// playback CRC</span></div>
<div class="line"><a id="l03676" name="l03676"></a><span class="lineno"> 3676</span>            <span class="comment">//DEBUG_LOG((&quot;Appended Playback CRC of %8.8X on frame %d\n&quot;, m_CRC, m_frame));</span></div>
<div class="line"><a id="l03677" name="l03677"></a><span class="lineno"> 3677</span>        }</div>
<div class="line"><a id="l03678" name="l03678"></a><span class="lineno"> 3678</span>    }</div>
<div class="line"><a id="l03679" name="l03679"></a><span class="lineno"> 3679</span> </div>
<div class="line"><a id="l03680" name="l03680"></a><span class="lineno"> 3680</span>    <span class="comment">// collect stats</span></div>
<div class="line"><a id="l03681" name="l03681"></a><span class="lineno"> 3681</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="_stats_collector_8h.html#a37ff26b22956783a5eb4aef155579af0">TheStatsCollector</a>)</div>
<div class="line"><a id="l03682" name="l03682"></a><span class="lineno"> 3682</span>    {</div>
<div class="line"><a id="l03683" name="l03683"></a><span class="lineno"> 3683</span>        <a class="code hl_variable" href="_stats_collector_8h.html#a37ff26b22956783a5eb4aef155579af0">TheStatsCollector</a>-&gt;update();</div>
<div class="line"><a id="l03684" name="l03684"></a><span class="lineno"> 3684</span>    }</div>
<div class="line"><a id="l03685" name="l03685"></a><span class="lineno"> 3685</span> </div>
<div class="line"><a id="l03686" name="l03686"></a><span class="lineno"> 3686</span>    <span class="comment">// Update the Recorder</span></div>
<div class="line"><a id="l03687" name="l03687"></a><span class="lineno"> 3687</span>    {</div>
<div class="line"><a id="l03688" name="l03688"></a><span class="lineno"> 3688</span>        <a class="code hl_variable" href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a>-&gt;UPDATE();</div>
<div class="line"><a id="l03689" name="l03689"></a><span class="lineno"> 3689</span>    }</div>
<div class="line"><a id="l03690" name="l03690"></a><span class="lineno"> 3690</span> </div>
<div class="line"><a id="l03691" name="l03691"></a><span class="lineno"> 3691</span>    <span class="comment">// process client commands</span></div>
<div class="line"><a id="l03692" name="l03692"></a><span class="lineno"> 3692</span>    {</div>
<div class="line"><a id="l03693" name="l03693"></a><span class="lineno"> 3693</span>        <a class="code hl_function" href="class_game_logic.html#aeed023c2695b71c013b20e9f15472faa">processCommandList</a>( <a class="code hl_variable" href="_message_stream_8h.html#a64f312c54b1608454f378973ddf8ebd0">TheCommandList</a> );</div>
<div class="line"><a id="l03694" name="l03694"></a><span class="lineno"> 3694</span>    }</div>
<div class="line"><a id="l03695" name="l03695"></a><span class="lineno"> 3695</span> </div>
<div class="line"><a id="l03696" name="l03696"></a><span class="lineno"> 3696</span><span class="preprocessor">#ifdef ALLOW_NONSLEEPY_UPDATES</span></div>
<div class="line"><a id="l03697" name="l03697"></a><span class="lineno"> 3697</span>    {</div>
<div class="line"><a id="l03698" name="l03698"></a><span class="lineno"> 3698</span>        <span class="keywordflow">for</span> (std::list&lt;UpdateModulePtr&gt;::const_iterator it = m_normalUpdates.begin(); it != m_normalUpdates.end(); ++it)</div>
<div class="line"><a id="l03699" name="l03699"></a><span class="lineno"> 3699</span>        {</div>
<div class="line"><a id="l03700" name="l03700"></a><span class="lineno"> 3700</span>            <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> u = *it;</div>
<div class="line"><a id="l03701" name="l03701"></a><span class="lineno"> 3701</span>            <a class="code hl_typedef" href="_disabled_types_8h.html#a1ae38e5cd6e16e9f8689c0711849a964">DisabledMaskType</a> dis = u-&gt;<a class="code hl_function" href="class_update_module.html#a4b721623b028ed8f213e7c10fb887dd3">friend_getObject</a>()-&gt;<a class="code hl_function" href="class_object.html#ae01ce1bc174eda3f452d632f4f73af05">getDisabledFlags</a>();</div>
<div class="line"><a id="l03702" name="l03702"></a><span class="lineno"> 3702</span>            <span class="keywordflow">if</span> (!dis.<a class="code hl_function" href="class_bit_flags.html#aba510e8ca5da3576e536b8c8f191ca0a">any</a>() || dis.<a class="code hl_function" href="class_bit_flags.html#afa383102abc0caafd17fec30f4599719">anyIntersectionWith</a>(u-&gt;<a class="code hl_function" href="class_update_module.html#a26adefdc17fde06e53304dc8995d71bc">getDisabledTypesToProcess</a>()))</div>
<div class="line"><a id="l03703" name="l03703"></a><span class="lineno"> 3703</span>            {</div>
<div class="line"><a id="l03704" name="l03704"></a><span class="lineno"> 3704</span>                <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(GameLogic_update_normal)</div>
<div class="line"><a id="l03705" name="l03705"></a><span class="lineno"> 3705</span> </div>
<div class="line"><a id="l03706" name="l03706"></a><span class="lineno"> 3706</span>                m_curUpdateModule = u;</div>
<div class="line"><a id="l03707" name="l03707"></a><span class="lineno"> 3707</span> </div>
<div class="line"><a id="l03708" name="l03708"></a><span class="lineno"> 3708</span><span class="preprocessor">                #ifdef DEBUG_LOGGING</span></div>
<div class="line"><a id="l03709" name="l03709"></a><span class="lineno"> 3709</span>                    <a class="code hl_enumeration" href="_update_module_8h.html#ad3ba22c5173a5e8b7b5f01cff5346b50">UpdateSleepTime</a> <a class="code hl_define" href="matchbot_2main_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a> = u-&gt;<a class="code hl_function" href="class_update_module.html#ad339accf924ac436066ca6763123de36">update</a>();</div>
<div class="line"><a id="l03710" name="l03710"></a><span class="lineno"> 3710</span>                    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(<a class="code hl_define" href="matchbot_2main_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a> == <a class="code hl_enumvalue" href="_update_module_8h.html#ad3ba22c5173a5e8b7b5f01cff5346b50a935864379b04030d6fee8c1b0d6a0ee3">UPDATE_SLEEP_NONE</a>, (<span class="stringliteral">&quot;you must return SLEEPNONE from all nonsleepy modules&quot;</span>));</div>
<div class="line"><a id="l03711" name="l03711"></a><span class="lineno"> 3711</span><span class="preprocessor">                #else</span></div>
<div class="line"><a id="l03712" name="l03712"></a><span class="lineno"> 3712</span>                    u-&gt;<a class="code hl_function" href="class_update_module.html#ad339accf924ac436066ca6763123de36">update</a>();</div>
<div class="line"><a id="l03713" name="l03713"></a><span class="lineno"> 3713</span><span class="preprocessor">                #endif</span></div>
<div class="line"><a id="l03714" name="l03714"></a><span class="lineno"> 3714</span> </div>
<div class="line"><a id="l03715" name="l03715"></a><span class="lineno"> 3715</span>                m_curUpdateModule = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03716" name="l03716"></a><span class="lineno"> 3716</span>            }</div>
<div class="line"><a id="l03717" name="l03717"></a><span class="lineno"> 3717</span>        }</div>
<div class="line"><a id="l03718" name="l03718"></a><span class="lineno"> 3718</span>    }</div>
<div class="line"><a id="l03719" name="l03719"></a><span class="lineno"> 3719</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03720" name="l03720"></a><span class="lineno"> 3720</span> </div>
<div class="line"><a id="l03721" name="l03721"></a><span class="lineno"> 3721</span>    {</div>
<div class="line"><a id="l03722" name="l03722"></a><span class="lineno"> 3722</span>        <span class="keywordflow">while</span> (!m_sleepyUpdates.empty())</div>
<div class="line"><a id="l03723" name="l03723"></a><span class="lineno"> 3723</span>        {</div>
<div class="line"><a id="l03724" name="l03724"></a><span class="lineno"> 3724</span>            <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> u = peekSleepyUpdate();</div>
<div class="line"><a id="l03725" name="l03725"></a><span class="lineno"> 3725</span> </div>
<div class="line"><a id="l03726" name="l03726"></a><span class="lineno"> 3726</span>            <span class="keywordflow">if</span> (!u)</div>
<div class="line"><a id="l03727" name="l03727"></a><span class="lineno"> 3727</span>            {</div>
<div class="line"><a id="l03728" name="l03728"></a><span class="lineno"> 3728</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>((<span class="stringliteral">&quot;Null update. should not happen.&quot;</span>));</div>
<div class="line"><a id="l03729" name="l03729"></a><span class="lineno"> 3729</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03730" name="l03730"></a><span class="lineno"> 3730</span>            }</div>
<div class="line"><a id="l03731" name="l03731"></a><span class="lineno"> 3731</span> </div>
<div class="line"><a id="l03732" name="l03732"></a><span class="lineno"> 3732</span>            <span class="comment">// we&#39;re done, everyone else is sleeping. </span></div>
<div class="line"><a id="l03733" name="l03733"></a><span class="lineno"> 3733</span>            <span class="comment">// break from the loop BEFORE we pop this item off.</span></div>
<div class="line"><a id="l03734" name="l03734"></a><span class="lineno"> 3734</span>            <span class="keywordflow">if</span> (u-&gt;<a class="code hl_function" href="class_update_module.html#acadd3ba8e983f98462e2cd3c686dbdae">friend_getNextCallFrame</a>() &gt; now)</div>
<div class="line"><a id="l03735" name="l03735"></a><span class="lineno"> 3735</span>            {</div>
<div class="line"><a id="l03736" name="l03736"></a><span class="lineno"> 3736</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03737" name="l03737"></a><span class="lineno"> 3737</span>            }</div>
<div class="line"><a id="l03738" name="l03738"></a><span class="lineno"> 3738</span> </div>
<div class="line"><a id="l03739" name="l03739"></a><span class="lineno"> 3739</span>            <a class="code hl_enumeration" href="_update_module_8h.html#ad3ba22c5173a5e8b7b5f01cff5346b50">UpdateSleepTime</a> sleepLen = <a class="code hl_enumvalue" href="_update_module_8h.html#ad3ba22c5173a5e8b7b5f01cff5346b50a935864379b04030d6fee8c1b0d6a0ee3">UPDATE_SLEEP_NONE</a>;   <span class="comment">// default, if it is disabled.</span></div>
<div class="line"><a id="l03740" name="l03740"></a><span class="lineno"> 3740</span> </div>
<div class="line"><a id="l03741" name="l03741"></a><span class="lineno"> 3741</span>            <a class="code hl_typedef" href="_disabled_types_8h.html#a1ae38e5cd6e16e9f8689c0711849a964">DisabledMaskType</a> dis = u-&gt;<a class="code hl_function" href="class_update_module.html#a4b721623b028ed8f213e7c10fb887dd3">friend_getObject</a>()-&gt;<a class="code hl_function" href="class_object.html#ae01ce1bc174eda3f452d632f4f73af05">getDisabledFlags</a>();</div>
<div class="line"><a id="l03742" name="l03742"></a><span class="lineno"> 3742</span>            <span class="keywordflow">if</span> (!dis.<a class="code hl_function" href="class_bit_flags.html#aba510e8ca5da3576e536b8c8f191ca0a">any</a>() || dis.<a class="code hl_function" href="class_bit_flags.html#afa383102abc0caafd17fec30f4599719">anyIntersectionWith</a>(u-&gt;<a class="code hl_function" href="class_update_module.html#a26adefdc17fde06e53304dc8995d71bc">getDisabledTypesToProcess</a>()))</div>
<div class="line"><a id="l03743" name="l03743"></a><span class="lineno"> 3743</span>            {</div>
<div class="line"><a id="l03744" name="l03744"></a><span class="lineno"> 3744</span>                <a class="code hl_define" href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a>(GameLogic_update_sleepy)</div>
<div class="line"><a id="l03745" name="l03745"></a><span class="lineno"> 3745</span> </div>
<div class="line"><a id="l03746" name="l03746"></a><span class="lineno"> 3746</span>                <span class="comment">//DEBUG_LOG((&quot;calling update %08lx (%d %d)... &quot;,update,update-&gt;friend_getNextCallFrame(),update-&gt;friend_getNextCallPhase()));</span></div>
<div class="line"><a id="l03747" name="l03747"></a><span class="lineno"> 3747</span>                m_curUpdateModule = u;</div>
<div class="line"><a id="l03748" name="l03748"></a><span class="lineno"> 3748</span> </div>
<div class="line"><a id="l03749" name="l03749"></a><span class="lineno"> 3749</span>                sleepLen = u-&gt;<a class="code hl_function" href="class_update_module.html#ad339accf924ac436066ca6763123de36">update</a>();</div>
<div class="line"><a id="l03750" name="l03750"></a><span class="lineno"> 3750</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(sleepLen &gt; 0, (<span class="stringliteral">&quot;you may not return 0 from update&quot;</span>));</div>
<div class="line"><a id="l03751" name="l03751"></a><span class="lineno"> 3751</span>                <span class="keywordflow">if</span> (sleepLen &lt; 1) </div>
<div class="line"><a id="l03752" name="l03752"></a><span class="lineno"> 3752</span>                    sleepLen = <a class="code hl_enumvalue" href="_update_module_8h.html#ad3ba22c5173a5e8b7b5f01cff5346b50a935864379b04030d6fee8c1b0d6a0ee3">UPDATE_SLEEP_NONE</a>;</div>
<div class="line"><a id="l03753" name="l03753"></a><span class="lineno"> 3753</span> </div>
<div class="line"><a id="l03754" name="l03754"></a><span class="lineno"> 3754</span>                m_curUpdateModule = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03755" name="l03755"></a><span class="lineno"> 3755</span> </div>
<div class="line"><a id="l03756" name="l03756"></a><span class="lineno"> 3756</span>            }</div>
<div class="line"><a id="l03757" name="l03757"></a><span class="lineno"> 3757</span> </div>
<div class="line"><a id="l03758" name="l03758"></a><span class="lineno"> 3758</span>            <span class="comment">// else defer it till next frame and re-push it</span></div>
<div class="line"><a id="l03759" name="l03759"></a><span class="lineno"> 3759</span>            u-&gt;<a class="code hl_function" href="class_update_module.html#a80a8350bb3eb30648299487d2003cbb8">friend_setNextCallFrame</a>(now + sleepLen);</div>
<div class="line"><a id="l03760" name="l03760"></a><span class="lineno"> 3760</span>            rebalanceSleepyUpdate(0);</div>
<div class="line"><a id="l03761" name="l03761"></a><span class="lineno"> 3761</span>        }</div>
<div class="line"><a id="l03762" name="l03762"></a><span class="lineno"> 3762</span>    }</div>
<div class="line"><a id="l03763" name="l03763"></a><span class="lineno"> 3763</span> </div>
<div class="line"><a id="l03764" name="l03764"></a><span class="lineno"> 3764</span>    validateSleepyUpdate();</div>
<div class="line"><a id="l03765" name="l03765"></a><span class="lineno"> 3765</span> </div>
<div class="line"><a id="l03766" name="l03766"></a><span class="lineno"> 3766</span>    <span class="comment">// update the Artificial Intelligence system</span></div>
<div class="line"><a id="l03767" name="l03767"></a><span class="lineno"> 3767</span>    {</div>
<div class="line"><a id="l03768" name="l03768"></a><span class="lineno"> 3768</span>        <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;UPDATE();</div>
<div class="line"><a id="l03769" name="l03769"></a><span class="lineno"> 3769</span>    }</div>
<div class="line"><a id="l03770" name="l03770"></a><span class="lineno"> 3770</span> </div>
<div class="line"><a id="l03771" name="l03771"></a><span class="lineno"> 3771</span>    <span class="comment">// production updates</span></div>
<div class="line"><a id="l03772" name="l03772"></a><span class="lineno"> 3772</span>    {</div>
<div class="line"><a id="l03773" name="l03773"></a><span class="lineno"> 3773</span>        <a class="code hl_variable" href="_build_assistant_8h.html#aac51a4d03c2c52f384f91d8d94b05409">TheBuildAssistant</a>-&gt;UPDATE();</div>
<div class="line"><a id="l03774" name="l03774"></a><span class="lineno"> 3774</span>    }</div>
<div class="line"><a id="l03775" name="l03775"></a><span class="lineno"> 3775</span> </div>
<div class="line"><a id="l03776" name="l03776"></a><span class="lineno"> 3776</span>    <span class="comment">// update partition info</span></div>
<div class="line"><a id="l03777" name="l03777"></a><span class="lineno"> 3777</span>    {</div>
<div class="line"><a id="l03778" name="l03778"></a><span class="lineno"> 3778</span>        <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a>-&gt;UPDATE();</div>
<div class="line"><a id="l03779" name="l03779"></a><span class="lineno"> 3779</span>    }</div>
<div class="line"><a id="l03780" name="l03780"></a><span class="lineno"> 3780</span> </div>
<div class="line"><a id="l03781" name="l03781"></a><span class="lineno"> 3781</span>    <span class="comment">//</span></div>
<div class="line"><a id="l03782" name="l03782"></a><span class="lineno"> 3782</span>    <span class="comment">// End of frame clean-up</span></div>
<div class="line"><a id="l03783" name="l03783"></a><span class="lineno"> 3783</span>    <span class="comment">//</span></div>
<div class="line"><a id="l03784" name="l03784"></a><span class="lineno"> 3784</span> </div>
<div class="line"><a id="l03785" name="l03785"></a><span class="lineno"> 3785</span>    <span class="comment">// destroy all pending objects</span></div>
<div class="line"><a id="l03786" name="l03786"></a><span class="lineno"> 3786</span>    processDestroyList();</div>
<div class="line"><a id="l03787" name="l03787"></a><span class="lineno"> 3787</span> </div>
<div class="line"><a id="l03788" name="l03788"></a><span class="lineno"> 3788</span>    <span class="comment">// reset the command list, destroying all messages</span></div>
<div class="line"><a id="l03789" name="l03789"></a><span class="lineno"> 3789</span>    <a class="code hl_variable" href="_message_stream_8h.html#a64f312c54b1608454f378973ddf8ebd0">TheCommandList</a>-&gt;reset();</div>
<div class="line"><a id="l03790" name="l03790"></a><span class="lineno"> 3790</span> </div>
<div class="line"><a id="l03791" name="l03791"></a><span class="lineno"> 3791</span>    <a class="code hl_variable" href="_weapon_8h.html#a80aae8ce3a57cc36f07a466bd82187f8">TheWeaponStore</a>-&gt;UPDATE(); </div>
<div class="line"><a id="l03792" name="l03792"></a><span class="lineno"> 3792</span>    <a class="code hl_variable" href="_locomotor_8h.html#af918fa7c16f5e537db22eed07bfe545e">TheLocomotorStore</a>-&gt;UPDATE();   </div>
<div class="line"><a id="l03793" name="l03793"></a><span class="lineno"> 3793</span>    <a class="code hl_variable" href="_victory_conditions_8h.html#a8d23f837125a00053da4631eac1be46d">TheVictoryConditions</a>-&gt;UPDATE();</div>
<div class="line"><a id="l03794" name="l03794"></a><span class="lineno"> 3794</span> </div>
<div class="line"><a id="l03795" name="l03795"></a><span class="lineno"> 3795</span><span class="preprocessor">#ifdef DO_COPY_PROTECTION</span></div>
<div class="line"><a id="l03796" name="l03796"></a><span class="lineno"> 3796</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_game_logic.html#a5172bbb2a741a118a49b8b29385ae17c">isInShellGame</a>() &amp;&amp; <a class="code hl_function" href="class_game_logic.html#ae3406dc6f412f86b803ea76765c54c97">isInGame</a>())</div>
<div class="line"><a id="l03797" name="l03797"></a><span class="lineno"> 3797</span>    {</div>
<div class="line"><a id="l03798" name="l03798"></a><span class="lineno"> 3798</span>        <span class="keywordflow">if</span> ((m_frame == 1024) &amp;&amp; !CopyProtect::validate())</div>
<div class="line"><a id="l03799" name="l03799"></a><span class="lineno"> 3799</span>        {</div>
<div class="line"><a id="l03800" name="l03800"></a><span class="lineno"> 3800</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Copy protection failed - bailing&quot;</span>));</div>
<div class="line"><a id="l03801" name="l03801"></a><span class="lineno"> 3801</span>            <a class="code hl_class" href="class_game_message.html">GameMessage</a> *<a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a> = <a class="code hl_variable" href="_message_stream_8h.html#ab9dc75a3dc61c4ad88171b9f604e2bf0">TheMessageStream</a>-&gt;appendMessage(<a class="code hl_enumvalue" href="class_game_message.html#a5613bf5264e1e3baea9464ab89c6a039a514262f8c0e4b06fdbf828f4ade75ba7">GameMessage::MSG_SELF_DESTRUCT</a>);</div>
<div class="line"><a id="l03802" name="l03802"></a><span class="lineno"> 3802</span>            <a class="code hl_variable" href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a>-&gt;appendBooleanArgument(<a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a id="l03803" name="l03803"></a><span class="lineno"> 3803</span>        }</div>
<div class="line"><a id="l03804" name="l03804"></a><span class="lineno"> 3804</span>    }</div>
<div class="line"><a id="l03805" name="l03805"></a><span class="lineno"> 3805</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03806" name="l03806"></a><span class="lineno"> 3806</span> </div>
<div class="line"><a id="l03807" name="l03807"></a><span class="lineno"> 3807</span>    {</div>
<div class="line"><a id="l03808" name="l03808"></a><span class="lineno"> 3808</span>        <span class="comment">//Handle disabled statii (and re-enable objects once frame matches)</span></div>
<div class="line"><a id="l03809" name="l03809"></a><span class="lineno"> 3809</span>        <span class="keywordflow">for</span>( <a class="code hl_class" href="class_object.html">Object</a> *obj = m_objList; obj; obj = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>() )</div>
<div class="line"><a id="l03810" name="l03810"></a><span class="lineno"> 3810</span>        {</div>
<div class="line"><a id="l03811" name="l03811"></a><span class="lineno"> 3811</span>            <span class="keywordflow">if</span>( obj-&gt;<a class="code hl_function" href="class_object.html#a807afc5d357eb6d93cdfde600b8f6b80">isDisabled</a>() )</div>
<div class="line"><a id="l03812" name="l03812"></a><span class="lineno"> 3812</span>            {</div>
<div class="line"><a id="l03813" name="l03813"></a><span class="lineno"> 3813</span>                obj-&gt;<a class="code hl_function" href="class_object.html#a9020ef44a0f8ae547f3321e7e9b7640c">checkDisabledStatus</a>();</div>
<div class="line"><a id="l03814" name="l03814"></a><span class="lineno"> 3814</span>            }</div>
<div class="line"><a id="l03815" name="l03815"></a><span class="lineno"> 3815</span>        }</div>
<div class="line"><a id="l03816" name="l03816"></a><span class="lineno"> 3816</span>    }</div>
<div class="line"><a id="l03817" name="l03817"></a><span class="lineno"> 3817</span> </div>
<div class="line"><a id="l03818" name="l03818"></a><span class="lineno"> 3818</span>  </div>
<div class="line"><a id="l03819" name="l03819"></a><span class="lineno"> 3819</span> </div>
<div class="line"><a id="l03820" name="l03820"></a><span class="lineno"> 3820</span> </div>
<div class="line"><a id="l03821" name="l03821"></a><span class="lineno"> 3821</span> </div>
<div class="line"><a id="l03822" name="l03822"></a><span class="lineno"> 3822</span>    <span class="comment">// increment world time</span></div>
<div class="line"><a id="l03823" name="l03823"></a><span class="lineno"> 3823</span>    <span class="keywordflow">if</span> (!m_startNewGame)</div>
<div class="line"><a id="l03824" name="l03824"></a><span class="lineno"> 3824</span>    {</div>
<div class="line"><a id="l03825" name="l03825"></a><span class="lineno"> 3825</span>        m_frame++;</div>
<div class="line"><a id="l03826" name="l03826"></a><span class="lineno"> 3826</span>    }</div>
<div class="line"><a id="l03827" name="l03827"></a><span class="lineno"> 3827</span>}</div>
</div>
<div class="line"><a id="l03828" name="l03828"></a><span class="lineno"> 3828</span> </div>
<div class="line"><a id="l03829" name="l03829"></a><span class="lineno"> 3829</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l03831" name="l03831"></a><span class="lineno"> 3831</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen03832" data-start="{" data-end="}">
<div class="line"><a id="l03832" name="l03832"></a><span class="lineno"><a class="line" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698"> 3832</a></span><a class="code hl_class" href="class_object.html">Object</a> *<a class="code hl_function" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">GameLogic::getFirstObject</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l03833" name="l03833"></a><span class="lineno"> 3833</span>{</div>
<div class="line"><a id="l03834" name="l03834"></a><span class="lineno"> 3834</span>    <span class="keywordflow">return</span> m_objList;</div>
<div class="line"><a id="l03835" name="l03835"></a><span class="lineno"> 3835</span>}</div>
</div>
<div class="line"><a id="l03836" name="l03836"></a><span class="lineno"> 3836</span> </div>
<div class="line"><a id="l03837" name="l03837"></a><span class="lineno"> 3837</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l03839" name="l03839"></a><span class="lineno"> 3839</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen03840" data-start="{" data-end="}">
<div class="line"><a id="l03840" name="l03840"></a><span class="lineno"><a class="line" href="class_game_logic.html#a3513962a3721dfba9cd21f6035aa9571"> 3840</a></span><a class="code hl_enumeration" href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5">ObjectID</a> <a class="code hl_function" href="class_game_logic.html#a3513962a3721dfba9cd21f6035aa9571">GameLogic::allocateObjectID</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l03841" name="l03841"></a><span class="lineno"> 3841</span>{</div>
<div class="line"><a id="l03843" name="l03843"></a><span class="lineno"> 3843</span>    <a class="code hl_enumeration" href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5">ObjectID</a> ret = m_nextObjID;</div>
<div class="line"><a id="l03844" name="l03844"></a><span class="lineno"> 3844</span>    m_nextObjID = (<a class="code hl_enumeration" href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5">ObjectID</a>)((<a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a>)m_nextObjID + 1);</div>
<div class="line"><a id="l03845" name="l03845"></a><span class="lineno"> 3845</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l03846" name="l03846"></a><span class="lineno"> 3846</span>}</div>
</div>
<div class="line"><a id="l03847" name="l03847"></a><span class="lineno"> 3847</span> </div>
<div class="line"><a id="l03848" name="l03848"></a><span class="lineno"> 3848</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l03850" name="l03850"></a><span class="lineno"> 3850</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen03851" data-start="{" data-end="}">
<div class="line"><a id="l03851" name="l03851"></a><span class="lineno"><a class="line" href="class_game_logic.html#a05b41c6ec4bfe67676ab8a5c1d55722c"> 3851</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a05b41c6ec4bfe67676ab8a5c1d55722c">GameLogic::addObjectToLookupTable</a>( <a class="code hl_class" href="class_object.html">Object</a> *obj )</div>
<div class="line"><a id="l03852" name="l03852"></a><span class="lineno"> 3852</span>{</div>
<div class="line"><a id="l03853" name="l03853"></a><span class="lineno"> 3853</span> </div>
<div class="line"><a id="l03854" name="l03854"></a><span class="lineno"> 3854</span>    <span class="comment">// sanity</span></div>
<div class="line"><a id="l03855" name="l03855"></a><span class="lineno"> 3855</span>    <span class="keywordflow">if</span>( obj == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l03856" name="l03856"></a><span class="lineno"> 3856</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03857" name="l03857"></a><span class="lineno"> 3857</span> </div>
<div class="line"><a id="l03858" name="l03858"></a><span class="lineno"> 3858</span>    <span class="comment">// add to lookup</span></div>
<div class="line"><a id="l03859" name="l03859"></a><span class="lineno"> 3859</span><span class="comment">//  m_objHash[ obj-&gt;getID() ] = obj;</span></div>
<div class="line"><a id="l03860" name="l03860"></a><span class="lineno"> 3860</span>    <a class="code hl_enumeration" href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5">ObjectID</a> newID = obj-&gt;<a class="code hl_function" href="class_object.html#a6c17829820a29ded73578abd29906943">getID</a>();</div>
<div class="line"><a id="l03861" name="l03861"></a><span class="lineno"> 3861</span>    <span class="keywordflow">while</span>( newID &gt;= m_objVector.size() ) <span class="comment">// Fail case is hella rare, so faster to double up on size() call</span></div>
<div class="line"><a id="l03862" name="l03862"></a><span class="lineno"> 3862</span>        m_objVector.resize(m_objVector.size() * 2, <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a id="l03863" name="l03863"></a><span class="lineno"> 3863</span> </div>
<div class="line"><a id="l03864" name="l03864"></a><span class="lineno"> 3864</span>    m_objVector[ newID ] = obj;</div>
<div class="line"><a id="l03865" name="l03865"></a><span class="lineno"> 3865</span> </div>
<div class="line"><a id="l03866" name="l03866"></a><span class="lineno"> 3866</span>}  <span class="comment">// end addObjectToLookupTable</span></div>
</div>
<div class="line"><a id="l03867" name="l03867"></a><span class="lineno"> 3867</span> </div>
<div class="line"><a id="l03868" name="l03868"></a><span class="lineno"> 3868</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l03870" name="l03870"></a><span class="lineno"> 3870</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen03871" data-start="{" data-end="}">
<div class="line"><a id="l03871" name="l03871"></a><span class="lineno"><a class="line" href="class_game_logic.html#a96258c03c3a75335705345fa9de00df9"> 3871</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a96258c03c3a75335705345fa9de00df9">GameLogic::removeObjectFromLookupTable</a>( <a class="code hl_class" href="class_object.html">Object</a> *obj )</div>
<div class="line"><a id="l03872" name="l03872"></a><span class="lineno"> 3872</span>{</div>
<div class="line"><a id="l03873" name="l03873"></a><span class="lineno"> 3873</span> </div>
<div class="line"><a id="l03874" name="l03874"></a><span class="lineno"> 3874</span>    <span class="comment">// sanity</span></div>
<div class="line"><a id="l03875" name="l03875"></a><span class="lineno"> 3875</span>    <span class="keywordflow">if</span>( obj == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l03876" name="l03876"></a><span class="lineno"> 3876</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03877" name="l03877"></a><span class="lineno"> 3877</span> </div>
<div class="line"><a id="l03878" name="l03878"></a><span class="lineno"> 3878</span>    <span class="comment">// remove from lookup table</span></div>
<div class="line"><a id="l03879" name="l03879"></a><span class="lineno"> 3879</span><span class="comment">//  m_objHash.erase( obj-&gt;getID() );</span></div>
<div class="line"><a id="l03880" name="l03880"></a><span class="lineno"> 3880</span>    m_objVector[ obj-&gt;<a class="code hl_function" href="class_object.html#a6c17829820a29ded73578abd29906943">getID</a>() ] = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l03881" name="l03881"></a><span class="lineno"> 3881</span> </div>
<div class="line"><a id="l03882" name="l03882"></a><span class="lineno"> 3882</span>}  <span class="comment">// end removeObjectFromLookupTable</span></div>
</div>
<div class="line"><a id="l03883" name="l03883"></a><span class="lineno"> 3883</span> </div>
<div class="line"><a id="l03884" name="l03884"></a><span class="lineno"> 3884</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l03886" name="l03886"></a><span class="lineno"> 3886</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen03887" data-start="{" data-end="}">
<div class="line"><a id="l03887" name="l03887"></a><span class="lineno"><a class="line" href="class_game_logic.html#a256fa1df1af2a06383672ef71cc64307"> 3887</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a256fa1df1af2a06383672ef71cc64307">GameLogic::registerObject</a>( <a class="code hl_class" href="class_object.html">Object</a> *obj )</div>
<div class="line"><a id="l03888" name="l03888"></a><span class="lineno"> 3888</span>{</div>
<div class="line"><a id="l03889" name="l03889"></a><span class="lineno"> 3889</span> </div>
<div class="line"><a id="l03890" name="l03890"></a><span class="lineno"> 3890</span>    <span class="comment">// add the object to the global list</span></div>
<div class="line"><a id="l03891" name="l03891"></a><span class="lineno"> 3891</span>    obj-&gt;<a class="code hl_function" href="class_object.html#adc11c0b96c1a4f39b5db1741457f0fda">prependToList</a>(&amp;m_objList);</div>
<div class="line"><a id="l03892" name="l03892"></a><span class="lineno"> 3892</span> </div>
<div class="line"><a id="l03893" name="l03893"></a><span class="lineno"> 3893</span>    <span class="comment">// add object to lookup table</span></div>
<div class="line"><a id="l03894" name="l03894"></a><span class="lineno"> 3894</span>    <a class="code hl_function" href="class_game_logic.html#a05b41c6ec4bfe67676ab8a5c1d55722c">addObjectToLookupTable</a>( obj );</div>
<div class="line"><a id="l03895" name="l03895"></a><span class="lineno"> 3895</span> </div>
<div class="line"><a id="l03896" name="l03896"></a><span class="lineno"> 3896</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> now = <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;getFrame();</div>
<div class="line"><a id="l03897" name="l03897"></a><span class="lineno"> 3897</span>    <span class="keywordflow">if</span> (now == 0)</div>
<div class="line"><a id="l03898" name="l03898"></a><span class="lineno"> 3898</span>        now = 1;</div>
<div class="line"><a id="l03899" name="l03899"></a><span class="lineno"> 3899</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="class_behavior_module.html">BehaviorModule</a>** b = obj-&gt;<a class="code hl_function" href="class_object.html#ac31c977e6871a6a24c903af3a0210f26">getBehaviorModules</a>(); *b; ++b)</div>
<div class="line"><a id="l03900" name="l03900"></a><span class="lineno"> 3900</span>    {</div>
<div class="line"><a id="l03901" name="l03901"></a><span class="lineno"> 3901</span><span class="preprocessor">#ifdef DIRECT_UPDATEMODULE_ACCESS</span></div>
<div class="line"><a id="l03902" name="l03902"></a><span class="lineno"> 3902</span>        <span class="comment">// evil, but necessary at this point. (srj)</span></div>
<div class="line"><a id="l03903" name="l03903"></a><span class="lineno"> 3903</span>        <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> u = (<a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a>)((*b)-&gt;getUpdate());</div>
<div class="line"><a id="l03904" name="l03904"></a><span class="lineno"> 3904</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l03905" name="l03905"></a><span class="lineno"> 3905</span>        <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> u = (*b)-&gt;<a class="code hl_function" href="class_update_module.html#aa37942111accd25746e982f3e6968eb8">getUpdate</a>();</div>
<div class="line"><a id="l03906" name="l03906"></a><span class="lineno"> 3906</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03907" name="l03907"></a><span class="lineno"> 3907</span>        <span class="keywordflow">if</span> (!u)</div>
<div class="line"><a id="l03908" name="l03908"></a><span class="lineno"> 3908</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03909" name="l03909"></a><span class="lineno"> 3909</span> </div>
<div class="line"><a id="l03910" name="l03910"></a><span class="lineno"> 3910</span>        <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> when = u-&gt;<a class="code hl_function" href="class_update_module.html#acadd3ba8e983f98462e2cd3c686dbdae">friend_getNextCallFrame</a>();</div>
<div class="line"><a id="l03911" name="l03911"></a><span class="lineno"> 3911</span><span class="preprocessor">#ifdef ALLOW_NONSLEEPY_UPDATES</span></div>
<div class="line"><a id="l03912" name="l03912"></a><span class="lineno"> 3912</span>        <span class="keywordflow">if</span> (when == 0)</div>
<div class="line"><a id="l03913" name="l03913"></a><span class="lineno"> 3913</span>        {</div>
<div class="line"><a id="l03914" name="l03914"></a><span class="lineno"> 3914</span>            <span class="comment">// zero is the magic value for &quot;never sleeps&quot;</span></div>
<div class="line"><a id="l03915" name="l03915"></a><span class="lineno"> 3915</span>            m_normalUpdates.push_back(u);</div>
<div class="line"><a id="l03916" name="l03916"></a><span class="lineno"> 3916</span>        }</div>
<div class="line"><a id="l03917" name="l03917"></a><span class="lineno"> 3917</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l03918" name="l03918"></a><span class="lineno"> 3918</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l03919" name="l03919"></a><span class="lineno"> 3919</span>        <span class="comment">// note that &#39;when&#39; can be zero here for any update module</span></div>
<div class="line"><a id="l03920" name="l03920"></a><span class="lineno"> 3920</span>        <span class="comment">// that didn&#39;t bother to call setWakeFrame() in its ctor.</span></div>
<div class="line"><a id="l03921" name="l03921"></a><span class="lineno"> 3921</span>        <span class="comment">// this is legal.</span></div>
<div class="line"><a id="l03922" name="l03922"></a><span class="lineno"> 3922</span>        <span class="keywordflow">if</span> (when == 0)</div>
<div class="line"><a id="l03923" name="l03923"></a><span class="lineno"> 3923</span>            u-&gt;<a class="code hl_function" href="class_update_module.html#a80a8350bb3eb30648299487d2003cbb8">friend_setNextCallFrame</a>(now);</div>
<div class="line"><a id="l03924" name="l03924"></a><span class="lineno"> 3924</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03925" name="l03925"></a><span class="lineno"> 3925</span>        {</div>
<div class="line"><a id="l03926" name="l03926"></a><span class="lineno"> 3926</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(u-&gt;<a class="code hl_function" href="class_update_module.html#acadd3ba8e983f98462e2cd3c686dbdae">friend_getNextCallFrame</a>() &gt;= now, (<span class="stringliteral">&quot;you may not specify a zero initial sleep time for sleepy modules (%d %d)&quot;</span>,u-&gt;<a class="code hl_function" href="class_update_module.html#acadd3ba8e983f98462e2cd3c686dbdae">friend_getNextCallFrame</a>(),now));</div>
<div class="line"><a id="l03927" name="l03927"></a><span class="lineno"> 3927</span>            pushSleepyUpdate(u);</div>
<div class="line"><a id="l03928" name="l03928"></a><span class="lineno"> 3928</span>        }</div>
<div class="line"><a id="l03929" name="l03929"></a><span class="lineno"> 3929</span>    }</div>
<div class="line"><a id="l03930" name="l03930"></a><span class="lineno"> 3930</span> </div>
<div class="line"><a id="l03931" name="l03931"></a><span class="lineno"> 3931</span>}</div>
</div>
<div class="line"><a id="l03932" name="l03932"></a><span class="lineno"> 3932</span> </div>
<div class="line"><a id="l03933" name="l03933"></a><span class="lineno"> 3933</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l03945" name="l03945"></a><span class="lineno"> 3945</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen03946" data-start="{" data-end="}">
<div class="line"><a id="l03946" name="l03946"></a><span class="lineno"><a class="line" href="class_game_logic.html#a0c600344a281cef3e68a172a9a06ce4e"> 3946</a></span><a class="code hl_class" href="class_object.html">Object</a> *<a class="code hl_function" href="class_game_logic.html#a0c600344a281cef3e68a172a9a06ce4e">GameLogic::friend_createObject</a>( <span class="keyword">const</span> <a class="code hl_class" href="class_thing_template.html">ThingTemplate</a> *thing, <span class="keyword">const</span> <a class="code hl_typedef" href="_object_status_types_8h.html#a26a61339803564a7b29a0b9577b1e3d8">ObjectStatusMaskType</a> &amp;statusBits, <a class="code hl_class" href="class_team.html">Team</a> *team )</div>
<div class="line"><a id="l03947" name="l03947"></a><span class="lineno"> 3947</span>{</div>
<div class="line"><a id="l03948" name="l03948"></a><span class="lineno"> 3948</span>    <a class="code hl_class" href="class_object.html">Object</a> *obj;</div>
<div class="line"><a id="l03949" name="l03949"></a><span class="lineno"> 3949</span> </div>
<div class="line"><a id="l03950" name="l03950"></a><span class="lineno"> 3950</span>    obj = <a class="code hl_define" href="_game_memory_8h.html#a35fee562c05ae9f944ce2568013ea71c">newInstance</a>(<a class="code hl_class" href="class_object.html">Object</a>)( thing, statusBits, team );</div>
<div class="line"><a id="l03951" name="l03951"></a><span class="lineno"> 3951</span> </div>
<div class="line"><a id="l03952" name="l03952"></a><span class="lineno"> 3952</span>    <span class="keywordflow">return</span> obj;</div>
<div class="line"><a id="l03953" name="l03953"></a><span class="lineno"> 3953</span>} </div>
</div>
<div class="line"><a id="l03954" name="l03954"></a><span class="lineno"> 3954</span> </div>
<div class="line"><a id="l03955" name="l03955"></a><span class="lineno"> 3955</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l03958" name="l03958"></a><span class="lineno"> 3958</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen03959" data-start="{" data-end="}">
<div class="line"><a id="l03959" name="l03959"></a><span class="lineno"><a class="line" href="class_game_logic.html#a5875c63d5b64103411d99060d68c5623"> 3959</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a5875c63d5b64103411d99060d68c5623">GameLogic::destroyObject</a>( <a class="code hl_class" href="class_object.html">Object</a> *obj )</div>
<div class="line"><a id="l03960" name="l03960"></a><span class="lineno"> 3960</span>{</div>
<div class="line"><a id="l03961" name="l03961"></a><span class="lineno"> 3961</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(obj != <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<span class="stringliteral">&quot;destroying null object&quot;</span>));</div>
<div class="line"><a id="l03962" name="l03962"></a><span class="lineno"> 3962</span> </div>
<div class="line"><a id="l03963" name="l03963"></a><span class="lineno"> 3963</span>    <span class="comment">// if already flagged for destruction, ignore</span></div>
<div class="line"><a id="l03964" name="l03964"></a><span class="lineno"> 3964</span>    <span class="keywordflow">if</span> (!obj || obj-&gt;<a class="code hl_function" href="class_object.html#a406550409b828a9b9985f828f43d2f40">isDestroyed</a>())</div>
<div class="line"><a id="l03965" name="l03965"></a><span class="lineno"> 3965</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03966" name="l03966"></a><span class="lineno"> 3966</span> </div>
<div class="line"><a id="l03967" name="l03967"></a><span class="lineno"> 3967</span>    <span class="comment">// run the object onDestroy event if provied</span></div>
<div class="line"><a id="l03968" name="l03968"></a><span class="lineno"> 3968</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="class_behavior_module.html">BehaviorModule</a>** m = obj-&gt;<a class="code hl_function" href="class_object.html#ac31c977e6871a6a24c903af3a0210f26">getBehaviorModules</a>(); *m; ++m)</div>
<div class="line"><a id="l03969" name="l03969"></a><span class="lineno"> 3969</span>    {</div>
<div class="line"><a id="l03970" name="l03970"></a><span class="lineno"> 3970</span>        <a class="code hl_class" href="class_destroy_module_interface.html">DestroyModuleInterface</a>* destroy = (*m)-&gt;getDestroy();</div>
<div class="line"><a id="l03971" name="l03971"></a><span class="lineno"> 3971</span>        <span class="keywordflow">if</span> (destroy)</div>
<div class="line"><a id="l03972" name="l03972"></a><span class="lineno"> 3972</span>            destroy-&gt;<a class="code hl_function" href="class_destroy_module_interface.html#af2f1ec48d104271afded1406f698038f">onDestroy</a>();</div>
<div class="line"><a id="l03973" name="l03973"></a><span class="lineno"> 3973</span>    }</div>
<div class="line"><a id="l03974" name="l03974"></a><span class="lineno"> 3974</span> </div>
<div class="line"><a id="l03975" name="l03975"></a><span class="lineno"> 3975</span>    <span class="comment">// mark object as destroyed</span></div>
<div class="line"><a id="l03976" name="l03976"></a><span class="lineno"> 3976</span>    obj-&gt;<a class="code hl_function" href="class_object.html#a11f54efedb1a62160740358a9bd666cd">setStatus</a>( <a class="code hl_define" href="_object_status_types_8h.html#a81157df570ed226f5f71006d81d305a4">MAKE_OBJECT_STATUS_MASK</a>( <a class="code hl_enumvalue" href="_object_status_types_8h.html#a582a0a1fdc9ebd748af0895c66e3e137aec219f57229834c71dfd37ee55fd52a8">OBJECT_STATUS_DESTROYED</a> ) );</div>
<div class="line"><a id="l03977" name="l03977"></a><span class="lineno"> 3977</span> </div>
<div class="line"><a id="l03978" name="l03978"></a><span class="lineno"> 3978</span>    <span class="comment">// We desperately need to stop here, or else the destructor of the statemachine will try to do</span></div>
<div class="line"><a id="l03979" name="l03979"></a><span class="lineno"> 3979</span>    <span class="comment">// stopping logic, which uses virtual functions and deleted modules, which will crash us.</span></div>
<div class="line"><a id="l03980" name="l03980"></a><span class="lineno"> 3980</span>    <a class="code hl_class" href="class_a_i_update_interface.html">AIUpdateInterface</a> *ai = obj-&gt;<a class="code hl_function" href="class_object.html#ad67789da3db49c3827e5a2abf8fe68a0">getAIUpdateInterface</a>();</div>
<div class="line"><a id="l03981" name="l03981"></a><span class="lineno"> 3981</span>    <span class="keywordflow">if</span>( ai )</div>
<div class="line"><a id="l03982" name="l03982"></a><span class="lineno"> 3982</span>    {</div>
<div class="line"><a id="l03983" name="l03983"></a><span class="lineno"> 3983</span>        ai-&gt;<a class="code hl_function" href="class_a_i_update_interface.html#a04904287e58084fa3d934b326b2b6dbd">setLocomotorGoalNone</a>();</div>
<div class="line"><a id="l03984" name="l03984"></a><span class="lineno"> 3984</span>        ai-&gt;<a class="code hl_function" href="class_a_i_update_interface.html#ad2a34cb1d20040d0b936060fbb51882d">destroyPath</a>();</div>
<div class="line"><a id="l03985" name="l03985"></a><span class="lineno"> 3985</span>    }</div>
<div class="line"><a id="l03986" name="l03986"></a><span class="lineno"> 3986</span> </div>
<div class="line"><a id="l03987" name="l03987"></a><span class="lineno"> 3987</span>    <span class="comment">// add to end of destruction list, in case something is being destroyed and trying to destroy subobjects</span></div>
<div class="line"><a id="l03988" name="l03988"></a><span class="lineno"> 3988</span>    m_objectsToDestroy.push_back(obj);</div>
<div class="line"><a id="l03989" name="l03989"></a><span class="lineno"> 3989</span> </div>
<div class="line"><a id="l03990" name="l03990"></a><span class="lineno"> 3990</span>    <span class="comment">// run any on destroy logic internal to the object</span></div>
<div class="line"><a id="l03991" name="l03991"></a><span class="lineno"> 3991</span>    obj-&gt;<a class="code hl_function" href="class_object.html#a56bfc96e67806256d53a74ac0a7e9c64">onDestroy</a>();</div>
<div class="line"><a id="l03992" name="l03992"></a><span class="lineno"> 3992</span> </div>
<div class="line"><a id="l03993" name="l03993"></a><span class="lineno"> 3993</span>    <span class="comment">// remove wall pieces from the pathfinder</span></div>
<div class="line"><a id="l03994" name="l03994"></a><span class="lineno"> 3994</span>    <span class="keywordflow">if</span>( obj-&gt;<a class="code hl_function" href="class_thing.html#a7978985fe2e1e1b1b91bb822f62df5e9">isKindOf</a>( <a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa985d5f63f13b78714246ab248d55b3f">KINDOF_WALK_ON_TOP_OF_WALL</a> ) )</div>
<div class="line"><a id="l03995" name="l03995"></a><span class="lineno"> 3995</span>        <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;pathfinder()-&gt;removeWallPiece( obj );</div>
<div class="line"><a id="l03996" name="l03996"></a><span class="lineno"> 3996</span> </div>
<div class="line"><a id="l03997" name="l03997"></a><span class="lineno"> 3997</span>    <span class="comment">//Clean up special power shortcut bars</span></div>
<div class="line"><a id="l03998" name="l03998"></a><span class="lineno"> 3998</span>    <span class="keywordflow">if</span>( obj-&gt;<a class="code hl_function" href="class_object.html#a2e29bc0d9a6d865db290f4f74d2d3595">hasAnySpecialPower</a>() )</div>
<div class="line"><a id="l03999" name="l03999"></a><span class="lineno"> 3999</span>    {</div>
<div class="line"><a id="l04000" name="l04000"></a><span class="lineno"> 4000</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getLocalPlayer() == obj-&gt;<a class="code hl_function" href="class_object.html#a385c1cb6707129788e07e5e24568b6c4">getControllingPlayer</a>() )</div>
<div class="line"><a id="l04001" name="l04001"></a><span class="lineno"> 4001</span>        {</div>
<div class="line"><a id="l04002" name="l04002"></a><span class="lineno"> 4002</span>            <a class="code hl_variable" href="_control_bar_8h.html#a2fc730445768f7da72770274a791997b">TheControlBar</a>-&gt;markUIDirty();</div>
<div class="line"><a id="l04003" name="l04003"></a><span class="lineno"> 4003</span>        }</div>
<div class="line"><a id="l04004" name="l04004"></a><span class="lineno"> 4004</span>    }</div>
<div class="line"><a id="l04005" name="l04005"></a><span class="lineno"> 4005</span> </div>
<div class="line"><a id="l04006" name="l04006"></a><span class="lineno"> 4006</span> </div>
<div class="line"><a id="l04007" name="l04007"></a><span class="lineno"> 4007</span>}  <span class="comment">// end destroyObject</span></div>
</div>
<div class="line"><a id="l04008" name="l04008"></a><span class="lineno"> 4008</span> </div>
<div class="line"><a id="l04009" name="l04009"></a><span class="lineno"> 4009</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04010" name="l04010"></a><span class="lineno"> 4010</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04011" name="l04011"></a><span class="lineno"><a class="line" href="_game_logic_8cpp.html#ad7bff3cc7d8e00209d1769b7d21dd5eb"> 4011</a></span><a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> <a class="code hl_variable" href="_game_logic_8cpp.html#ad7bff3cc7d8e00209d1769b7d21dd5eb">inCRCGen</a> = <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="foldopen" id="foldopen04012" data-start="{" data-end="}">
<div class="line"><a id="l04012" name="l04012"></a><span class="lineno"><a class="line" href="class_game_logic.html#a3f5df93136fb3689934822b7e5d726e5"> 4012</a></span><a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> <a class="code hl_function" href="class_game_logic.html#a3f5df93136fb3689934822b7e5d726e5">GameLogic::getCRC</a>( <a class="code hl_union" href="union_int.html">Int</a> mode, <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> deepCRCFileName )</div>
<div class="line"><a id="l04013" name="l04013"></a><span class="lineno"> 4013</span>{</div>
<div class="line"><a id="l04014" name="l04014"></a><span class="lineno"> 4014</span>    <span class="keywordflow">if</span> (mode != <a class="code hl_enumvalue" href="_game_logic_8h.html#a190948c860ef2bf66df9ce6f12ce649aab6e809120e579343360eeccbd0426a7b">CRC_RECALC</a>)</div>
<div class="line"><a id="l04015" name="l04015"></a><span class="lineno"> 4015</span>        <span class="keywordflow">return</span> m_CRC;</div>
<div class="line"><a id="l04016" name="l04016"></a><span class="lineno"> 4016</span> </div>
<div class="line"><a id="l04017" name="l04017"></a><span class="lineno"> 4017</span>    <a class="code hl_function" href="_f_p_u_control_8h.html#ac898939fad383b7b6cb129bdd759cf0f">setFPMode</a>();</div>
<div class="line"><a id="l04018" name="l04018"></a><span class="lineno"> 4018</span> </div>
<div class="line"><a id="l04019" name="l04019"></a><span class="lineno"> 4019</span>    <a class="code hl_class" href="class_latch_restore.html">LatchRestore&lt;Bool&gt;</a> latch(<a class="code hl_variable" href="_game_logic_8cpp.html#ad7bff3cc7d8e00209d1769b7d21dd5eb">inCRCGen</a>, !<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>());</div>
<div class="line"><a id="l04020" name="l04020"></a><span class="lineno"> 4020</span> </div>
<div class="line"><a id="l04021" name="l04021"></a><span class="lineno"> 4021</span>    <a class="code hl_friend" href="class_snapshot.html#a1fb8ea7071efdcde04a6a7f5772bc9e2">XferCRC</a> *xferCRC;</div>
<div class="line"><a id="l04022" name="l04022"></a><span class="lineno"> 4022</span>    <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> marker;</div>
<div class="line"><a id="l04023" name="l04023"></a><span class="lineno"> 4023</span>    <span class="keywordflow">if</span> (deepCRCFileName.<a class="code hl_function" href="class_ascii_string.html#a1fc6bac368662343097a55184c7cbf75">isNotEmpty</a>())</div>
<div class="line"><a id="l04024" name="l04024"></a><span class="lineno"> 4024</span>    {</div>
<div class="line"><a id="l04025" name="l04025"></a><span class="lineno"> 4025</span>        xferCRC = NEW <a class="code hl_class" href="class_xfer_deep_c_r_c.html">XferDeepCRC</a>;</div>
<div class="line"><a id="l04026" name="l04026"></a><span class="lineno"> 4026</span>        xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#ad5f341494a5f997930faa0bb6f5087be">open</a>(deepCRCFileName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>());</div>
<div class="line"><a id="l04027" name="l04027"></a><span class="lineno"> 4027</span>    }</div>
<div class="line"><a id="l04028" name="l04028"></a><span class="lineno"> 4028</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l04029" name="l04029"></a><span class="lineno"> 4029</span>    {</div>
<div class="line"><a id="l04030" name="l04030"></a><span class="lineno"> 4030</span>        <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> crcName;</div>
<div class="line"><a id="l04031" name="l04031"></a><span class="lineno"> 4031</span><span class="preprocessor">#ifdef DEBUG_CRC</span></div>
<div class="line"><a id="l04032" name="l04032"></a><span class="lineno"> 4032</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>() &amp;&amp; g_keepCRCSaves &amp;&amp; m_frame &lt; 5)</div>
<div class="line"><a id="l04033" name="l04033"></a><span class="lineno"> 4033</span>        {</div>
<div class="line"><a id="l04034" name="l04034"></a><span class="lineno"> 4034</span>            xferCRC = NEW <a class="code hl_class" href="class_xfer_deep_c_r_c.html">XferDeepCRC</a>;</div>
<div class="line"><a id="l04035" name="l04035"></a><span class="lineno"> 4035</span>            crcName.<a class="code hl_function" href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">format</a>(<span class="stringliteral">&quot;logicFrame%d.crc&quot;</span>, (m_frame%5));</div>
<div class="line"><a id="l04036" name="l04036"></a><span class="lineno"> 4036</span>        }</div>
<div class="line"><a id="l04037" name="l04037"></a><span class="lineno"> 4037</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l04038" name="l04038"></a><span class="lineno"> 4038</span><span class="preprocessor">#endif DEBUG_CRC</span></div>
<div class="line"><a id="l04039" name="l04039"></a><span class="lineno"> 4039</span>        {</div>
<div class="line"><a id="l04040" name="l04040"></a><span class="lineno"> 4040</span>            xferCRC = NEW <a class="code hl_friend" href="class_snapshot.html#a1fb8ea7071efdcde04a6a7f5772bc9e2">XferCRC</a>;</div>
<div class="line"><a id="l04041" name="l04041"></a><span class="lineno"> 4041</span>            crcName = <span class="stringliteral">&quot;lightCRC&quot;</span>;</div>
<div class="line"><a id="l04042" name="l04042"></a><span class="lineno"> 4042</span>        }</div>
<div class="line"><a id="l04043" name="l04043"></a><span class="lineno"> 4043</span>        xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#ad5f341494a5f997930faa0bb6f5087be">open</a>(crcName);</div>
<div class="line"><a id="l04044" name="l04044"></a><span class="lineno"> 4044</span>    }</div>
<div class="line"><a id="l04045" name="l04045"></a><span class="lineno"> 4045</span> </div>
<div class="line"><a id="l04046" name="l04046"></a><span class="lineno"> 4046</span>    <span class="comment">// calculate CRCs</span></div>
<div class="line"><a id="l04047" name="l04047"></a><span class="lineno"> 4047</span>    <a class="code hl_class" href="class_object.html">Object</a> *obj;</div>
<div class="line"><a id="l04048" name="l04048"></a><span class="lineno"> 4048</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(<span class="keyword">this</span> == <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>, (<span class="stringliteral">&quot;Not in GameLogic&quot;</span>));</div>
<div class="line"><a id="l04049" name="l04049"></a><span class="lineno"> 4049</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>())</div>
<div class="line"><a id="l04050" name="l04050"></a><span class="lineno"> 4050</span>    {</div>
<div class="line"><a id="l04051" name="l04051"></a><span class="lineno"> 4051</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a>((<span class="stringliteral">&quot;CRC at start of frame %d is 0x%8.8X\n&quot;</span>, m_frame, xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a4566be764efd6e0b646a18555a633cd2">getCRC</a>()));</div>
<div class="line"><a id="l04052" name="l04052"></a><span class="lineno"> 4052</span>    }</div>
<div class="line"><a id="l04053" name="l04053"></a><span class="lineno"> 4053</span> </div>
<div class="line"><a id="l04054" name="l04054"></a><span class="lineno"> 4054</span>    marker = <span class="stringliteral">&quot;MARKER:Objects&quot;</span>;</div>
<div class="line"><a id="l04055" name="l04055"></a><span class="lineno"> 4055</span>    xferCRC-&gt;<a class="code hl_function" href="class_xfer.html#ab5eaba115944e624a09dc6c72a6ae218">xferAsciiString</a>(&amp;marker);</div>
<div class="line"><a id="l04056" name="l04056"></a><span class="lineno"> 4056</span>    <span class="keywordflow">for</span>( obj = m_objList; obj; obj=obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>() )</div>
<div class="line"><a id="l04057" name="l04057"></a><span class="lineno"> 4057</span>    {</div>
<div class="line"><a id="l04058" name="l04058"></a><span class="lineno"> 4058</span>        xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a3aa8dcc6885b964641b4f98abc43bda0">xferSnapshot</a>( obj );</div>
<div class="line"><a id="l04059" name="l04059"></a><span class="lineno"> 4059</span>    }</div>
<div class="line"><a id="l04060" name="l04060"></a><span class="lineno"> 4060</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> seed = <a class="code hl_function" href="_random_value_8h.html#af7c78f482afe6ff0c1a3938d39c2a5f1">GetGameLogicRandomSeedCRC</a>();</div>
<div class="line"><a id="l04061" name="l04061"></a><span class="lineno"> 4061</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>())</div>
<div class="line"><a id="l04062" name="l04062"></a><span class="lineno"> 4062</span>    {</div>
<div class="line"><a id="l04063" name="l04063"></a><span class="lineno"> 4063</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a>((<span class="stringliteral">&quot;CRC after objects for frame %d is 0x%8.8X\n&quot;</span>, m_frame, xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a4566be764efd6e0b646a18555a633cd2">getCRC</a>()));</div>
<div class="line"><a id="l04064" name="l04064"></a><span class="lineno"> 4064</span>    }</div>
<div class="line"><a id="l04065" name="l04065"></a><span class="lineno"> 4065</span> </div>
<div class="line"><a id="l04066" name="l04066"></a><span class="lineno"> 4066</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>())</div>
<div class="line"><a id="l04067" name="l04067"></a><span class="lineno"> 4067</span>    {</div>
<div class="line"><a id="l04068" name="l04068"></a><span class="lineno"> 4068</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a>((<span class="stringliteral">&quot;RandomSeed: %d\n&quot;</span>, seed));</div>
<div class="line"><a id="l04069" name="l04069"></a><span class="lineno"> 4069</span>    }</div>
<div class="line"><a id="l04070" name="l04070"></a><span class="lineno"> 4070</span>    <span class="keywordflow">if</span> (xferCRC-&gt;<a class="code hl_function" href="class_xfer.html#a98c88fedc5aa3b613c8238cb575a6b63">getXferMode</a>() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9a173cd17ae59bad305971d5561afc6336">XFER_CRC</a>)</div>
<div class="line"><a id="l04071" name="l04071"></a><span class="lineno"> 4071</span>    {</div>
<div class="line"><a id="l04072" name="l04072"></a><span class="lineno"> 4072</span>        xferCRC-&gt;<a class="code hl_function" href="class_xfer.html#ab6a4459e27d00af4b407e616ecdf6b61">xferUnsignedInt</a>( &amp;seed );</div>
<div class="line"><a id="l04073" name="l04073"></a><span class="lineno"> 4073</span>    }</div>
<div class="line"><a id="l04074" name="l04074"></a><span class="lineno"> 4074</span>    marker = <span class="stringliteral">&quot;MARKER:ThePartitionManager&quot;</span>;</div>
<div class="line"><a id="l04075" name="l04075"></a><span class="lineno"> 4075</span>    xferCRC-&gt;<a class="code hl_function" href="class_xfer.html#ab5eaba115944e624a09dc6c72a6ae218">xferAsciiString</a>(&amp;marker);</div>
<div class="line"><a id="l04076" name="l04076"></a><span class="lineno"> 4076</span>    xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a3aa8dcc6885b964641b4f98abc43bda0">xferSnapshot</a>( <a class="code hl_variable" href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a> );</div>
<div class="line"><a id="l04077" name="l04077"></a><span class="lineno"> 4077</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>())</div>
<div class="line"><a id="l04078" name="l04078"></a><span class="lineno"> 4078</span>    {</div>
<div class="line"><a id="l04079" name="l04079"></a><span class="lineno"> 4079</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a>((<span class="stringliteral">&quot;CRC after partition manager for frame %d is 0x%8.8X\n&quot;</span>, m_frame, xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a4566be764efd6e0b646a18555a633cd2">getCRC</a>()));</div>
<div class="line"><a id="l04080" name="l04080"></a><span class="lineno"> 4080</span>    }</div>
<div class="line"><a id="l04081" name="l04081"></a><span class="lineno"> 4081</span> </div>
<div class="line"><a id="l04082" name="l04082"></a><span class="lineno"> 4082</span><span class="preprocessor">#ifdef DEBUG_CRC</span></div>
<div class="line"><a id="l04083" name="l04083"></a><span class="lineno"> 4083</span>    <span class="keywordflow">if</span> ((g_crcModuleDataFromClient &amp;&amp; !<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>()) ||</div>
<div class="line"><a id="l04084" name="l04084"></a><span class="lineno"> 4084</span>        (g_crcModuleDataFromLogic &amp;&amp; <a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>()))</div>
<div class="line"><a id="l04085" name="l04085"></a><span class="lineno"> 4085</span>    {</div>
<div class="line"><a id="l04086" name="l04086"></a><span class="lineno"> 4086</span>        marker = <span class="stringliteral">&quot;MARKER:TheModuleFactory&quot;</span>;</div>
<div class="line"><a id="l04087" name="l04087"></a><span class="lineno"> 4087</span>        xferCRC-&gt;<a class="code hl_function" href="class_xfer.html#ab5eaba115944e624a09dc6c72a6ae218">xferAsciiString</a>(&amp;marker);</div>
<div class="line"><a id="l04088" name="l04088"></a><span class="lineno"> 4088</span>        xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a3aa8dcc6885b964641b4f98abc43bda0">xferSnapshot</a>( <a class="code hl_variable" href="_module_factory_8h.html#ae950955a0584f81e1e0d08e6b4eae292">TheModuleFactory</a> );</div>
<div class="line"><a id="l04089" name="l04089"></a><span class="lineno"> 4089</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>())</div>
<div class="line"><a id="l04090" name="l04090"></a><span class="lineno"> 4090</span>        {</div>
<div class="line"><a id="l04091" name="l04091"></a><span class="lineno"> 4091</span>            <a class="code hl_define" href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a>((<span class="stringliteral">&quot;CRC after module factory for frame %d is 0x%8.8X\n&quot;</span>, m_frame, xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a4566be764efd6e0b646a18555a633cd2">getCRC</a>()));</div>
<div class="line"><a id="l04092" name="l04092"></a><span class="lineno"> 4092</span>        }</div>
<div class="line"><a id="l04093" name="l04093"></a><span class="lineno"> 4093</span>    }</div>
<div class="line"><a id="l04094" name="l04094"></a><span class="lineno"> 4094</span><span class="preprocessor">#endif DEBUG_CRC</span></div>
<div class="line"><a id="l04095" name="l04095"></a><span class="lineno"> 4095</span> </div>
<div class="line"><a id="l04096" name="l04096"></a><span class="lineno"> 4096</span>    marker = <span class="stringliteral">&quot;MARKER:ThePlayerList&quot;</span>;</div>
<div class="line"><a id="l04097" name="l04097"></a><span class="lineno"> 4097</span>    xferCRC-&gt;<a class="code hl_function" href="class_xfer.html#ab5eaba115944e624a09dc6c72a6ae218">xferAsciiString</a>(&amp;marker);</div>
<div class="line"><a id="l04098" name="l04098"></a><span class="lineno"> 4098</span>    xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a3aa8dcc6885b964641b4f98abc43bda0">xferSnapshot</a>( <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a> );</div>
<div class="line"><a id="l04099" name="l04099"></a><span class="lineno"> 4099</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>())</div>
<div class="line"><a id="l04100" name="l04100"></a><span class="lineno"> 4100</span>    {</div>
<div class="line"><a id="l04101" name="l04101"></a><span class="lineno"> 4101</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a>((<span class="stringliteral">&quot;CRC after PlayerList for frame %d is 0x%8.8X\n&quot;</span>, m_frame, xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a4566be764efd6e0b646a18555a633cd2">getCRC</a>()));</div>
<div class="line"><a id="l04102" name="l04102"></a><span class="lineno"> 4102</span>    }</div>
<div class="line"><a id="l04103" name="l04103"></a><span class="lineno"> 4103</span> </div>
<div class="line"><a id="l04104" name="l04104"></a><span class="lineno"> 4104</span>    marker = <span class="stringliteral">&quot;MARKER:TheAI&quot;</span>;</div>
<div class="line"><a id="l04105" name="l04105"></a><span class="lineno"> 4105</span>    xferCRC-&gt;<a class="code hl_function" href="class_xfer.html#ab5eaba115944e624a09dc6c72a6ae218">xferAsciiString</a>(&amp;marker);</div>
<div class="line"><a id="l04106" name="l04106"></a><span class="lineno"> 4106</span>    xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a3aa8dcc6885b964641b4f98abc43bda0">xferSnapshot</a>( <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a> );</div>
<div class="line"><a id="l04107" name="l04107"></a><span class="lineno"> 4107</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>())</div>
<div class="line"><a id="l04108" name="l04108"></a><span class="lineno"> 4108</span>    {</div>
<div class="line"><a id="l04109" name="l04109"></a><span class="lineno"> 4109</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a>((<span class="stringliteral">&quot;CRC after AI for frame %d is 0x%8.8X\n&quot;</span>, m_frame, xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a4566be764efd6e0b646a18555a633cd2">getCRC</a>()));</div>
<div class="line"><a id="l04110" name="l04110"></a><span class="lineno"> 4110</span>    }</div>
<div class="line"><a id="l04111" name="l04111"></a><span class="lineno"> 4111</span> </div>
<div class="line"><a id="l04112" name="l04112"></a><span class="lineno"> 4112</span>    <span class="keywordflow">if</span> (xferCRC-&gt;<a class="code hl_function" href="class_xfer.html#a98c88fedc5aa3b613c8238cb575a6b63">getXferMode</a>() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9ae98b808068bc78b6b9031cddbfddeccd">XFER_SAVE</a>)</div>
<div class="line"><a id="l04113" name="l04113"></a><span class="lineno"> 4113</span>    {</div>
<div class="line"><a id="l04114" name="l04114"></a><span class="lineno"> 4114</span>        marker = <span class="stringliteral">&quot;MARKER:GameSave&quot;</span>;</div>
<div class="line"><a id="l04115" name="l04115"></a><span class="lineno"> 4115</span>        xferCRC-&gt;<a class="code hl_function" href="class_xfer.html#ab5eaba115944e624a09dc6c72a6ae218">xferAsciiString</a>(&amp;marker);</div>
<div class="line"><a id="l04116" name="l04116"></a><span class="lineno"> 4116</span>        <a class="code hl_variable" href="_game_state_8h.html#a20058921fe5602a8f70b082e98b2aae2">TheGameState</a>-&gt;friend_xferSaveDataForCRC(xferCRC, <a class="code hl_enumvalue" href="_game_state_8h.html#a610107232beb9d581d24f3f9bc59f9b6ae829e00e9e786b2503e474e8556189f5">SNAPSHOT_DEEPCRC_LOGICONLY</a>);</div>
<div class="line"><a id="l04117" name="l04117"></a><span class="lineno"> 4117</span>    }</div>
<div class="line"><a id="l04118" name="l04118"></a><span class="lineno"> 4118</span> </div>
<div class="line"><a id="l04119" name="l04119"></a><span class="lineno"> 4119</span>    xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a3e39d6503bffe065a1378e19f33d3082">close</a>();</div>
<div class="line"><a id="l04120" name="l04120"></a><span class="lineno"> 4120</span> </div>
<div class="line"><a id="l04121" name="l04121"></a><span class="lineno"> 4121</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> theCRC = xferCRC-&gt;<a class="code hl_function" href="class_xfer_c_r_c.html#a4566be764efd6e0b646a18555a633cd2">getCRC</a>();</div>
<div class="line"><a id="l04122" name="l04122"></a><span class="lineno"> 4122</span> </div>
<div class="line"><a id="l04123" name="l04123"></a><span class="lineno"> 4123</span>    <span class="keyword">delete</span> xferCRC;</div>
<div class="line"><a id="l04124" name="l04124"></a><span class="lineno"> 4124</span>    xferCRC = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04125" name="l04125"></a><span class="lineno"> 4125</span> </div>
<div class="line"><a id="l04126" name="l04126"></a><span class="lineno"> 4126</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">isInGameLogicUpdate</a>())</div>
<div class="line"><a id="l04127" name="l04127"></a><span class="lineno"> 4127</span>    {</div>
<div class="line"><a id="l04128" name="l04128"></a><span class="lineno"> 4128</span>        <a class="code hl_define" href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a>((<span class="stringliteral">&quot;CRC for frame %d is 0x%8.8X\n&quot;</span>, m_frame, theCRC));</div>
<div class="line"><a id="l04129" name="l04129"></a><span class="lineno"> 4129</span>    }</div>
<div class="line"><a id="l04130" name="l04130"></a><span class="lineno"> 4130</span>    <span class="keywordflow">return</span> theCRC;</div>
<div class="line"><a id="l04131" name="l04131"></a><span class="lineno"> 4131</span>}</div>
</div>
<div class="line"><a id="l04132" name="l04132"></a><span class="lineno"> 4132</span> </div>
<div class="line"><a id="l04133" name="l04133"></a><span class="lineno"> 4133</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04136" name="l04136"></a><span class="lineno"> 4136</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04137" data-start="{" data-end="}">
<div class="line"><a id="l04137" name="l04137"></a><span class="lineno"><a class="line" href="class_game_logic.html#aa4c12e352d1e4fe6da0835a1860dff0c"> 4137</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#aa4c12e352d1e4fe6da0835a1860dff0c">GameLogic::sendObjectCreated</a>( <a class="code hl_class" href="class_object.html">Object</a> *obj )</div>
<div class="line"><a id="l04138" name="l04138"></a><span class="lineno"> 4138</span>{</div>
<div class="line"><a id="l04139" name="l04139"></a><span class="lineno"> 4139</span>    <a class="code hl_class" href="class_drawable.html">Drawable</a> *<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a> = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;newDrawable(obj-&gt;<a class="code hl_function" href="class_thing.html#a8028ae31000ce547b400838afe6eb335">getTemplate</a>());</div>
<div class="line"><a id="l04140" name="l04140"></a><span class="lineno"> 4140</span></div>
<div class="line"><a id="l04142" name="l04142"></a><span class="lineno"> 4142</span> </div>
<div class="line"><a id="l04143" name="l04143"></a><span class="lineno"> 4143</span>    <span class="comment">// bind drawable to object and object to drawable</span></div>
<div class="line"><a id="l04144" name="l04144"></a><span class="lineno"> 4144</span>    <a class="code hl_function" href="class_game_logic.html#ad3f0aaf6bc0839f003da794ab4fe97c0">bindObjectAndDrawable</a>(obj, <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>);</div>
<div class="line"><a id="l04145" name="l04145"></a><span class="lineno"> 4145</span> </div>
<div class="line"><a id="l04146" name="l04146"></a><span class="lineno"> 4146</span>}</div>
</div>
<div class="line"><a id="l04147" name="l04147"></a><span class="lineno"> 4147</span> </div>
<div class="line"><a id="l04148" name="l04148"></a><span class="lineno"> 4148</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04149" data-start="{" data-end="}">
<div class="line"><a id="l04149" name="l04149"></a><span class="lineno"><a class="line" href="class_game_logic.html#ad3f0aaf6bc0839f003da794ab4fe97c0"> 4149</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#ad3f0aaf6bc0839f003da794ab4fe97c0">GameLogic::bindObjectAndDrawable</a>(<a class="code hl_class" href="class_object.html">Object</a>* obj, <a class="code hl_class" href="class_drawable.html">Drawable</a>* <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>)</div>
<div class="line"><a id="l04150" name="l04150"></a><span class="lineno"> 4150</span>{</div>
<div class="line"><a id="l04151" name="l04151"></a><span class="lineno"> 4151</span>    <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>-&gt;friend_bindToObject( obj );</div>
<div class="line"><a id="l04152" name="l04152"></a><span class="lineno"> 4152</span>    obj-&gt;<a class="code hl_function" href="class_object.html#a1617ab209b1b50a01e0c2e68bff15de9">friend_bindToDrawable</a>( <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a> );</div>
<div class="line"><a id="l04153" name="l04153"></a><span class="lineno"> 4153</span>}</div>
</div>
<div class="line"><a id="l04154" name="l04154"></a><span class="lineno"> 4154</span> </div>
<div class="line"><a id="l04155" name="l04155"></a><span class="lineno"> 4155</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04157" name="l04157"></a><span class="lineno"> 4157</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04158" data-start="{" data-end="}">
<div class="line"><a id="l04158" name="l04158"></a><span class="lineno"><a class="line" href="class_game_logic.html#a3365b830514f5d854743d6d71f4d0f15"> 4158</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a3365b830514f5d854743d6d71f4d0f15">GameLogic::sendObjectDestroyed</a>( <a class="code hl_class" href="class_object.html">Object</a> *obj )</div>
<div class="line"><a id="l04159" name="l04159"></a><span class="lineno"> 4159</span>{</div>
<div class="line"><a id="l04160" name="l04160"></a><span class="lineno"> 4160</span>    <span class="comment">// Because this implementation is a bridge between the Logic and Interface,</span></div>
<div class="line"><a id="l04161" name="l04161"></a><span class="lineno"> 4161</span>    <span class="comment">// we must take extra care to handle such cases as when the system it</span></div>
<div class="line"><a id="l04162" name="l04162"></a><span class="lineno"> 4162</span>    <span class="comment">// shutting down.</span></div>
<div class="line"><a id="l04163" name="l04163"></a><span class="lineno"> 4163</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a> == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a id="l04164" name="l04164"></a><span class="lineno"> 4164</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04165" name="l04165"></a><span class="lineno"> 4165</span> </div>
<div class="line"><a id="l04166" name="l04166"></a><span class="lineno"> 4166</span>    <span class="comment">// destroy the drawable</span></div>
<div class="line"><a id="l04167" name="l04167"></a><span class="lineno"> 4167</span>    <a class="code hl_class" href="class_drawable.html">Drawable</a> *<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a> = obj-&gt;<a class="code hl_function" href="class_object.html#a1d1b6d9787b5fd41324930b71427fc95">getDrawable</a>();</div>
<div class="line"><a id="l04168" name="l04168"></a><span class="lineno"> 4168</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a>)</div>
<div class="line"><a id="l04169" name="l04169"></a><span class="lineno"> 4169</span>    {</div>
<div class="line"><a id="l04170" name="l04170"></a><span class="lineno"> 4170</span>        <a class="code hl_variable" href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a>-&gt;destroyDrawable( <a class="code hl_function" href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">draw</a> );</div>
<div class="line"><a id="l04171" name="l04171"></a><span class="lineno"> 4171</span>    }</div>
<div class="line"><a id="l04172" name="l04172"></a><span class="lineno"> 4172</span> </div>
<div class="line"><a id="l04173" name="l04173"></a><span class="lineno"> 4173</span>    <span class="comment">// erase the binding of the drawable to this object</span></div>
<div class="line"><a id="l04174" name="l04174"></a><span class="lineno"> 4174</span>    obj-&gt;<a class="code hl_function" href="class_object.html#a1617ab209b1b50a01e0c2e68bff15de9">friend_bindToDrawable</a>( <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> );</div>
<div class="line"><a id="l04175" name="l04175"></a><span class="lineno"> 4175</span> </div>
<div class="line"><a id="l04176" name="l04176"></a><span class="lineno"> 4176</span>}</div>
</div>
<div class="line"><a id="l04177" name="l04177"></a><span class="lineno"> 4177</span> </div>
<div class="line"><a id="l04178" name="l04178"></a><span class="lineno"> 4178</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04180" name="l04180"></a><span class="lineno"> 4180</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04181" data-start="{" data-end="}">
<div class="line"><a id="l04181" name="l04181"></a><span class="lineno"><a class="line" href="class_game_logic.html#a913eedf62e8766f559e53887c46910b7"> 4181</a></span><a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> <a class="code hl_function" href="class_game_logic.html#a913eedf62e8766f559e53887c46910b7">GameLogic::isGamePaused</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l04182" name="l04182"></a><span class="lineno"> 4182</span>{</div>
<div class="line"><a id="l04183" name="l04183"></a><span class="lineno"> 4183</span>    <span class="keywordflow">return</span> m_gamePaused;</div>
<div class="line"><a id="l04184" name="l04184"></a><span class="lineno"> 4184</span>}</div>
</div>
<div class="line"><a id="l04185" name="l04185"></a><span class="lineno"> 4185</span> </div>
<div class="line"><a id="l04186" name="l04186"></a><span class="lineno"> 4186</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04187" name="l04187"></a><span class="lineno"> 4187</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04188" data-start="{" data-end="}">
<div class="line"><a id="l04188" name="l04188"></a><span class="lineno"><a class="line" href="class_game_logic.html#a1f9ab9f4b55320572d8f9b4772b9c88e"> 4188</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a1f9ab9f4b55320572d8f9b4772b9c88e">GameLogic::setGamePaused</a>( <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> paused, <a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> pauseMusic )</div>
<div class="line"><a id="l04189" name="l04189"></a><span class="lineno"> 4189</span>{</div>
<div class="line"><a id="l04190" name="l04190"></a><span class="lineno"> 4190</span>    <span class="comment">// We need to ignore an unpause called when we are unpaused or else:</span></div>
<div class="line"><a id="l04191" name="l04191"></a><span class="lineno"> 4191</span>    <span class="comment">// Mouse is hidden for some reason (script or something)</span></div>
<div class="line"><a id="l04192" name="l04192"></a><span class="lineno"> 4192</span>    <span class="comment">// GamePaused</span></div>
<div class="line"><a id="l04193" name="l04193"></a><span class="lineno"> 4193</span>    <span class="comment">// Remember that we were hidden</span></div>
<div class="line"><a id="l04194" name="l04194"></a><span class="lineno"> 4194</span>    <span class="comment">// Show mouse</span></div>
<div class="line"><a id="l04195" name="l04195"></a><span class="lineno"> 4195</span>    <span class="comment">// GameUnpaused</span></div>
<div class="line"><a id="l04196" name="l04196"></a><span class="lineno"> 4196</span>    <span class="comment">// Set mouse the way it was</span></div>
<div class="line"><a id="l04197" name="l04197"></a><span class="lineno"> 4197</span> </div>
<div class="line"><a id="l04198" name="l04198"></a><span class="lineno"> 4198</span>    <span class="comment">// Time passes, mouse is unhidden</span></div>
<div class="line"><a id="l04199" name="l04199"></a><span class="lineno"> 4199</span> </div>
<div class="line"><a id="l04200" name="l04200"></a><span class="lineno"> 4200</span>    <span class="comment">// GameUnpaused</span></div>
<div class="line"><a id="l04201" name="l04201"></a><span class="lineno"> 4201</span>    <span class="comment">// Set mouse the way it &quot;was&quot; &lt;--- Was counting on right answer being set in Pause.</span></div>
<div class="line"><a id="l04202" name="l04202"></a><span class="lineno"> 4202</span>    <span class="keywordflow">if</span>( paused == m_gamePaused )</div>
<div class="line"><a id="l04203" name="l04203"></a><span class="lineno"> 4203</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04204" name="l04204"></a><span class="lineno"> 4204</span> </div>
<div class="line"><a id="l04205" name="l04205"></a><span class="lineno"> 4205</span>    m_gamePaused = paused; </div>
<div class="line"><a id="l04206" name="l04206"></a><span class="lineno"> 4206</span> </div>
<div class="line"><a id="l04207" name="l04207"></a><span class="lineno"> 4207</span>    <a class="code hl_enumeration" href="_audio_affect_8h.html#a0dac6709f2df26f730915db924023d68">AudioAffect</a> audToAffect = (<a class="code hl_enumeration" href="_audio_affect_8h.html#a0dac6709f2df26f730915db924023d68">AudioAffect</a>)(pauseMusic ? <a class="code hl_enumvalue" href="_audio_affect_8h.html#a0dac6709f2df26f730915db924023d68a540dde80a8ec871660364f5401cdfedf">AudioAffect_All</a> : (<a class="code hl_enumvalue" href="_audio_affect_8h.html#a0dac6709f2df26f730915db924023d68a540dde80a8ec871660364f5401cdfedf">AudioAffect_All</a> &amp; ~<a class="code hl_enumvalue" href="_audio_affect_8h.html#a0dac6709f2df26f730915db924023d68a5c766d8c07bcbd6c70d2f83abef91cf2">AudioAffect_Music</a>));</div>
<div class="line"><a id="l04208" name="l04208"></a><span class="lineno"> 4208</span>    </div>
<div class="line"><a id="l04209" name="l04209"></a><span class="lineno"> 4209</span>    <span class="keywordflow">if</span>(paused)</div>
<div class="line"><a id="l04210" name="l04210"></a><span class="lineno"> 4210</span>    {</div>
<div class="line"><a id="l04211" name="l04211"></a><span class="lineno"> 4211</span>        <span class="comment">// remember the state of the mouse/input so we can return to the same state once we &quot;unpause&quot;</span></div>
<div class="line"><a id="l04212" name="l04212"></a><span class="lineno"> 4212</span>        m_inputEnabledMemory = <a class="code hl_variable" href="_in_game_u_i_8h.html#a0de3624c7699c1ad0dea332a3c44c931">TheInGameUI</a>-&gt;getInputEnabled();</div>
<div class="line"><a id="l04213" name="l04213"></a><span class="lineno"> 4213</span>        m_mouseVisibleMemory = <a class="code hl_variable" href="_mouse_8h.html#a8874928c689c1d5e8446353aea92f975">TheMouse</a>-&gt;getVisibility();</div>
<div class="line"><a id="l04214" name="l04214"></a><span class="lineno"> 4214</span>        </div>
<div class="line"><a id="l04215" name="l04215"></a><span class="lineno"> 4215</span>        <span class="comment">// Make sure the mouse is visible and the cursor is an arrow</span></div>
<div class="line"><a id="l04216" name="l04216"></a><span class="lineno"> 4216</span>        <a class="code hl_variable" href="_mouse_8h.html#a8874928c689c1d5e8446353aea92f975">TheMouse</a>-&gt;setVisibility(<a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a id="l04217" name="l04217"></a><span class="lineno"> 4217</span>        <a class="code hl_variable" href="_mouse_8h.html#a8874928c689c1d5e8446353aea92f975">TheMouse</a>-&gt;setCursor( <a class="code hl_enumvalue" href="class_mouse.html#a2d9117eb7411c5d3430c46bbb8660923aefef73e9eaae3495c333e519591ec824">Mouse::ARROW</a> );</div>
<div class="line"><a id="l04218" name="l04218"></a><span class="lineno"> 4218</span>        </div>
<div class="line"><a id="l04219" name="l04219"></a><span class="lineno"> 4219</span>        <span class="comment">// if Input is enabled, disable it</span></div>
<div class="line"><a id="l04220" name="l04220"></a><span class="lineno"> 4220</span>        <span class="keywordflow">if</span>(m_inputEnabledMemory)</div>
<div class="line"><a id="l04221" name="l04221"></a><span class="lineno"> 4221</span>        {</div>
<div class="line"><a id="l04222" name="l04222"></a><span class="lineno"> 4222</span>            <a class="code hl_variable" href="_in_game_u_i_8h.html#a0de3624c7699c1ad0dea332a3c44c931">TheInGameUI</a>-&gt;setInputEnabled(<a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a id="l04223" name="l04223"></a><span class="lineno"> 4223</span>        }</div>
<div class="line"><a id="l04224" name="l04224"></a><span class="lineno"> 4224</span>        <a class="code hl_variable" href="_game_audio_8h.html#ac281ccd51f88bbbdc3fef71d1216227a">TheAudio</a>-&gt;pauseAudio(audToAffect);</div>
<div class="line"><a id="l04225" name="l04225"></a><span class="lineno"> 4225</span> </div>
<div class="line"><a id="l04226" name="l04226"></a><span class="lineno"> 4226</span><span class="preprocessor">#if 0 </span><span class="comment">// Kris added this code some time ago. I&#39;m not sure why -- the pauseAudio should stop the </span></div>
<div class="line"><a id="l04227" name="l04227"></a><span class="lineno"> 4227</span>      <span class="comment">// ambients by itself. Everything seems to work fine without it and it&#39;s messing up my </span></div>
<div class="line"><a id="l04228" name="l04228"></a><span class="lineno"> 4228</span>      <span class="comment">// custom ambient code. Hopefully he can explain it to me, but until he gets back, I&#39;m</span></div>
<div class="line"><a id="l04229" name="l04229"></a><span class="lineno"> 4229</span>      <span class="comment">// disabling it. -Ian</span></div>
<div class="line"><a id="l04230" name="l04230"></a><span class="lineno"> 4230</span>    </div>
<div class="line"><a id="l04231" name="l04231"></a><span class="lineno"> 4231</span>        <span class="comment">//Stop all ambient sounds!</span></div>
<div class="line"><a id="l04232" name="l04232"></a><span class="lineno"> 4232</span>        <a class="code hl_class" href="class_drawable.html">Drawable</a> *drawable = <a class="code hl_variable" href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a>-&gt;getDrawableList();</div>
<div class="line"><a id="l04233" name="l04233"></a><span class="lineno"> 4233</span>        <span class="keywordflow">while</span>( drawable )</div>
<div class="line"><a id="l04234" name="l04234"></a><span class="lineno"> 4234</span>        {</div>
<div class="line"><a id="l04235" name="l04235"></a><span class="lineno"> 4235</span>            drawable-&gt;<a class="code hl_function" href="class_drawable.html#ab913bb62dae7de6d56b5280dac30bd4a">stopAmbientSound</a>();</div>
<div class="line"><a id="l04236" name="l04236"></a><span class="lineno"> 4236</span>            drawable = drawable-&gt;<a class="code hl_function" href="class_drawable.html#a321ab53564ec72eed151e789734e871d">getNextDrawable</a>();</div>
<div class="line"><a id="l04237" name="l04237"></a><span class="lineno"> 4237</span>        }</div>
<div class="line"><a id="l04238" name="l04238"></a><span class="lineno"> 4238</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04239" name="l04239"></a><span class="lineno"> 4239</span>    }</div>
<div class="line"><a id="l04240" name="l04240"></a><span class="lineno"> 4240</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l04241" name="l04241"></a><span class="lineno"> 4241</span>    {</div>
<div class="line"><a id="l04242" name="l04242"></a><span class="lineno"> 4242</span>        <span class="comment">// set the mouse/input states to what they were before we paused.</span></div>
<div class="line"><a id="l04243" name="l04243"></a><span class="lineno"> 4243</span>        <a class="code hl_variable" href="_mouse_8h.html#a8874928c689c1d5e8446353aea92f975">TheMouse</a>-&gt;setVisibility(m_mouseVisibleMemory);</div>
<div class="line"><a id="l04244" name="l04244"></a><span class="lineno"> 4244</span>        <span class="keywordflow">if</span>(m_inputEnabledMemory)</div>
<div class="line"><a id="l04245" name="l04245"></a><span class="lineno"> 4245</span>            <a class="code hl_variable" href="_in_game_u_i_8h.html#a0de3624c7699c1ad0dea332a3c44c931">TheInGameUI</a>-&gt;setInputEnabled(<a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a id="l04246" name="l04246"></a><span class="lineno"> 4246</span>        <a class="code hl_variable" href="_game_audio_8h.html#ac281ccd51f88bbbdc3fef71d1216227a">TheAudio</a>-&gt;resumeAudio(audToAffect);</div>
<div class="line"><a id="l04247" name="l04247"></a><span class="lineno"> 4247</span> </div>
<div class="line"><a id="l04248" name="l04248"></a><span class="lineno"> 4248</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l04249" name="l04249"></a><span class="lineno"> 4249</span>        <span class="comment">//Start all ambient sounds!</span></div>
<div class="line"><a id="l04250" name="l04250"></a><span class="lineno"> 4250</span>        <a class="code hl_class" href="class_drawable.html">Drawable</a> *drawable = <a class="code hl_variable" href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a>-&gt;getDrawableList();</div>
<div class="line"><a id="l04251" name="l04251"></a><span class="lineno"> 4251</span>        <span class="keywordflow">while</span>( drawable )</div>
<div class="line"><a id="l04252" name="l04252"></a><span class="lineno"> 4252</span>        {</div>
<div class="line"><a id="l04253" name="l04253"></a><span class="lineno"> 4253</span>            drawable-&gt;<a class="code hl_function" href="class_drawable.html#af804e667925c1c180798c65adfe9bd7b">startAmbientSound</a>();</div>
<div class="line"><a id="l04254" name="l04254"></a><span class="lineno"> 4254</span>            <a class="code hl_variable" href="_game_audio_8h.html#ac281ccd51f88bbbdc3fef71d1216227a">TheAudio</a>-&gt;stopAllAmbientsBy( drawable );</div>
<div class="line"><a id="l04255" name="l04255"></a><span class="lineno"> 4255</span>            drawable = drawable-&gt;<a class="code hl_function" href="class_drawable.html#a321ab53564ec72eed151e789734e871d">getNextDrawable</a>();</div>
<div class="line"><a id="l04256" name="l04256"></a><span class="lineno"> 4256</span>        }</div>
<div class="line"><a id="l04257" name="l04257"></a><span class="lineno"> 4257</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04258" name="l04258"></a><span class="lineno"> 4258</span>    }</div>
<div class="line"><a id="l04259" name="l04259"></a><span class="lineno"> 4259</span>}</div>
</div>
<div class="line"><a id="l04260" name="l04260"></a><span class="lineno"> 4260</span> </div>
<div class="line"><a id="l04261" name="l04261"></a><span class="lineno"> 4261</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04262" name="l04262"></a><span class="lineno"> 4262</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04263" data-start="{" data-end="}">
<div class="line"><a id="l04263" name="l04263"></a><span class="lineno"><a class="line" href="class_game_logic.html#af0d4caf4b6b26c00e5edd1892dee3e1d"> 4263</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#af0d4caf4b6b26c00e5edd1892dee3e1d">GameLogic::processProgress</a>(<a class="code hl_union" href="union_int.html">Int</a> playerId, <a class="code hl_union" href="union_int.html">Int</a> percentage)</div>
<div class="line"><a id="l04264" name="l04264"></a><span class="lineno"> 4264</span>{</div>
<div class="line"><a id="l04265" name="l04265"></a><span class="lineno"> 4265</span>    <span class="keywordflow">if</span>(m_loadScreen)</div>
<div class="line"><a id="l04266" name="l04266"></a><span class="lineno"> 4266</span>        m_loadScreen-&gt;processProgress(playerId, percentage);</div>
<div class="line"><a id="l04267" name="l04267"></a><span class="lineno"> 4267</span>    lastHeardFrom(playerId);</div>
<div class="line"><a id="l04268" name="l04268"></a><span class="lineno"> 4268</span>}</div>
</div>
<div class="line"><a id="l04269" name="l04269"></a><span class="lineno"> 4269</span> </div>
<div class="line"><a id="l04270" name="l04270"></a><span class="lineno"> 4270</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04273" name="l04273"></a><span class="lineno"> 4273</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04274" data-start="{" data-end="}">
<div class="line"><a id="l04274" name="l04274"></a><span class="lineno"><a class="line" href="class_game_logic.html#a7eb269c0a597fe23cc06967a2231eec2"> 4274</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a7eb269c0a597fe23cc06967a2231eec2">GameLogic::processProgressComplete</a>(<a class="code hl_union" href="union_int.html">Int</a> playerId)</div>
<div class="line"><a id="l04275" name="l04275"></a><span class="lineno"> 4275</span>{</div>
<div class="line"><a id="l04276" name="l04276"></a><span class="lineno"> 4276</span>    <span class="keywordflow">if</span>(playerId &lt; 0 || playerId &gt;= MAX_SLOTS)</div>
<div class="line"><a id="l04277" name="l04277"></a><span class="lineno"> 4277</span>    {</div>
<div class="line"><a id="l04278" name="l04278"></a><span class="lineno"> 4278</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(<a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,(<span class="stringliteral">&quot;GameLogic::processProgressComplete, Invalid playerid was passed in %d\n&quot;</span>, playerId));</div>
<div class="line"><a id="l04279" name="l04279"></a><span class="lineno"> 4279</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04280" name="l04280"></a><span class="lineno"> 4280</span>    }</div>
<div class="line"><a id="l04281" name="l04281"></a><span class="lineno"> 4281</span>    <span class="keywordflow">if</span>(m_progressComplete[playerId] == <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)</div>
<div class="line"><a id="l04282" name="l04282"></a><span class="lineno"> 4282</span>    {</div>
<div class="line"><a id="l04283" name="l04283"></a><span class="lineno"> 4283</span>        <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;GameLogic::processProgressComplete, playerId %d is marked TRUE already yet we&#39;re trying to mark him as true again\n&quot;</span>, playerId));</div>
<div class="line"><a id="l04284" name="l04284"></a><span class="lineno"> 4284</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04285" name="l04285"></a><span class="lineno"> 4285</span>    }</div>
<div class="line"><a id="l04286" name="l04286"></a><span class="lineno"> 4286</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;Progress Complete for Player %d\n&quot;</span>, playerId));</div>
<div class="line"><a id="l04287" name="l04287"></a><span class="lineno"> 4287</span>    m_progressComplete[playerId] = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l04288" name="l04288"></a><span class="lineno"> 4288</span>    lastHeardFrom(playerId);</div>
<div class="line"><a id="l04289" name="l04289"></a><span class="lineno"> 4289</span>}</div>
</div>
<div class="line"><a id="l04290" name="l04290"></a><span class="lineno"> 4290</span> </div>
<div class="line"><a id="l04291" name="l04291"></a><span class="lineno"> 4291</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04293" name="l04293"></a><span class="lineno"> 4293</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04294" data-start="{" data-end="}">
<div class="line"><a id="l04294" name="l04294"></a><span class="lineno"><a class="line" href="class_game_logic.html#a18ff9040f0bae50c985949d18946ffa0"> 4294</a></span><a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> <a class="code hl_function" href="class_game_logic.html#a18ff9040f0bae50c985949d18946ffa0">GameLogic::isProgressComplete</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l04295" name="l04295"></a><span class="lineno"> 4295</span>{</div>
<div class="line"><a id="l04296" name="l04296"></a><span class="lineno"> 4296</span>    <span class="comment">//If we&#39;re not in a network game, always return true</span></div>
<div class="line"><a id="l04297" name="l04297"></a><span class="lineno"> 4297</span>    <span class="keywordflow">if</span>(!<a class="code hl_function" href="class_game_logic.html#a39053c1c656152b0735e162acb0d9486">isInMultiplayerGame</a>() || !<a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a> || m_forceGameStartByTimeOut)</div>
<div class="line"><a id="l04298" name="l04298"></a><span class="lineno"> 4298</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l04299" name="l04299"></a><span class="lineno"> 4299</span> </div>
<div class="line"><a id="l04300" name="l04300"></a><span class="lineno"> 4300</span>    <span class="comment">// Only loop on the Number of players we got in here</span></div>
<div class="line"><a id="l04301" name="l04301"></a><span class="lineno"> 4301</span>    <span class="keywordflow">for</span>(<a class="code hl_union" href="union_int.html">Int</a> i =0; i &lt; MAX_SLOTS; ++i)</div>
<div class="line"><a id="l04302" name="l04302"></a><span class="lineno"> 4302</span>    {</div>
<div class="line"><a id="l04303" name="l04303"></a><span class="lineno"> 4303</span>        <span class="keywordflow">if</span>(!m_progressComplete[i])</div>
<div class="line"><a id="l04304" name="l04304"></a><span class="lineno"> 4304</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a id="l04305" name="l04305"></a><span class="lineno"> 4305</span>    }</div>
<div class="line"><a id="l04306" name="l04306"></a><span class="lineno"> 4306</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l04307" name="l04307"></a><span class="lineno"> 4307</span>}</div>
</div>
<div class="line"><a id="l04308" name="l04308"></a><span class="lineno"> 4308</span> </div>
<div class="line"><a id="l04309" name="l04309"></a><span class="lineno"> 4309</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04310" name="l04310"></a><span class="lineno"> 4310</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04311" name="l04311"></a><span class="lineno"> 4311</span><span class="keywordtype">void</span> GameLogic::lastHeardFrom( <a class="code hl_union" href="union_int.html">Int</a> playerId )</div>
<div class="line"><a id="l04312" name="l04312"></a><span class="lineno"> 4312</span>{</div>
<div class="line"><a id="l04313" name="l04313"></a><span class="lineno"> 4313</span>    <span class="keywordflow">if</span>( playerId &lt; 0 || playerId &gt;= MAX_SLOTS)</div>
<div class="line"><a id="l04314" name="l04314"></a><span class="lineno"> 4314</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04315" name="l04315"></a><span class="lineno"> 4315</span>    m_progressCompleteTimeout[playerId] = timeGetTime();</div>
<div class="line"><a id="l04316" name="l04316"></a><span class="lineno"> 4316</span>}</div>
<div class="line"><a id="l04317" name="l04317"></a><span class="lineno"> 4317</span> </div>
<div class="line"><a id="l04318" name="l04318"></a><span class="lineno"> 4318</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04319" name="l04319"></a><span class="lineno"> 4319</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04320" name="l04320"></a><span class="lineno"> 4320</span><span class="keywordtype">void</span> GameLogic::testTimeOut( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l04321" name="l04321"></a><span class="lineno"> 4321</span>{</div>
<div class="line"><a id="l04322" name="l04322"></a><span class="lineno"> 4322</span>    <span class="comment">// if everyone is loaded, lets just load the game like normal.</span></div>
<div class="line"><a id="l04323" name="l04323"></a><span class="lineno"> 4323</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="class_game_logic.html#a18ff9040f0bae50c985949d18946ffa0">isProgressComplete</a>())</div>
<div class="line"><a id="l04324" name="l04324"></a><span class="lineno"> 4324</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04325" name="l04325"></a><span class="lineno"> 4325</span> </div>
<div class="line"><a id="l04326" name="l04326"></a><span class="lineno"> 4326</span>    <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> curTime = timeGetTime();</div>
<div class="line"><a id="l04327" name="l04327"></a><span class="lineno"> 4327</span>    <span class="comment">// Loop and test everyone in our game.</span></div>
<div class="line"><a id="l04328" name="l04328"></a><span class="lineno"> 4328</span>    <span class="keywordflow">for</span>(<a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> i =0; i &lt; MAX_SLOTS; ++i)</div>
<div class="line"><a id="l04329" name="l04329"></a><span class="lineno"> 4329</span>    {</div>
<div class="line"><a id="l04330" name="l04330"></a><span class="lineno"> 4330</span>        <span class="comment">// If they&#39;ve completed their progress, ignore them</span></div>
<div class="line"><a id="l04331" name="l04331"></a><span class="lineno"> 4331</span>        <span class="keywordflow">if</span>(m_progressComplete[i])</div>
<div class="line"><a id="l04332" name="l04332"></a><span class="lineno"> 4332</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04333" name="l04333"></a><span class="lineno"> 4333</span>        <span class="keywordflow">if</span>( m_progressCompleteTimeout[i] + PROGRESS_COMPLETE_TIMEOUT &gt; curTime )</div>
<div class="line"><a id="l04334" name="l04334"></a><span class="lineno"> 4334</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04335" name="l04335"></a><span class="lineno"> 4335</span>    }</div>
<div class="line"><a id="l04336" name="l04336"></a><span class="lineno"> 4336</span>    <span class="comment">// if we made it this far, that means everyone has timed out.</span></div>
<div class="line"><a id="l04337" name="l04337"></a><span class="lineno"> 4337</span>    m_forceGameStartByTimeOut = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l04338" name="l04338"></a><span class="lineno"> 4338</span>}</div>
<div class="line"><a id="l04339" name="l04339"></a><span class="lineno"> 4339</span> </div>
<div class="line"><a id="l04340" name="l04340"></a><span class="lineno"> 4340</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04341" name="l04341"></a><span class="lineno"> 4341</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04342" data-start="{" data-end="}">
<div class="line"><a id="l04342" name="l04342"></a><span class="lineno"><a class="line" href="class_game_logic.html#abc21d1fd02b824ec45f596a220072ade"> 4342</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#abc21d1fd02b824ec45f596a220072ade">GameLogic::timeOutGameStart</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l04343" name="l04343"></a><span class="lineno"> 4343</span>{</div>
<div class="line"><a id="l04344" name="l04344"></a><span class="lineno"> 4344</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a>((<span class="stringliteral">&quot;We got the Force TimeOut Start Message\n&quot;</span>));</div>
<div class="line"><a id="l04345" name="l04345"></a><span class="lineno"> 4345</span>    m_forceGameStartByTimeOut = <a class="code hl_define" href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a id="l04346" name="l04346"></a><span class="lineno"> 4346</span>}</div>
</div>
<div class="line"><a id="l04347" name="l04347"></a><span class="lineno"> 4347</span> </div>
<div class="line"><a id="l04348" name="l04348"></a><span class="lineno"> 4348</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04349" name="l04349"></a><span class="lineno"> 4349</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04350" data-start="{" data-end="}">
<div class="line"><a id="l04350" name="l04350"></a><span class="lineno"><a class="line" href="class_game_logic.html#a5ce2d8228a33ebf6fd4c9927b4bf0c09"> 4350</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a5ce2d8228a33ebf6fd4c9927b4bf0c09">GameLogic::initTimeOutValues</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l04351" name="l04351"></a><span class="lineno"> 4351</span>{</div>
<div class="line"><a id="l04352" name="l04352"></a><span class="lineno"> 4352</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>)</div>
<div class="line"><a id="l04353" name="l04353"></a><span class="lineno"> 4353</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04354" name="l04354"></a><span class="lineno"> 4354</span>    <span class="keywordflow">for</span>(<a class="code hl_union" href="union_int.html">Int</a> i = 0; i &lt; <a class="code hl_variable" href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a>-&gt;getNumPlayers(); ++i)</div>
<div class="line"><a id="l04355" name="l04355"></a><span class="lineno"> 4355</span>    {</div>
<div class="line"><a id="l04356" name="l04356"></a><span class="lineno"> 4356</span>        m_progressCompleteTimeout[i] = timeGetTime();</div>
<div class="line"><a id="l04357" name="l04357"></a><span class="lineno"> 4357</span>    }</div>
<div class="line"><a id="l04358" name="l04358"></a><span class="lineno"> 4358</span>}</div>
</div>
<div class="line"><a id="l04359" name="l04359"></a><span class="lineno"> 4359</span> </div>
<div class="line"><a id="l04360" name="l04360"></a><span class="lineno"> 4360</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04362" name="l04362"></a><span class="lineno"> 4362</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04363" data-start="{" data-end="}">
<div class="line"><a id="l04363" name="l04363"></a><span class="lineno"><a class="line" href="class_game_logic.html#ac0be2f1e336da7b17bee7346722b65aa"> 4363</a></span><a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> <a class="code hl_function" href="class_game_logic.html#ac0be2f1e336da7b17bee7346722b65aa">GameLogic::getObjectCount</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l04364" name="l04364"></a><span class="lineno"> 4364</span>{</div>
<div class="line"><a id="l04365" name="l04365"></a><span class="lineno"> 4365</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> totalObjects = 0;</div>
<div class="line"><a id="l04366" name="l04366"></a><span class="lineno"> 4366</span>    <a class="code hl_class" href="class_object.html">Object</a> *obj;</div>
<div class="line"><a id="l04367" name="l04367"></a><span class="lineno"> 4367</span>    <span class="keywordflow">for</span>( obj = <a class="code hl_function" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">getFirstObject</a>(); obj; obj = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>() )</div>
<div class="line"><a id="l04368" name="l04368"></a><span class="lineno"> 4368</span>    {</div>
<div class="line"><a id="l04369" name="l04369"></a><span class="lineno"> 4369</span>        ++totalObjects;</div>
<div class="line"><a id="l04370" name="l04370"></a><span class="lineno"> 4370</span>    }</div>
<div class="line"><a id="l04371" name="l04371"></a><span class="lineno"> 4371</span>    <span class="keywordflow">return</span> totalObjects;</div>
<div class="line"><a id="l04372" name="l04372"></a><span class="lineno"> 4372</span>}</div>
</div>
<div class="line"><a id="l04373" name="l04373"></a><span class="lineno"> 4373</span> </div>
<div class="line"><a id="l04374" name="l04374"></a><span class="lineno"> 4374</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04375" name="l04375"></a><span class="lineno"> 4375</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04376" name="l04376"></a><span class="lineno"> 4376</span><a class="code hl_class" href="class_ghost_object_manager.html">GhostObjectManager</a> *GameLogic::createGhostObjectManager(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l04377" name="l04377"></a><span class="lineno"> 4377</span>{ </div>
<div class="line"><a id="l04378" name="l04378"></a><span class="lineno"> 4378</span>    <span class="keywordflow">return</span> NEW <a class="code hl_class" href="class_ghost_object_manager.html">GhostObjectManager</a>;</div>
<div class="line"><a id="l04379" name="l04379"></a><span class="lineno"> 4379</span>}</div>
<div class="line"><a id="l04380" name="l04380"></a><span class="lineno"> 4380</span> </div>
<div class="line"><a id="l04381" name="l04381"></a><span class="lineno"> 4381</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04382" name="l04382"></a><span class="lineno"> 4382</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04383" name="l04383"></a><span class="lineno"> 4383</span><a class="code hl_class" href="class_terrain_logic.html">TerrainLogic</a> *GameLogic::createTerrainLogic( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l04384" name="l04384"></a><span class="lineno"> 4384</span>{</div>
<div class="line"><a id="l04385" name="l04385"></a><span class="lineno"> 4385</span>    <span class="keywordflow">return</span> NEW TerrainLogic;</div>
<div class="line"><a id="l04386" name="l04386"></a><span class="lineno"> 4386</span>}</div>
<div class="line"><a id="l04387" name="l04387"></a><span class="lineno"> 4387</span> </div>
<div class="line"><a id="l04388" name="l04388"></a><span class="lineno"> 4388</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04389" data-start="{" data-end="}">
<div class="line"><a id="l04389" name="l04389"></a><span class="lineno"><a class="line" href="class_game_logic.html#aafcfb28a34c3f4886bc15e7cc9e3a435"> 4389</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#aafcfb28a34c3f4886bc15e7cc9e3a435">GameLogic::setBuildableStatusOverride</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_thing_template.html">ThingTemplate</a>* tt, <a class="code hl_enumeration" href="_thing_template_8h.html#a6cdcf604627ad670996d9057d1bd9e0c">BuildableStatus</a> bs)</div>
<div class="line"><a id="l04390" name="l04390"></a><span class="lineno"> 4390</span>{</div>
<div class="line"><a id="l04391" name="l04391"></a><span class="lineno"> 4391</span>    <span class="keywordflow">if</span> (tt)</div>
<div class="line"><a id="l04392" name="l04392"></a><span class="lineno"> 4392</span>    {</div>
<div class="line"><a id="l04393" name="l04393"></a><span class="lineno"> 4393</span>        m_thingTemplateBuildableOverrides[tt-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>()] = bs;</div>
<div class="line"><a id="l04394" name="l04394"></a><span class="lineno"> 4394</span>    }</div>
<div class="line"><a id="l04395" name="l04395"></a><span class="lineno"> 4395</span>}</div>
</div>
<div class="line"><a id="l04396" name="l04396"></a><span class="lineno"> 4396</span> </div>
<div class="line"><a id="l04397" name="l04397"></a><span class="lineno"> 4397</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04398" data-start="{" data-end="}">
<div class="line"><a id="l04398" name="l04398"></a><span class="lineno"><a class="line" href="class_game_logic.html#ad3749d20bd572e16715b55c4a4eee44c"> 4398</a></span><a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> <a class="code hl_function" href="class_game_logic.html#ad3749d20bd572e16715b55c4a4eee44c">GameLogic::findBuildableStatusOverride</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_thing_template.html">ThingTemplate</a>* tt, <a class="code hl_enumeration" href="_thing_template_8h.html#a6cdcf604627ad670996d9057d1bd9e0c">BuildableStatus</a>&amp; bs)<span class="keyword"> const</span></div>
<div class="line"><a id="l04399" name="l04399"></a><span class="lineno"> 4399</span><span class="keyword"></span>{</div>
<div class="line"><a id="l04400" name="l04400"></a><span class="lineno"> 4400</span>    <span class="keywordflow">if</span> (tt)</div>
<div class="line"><a id="l04401" name="l04401"></a><span class="lineno"> 4401</span>    {</div>
<div class="line"><a id="l04402" name="l04402"></a><span class="lineno"> 4402</span>        BuildableMap::const_iterator it = m_thingTemplateBuildableOverrides.find(tt-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>());</div>
<div class="line"><a id="l04403" name="l04403"></a><span class="lineno"> 4403</span>        <span class="keywordflow">if</span> (it != m_thingTemplateBuildableOverrides.end())</div>
<div class="line"><a id="l04404" name="l04404"></a><span class="lineno"> 4404</span>        {</div>
<div class="line"><a id="l04405" name="l04405"></a><span class="lineno"> 4405</span>            bs = it-&gt;second;</div>
<div class="line"><a id="l04406" name="l04406"></a><span class="lineno"> 4406</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04407" name="l04407"></a><span class="lineno"> 4407</span>        }</div>
<div class="line"><a id="l04408" name="l04408"></a><span class="lineno"> 4408</span>    }</div>
<div class="line"><a id="l04409" name="l04409"></a><span class="lineno"> 4409</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04410" name="l04410"></a><span class="lineno"> 4410</span>}</div>
</div>
<div class="line"><a id="l04411" name="l04411"></a><span class="lineno"> 4411</span> </div>
<div class="line"><a id="l04412" name="l04412"></a><span class="lineno"> 4412</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04413" data-start="{" data-end="}">
<div class="line"><a id="l04413" name="l04413"></a><span class="lineno"><a class="line" href="class_game_logic.html#a01eacf2f133b4ab7bcbb1c6fa5c9b291"> 4413</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a01eacf2f133b4ab7bcbb1c6fa5c9b291">GameLogic::setControlBarOverride</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_ascii_string.html">AsciiString</a>&amp; commandSetName, <a class="code hl_union" href="union_int.html">Int</a> slot, <a class="code hl_typedef" href="_game_logic_8h.html#a98290342578155b2daf04c51811e3d01">ConstCommandButtonPtr</a> commandButton)</div>
<div class="line"><a id="l04414" name="l04414"></a><span class="lineno"> 4414</span>{</div>
<div class="line"><a id="l04415" name="l04415"></a><span class="lineno"> 4415</span>    <span class="keywordtype">char</span> buf[256];</div>
<div class="line"><a id="l04416" name="l04416"></a><span class="lineno"> 4416</span>    buf[0] = <span class="charliteral">&#39;0&#39;</span> + slot;</div>
<div class="line"><a id="l04417" name="l04417"></a><span class="lineno"> 4417</span>    strcpy(&amp;buf[1], commandSetName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>());</div>
<div class="line"><a id="l04418" name="l04418"></a><span class="lineno"> 4418</span>    m_controlBarOverrides[buf] = commandButton;</div>
<div class="line"><a id="l04419" name="l04419"></a><span class="lineno"> 4419</span>}</div>
</div>
<div class="line"><a id="l04420" name="l04420"></a><span class="lineno"> 4420</span> </div>
<div class="line"><a id="l04421" name="l04421"></a><span class="lineno"> 4421</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04422" data-start="{" data-end="}">
<div class="line"><a id="l04422" name="l04422"></a><span class="lineno"><a class="line" href="class_game_logic.html#a7c2b54d759dc0d9013383df961edb083"> 4422</a></span><a class="code hl_typedef" href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a> <a class="code hl_function" href="class_game_logic.html#a7c2b54d759dc0d9013383df961edb083">GameLogic::findControlBarOverride</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_ascii_string.html">AsciiString</a>&amp; commandSetName, <a class="code hl_union" href="union_int.html">Int</a> slot, <a class="code hl_typedef" href="_game_logic_8h.html#a98290342578155b2daf04c51811e3d01">ConstCommandButtonPtr</a>&amp; commandButton)<span class="keyword"> const</span></div>
<div class="line"><a id="l04423" name="l04423"></a><span class="lineno"> 4423</span><span class="keyword"></span>{</div>
<div class="line"><a id="l04424" name="l04424"></a><span class="lineno"> 4424</span>    <span class="keywordtype">char</span> buf[256];</div>
<div class="line"><a id="l04425" name="l04425"></a><span class="lineno"> 4425</span>    buf[0] = <span class="charliteral">&#39;0&#39;</span> + slot;</div>
<div class="line"><a id="l04426" name="l04426"></a><span class="lineno"> 4426</span>    strcpy(&amp;buf[1], commandSetName.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>());</div>
<div class="line"><a id="l04427" name="l04427"></a><span class="lineno"> 4427</span> </div>
<div class="line"><a id="l04428" name="l04428"></a><span class="lineno"> 4428</span>    ControlBarOverrideMap::const_iterator it = m_controlBarOverrides.find(buf);</div>
<div class="line"><a id="l04429" name="l04429"></a><span class="lineno"> 4429</span>    <span class="keywordflow">if</span> (it != m_controlBarOverrides.end())</div>
<div class="line"><a id="l04430" name="l04430"></a><span class="lineno"> 4430</span>    {</div>
<div class="line"><a id="l04431" name="l04431"></a><span class="lineno"> 4431</span>        commandButton = it-&gt;second; <span class="comment">// could be null.</span></div>
<div class="line"><a id="l04432" name="l04432"></a><span class="lineno"> 4432</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04433" name="l04433"></a><span class="lineno"> 4433</span>    }</div>
<div class="line"><a id="l04434" name="l04434"></a><span class="lineno"> 4434</span> </div>
<div class="line"><a id="l04435" name="l04435"></a><span class="lineno"> 4435</span>    <span class="comment">// leave commandButton unmodified.</span></div>
<div class="line"><a id="l04436" name="l04436"></a><span class="lineno"> 4436</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04437" name="l04437"></a><span class="lineno"> 4437</span>}</div>
</div>
<div class="line"><a id="l04438" name="l04438"></a><span class="lineno"> 4438</span> </div>
<div class="line"><a id="l04439" name="l04439"></a><span class="lineno"> 4439</span><span class="preprocessor">#ifdef DUMP_PERF_STATS</span></div>
<div class="line"><a id="l04440" name="l04440"></a><span class="lineno"> 4440</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04441" name="l04441"></a><span class="lineno"> 4441</span><span class="keywordtype">void</span> GameLogic::getAIMetricsStatistics( <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> *numAI, <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> *numMoving, <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> *numAttacking, <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> *numWaitingForPath, <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> *overallFailedPathfinds )</div>
<div class="line"><a id="l04442" name="l04442"></a><span class="lineno"> 4442</span>{</div>
<div class="line"><a id="l04443" name="l04443"></a><span class="lineno"> 4443</span>    <a class="code hl_class" href="class_object.html">Object</a> *obj;</div>
<div class="line"><a id="l04444" name="l04444"></a><span class="lineno"> 4444</span>    *numAI = 0;</div>
<div class="line"><a id="l04445" name="l04445"></a><span class="lineno"> 4445</span>    *numMoving = 0;</div>
<div class="line"><a id="l04446" name="l04446"></a><span class="lineno"> 4446</span>    *numAttacking = 0;</div>
<div class="line"><a id="l04447" name="l04447"></a><span class="lineno"> 4447</span>    *numWaitingForPath = 0;</div>
<div class="line"><a id="l04448" name="l04448"></a><span class="lineno"> 4448</span>    <span class="keywordflow">for</span>( obj = <a class="code hl_function" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">getFirstObject</a>(); obj; obj = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>() )</div>
<div class="line"><a id="l04449" name="l04449"></a><span class="lineno"> 4449</span>    {</div>
<div class="line"><a id="l04450" name="l04450"></a><span class="lineno"> 4450</span>        <a class="code hl_class" href="class_a_i_update_interface.html">AIUpdateInterface</a> *ai = obj-&gt;<a class="code hl_function" href="class_object.html#ac50efcf2ad2e22d1f83125ac238c6f45">getAI</a>();</div>
<div class="line"><a id="l04451" name="l04451"></a><span class="lineno"> 4451</span>        <span class="keywordflow">if</span>( ai )</div>
<div class="line"><a id="l04452" name="l04452"></a><span class="lineno"> 4452</span>        {</div>
<div class="line"><a id="l04453" name="l04453"></a><span class="lineno"> 4453</span>            (*numAI)++;</div>
<div class="line"><a id="l04454" name="l04454"></a><span class="lineno"> 4454</span> </div>
<div class="line"><a id="l04455" name="l04455"></a><span class="lineno"> 4455</span>            <span class="keywordflow">if</span>( ai-&gt;<a class="code hl_function" href="class_a_i_update_interface.html#a94a9d2eb0b8b1c81b9200afd12eedd39">isMoving</a>() )</div>
<div class="line"><a id="l04456" name="l04456"></a><span class="lineno"> 4456</span>            {</div>
<div class="line"><a id="l04457" name="l04457"></a><span class="lineno"> 4457</span>                (*numMoving)++;</div>
<div class="line"><a id="l04458" name="l04458"></a><span class="lineno"> 4458</span>            }</div>
<div class="line"><a id="l04459" name="l04459"></a><span class="lineno"> 4459</span>            <span class="keywordflow">if</span>( ai-&gt;<a class="code hl_function" href="class_a_i_update_interface.html#a04eaa188e8119692276f2e247cd1e412">isWaitingForPath</a>() )</div>
<div class="line"><a id="l04460" name="l04460"></a><span class="lineno"> 4460</span>            {</div>
<div class="line"><a id="l04461" name="l04461"></a><span class="lineno"> 4461</span>                (*numWaitingForPath)++;</div>
<div class="line"><a id="l04462" name="l04462"></a><span class="lineno"> 4462</span>            }</div>
<div class="line"><a id="l04463" name="l04463"></a><span class="lineno"> 4463</span>            <span class="keywordflow">if</span>( ai-&gt;<a class="code hl_function" href="class_a_i_update_interface.html#ac4c0b10f48d5ffd6079556203a115ecd">isAttacking</a>() )</div>
<div class="line"><a id="l04464" name="l04464"></a><span class="lineno"> 4464</span>            {</div>
<div class="line"><a id="l04465" name="l04465"></a><span class="lineno"> 4465</span>                (*numAttacking)++;</div>
<div class="line"><a id="l04466" name="l04466"></a><span class="lineno"> 4466</span>            }</div>
<div class="line"><a id="l04467" name="l04467"></a><span class="lineno"> 4467</span>        }</div>
<div class="line"><a id="l04468" name="l04468"></a><span class="lineno"> 4468</span>    }</div>
<div class="line"><a id="l04469" name="l04469"></a><span class="lineno"> 4469</span>    *overallFailedPathfinds = m_overallFailedPathfinds;</div>
<div class="line"><a id="l04470" name="l04470"></a><span class="lineno"> 4470</span>}</div>
<div class="line"><a id="l04471" name="l04471"></a><span class="lineno"> 4471</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04472" name="l04472"></a><span class="lineno"> 4472</span> </div>
<div class="line"><a id="l04473" name="l04473"></a><span class="lineno"> 4473</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04475" name="l04475"></a><span class="lineno"> 4475</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04476" data-start="{" data-end="}">
<div class="line"><a id="l04476" name="l04476"></a><span class="lineno"><a class="line" href="class_game_logic.html#a0cde8293c73dbadb6b0af2d99578ded9"> 4476</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a0cde8293c73dbadb6b0af2d99578ded9">GameLogic::crc</a>( <a class="code hl_class" href="class_xfer.html">Xfer</a> *<a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a> )</div>
<div class="line"><a id="l04477" name="l04477"></a><span class="lineno"> 4477</span>{</div>
<div class="line"><a id="l04478" name="l04478"></a><span class="lineno"> 4478</span> </div>
<div class="line"><a id="l04479" name="l04479"></a><span class="lineno"> 4479</span>}  <span class="comment">// end crc</span></div>
</div>
<div class="line"><a id="l04480" name="l04480"></a><span class="lineno"> 4480</span> </div>
<div class="line"><a id="l04481" name="l04481"></a><span class="lineno"> 4481</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04483" name="l04483"></a><span class="lineno"> 4483</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04484" name="l04484"></a><span class="lineno"> 4484</span>GameLogic::ObjectTOCEntry *GameLogic::findTOCEntryByName( <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> name )</div>
<div class="line"><a id="l04485" name="l04485"></a><span class="lineno"> 4485</span>{</div>
<div class="line"><a id="l04486" name="l04486"></a><span class="lineno"> 4486</span> </div>
<div class="line"><a id="l04487" name="l04487"></a><span class="lineno"> 4487</span>    <span class="keywordflow">for</span>( ObjectTOCListIterator it = m_objectTOC.begin(); it != m_objectTOC.end(); ++it )</div>
<div class="line"><a id="l04488" name="l04488"></a><span class="lineno"> 4488</span>        <span class="keywordflow">if</span>( (*it).name == name )</div>
<div class="line"><a id="l04489" name="l04489"></a><span class="lineno"> 4489</span>            <span class="keywordflow">return</span> &amp;(*it);</div>
<div class="line"><a id="l04490" name="l04490"></a><span class="lineno"> 4490</span> </div>
<div class="line"><a id="l04491" name="l04491"></a><span class="lineno"> 4491</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04492" name="l04492"></a><span class="lineno"> 4492</span> </div>
<div class="line"><a id="l04493" name="l04493"></a><span class="lineno"> 4493</span>}  <span class="comment">// end findTOCEntryByname</span></div>
<div class="line"><a id="l04494" name="l04494"></a><span class="lineno"> 4494</span> </div>
<div class="line"><a id="l04495" name="l04495"></a><span class="lineno"> 4495</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04497" name="l04497"></a><span class="lineno"> 4497</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04498" name="l04498"></a><span class="lineno"> 4498</span>GameLogic::ObjectTOCEntry *GameLogic::findTOCEntryById( <a class="code hl_typedef" href="_base_type_8h.html#aff6fae7bebd4c30bdb0196edfb3637b9">UnsignedShort</a> <span class="keywordtype">id</span> )</div>
<div class="line"><a id="l04499" name="l04499"></a><span class="lineno"> 4499</span>{</div>
<div class="line"><a id="l04500" name="l04500"></a><span class="lineno"> 4500</span> </div>
<div class="line"><a id="l04501" name="l04501"></a><span class="lineno"> 4501</span>    <span class="keywordflow">for</span>( ObjectTOCListIterator it = m_objectTOC.begin(); it != m_objectTOC.end(); ++it )</div>
<div class="line"><a id="l04502" name="l04502"></a><span class="lineno"> 4502</span>        <span class="keywordflow">if</span>( (*it).id == <span class="keywordtype">id</span> )</div>
<div class="line"><a id="l04503" name="l04503"></a><span class="lineno"> 4503</span>            <span class="keywordflow">return</span> &amp;(*it);</div>
<div class="line"><a id="l04504" name="l04504"></a><span class="lineno"> 4504</span> </div>
<div class="line"><a id="l04505" name="l04505"></a><span class="lineno"> 4505</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04506" name="l04506"></a><span class="lineno"> 4506</span> </div>
<div class="line"><a id="l04507" name="l04507"></a><span class="lineno"> 4507</span>}  <span class="comment">// end findTOCEntryById</span></div>
<div class="line"><a id="l04508" name="l04508"></a><span class="lineno"> 4508</span> </div>
<div class="line"><a id="l04509" name="l04509"></a><span class="lineno"> 4509</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04511" name="l04511"></a><span class="lineno"> 4511</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04512" name="l04512"></a><span class="lineno"> 4512</span><span class="keywordtype">void</span> GameLogic::addTOCEntry( <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> name, <a class="code hl_typedef" href="_base_type_8h.html#aff6fae7bebd4c30bdb0196edfb3637b9">UnsignedShort</a> <span class="keywordtype">id</span> )</div>
<div class="line"><a id="l04513" name="l04513"></a><span class="lineno"> 4513</span>{</div>
<div class="line"><a id="l04514" name="l04514"></a><span class="lineno"> 4514</span> </div>
<div class="line"><a id="l04515" name="l04515"></a><span class="lineno"> 4515</span>    ObjectTOCEntry tocEntry;</div>
<div class="line"><a id="l04516" name="l04516"></a><span class="lineno"> 4516</span>    tocEntry.name = name;</div>
<div class="line"><a id="l04517" name="l04517"></a><span class="lineno"> 4517</span>    tocEntry.id = id;</div>
<div class="line"><a id="l04518" name="l04518"></a><span class="lineno"> 4518</span>    m_objectTOC.push_back( tocEntry );</div>
<div class="line"><a id="l04519" name="l04519"></a><span class="lineno"> 4519</span> </div>
<div class="line"><a id="l04520" name="l04520"></a><span class="lineno"> 4520</span>}  <span class="comment">// end addTOCEntry</span></div>
<div class="line"><a id="l04521" name="l04521"></a><span class="lineno"> 4521</span> </div>
<div class="line"><a id="l04522" name="l04522"></a><span class="lineno"> 4522</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04524" name="l04524"></a><span class="lineno"> 4524</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04525" name="l04525"></a><span class="lineno"> 4525</span><span class="keywordtype">void</span> GameLogic::xferObjectTOC( <a class="code hl_class" href="class_xfer.html">Xfer</a> *xfer )</div>
<div class="line"><a id="l04526" name="l04526"></a><span class="lineno"> 4526</span>{</div>
<div class="line"><a id="l04527" name="l04527"></a><span class="lineno"> 4527</span> </div>
<div class="line"><a id="l04528" name="l04528"></a><span class="lineno"> 4528</span>    <span class="comment">// version</span></div>
<div class="line"><a id="l04529" name="l04529"></a><span class="lineno"> 4529</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="_xfer_8h.html#a5290038bf1e80fe9b1a9e415814ddc13">XferVersion</a> currentVersion = 1;</div>
<div class="line"><a id="l04530" name="l04530"></a><span class="lineno"> 4530</span>    <a class="code hl_typedef" href="_xfer_8h.html#a5290038bf1e80fe9b1a9e415814ddc13">XferVersion</a> version = currentVersion;</div>
<div class="line"><a id="l04531" name="l04531"></a><span class="lineno"> 4531</span>    <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferVersion( &amp;version, currentVersion );</div>
<div class="line"><a id="l04532" name="l04532"></a><span class="lineno"> 4532</span> </div>
<div class="line"><a id="l04533" name="l04533"></a><span class="lineno"> 4533</span>    <span class="comment">// clear our current table of contents</span></div>
<div class="line"><a id="l04534" name="l04534"></a><span class="lineno"> 4534</span>    m_objectTOC.clear();</div>
<div class="line"><a id="l04535" name="l04535"></a><span class="lineno"> 4535</span> </div>
<div class="line"><a id="l04536" name="l04536"></a><span class="lineno"> 4536</span>    <span class="comment">// xfer the table</span></div>
<div class="line"><a id="l04537" name="l04537"></a><span class="lineno"> 4537</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> tocCount = 0;</div>
<div class="line"><a id="l04538" name="l04538"></a><span class="lineno"> 4538</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;getXferMode() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9ae98b808068bc78b6b9031cddbfddeccd">XFER_SAVE</a> )</div>
<div class="line"><a id="l04539" name="l04539"></a><span class="lineno"> 4539</span>    {</div>
<div class="line"><a id="l04540" name="l04540"></a><span class="lineno"> 4540</span>        AsciiString templateName;</div>
<div class="line"><a id="l04541" name="l04541"></a><span class="lineno"> 4541</span> </div>
<div class="line"><a id="l04542" name="l04542"></a><span class="lineno"> 4542</span>        <span class="comment">// generate a new TOC based on the objects that are in the map</span></div>
<div class="line"><a id="l04543" name="l04543"></a><span class="lineno"> 4543</span>        <span class="keywordflow">for</span>( Object *obj = <a class="code hl_function" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">getFirstObject</a>(); obj; obj = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>() )</div>
<div class="line"><a id="l04544" name="l04544"></a><span class="lineno"> 4544</span>        {</div>
<div class="line"><a id="l04545" name="l04545"></a><span class="lineno"> 4545</span> </div>
<div class="line"><a id="l04546" name="l04546"></a><span class="lineno"> 4546</span>            <span class="comment">// get the name we&#39;re working with</span></div>
<div class="line"><a id="l04547" name="l04547"></a><span class="lineno"> 4547</span>            templateName = obj-&gt;<a class="code hl_function" href="class_thing.html#a8028ae31000ce547b400838afe6eb335">getTemplate</a>()-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>();</div>
<div class="line"><a id="l04548" name="l04548"></a><span class="lineno"> 4548</span> </div>
<div class="line"><a id="l04549" name="l04549"></a><span class="lineno"> 4549</span>            <span class="comment">// if is this object name already in the TOC, skip it</span></div>
<div class="line"><a id="l04550" name="l04550"></a><span class="lineno"> 4550</span>            <span class="keywordflow">if</span>( findTOCEntryByName( templateName ) != <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l04551" name="l04551"></a><span class="lineno"> 4551</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04552" name="l04552"></a><span class="lineno"> 4552</span>            </div>
<div class="line"><a id="l04553" name="l04553"></a><span class="lineno"> 4553</span>            <span class="comment">// add this entry to the TOC</span></div>
<div class="line"><a id="l04554" name="l04554"></a><span class="lineno"> 4554</span>            addTOCEntry( obj-&gt;<a class="code hl_function" href="class_thing.html#a8028ae31000ce547b400838afe6eb335">getTemplate</a>()-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>(), ++tocCount );</div>
<div class="line"><a id="l04555" name="l04555"></a><span class="lineno"> 4555</span> </div>
<div class="line"><a id="l04556" name="l04556"></a><span class="lineno"> 4556</span>        }  <span class="comment">// end for obj</span></div>
<div class="line"><a id="l04557" name="l04557"></a><span class="lineno"> 4557</span> </div>
<div class="line"><a id="l04558" name="l04558"></a><span class="lineno"> 4558</span>        <span class="comment">// xfer entries in the TOC</span></div>
<div class="line"><a id="l04559" name="l04559"></a><span class="lineno"> 4559</span>        <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUnsignedInt( &amp;tocCount );</div>
<div class="line"><a id="l04560" name="l04560"></a><span class="lineno"> 4560</span> </div>
<div class="line"><a id="l04561" name="l04561"></a><span class="lineno"> 4561</span>        <span class="comment">// xfer each TOC entry</span></div>
<div class="line"><a id="l04562" name="l04562"></a><span class="lineno"> 4562</span>        ObjectTOCListIterator it;</div>
<div class="line"><a id="l04563" name="l04563"></a><span class="lineno"> 4563</span>        ObjectTOCEntry *tocEntry;</div>
<div class="line"><a id="l04564" name="l04564"></a><span class="lineno"> 4564</span>        <span class="keywordflow">for</span>( it = m_objectTOC.begin(); it != m_objectTOC.end(); ++it )</div>
<div class="line"><a id="l04565" name="l04565"></a><span class="lineno"> 4565</span>        {</div>
<div class="line"><a id="l04566" name="l04566"></a><span class="lineno"> 4566</span> </div>
<div class="line"><a id="l04567" name="l04567"></a><span class="lineno"> 4567</span>            <span class="comment">// get this toc entry</span></div>
<div class="line"><a id="l04568" name="l04568"></a><span class="lineno"> 4568</span>            tocEntry = &amp;(*it);</div>
<div class="line"><a id="l04569" name="l04569"></a><span class="lineno"> 4569</span> </div>
<div class="line"><a id="l04570" name="l04570"></a><span class="lineno"> 4570</span>            <span class="comment">// xfer the name</span></div>
<div class="line"><a id="l04571" name="l04571"></a><span class="lineno"> 4571</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferAsciiString( &amp;tocEntry-&gt;name );</div>
<div class="line"><a id="l04572" name="l04572"></a><span class="lineno"> 4572</span> </div>
<div class="line"><a id="l04573" name="l04573"></a><span class="lineno"> 4573</span>            <span class="comment">// xfer the paired id</span></div>
<div class="line"><a id="l04574" name="l04574"></a><span class="lineno"> 4574</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUnsignedShort( &amp;tocEntry-&gt;id );</div>
<div class="line"><a id="l04575" name="l04575"></a><span class="lineno"> 4575</span> </div>
<div class="line"><a id="l04576" name="l04576"></a><span class="lineno"> 4576</span>        }  <span class="comment">// end for</span></div>
<div class="line"><a id="l04577" name="l04577"></a><span class="lineno"> 4577</span> </div>
<div class="line"><a id="l04578" name="l04578"></a><span class="lineno"> 4578</span>    }  <span class="comment">// end if</span></div>
<div class="line"><a id="l04579" name="l04579"></a><span class="lineno"> 4579</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l04580" name="l04580"></a><span class="lineno"> 4580</span>    {</div>
<div class="line"><a id="l04581" name="l04581"></a><span class="lineno"> 4581</span>        AsciiString templateName;</div>
<div class="line"><a id="l04582" name="l04582"></a><span class="lineno"> 4582</span>        <a class="code hl_typedef" href="_base_type_8h.html#aff6fae7bebd4c30bdb0196edfb3637b9">UnsignedShort</a> id;</div>
<div class="line"><a id="l04583" name="l04583"></a><span class="lineno"> 4583</span> </div>
<div class="line"><a id="l04584" name="l04584"></a><span class="lineno"> 4584</span>        <span class="comment">// how many entries are we going to read</span></div>
<div class="line"><a id="l04585" name="l04585"></a><span class="lineno"> 4585</span>        <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUnsignedInt( &amp;tocCount );</div>
<div class="line"><a id="l04586" name="l04586"></a><span class="lineno"> 4586</span> </div>
<div class="line"><a id="l04587" name="l04587"></a><span class="lineno"> 4587</span>        <span class="comment">// read all the entries</span></div>
<div class="line"><a id="l04588" name="l04588"></a><span class="lineno"> 4588</span>        <span class="keywordflow">for</span>( <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> i = 0; i &lt; tocCount; ++i )</div>
<div class="line"><a id="l04589" name="l04589"></a><span class="lineno"> 4589</span>        {</div>
<div class="line"><a id="l04590" name="l04590"></a><span class="lineno"> 4590</span> </div>
<div class="line"><a id="l04591" name="l04591"></a><span class="lineno"> 4591</span>            <span class="comment">// read the name</span></div>
<div class="line"><a id="l04592" name="l04592"></a><span class="lineno"> 4592</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferAsciiString( &amp;templateName );</div>
<div class="line"><a id="l04593" name="l04593"></a><span class="lineno"> 4593</span> </div>
<div class="line"><a id="l04594" name="l04594"></a><span class="lineno"> 4594</span>            <span class="comment">// read the id</span></div>
<div class="line"><a id="l04595" name="l04595"></a><span class="lineno"> 4595</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUnsignedShort( &amp;<span class="keywordtype">id</span> );</div>
<div class="line"><a id="l04596" name="l04596"></a><span class="lineno"> 4596</span>            </div>
<div class="line"><a id="l04597" name="l04597"></a><span class="lineno"> 4597</span>            <span class="comment">// add this to the TOC</span></div>
<div class="line"><a id="l04598" name="l04598"></a><span class="lineno"> 4598</span>            addTOCEntry( templateName, <span class="keywordtype">id</span> );</div>
<div class="line"><a id="l04599" name="l04599"></a><span class="lineno"> 4599</span>                    </div>
<div class="line"><a id="l04600" name="l04600"></a><span class="lineno"> 4600</span>        }  <span class="comment">// end for i</span></div>
<div class="line"><a id="l04601" name="l04601"></a><span class="lineno"> 4601</span> </div>
<div class="line"><a id="l04602" name="l04602"></a><span class="lineno"> 4602</span>    }  <span class="comment">// end else</span></div>
<div class="line"><a id="l04603" name="l04603"></a><span class="lineno"> 4603</span> </div>
<div class="line"><a id="l04604" name="l04604"></a><span class="lineno"> 4604</span>}  <span class="comment">// end xferObjectTOC</span></div>
<div class="line"><a id="l04605" name="l04605"></a><span class="lineno"> 4605</span> </div>
<div class="line"><a id="l04606" name="l04606"></a><span class="lineno"> 4606</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04607" name="l04607"></a><span class="lineno"> 4607</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l04608" name="l04608"></a><span class="lineno"> 4608</span><span class="keywordtype">void</span> GameLogic::prepareLogicForObjectLoad( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l04609" name="l04609"></a><span class="lineno"> 4609</span>{</div>
<div class="line"><a id="l04610" name="l04610"></a><span class="lineno"> 4610</span> </div>
<div class="line"><a id="l04611" name="l04611"></a><span class="lineno"> 4611</span>    <span class="comment">//</span></div>
<div class="line"><a id="l04612" name="l04612"></a><span class="lineno"> 4612</span>    <span class="comment">// this is a band-aid :(</span></div>
<div class="line"><a id="l04613" name="l04613"></a><span class="lineno"> 4613</span>    <span class="comment">// when loading from a map file, objects were created for the bridges, towers, walls etc.</span></div>
<div class="line"><a id="l04614" name="l04614"></a><span class="lineno"> 4614</span>    <span class="comment">// since we&#39;re going to load that data from the save game file we will destroy any of</span></div>
<div class="line"><a id="l04615" name="l04615"></a><span class="lineno"> 4615</span>    <span class="comment">// those bridge objects and tower objects so that we can create them from the save data</span></div>
<div class="line"><a id="l04616" name="l04616"></a><span class="lineno"> 4616</span>    <span class="comment">//</span></div>
<div class="line"><a id="l04617" name="l04617"></a><span class="lineno"> 4617</span>    Object *obj, *next;</div>
<div class="line"><a id="l04618" name="l04618"></a><span class="lineno"> 4618</span>    <span class="keywordflow">for</span>( obj = <a class="code hl_function" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">getFirstObject</a>(); obj; obj = next )</div>
<div class="line"><a id="l04619" name="l04619"></a><span class="lineno"> 4619</span>    {</div>
<div class="line"><a id="l04620" name="l04620"></a><span class="lineno"> 4620</span> </div>
<div class="line"><a id="l04621" name="l04621"></a><span class="lineno"> 4621</span>        <span class="comment">// get next</span></div>
<div class="line"><a id="l04622" name="l04622"></a><span class="lineno"> 4622</span>        next = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>();</div>
<div class="line"><a id="l04623" name="l04623"></a><span class="lineno"> 4623</span> </div>
<div class="line"><a id="l04624" name="l04624"></a><span class="lineno"> 4624</span>        <span class="comment">// is this a bridge object?</span></div>
<div class="line"><a id="l04625" name="l04625"></a><span class="lineno"> 4625</span>        <span class="keywordflow">if</span>( obj-&gt;<a class="code hl_function" href="class_thing.html#a7978985fe2e1e1b1b91bb822f62df5e9">isKindOf</a>( <a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba2351603429c1853dd6f9e98bca45bc6e">KINDOF_BRIDGE</a> ) )</div>
<div class="line"><a id="l04626" name="l04626"></a><span class="lineno"> 4626</span>        {</div>
<div class="line"><a id="l04627" name="l04627"></a><span class="lineno"> 4627</span>            Bridge *bridge = <a class="code hl_variable" href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a>-&gt;<a class="code hl_function" href="class_terrain_logic.html#af62142f26b658e470c385b5fa38016a1">findBridgeAt</a>( obj-&gt;<a class="code hl_function" href="class_thing.html#a7120292125b19f38f560eb113fb79f72">getPosition</a>() );</div>
<div class="line"><a id="l04628" name="l04628"></a><span class="lineno"> 4628</span> </div>
<div class="line"><a id="l04629" name="l04629"></a><span class="lineno"> 4629</span>            <span class="comment">// sanity</span></div>
<div class="line"><a id="l04630" name="l04630"></a><span class="lineno"> 4630</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>( bridge, (<span class="stringliteral">&quot;GameLogic::prepareLogicForObjectLoad - Unable to find bridge\n&quot;</span> ));</div>
<div class="line"><a id="l04631" name="l04631"></a><span class="lineno"> 4631</span> </div>
<div class="line"><a id="l04632" name="l04632"></a><span class="lineno"> 4632</span>            <span class="comment">// get the old object that is in the bridge info</span></div>
<div class="line"><a id="l04633" name="l04633"></a><span class="lineno"> 4633</span>            <span class="keyword">const</span> BridgeInfo *bridgeInfo = bridge-&gt;<a class="code hl_function" href="class_bridge.html#a2b79cf748d494c9dca1e10f51fb253d2">peekBridgeInfo</a>();</div>
<div class="line"><a id="l04634" name="l04634"></a><span class="lineno"> 4634</span>            Object *oldObject = <a class="code hl_function" href="class_game_logic.html#af5d964c86b3ee2ff3c85aff0bd6d4f6f">findObjectByID</a>( bridgeInfo-&gt;<a class="code hl_variable" href="class_bridge_info.html#a73b326556a1ee5869504b6987bfefc25">bridgeObjectID</a> );</div>
<div class="line"><a id="l04635" name="l04635"></a><span class="lineno"> 4635</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>( oldObject, (<span class="stringliteral">&quot;GameLogic::prepareLogicForObjectLoad - Unable to find old bridge object\n&quot;</span>) );</div>
<div class="line"><a id="l04636" name="l04636"></a><span class="lineno"> 4636</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>( oldObject == obj, (<span class="stringliteral">&quot;GameLogic::prepareLogicForObjectLoad - obj != oldObject\n&quot;</span>) );</div>
<div class="line"><a id="l04637" name="l04637"></a><span class="lineno"> 4637</span> </div>
<div class="line"><a id="l04638" name="l04638"></a><span class="lineno"> 4638</span>            <span class="comment">//</span></div>
<div class="line"><a id="l04639" name="l04639"></a><span class="lineno"> 4639</span>            <span class="comment">// destroy the 4 towers that are attached to this old object (they will be loaded from</span></div>
<div class="line"><a id="l04640" name="l04640"></a><span class="lineno"> 4640</span>            <span class="comment">// the save game file</span></div>
<div class="line"><a id="l04641" name="l04641"></a><span class="lineno"> 4641</span>            <span class="comment">//</span></div>
<div class="line"><a id="l04642" name="l04642"></a><span class="lineno"> 4642</span>            Object *oldTower;</div>
<div class="line"><a id="l04643" name="l04643"></a><span class="lineno"> 4643</span>            <span class="keywordflow">for</span>( <a class="code hl_typedef" href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> i = 0; i &lt; <a class="code hl_enumvalue" href="_terrain_roads_8h.html#a2975ccf96cb696f99dc3f3f8ecd8702ba6bfc49836893ef99d0d153d709ab06b0">BRIDGE_MAX_TOWERS</a>; ++i )</div>
<div class="line"><a id="l04644" name="l04644"></a><span class="lineno"> 4644</span>            {</div>
<div class="line"><a id="l04645" name="l04645"></a><span class="lineno"> 4645</span> </div>
<div class="line"><a id="l04646" name="l04646"></a><span class="lineno"> 4646</span>                oldTower = <a class="code hl_function" href="class_game_logic.html#af5d964c86b3ee2ff3c85aff0bd6d4f6f">findObjectByID</a>( bridgeInfo-&gt;<a class="code hl_variable" href="class_bridge_info.html#a52da7e81a95339188bc54e4c75543772">towerObjectID</a>[ i ] );</div>
<div class="line"><a id="l04647" name="l04647"></a><span class="lineno"> 4647</span>                <span class="keywordflow">if</span> (oldTower) {</div>
<div class="line"><a id="l04648" name="l04648"></a><span class="lineno"> 4648</span>                    <a class="code hl_function" href="class_game_logic.html#a5875c63d5b64103411d99060d68c5623">destroyObject</a>( oldTower );</div>
<div class="line"><a id="l04649" name="l04649"></a><span class="lineno"> 4649</span>                }</div>
<div class="line"><a id="l04650" name="l04650"></a><span class="lineno"> 4650</span> </div>
<div class="line"><a id="l04651" name="l04651"></a><span class="lineno"> 4651</span>            }  <span class="comment">// end for, i</span></div>
<div class="line"><a id="l04652" name="l04652"></a><span class="lineno"> 4652</span> </div>
<div class="line"><a id="l04653" name="l04653"></a><span class="lineno"> 4653</span>            <span class="comment">// destroy the old bridge object</span></div>
<div class="line"><a id="l04654" name="l04654"></a><span class="lineno"> 4654</span>            <a class="code hl_function" href="class_game_logic.html#a5875c63d5b64103411d99060d68c5623">destroyObject</a>( oldObject );</div>
<div class="line"><a id="l04655" name="l04655"></a><span class="lineno"> 4655</span> </div>
<div class="line"><a id="l04656" name="l04656"></a><span class="lineno"> 4656</span>        }  <span class="comment">// end if, bridge</span></div>
<div class="line"><a id="l04657" name="l04657"></a><span class="lineno"> 4657</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj-&gt;<a class="code hl_function" href="class_thing.html#a7978985fe2e1e1b1b91bb822f62df5e9">isKindOf</a>( <a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa985d5f63f13b78714246ab248d55b3f">KINDOF_WALK_ON_TOP_OF_WALL</a> ) )</div>
<div class="line"><a id="l04658" name="l04658"></a><span class="lineno"> 4658</span>        {</div>
<div class="line"><a id="l04659" name="l04659"></a><span class="lineno"> 4659</span> </div>
<div class="line"><a id="l04660" name="l04660"></a><span class="lineno"> 4660</span>            <span class="comment">// destroy walk on top of wall things too</span></div>
<div class="line"><a id="l04661" name="l04661"></a><span class="lineno"> 4661</span>            <a class="code hl_function" href="class_game_logic.html#a5875c63d5b64103411d99060d68c5623">destroyObject</a>( obj );</div>
<div class="line"><a id="l04662" name="l04662"></a><span class="lineno"> 4662</span> </div>
<div class="line"><a id="l04663" name="l04663"></a><span class="lineno"> 4663</span>        }  <span class="comment">// end else if</span></div>
<div class="line"><a id="l04664" name="l04664"></a><span class="lineno"> 4664</span> </div>
<div class="line"><a id="l04665" name="l04665"></a><span class="lineno"> 4665</span>    }  <span class="comment">// end for, obj</span></div>
<div class="line"><a id="l04666" name="l04666"></a><span class="lineno"> 4666</span> </div>
<div class="line"><a id="l04667" name="l04667"></a><span class="lineno"> 4667</span>    <span class="comment">// process the destruction of these objects immediately before we proceed with the load process</span></div>
<div class="line"><a id="l04668" name="l04668"></a><span class="lineno"> 4668</span>    processDestroyList();</div>
<div class="line"><a id="l04669" name="l04669"></a><span class="lineno"> 4669</span> </div>
<div class="line"><a id="l04670" name="l04670"></a><span class="lineno"> 4670</span>    <span class="comment">// there should be no objects anywhere</span></div>
<div class="line"><a id="l04671" name="l04671"></a><span class="lineno"> 4671</span>    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>( <a class="code hl_function" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">getFirstObject</a>() == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a id="l04672" name="l04672"></a><span class="lineno"> 4672</span>                                         (<span class="stringliteral">&quot;GameLogic::prepareLogicForObjectLoad - There are still objects loaded in the engine, but it should be empty (Top is &#39;%s&#39;)\n&quot;</span>,</div>
<div class="line"><a id="l04673" name="l04673"></a><span class="lineno"> 4673</span>                                         <a class="code hl_function" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">getFirstObject</a>()-&gt;getTemplate()-&gt;<a class="code hl_function" href="class_subsystem_interface.html#af1318825b8697d6cb57c69491f04807c">getName</a>().str()) );</div>
<div class="line"><a id="l04674" name="l04674"></a><span class="lineno"> 4674</span> </div>
<div class="line"><a id="l04675" name="l04675"></a><span class="lineno"> 4675</span>}  <span class="comment">// end prepareLogicForObjectLoad</span></div>
<div class="line"><a id="l04676" name="l04676"></a><span class="lineno"> 4676</span> </div>
<div class="line"><a id="l04677" name="l04677"></a><span class="lineno"> 4677</span><span class="comment">// ------------------------------------------------------------------------------------------------</span>  </div>
<div class="line"><a id="l04689" name="l04689"></a><span class="lineno"> 4689</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen04690" data-start="{" data-end="}">
<div class="line"><a id="l04690" name="l04690"></a><span class="lineno"><a class="line" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980"> 4690</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">GameLogic::xfer</a>( <a class="code hl_class" href="class_xfer.html">Xfer</a> *<a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a> )</div>
<div class="line"><a id="l04691" name="l04691"></a><span class="lineno"> 4691</span>{</div>
<div class="line"><a id="l04692" name="l04692"></a><span class="lineno"> 4692</span>  </div>
<div class="line"><a id="l04693" name="l04693"></a><span class="lineno"> 4693</span>    <span class="comment">// version</span></div>
<div class="line"><a id="l04694" name="l04694"></a><span class="lineno"> 4694</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="_xfer_8h.html#a5290038bf1e80fe9b1a9e415814ddc13">XferVersion</a> currentVersion = 10;</div>
<div class="line"><a id="l04695" name="l04695"></a><span class="lineno"> 4695</span>    <a class="code hl_typedef" href="_xfer_8h.html#a5290038bf1e80fe9b1a9e415814ddc13">XferVersion</a> version = currentVersion;</div>
<div class="line"><a id="l04696" name="l04696"></a><span class="lineno"> 4696</span>    <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferVersion( &amp;version, currentVersion );</div>
<div class="line"><a id="l04697" name="l04697"></a><span class="lineno"> 4697</span> </div>
<div class="line"><a id="l04698" name="l04698"></a><span class="lineno"> 4698</span>    <span class="comment">// logic frame number</span></div>
<div class="line"><a id="l04699" name="l04699"></a><span class="lineno"> 4699</span>    <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUnsignedInt( &amp;m_frame );</div>
<div class="line"><a id="l04700" name="l04700"></a><span class="lineno"> 4700</span> </div>
<div class="line"><a id="l04701" name="l04701"></a><span class="lineno"> 4701</span>    <span class="comment">//</span></div>
<div class="line"><a id="l04702" name="l04702"></a><span class="lineno"> 4702</span>    <span class="comment">// note that we do not do the id counter here, we did it in the game state block because</span></div>
<div class="line"><a id="l04703" name="l04703"></a><span class="lineno"> 4703</span>    <span class="comment">// it&#39;s important to do that part very early in the load process</span></div>
<div class="line"><a id="l04704" name="l04704"></a><span class="lineno"> 4704</span>    <span class="comment">//</span></div>
<div class="line"><a id="l04705" name="l04705"></a><span class="lineno"> 4705</span>    <span class="comment">// !!!DON&#39;T DO THIS!!! ----&gt; xfer-&gt;xferObjectID( &amp;m_nextObjectID ); &lt;---- !!!DON&#39;T DO THIS!!! </span></div>
<div class="line"><a id="l04706" name="l04706"></a><span class="lineno"> 4706</span> </div>
<div class="line"><a id="l04707" name="l04707"></a><span class="lineno"> 4707</span>    <span class="comment">//</span></div>
<div class="line"><a id="l04708" name="l04708"></a><span class="lineno"> 4708</span>    <span class="comment">// xfer a table of contents that contain thing template and indentifier pairs.  this</span></div>
<div class="line"><a id="l04709" name="l04709"></a><span class="lineno"> 4709</span>    <span class="comment">// table of contents is good for this save file only as unique numbers are only</span></div>
<div class="line"><a id="l04710" name="l04710"></a><span class="lineno"> 4710</span>    <span class="comment">// generated and stored for the actual things that are on this map</span></div>
<div class="line"><a id="l04711" name="l04711"></a><span class="lineno"> 4711</span>    <span class="comment">//</span></div>
<div class="line"><a id="l04712" name="l04712"></a><span class="lineno"> 4712</span>    xferObjectTOC( <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a> );</div>
<div class="line"><a id="l04713" name="l04713"></a><span class="lineno"> 4713</span> </div>
<div class="line"><a id="l04714" name="l04714"></a><span class="lineno"> 4714</span>    <span class="comment">// when loading, we need to clean up bridges and get them ready for a load</span></div>
<div class="line"><a id="l04715" name="l04715"></a><span class="lineno"> 4715</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;getXferMode() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9a01c0e0a4ca7ad29a20262f65e854588e">XFER_LOAD</a> )</div>
<div class="line"><a id="l04716" name="l04716"></a><span class="lineno"> 4716</span>        prepareLogicForObjectLoad();</div>
<div class="line"><a id="l04717" name="l04717"></a><span class="lineno"> 4717</span> </div>
<div class="line"><a id="l04718" name="l04718"></a><span class="lineno"> 4718</span>    <span class="comment">// object count</span></div>
<div class="line"><a id="l04719" name="l04719"></a><span class="lineno"> 4719</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> objectCount = <a class="code hl_function" href="class_game_logic.html#ac0be2f1e336da7b17bee7346722b65aa">getObjectCount</a>();</div>
<div class="line"><a id="l04720" name="l04720"></a><span class="lineno"> 4720</span>    <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUnsignedInt( &amp;objectCount );</div>
<div class="line"><a id="l04721" name="l04721"></a><span class="lineno"> 4721</span> </div>
<div class="line"><a id="l04722" name="l04722"></a><span class="lineno"> 4722</span>    <span class="comment">// object data</span></div>
<div class="line"><a id="l04723" name="l04723"></a><span class="lineno"> 4723</span>    <a class="code hl_class" href="class_object.html">Object</a> *obj;</div>
<div class="line"><a id="l04724" name="l04724"></a><span class="lineno"> 4724</span>    ObjectTOCEntry *tocEntry;</div>
<div class="line"><a id="l04725" name="l04725"></a><span class="lineno"> 4725</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;getXferMode() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9ae98b808068bc78b6b9031cddbfddeccd">XFER_SAVE</a> )</div>
<div class="line"><a id="l04726" name="l04726"></a><span class="lineno"> 4726</span>    {</div>
<div class="line"><a id="l04727" name="l04727"></a><span class="lineno"> 4727</span> </div>
<div class="line"><a id="l04728" name="l04728"></a><span class="lineno"> 4728</span>        <span class="keywordflow">for</span>( obj = <a class="code hl_function" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">getFirstObject</a>(); obj; obj = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>() )</div>
<div class="line"><a id="l04729" name="l04729"></a><span class="lineno"> 4729</span>        {</div>
<div class="line"><a id="l04730" name="l04730"></a><span class="lineno"> 4730</span> </div>
<div class="line"><a id="l04731" name="l04731"></a><span class="lineno"> 4731</span>            <span class="comment">// get the object TOC entry for this template</span></div>
<div class="line"><a id="l04732" name="l04732"></a><span class="lineno"> 4732</span>            tocEntry = findTOCEntryByName( obj-&gt;<a class="code hl_function" href="class_thing.html#a8028ae31000ce547b400838afe6eb335">getTemplate</a>()-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>() );</div>
<div class="line"><a id="l04733" name="l04733"></a><span class="lineno"> 4733</span>            <span class="keywordflow">if</span>( tocEntry == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l04734" name="l04734"></a><span class="lineno"> 4734</span>            {</div>
<div class="line"><a id="l04735" name="l04735"></a><span class="lineno"> 4735</span> </div>
<div class="line"><a id="l04736" name="l04736"></a><span class="lineno"> 4736</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>(( <span class="stringliteral">&quot;GameLogic::xfer - Object TOC entry not found for &#39;%s&#39;\n&quot;</span>, obj-&gt;<a class="code hl_function" href="class_thing.html#a8028ae31000ce547b400838afe6eb335">getTemplate</a>()-&gt;<a class="code hl_function" href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">getName</a>().<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>() ));</div>
<div class="line"><a id="l04737" name="l04737"></a><span class="lineno"> 4737</span>                <span class="keywordflow">throw</span> <a class="code hl_enumvalue" href="_game_state_8h.html#ad8799b8b1af97748f1daa98e85399e90a1b32afe93f193db3ad8ce92eff34e91c">SC_INVALID_DATA</a>;</div>
<div class="line"><a id="l04738" name="l04738"></a><span class="lineno"> 4738</span> </div>
<div class="line"><a id="l04739" name="l04739"></a><span class="lineno"> 4739</span>            }  <span class="comment">// end if</span></div>
<div class="line"><a id="l04740" name="l04740"></a><span class="lineno"> 4740</span> </div>
<div class="line"><a id="l04741" name="l04741"></a><span class="lineno"> 4741</span>            <span class="comment">// transfer TOC id entry</span></div>
<div class="line"><a id="l04742" name="l04742"></a><span class="lineno"> 4742</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUnsignedShort( &amp;tocEntry-&gt;id );</div>
<div class="line"><a id="l04743" name="l04743"></a><span class="lineno"> 4743</span> </div>
<div class="line"><a id="l04744" name="l04744"></a><span class="lineno"> 4744</span>            <span class="comment">// begin a block of data</span></div>
<div class="line"><a id="l04745" name="l04745"></a><span class="lineno"> 4745</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;beginBlock();</div>
<div class="line"><a id="l04746" name="l04746"></a><span class="lineno"> 4746</span> </div>
<div class="line"><a id="l04747" name="l04747"></a><span class="lineno"> 4747</span>            <span class="comment">// write object data</span></div>
<div class="line"><a id="l04748" name="l04748"></a><span class="lineno"> 4748</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferSnapshot( obj );</div>
<div class="line"><a id="l04749" name="l04749"></a><span class="lineno"> 4749</span> </div>
<div class="line"><a id="l04750" name="l04750"></a><span class="lineno"> 4750</span>            <span class="comment">// end a block of data</span></div>
<div class="line"><a id="l04751" name="l04751"></a><span class="lineno"> 4751</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;endBlock();</div>
<div class="line"><a id="l04752" name="l04752"></a><span class="lineno"> 4752</span> </div>
<div class="line"><a id="l04753" name="l04753"></a><span class="lineno"> 4753</span>        }  <span class="comment">// end for</span></div>
<div class="line"><a id="l04754" name="l04754"></a><span class="lineno"> 4754</span> </div>
<div class="line"><a id="l04755" name="l04755"></a><span class="lineno"> 4755</span>    }  <span class="comment">// end if, save</span></div>
<div class="line"><a id="l04756" name="l04756"></a><span class="lineno"> 4756</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l04757" name="l04757"></a><span class="lineno"> 4757</span>    {</div>
<div class="line"><a id="l04758" name="l04758"></a><span class="lineno"> 4758</span>        <a class="code hl_class" href="class_team.html">Team</a> *defaultTeam = <a class="code hl_variable" href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a>-&gt;getNeutralPlayer()-&gt;getDefaultTeam();</div>
<div class="line"><a id="l04759" name="l04759"></a><span class="lineno"> 4759</span>        <span class="keyword">const</span> <a class="code hl_class" href="class_thing_template.html">ThingTemplate</a> *thingTemplate;</div>
<div class="line"><a id="l04760" name="l04760"></a><span class="lineno"> 4760</span> </div>
<div class="line"><a id="l04761" name="l04761"></a><span class="lineno"> 4761</span>        <span class="comment">// read all objects</span></div>
<div class="line"><a id="l04762" name="l04762"></a><span class="lineno"> 4762</span>        <a class="code hl_union" href="union_int.html">Int</a> objectDataSize;</div>
<div class="line"><a id="l04763" name="l04763"></a><span class="lineno"> 4763</span>        <a class="code hl_typedef" href="_base_type_8h.html#aff6fae7bebd4c30bdb0196edfb3637b9">UnsignedShort</a> tocID;</div>
<div class="line"><a id="l04764" name="l04764"></a><span class="lineno"> 4764</span>        ObjectTOCEntry *tocEntry;</div>
<div class="line"><a id="l04765" name="l04765"></a><span class="lineno"> 4765</span>        <span class="keywordflow">for</span>( <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> i = 0; i &lt; objectCount; ++i )</div>
<div class="line"><a id="l04766" name="l04766"></a><span class="lineno"> 4766</span>        {</div>
<div class="line"><a id="l04767" name="l04767"></a><span class="lineno"> 4767</span> </div>
<div class="line"><a id="l04768" name="l04768"></a><span class="lineno"> 4768</span>            <span class="comment">// read toc entry identifier</span></div>
<div class="line"><a id="l04769" name="l04769"></a><span class="lineno"> 4769</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUnsignedShort( &amp;tocID );</div>
<div class="line"><a id="l04770" name="l04770"></a><span class="lineno"> 4770</span> </div>
<div class="line"><a id="l04771" name="l04771"></a><span class="lineno"> 4771</span>            <span class="comment">// find Object TOC entry with this identifier</span></div>
<div class="line"><a id="l04772" name="l04772"></a><span class="lineno"> 4772</span>            tocEntry = findTOCEntryById( tocID );</div>
<div class="line"><a id="l04773" name="l04773"></a><span class="lineno"> 4773</span>            <span class="keywordflow">if</span>( tocEntry == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l04774" name="l04774"></a><span class="lineno"> 4774</span>            {</div>
<div class="line"><a id="l04775" name="l04775"></a><span class="lineno"> 4775</span> </div>
<div class="line"><a id="l04776" name="l04776"></a><span class="lineno"> 4776</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>(( <span class="stringliteral">&quot;GameLogic::xfer - No TOC entry match for id &#39;%d&#39;\n&quot;</span>, tocID ));</div>
<div class="line"><a id="l04777" name="l04777"></a><span class="lineno"> 4777</span>                <span class="keywordflow">throw</span> <a class="code hl_enumvalue" href="_game_state_8h.html#ad8799b8b1af97748f1daa98e85399e90a1b32afe93f193db3ad8ce92eff34e91c">SC_INVALID_DATA</a>;</div>
<div class="line"><a id="l04778" name="l04778"></a><span class="lineno"> 4778</span> </div>
<div class="line"><a id="l04779" name="l04779"></a><span class="lineno"> 4779</span>            }  <span class="comment">// end if</span></div>
<div class="line"><a id="l04780" name="l04780"></a><span class="lineno"> 4780</span> </div>
<div class="line"><a id="l04781" name="l04781"></a><span class="lineno"> 4781</span>            <span class="comment">// a block of data has begun</span></div>
<div class="line"><a id="l04782" name="l04782"></a><span class="lineno"> 4782</span>            objectDataSize = <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;beginBlock();</div>
<div class="line"><a id="l04783" name="l04783"></a><span class="lineno"> 4783</span> </div>
<div class="line"><a id="l04784" name="l04784"></a><span class="lineno"> 4784</span>            <span class="comment">// find matching thing template</span></div>
<div class="line"><a id="l04785" name="l04785"></a><span class="lineno"> 4785</span>            thingTemplate = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;findTemplate( tocEntry-&gt;name );</div>
<div class="line"><a id="l04786" name="l04786"></a><span class="lineno"> 4786</span>            <span class="keywordflow">if</span>( thingTemplate == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l04787" name="l04787"></a><span class="lineno"> 4787</span>            {</div>
<div class="line"><a id="l04788" name="l04788"></a><span class="lineno"> 4788</span> </div>
<div class="line"><a id="l04789" name="l04789"></a><span class="lineno"> 4789</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>(( <span class="stringliteral">&quot;GameLogic::xfer - Unrecognized thing template name &#39;%s&#39;, skipping.  ENGINEERS - Are you *sure* it&#39;s OK to be ignoring this object from the save file???  Think hard about it!\n&quot;</span>,</div>
<div class="line"><a id="l04790" name="l04790"></a><span class="lineno"> 4790</span>                                            tocEntry-&gt;name.<a class="code hl_function" href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">str</a>() ));</div>
<div class="line"><a id="l04791" name="l04791"></a><span class="lineno"> 4791</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;skip( objectDataSize );</div>
<div class="line"><a id="l04792" name="l04792"></a><span class="lineno"> 4792</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04793" name="l04793"></a><span class="lineno"> 4793</span>                            </div>
<div class="line"><a id="l04794" name="l04794"></a><span class="lineno"> 4794</span>            }  <span class="comment">// end if</span></div>
<div class="line"><a id="l04795" name="l04795"></a><span class="lineno"> 4795</span> </div>
<div class="line"><a id="l04796" name="l04796"></a><span class="lineno"> 4796</span>            <span class="comment">// create new object</span></div>
<div class="line"><a id="l04797" name="l04797"></a><span class="lineno"> 4797</span>            obj = <a class="code hl_variable" href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a>-&gt;newObject( thingTemplate, defaultTeam );</div>
<div class="line"><a id="l04798" name="l04798"></a><span class="lineno"> 4798</span> </div>
<div class="line"><a id="l04799" name="l04799"></a><span class="lineno"> 4799</span>            <span class="comment">// xfer the rest of the object data</span></div>
<div class="line"><a id="l04800" name="l04800"></a><span class="lineno"> 4800</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferSnapshot( obj );</div>
<div class="line"><a id="l04801" name="l04801"></a><span class="lineno"> 4801</span> </div>
<div class="line"><a id="l04802" name="l04802"></a><span class="lineno"> 4802</span>            <span class="comment">// end of block of data (not necessary in a load, but looks symettrically nice)</span></div>
<div class="line"><a id="l04803" name="l04803"></a><span class="lineno"> 4803</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;endBlock();</div>
<div class="line"><a id="l04804" name="l04804"></a><span class="lineno"> 4804</span> </div>
<div class="line"><a id="l04805" name="l04805"></a><span class="lineno"> 4805</span>            <span class="comment">// special case for wall pieces, need to add them to the pathfinder</span></div>
<div class="line"><a id="l04806" name="l04806"></a><span class="lineno"> 4806</span>            <span class="keywordflow">if</span>( obj-&gt;<a class="code hl_function" href="class_thing.html#a7978985fe2e1e1b1b91bb822f62df5e9">isKindOf</a>( <a class="code hl_enumvalue" href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa985d5f63f13b78714246ab248d55b3f">KINDOF_WALK_ON_TOP_OF_WALL</a> ) )</div>
<div class="line"><a id="l04807" name="l04807"></a><span class="lineno"> 4807</span>                <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;pathfinder()-&gt;addWallPiece( obj );</div>
<div class="line"><a id="l04808" name="l04808"></a><span class="lineno"> 4808</span> </div>
<div class="line"><a id="l04809" name="l04809"></a><span class="lineno"> 4809</span>        }  <span class="comment">// end for, i</span></div>
<div class="line"><a id="l04810" name="l04810"></a><span class="lineno"> 4810</span> </div>
<div class="line"><a id="l04811" name="l04811"></a><span class="lineno"> 4811</span>    }  <span class="comment">// end else</span></div>
<div class="line"><a id="l04812" name="l04812"></a><span class="lineno"> 4812</span> </div>
<div class="line"><a id="l04813" name="l04813"></a><span class="lineno"> 4813</span>    <span class="comment">// campaign info</span></div>
<div class="line"><a id="l04814" name="l04814"></a><span class="lineno"> 4814</span>    <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferSnapshot( <a class="code hl_variable" href="_campaign_manager_8h.html#afd7ce7f7a3f20ff00212a798910d50db">TheCampaignManager</a> );</div>
<div class="line"><a id="l04815" name="l04815"></a><span class="lineno"> 4815</span> </div>
<div class="line"><a id="l04816" name="l04816"></a><span class="lineno"> 4816</span>    <span class="comment">// cave system info</span></div>
<div class="line"><a id="l04817" name="l04817"></a><span class="lineno"> 4817</span>    <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferSnapshot( <a class="code hl_variable" href="_cave_system_8h.html#a835c54dd12a454be2e944b5b11031650">TheCaveSystem</a> );</div>
<div class="line"><a id="l04818" name="l04818"></a><span class="lineno"> 4818</span> </div>
<div class="line"><a id="l04819" name="l04819"></a><span class="lineno"> 4819</span>    <span class="comment">// is scoring enabled</span></div>
<div class="line"><a id="l04820" name="l04820"></a><span class="lineno"> 4820</span>    <span class="keywordflow">if</span>( version &gt;= 2 ) </div>
<div class="line"><a id="l04821" name="l04821"></a><span class="lineno"> 4821</span>        <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferBool(&amp;m_isScoringEnabled);</div>
<div class="line"><a id="l04822" name="l04822"></a><span class="lineno"> 4822</span> </div>
<div class="line"><a id="l04823" name="l04823"></a><span class="lineno"> 4823</span>    <span class="comment">// polygon triggers</span></div>
<div class="line"><a id="l04824" name="l04824"></a><span class="lineno"> 4824</span>    <span class="keywordflow">if</span>( version &gt;= 3 )</div>
<div class="line"><a id="l04825" name="l04825"></a><span class="lineno"> 4825</span>    {</div>
<div class="line"><a id="l04826" name="l04826"></a><span class="lineno"> 4826</span>        <a class="code hl_class" href="class_polygon_trigger.html">PolygonTrigger</a> *poly;</div>
<div class="line"><a id="l04827" name="l04827"></a><span class="lineno"> 4827</span> </div>
<div class="line"><a id="l04828" name="l04828"></a><span class="lineno"> 4828</span>        <span class="comment">// count the number of polygon triggers we have</span></div>
<div class="line"><a id="l04829" name="l04829"></a><span class="lineno"> 4829</span>        <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> triggerCount = 0;</div>
<div class="line"><a id="l04830" name="l04830"></a><span class="lineno"> 4830</span>        <span class="keywordflow">for</span>( poly = <a class="code hl_function" href="class_polygon_trigger.html#afdbbe5145a0c821c02957e2d5ec71d43">PolygonTrigger::getFirstPolygonTrigger</a>(); poly; poly = poly-&gt;<a class="code hl_function" href="class_polygon_trigger.html#ab3a5bfea73db915b19d116e1f9c15d2c">getNext</a>() )</div>
<div class="line"><a id="l04831" name="l04831"></a><span class="lineno"> 4831</span>            triggerCount++;</div>
<div class="line"><a id="l04832" name="l04832"></a><span class="lineno"> 4832</span> </div>
<div class="line"><a id="l04833" name="l04833"></a><span class="lineno"> 4833</span>        <span class="comment">// sanity count</span></div>
<div class="line"><a id="l04834" name="l04834"></a><span class="lineno"> 4834</span>        <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> sanityTriggerCount = triggerCount;</div>
<div class="line"><a id="l04835" name="l04835"></a><span class="lineno"> 4835</span> </div>
<div class="line"><a id="l04836" name="l04836"></a><span class="lineno"> 4836</span>        <span class="comment">// xfer count</span></div>
<div class="line"><a id="l04837" name="l04837"></a><span class="lineno"> 4837</span>        <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUnsignedInt( &amp;triggerCount );</div>
<div class="line"><a id="l04838" name="l04838"></a><span class="lineno"> 4838</span> </div>
<div class="line"><a id="l04839" name="l04839"></a><span class="lineno"> 4839</span>        <span class="comment">//</span></div>
<div class="line"><a id="l04840" name="l04840"></a><span class="lineno"> 4840</span>        <span class="comment">// since the save game loaded should have exactly the same number of polygon triggers</span></div>
<div class="line"><a id="l04841" name="l04841"></a><span class="lineno"> 4841</span>        <span class="comment">// in it that we did from loading the map this is just a sanity check here</span></div>
<div class="line"><a id="l04842" name="l04842"></a><span class="lineno"> 4842</span>        <span class="comment">//</span></div>
<div class="line"><a id="l04843" name="l04843"></a><span class="lineno"> 4843</span>        <span class="keywordflow">if</span>( sanityTriggerCount != triggerCount )</div>
<div class="line"><a id="l04844" name="l04844"></a><span class="lineno"> 4844</span>        {</div>
<div class="line"><a id="l04845" name="l04845"></a><span class="lineno"> 4845</span> </div>
<div class="line"><a id="l04846" name="l04846"></a><span class="lineno"> 4846</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>(( <span class="stringliteral">&quot;GameLogic::xfer - Polygon trigger count mismatch.  Save file has a count of &#39;%d&#39;, but map had &#39;%d&#39; triggers\n&quot;</span>,</div>
<div class="line"><a id="l04847" name="l04847"></a><span class="lineno"> 4847</span>                                        sanityTriggerCount, triggerCount ));</div>
<div class="line"><a id="l04848" name="l04848"></a><span class="lineno"> 4848</span>            <span class="keywordflow">throw</span> <a class="code hl_enumvalue" href="_game_state_8h.html#ad8799b8b1af97748f1daa98e85399e90a1b32afe93f193db3ad8ce92eff34e91c">SC_INVALID_DATA</a>;</div>
<div class="line"><a id="l04849" name="l04849"></a><span class="lineno"> 4849</span> </div>
<div class="line"><a id="l04850" name="l04850"></a><span class="lineno"> 4850</span>        }  <span class="comment">// end if</span></div>
<div class="line"><a id="l04851" name="l04851"></a><span class="lineno"> 4851</span> </div>
<div class="line"><a id="l04852" name="l04852"></a><span class="lineno"> 4852</span>        <span class="comment">// xfer each of the polygon triggers</span></div>
<div class="line"><a id="l04853" name="l04853"></a><span class="lineno"> 4853</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;getXferMode() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9ae98b808068bc78b6b9031cddbfddeccd">XFER_SAVE</a> )</div>
<div class="line"><a id="l04854" name="l04854"></a><span class="lineno"> 4854</span>        {</div>
<div class="line"><a id="l04855" name="l04855"></a><span class="lineno"> 4855</span>            <a class="code hl_union" href="union_int.html">Int</a> triggerID;</div>
<div class="line"><a id="l04856" name="l04856"></a><span class="lineno"> 4856</span> </div>
<div class="line"><a id="l04857" name="l04857"></a><span class="lineno"> 4857</span>            <span class="keywordflow">for</span>( poly = <a class="code hl_function" href="class_polygon_trigger.html#afdbbe5145a0c821c02957e2d5ec71d43">PolygonTrigger::getFirstPolygonTrigger</a>(); poly; poly = poly-&gt;<a class="code hl_function" href="class_polygon_trigger.html#ab3a5bfea73db915b19d116e1f9c15d2c">getNext</a>() )</div>
<div class="line"><a id="l04858" name="l04858"></a><span class="lineno"> 4858</span>            {</div>
<div class="line"><a id="l04859" name="l04859"></a><span class="lineno"> 4859</span> </div>
<div class="line"><a id="l04860" name="l04860"></a><span class="lineno"> 4860</span>                <span class="comment">// write polygon ID</span></div>
<div class="line"><a id="l04861" name="l04861"></a><span class="lineno"> 4861</span>                triggerID = poly-&gt;<a class="code hl_function" href="class_polygon_trigger.html#a68499623c02940cb78dd8d4ec33a457c">getID</a>(); </div>
<div class="line"><a id="l04862" name="l04862"></a><span class="lineno"> 4862</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferInt( &amp;triggerID );</div>
<div class="line"><a id="l04863" name="l04863"></a><span class="lineno"> 4863</span> </div>
<div class="line"><a id="l04864" name="l04864"></a><span class="lineno"> 4864</span>                <span class="comment">// xfer polygon data</span></div>
<div class="line"><a id="l04865" name="l04865"></a><span class="lineno"> 4865</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferSnapshot( poly );</div>
<div class="line"><a id="l04866" name="l04866"></a><span class="lineno"> 4866</span> </div>
<div class="line"><a id="l04867" name="l04867"></a><span class="lineno"> 4867</span>            }  <span class="comment">// end for, poly</span></div>
<div class="line"><a id="l04868" name="l04868"></a><span class="lineno"> 4868</span> </div>
<div class="line"><a id="l04869" name="l04869"></a><span class="lineno"> 4869</span>        }  <span class="comment">// end if, save</span></div>
<div class="line"><a id="l04870" name="l04870"></a><span class="lineno"> 4870</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l04871" name="l04871"></a><span class="lineno"> 4871</span>        {</div>
<div class="line"><a id="l04872" name="l04872"></a><span class="lineno"> 4872</span>            <a class="code hl_union" href="union_int.html">Int</a> triggerID;</div>
<div class="line"><a id="l04873" name="l04873"></a><span class="lineno"> 4873</span> </div>
<div class="line"><a id="l04874" name="l04874"></a><span class="lineno"> 4874</span>            <span class="comment">// loop through all triggers</span></div>
<div class="line"><a id="l04875" name="l04875"></a><span class="lineno"> 4875</span>            <span class="keywordflow">for</span>( <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> i = 0; i &lt; triggerCount; ++i )</div>
<div class="line"><a id="l04876" name="l04876"></a><span class="lineno"> 4876</span>            {</div>
<div class="line"><a id="l04877" name="l04877"></a><span class="lineno"> 4877</span> </div>
<div class="line"><a id="l04878" name="l04878"></a><span class="lineno"> 4878</span>                <span class="comment">// read ID</span></div>
<div class="line"><a id="l04879" name="l04879"></a><span class="lineno"> 4879</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferInt( &amp;triggerID );</div>
<div class="line"><a id="l04880" name="l04880"></a><span class="lineno"> 4880</span> </div>
<div class="line"><a id="l04881" name="l04881"></a><span class="lineno"> 4881</span>                <span class="comment">// find this polygon trigger</span></div>
<div class="line"><a id="l04882" name="l04882"></a><span class="lineno"> 4882</span>                poly = <a class="code hl_function" href="class_polygon_trigger.html#ad093b0b82d63c19c0a11c4b05d2f3f83">PolygonTrigger::getPolygonTriggerByID</a>( triggerID );</div>
<div class="line"><a id="l04883" name="l04883"></a><span class="lineno"> 4883</span> </div>
<div class="line"><a id="l04884" name="l04884"></a><span class="lineno"> 4884</span>                <span class="comment">// sanity</span></div>
<div class="line"><a id="l04885" name="l04885"></a><span class="lineno"> 4885</span>                <span class="keywordflow">if</span>( poly == <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )</div>
<div class="line"><a id="l04886" name="l04886"></a><span class="lineno"> 4886</span>                {</div>
<div class="line"><a id="l04887" name="l04887"></a><span class="lineno"> 4887</span> </div>
<div class="line"><a id="l04888" name="l04888"></a><span class="lineno"> 4888</span>                    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>(( <span class="stringliteral">&quot;GameLogic::xfer - Unable to find polygon trigger with id &#39;%d&#39;\n&quot;</span>,</div>
<div class="line"><a id="l04889" name="l04889"></a><span class="lineno"> 4889</span>                                                triggerID ));</div>
<div class="line"><a id="l04890" name="l04890"></a><span class="lineno"> 4890</span>                    <span class="keywordflow">throw</span> <a class="code hl_enumvalue" href="_game_state_8h.html#ad8799b8b1af97748f1daa98e85399e90a1b32afe93f193db3ad8ce92eff34e91c">SC_INVALID_DATA</a>;</div>
<div class="line"><a id="l04891" name="l04891"></a><span class="lineno"> 4891</span> </div>
<div class="line"><a id="l04892" name="l04892"></a><span class="lineno"> 4892</span>                }  <span class="comment">// end if</span></div>
<div class="line"><a id="l04893" name="l04893"></a><span class="lineno"> 4893</span> </div>
<div class="line"><a id="l04894" name="l04894"></a><span class="lineno"> 4894</span>                <span class="comment">// xfer polygon data</span></div>
<div class="line"><a id="l04895" name="l04895"></a><span class="lineno"> 4895</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferSnapshot( poly );</div>
<div class="line"><a id="l04896" name="l04896"></a><span class="lineno"> 4896</span> </div>
<div class="line"><a id="l04897" name="l04897"></a><span class="lineno"> 4897</span>            }  <span class="comment">// end for, i</span></div>
<div class="line"><a id="l04898" name="l04898"></a><span class="lineno"> 4898</span> </div>
<div class="line"><a id="l04899" name="l04899"></a><span class="lineno"> 4899</span>            <span class="comment">//</span></div>
<div class="line"><a id="l04900" name="l04900"></a><span class="lineno"> 4900</span>            <span class="comment">// force a recalculation of the pathfinding cause some of these polygon triggers</span></div>
<div class="line"><a id="l04901" name="l04901"></a><span class="lineno"> 4901</span>            <span class="comment">// are water which can move during run-time, and therefore affecting the area</span></div>
<div class="line"><a id="l04902" name="l04902"></a><span class="lineno"> 4902</span>            <span class="comment">// that objects can move on. Also, map objects need recalculation. jba.</span></div>
<div class="line"><a id="l04903" name="l04903"></a><span class="lineno"> 4903</span>            <span class="comment">//</span></div>
<div class="line"><a id="l04904" name="l04904"></a><span class="lineno"> 4904</span>            <a class="code hl_variable" href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a>-&gt;pathfinder()-&gt;newMap();</div>
<div class="line"><a id="l04905" name="l04905"></a><span class="lineno"> 4905</span> </div>
<div class="line"><a id="l04906" name="l04906"></a><span class="lineno"> 4906</span>        }  <span class="comment">// end else, load</span></div>
<div class="line"><a id="l04907" name="l04907"></a><span class="lineno"> 4907</span> </div>
<div class="line"><a id="l04908" name="l04908"></a><span class="lineno"> 4908</span>    }    <span class="comment">// end if, version &gt;= 3</span></div>
<div class="line"><a id="l04909" name="l04909"></a><span class="lineno"> 4909</span> </div>
<div class="line"><a id="l04910" name="l04910"></a><span class="lineno"> 4910</span>    <span class="comment">// note that version=4 is the same as version=3</span></div>
<div class="line"><a id="l04911" name="l04911"></a><span class="lineno"> 4911</span>    <span class="keywordflow">if</span> (version &gt;= 5)</div>
<div class="line"><a id="l04912" name="l04912"></a><span class="lineno"> 4912</span>    {</div>
<div class="line"><a id="l04913" name="l04913"></a><span class="lineno"> 4913</span>        <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferInt(&amp;m_rankLevelLimit);</div>
<div class="line"><a id="l04914" name="l04914"></a><span class="lineno"> 4914</span>    }</div>
<div class="line"><a id="l04915" name="l04915"></a><span class="lineno"> 4915</span> </div>
<div class="line"><a id="l04916" name="l04916"></a><span class="lineno"> 4916</span>    <span class="keywordflow">if</span> (version&gt;=6) {</div>
<div class="line"><a id="l04917" name="l04917"></a><span class="lineno"> 4917</span>        <span class="comment">// We need the list of buildings in process of being sold.</span></div>
<div class="line"><a id="l04918" name="l04918"></a><span class="lineno"> 4918</span>        <a class="code hl_variable" href="_build_assistant_8h.html#aac51a4d03c2c52f384f91d8d94b05409">TheBuildAssistant</a>-&gt;xferTheSellList(<a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>);</div>
<div class="line"><a id="l04919" name="l04919"></a><span class="lineno"> 4919</span>    }</div>
<div class="line"><a id="l04920" name="l04920"></a><span class="lineno"> 4920</span> </div>
<div class="line"><a id="l04921" name="l04921"></a><span class="lineno"> 4921</span>    <span class="keywordflow">if</span> (version &gt;= 7) </div>
<div class="line"><a id="l04922" name="l04922"></a><span class="lineno"> 4922</span>    {</div>
<div class="line"><a id="l04923" name="l04923"></a><span class="lineno"> 4923</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;getXferMode() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9ae98b808068bc78b6b9031cddbfddeccd">XFER_SAVE</a> )</div>
<div class="line"><a id="l04924" name="l04924"></a><span class="lineno"> 4924</span>        {</div>
<div class="line"><a id="l04925" name="l04925"></a><span class="lineno"> 4925</span>            <span class="keywordflow">for</span> (BuildableMap::const_iterator it = m_thingTemplateBuildableOverrides.begin(); it != m_thingTemplateBuildableOverrides.end(); ++it )</div>
<div class="line"><a id="l04926" name="l04926"></a><span class="lineno"> 4926</span>            {</div>
<div class="line"><a id="l04927" name="l04927"></a><span class="lineno"> 4927</span>                <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> name = it-&gt;first;</div>
<div class="line"><a id="l04928" name="l04928"></a><span class="lineno"> 4928</span>                <a class="code hl_enumeration" href="_thing_template_8h.html#a6cdcf604627ad670996d9057d1bd9e0c">BuildableStatus</a> bs = it-&gt;second;</div>
<div class="line"><a id="l04929" name="l04929"></a><span class="lineno"> 4929</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferAsciiString(&amp;name);</div>
<div class="line"><a id="l04930" name="l04930"></a><span class="lineno"> 4930</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUser(&amp;bs, <span class="keyword">sizeof</span>(bs));</div>
<div class="line"><a id="l04931" name="l04931"></a><span class="lineno"> 4931</span>            }</div>
<div class="line"><a id="l04932" name="l04932"></a><span class="lineno"> 4932</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> empty;</div>
<div class="line"><a id="l04933" name="l04933"></a><span class="lineno"> 4933</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferAsciiString(&amp;empty);</div>
<div class="line"><a id="l04934" name="l04934"></a><span class="lineno"> 4934</span>        }</div>
<div class="line"><a id="l04935" name="l04935"></a><span class="lineno"> 4935</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;getXferMode() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9a01c0e0a4ca7ad29a20262f65e854588e">XFER_LOAD</a>)</div>
<div class="line"><a id="l04936" name="l04936"></a><span class="lineno"> 4936</span>        {</div>
<div class="line"><a id="l04937" name="l04937"></a><span class="lineno"> 4937</span>            <span class="keywordflow">if</span> (m_thingTemplateBuildableOverrides.empty() == <span class="keyword">false</span>)</div>
<div class="line"><a id="l04938" name="l04938"></a><span class="lineno"> 4938</span>            {</div>
<div class="line"><a id="l04939" name="l04939"></a><span class="lineno"> 4939</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>(( <span class="stringliteral">&quot;GameLogic::xfer - m_thingTemplateBuildableOverrides should be empty, but is not\n&quot;</span>));</div>
<div class="line"><a id="l04940" name="l04940"></a><span class="lineno"> 4940</span>                <span class="keywordflow">throw</span> <a class="code hl_enumvalue" href="_game_state_8h.html#ad8799b8b1af97748f1daa98e85399e90a1b32afe93f193db3ad8ce92eff34e91c">SC_INVALID_DATA</a>;</div>
<div class="line"><a id="l04941" name="l04941"></a><span class="lineno"> 4941</span>            }</div>
<div class="line"><a id="l04942" name="l04942"></a><span class="lineno"> 4942</span>            </div>
<div class="line"><a id="l04943" name="l04943"></a><span class="lineno"> 4943</span>            <span class="keywordflow">for</span> (;;) </div>
<div class="line"><a id="l04944" name="l04944"></a><span class="lineno"> 4944</span>            {</div>
<div class="line"><a id="l04945" name="l04945"></a><span class="lineno"> 4945</span>                <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> name;</div>
<div class="line"><a id="l04946" name="l04946"></a><span class="lineno"> 4946</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferAsciiString(&amp;name);</div>
<div class="line"><a id="l04947" name="l04947"></a><span class="lineno"> 4947</span>                <span class="keywordflow">if</span> (name.<a class="code hl_function" href="class_ascii_string.html#ae9efb39159f617363aa0acdb6cdecab8">isEmpty</a>())</div>
<div class="line"><a id="l04948" name="l04948"></a><span class="lineno"> 4948</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04949" name="l04949"></a><span class="lineno"> 4949</span>                <a class="code hl_enumeration" href="_thing_template_8h.html#a6cdcf604627ad670996d9057d1bd9e0c">BuildableStatus</a> bs;</div>
<div class="line"><a id="l04950" name="l04950"></a><span class="lineno"> 4950</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUser(&amp;bs, <span class="keyword">sizeof</span>(bs));</div>
<div class="line"><a id="l04951" name="l04951"></a><span class="lineno"> 4951</span>                m_thingTemplateBuildableOverrides[name] = bs;</div>
<div class="line"><a id="l04952" name="l04952"></a><span class="lineno"> 4952</span>            }</div>
<div class="line"><a id="l04953" name="l04953"></a><span class="lineno"> 4953</span>        }</div>
<div class="line"><a id="l04954" name="l04954"></a><span class="lineno"> 4954</span>    }</div>
<div class="line"><a id="l04955" name="l04955"></a><span class="lineno"> 4955</span> </div>
<div class="line"><a id="l04956" name="l04956"></a><span class="lineno"> 4956</span>    <span class="keywordflow">if</span> (version &gt;= 8)</div>
<div class="line"><a id="l04957" name="l04957"></a><span class="lineno"> 4957</span>    {</div>
<div class="line"><a id="l04958" name="l04958"></a><span class="lineno"> 4958</span>        <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferBool(&amp;m_showBehindBuildingMarkers);</div>
<div class="line"><a id="l04959" name="l04959"></a><span class="lineno"> 4959</span>        <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferBool(&amp;m_drawIconUI);</div>
<div class="line"><a id="l04960" name="l04960"></a><span class="lineno"> 4960</span>        <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferBool(&amp;m_showDynamicLOD);</div>
<div class="line"><a id="l04961" name="l04961"></a><span class="lineno"> 4961</span>        <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferInt(&amp;m_scriptHulkMaxLifetimeOverride);</div>
<div class="line"><a id="l04962" name="l04962"></a><span class="lineno"> 4962</span> </div>
<div class="line"><a id="l04963" name="l04963"></a><span class="lineno"> 4963</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;getXferMode() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9ae98b808068bc78b6b9031cddbfddeccd">XFER_SAVE</a> )</div>
<div class="line"><a id="l04964" name="l04964"></a><span class="lineno"> 4964</span>        {</div>
<div class="line"><a id="l04965" name="l04965"></a><span class="lineno"> 4965</span>            <span class="keywordflow">for</span> (ControlBarOverrideMap::const_iterator it = m_controlBarOverrides.begin(); it != m_controlBarOverrides.end(); ++it )</div>
<div class="line"><a id="l04966" name="l04966"></a><span class="lineno"> 4966</span>            {</div>
<div class="line"><a id="l04967" name="l04967"></a><span class="lineno"> 4967</span>                <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> name = it-&gt;first;</div>
<div class="line"><a id="l04968" name="l04968"></a><span class="lineno"> 4968</span>                <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> <a class="code hl_variable" href="_debug_window_8cpp.html#aa09f8db39b7f30bb54209b7caaca64ce">value</a> = it-&gt;second ? it-&gt;second-&gt;getName() : <a class="code hl_variable" href="class_ascii_string.html#aa469ba29748958e5d120d6b806e45249">AsciiString::TheEmptyString</a>;</div>
<div class="line"><a id="l04969" name="l04969"></a><span class="lineno"> 4969</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferAsciiString(&amp;name);</div>
<div class="line"><a id="l04970" name="l04970"></a><span class="lineno"> 4970</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferAsciiString(&amp;<a class="code hl_variable" href="_debug_window_8cpp.html#aa09f8db39b7f30bb54209b7caaca64ce">value</a>);</div>
<div class="line"><a id="l04971" name="l04971"></a><span class="lineno"> 4971</span>            }</div>
<div class="line"><a id="l04972" name="l04972"></a><span class="lineno"> 4972</span>            <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> empty;</div>
<div class="line"><a id="l04973" name="l04973"></a><span class="lineno"> 4973</span>            <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferAsciiString(&amp;empty);</div>
<div class="line"><a id="l04974" name="l04974"></a><span class="lineno"> 4974</span>        }</div>
<div class="line"><a id="l04975" name="l04975"></a><span class="lineno"> 4975</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;getXferMode() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9a01c0e0a4ca7ad29a20262f65e854588e">XFER_LOAD</a>)</div>
<div class="line"><a id="l04976" name="l04976"></a><span class="lineno"> 4976</span>        {</div>
<div class="line"><a id="l04977" name="l04977"></a><span class="lineno"> 4977</span>            <span class="keywordflow">if</span> (m_controlBarOverrides.empty() == <span class="keyword">false</span>)</div>
<div class="line"><a id="l04978" name="l04978"></a><span class="lineno"> 4978</span>            {</div>
<div class="line"><a id="l04979" name="l04979"></a><span class="lineno"> 4979</span>                <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a>(( <span class="stringliteral">&quot;GameLogic::xfer - m_controlBarOverrides should be empty, but is not\n&quot;</span>));</div>
<div class="line"><a id="l04980" name="l04980"></a><span class="lineno"> 4980</span>                <span class="keywordflow">throw</span> <a class="code hl_enumvalue" href="_game_state_8h.html#ad8799b8b1af97748f1daa98e85399e90a1b32afe93f193db3ad8ce92eff34e91c">SC_INVALID_DATA</a>;</div>
<div class="line"><a id="l04981" name="l04981"></a><span class="lineno"> 4981</span>            }</div>
<div class="line"><a id="l04982" name="l04982"></a><span class="lineno"> 4982</span>            </div>
<div class="line"><a id="l04983" name="l04983"></a><span class="lineno"> 4983</span>            <span class="keywordflow">for</span> (;;) </div>
<div class="line"><a id="l04984" name="l04984"></a><span class="lineno"> 4984</span>            {</div>
<div class="line"><a id="l04985" name="l04985"></a><span class="lineno"> 4985</span>                <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> name;</div>
<div class="line"><a id="l04986" name="l04986"></a><span class="lineno"> 4986</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferAsciiString(&amp;name);</div>
<div class="line"><a id="l04987" name="l04987"></a><span class="lineno"> 4987</span>                <span class="keywordflow">if</span> (name.<a class="code hl_function" href="class_ascii_string.html#ae9efb39159f617363aa0acdb6cdecab8">isEmpty</a>())</div>
<div class="line"><a id="l04988" name="l04988"></a><span class="lineno"> 4988</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04989" name="l04989"></a><span class="lineno"> 4989</span>                <a class="code hl_class" href="class_ascii_string.html">AsciiString</a> <a class="code hl_variable" href="_debug_window_8cpp.html#aa09f8db39b7f30bb54209b7caaca64ce">value</a>;</div>
<div class="line"><a id="l04990" name="l04990"></a><span class="lineno"> 4990</span>                <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferAsciiString(&amp;<a class="code hl_variable" href="_debug_window_8cpp.html#aa09f8db39b7f30bb54209b7caaca64ce">value</a>);</div>
<div class="line"><a id="l04991" name="l04991"></a><span class="lineno"> 4991</span>                <a class="code hl_typedef" href="_game_logic_8h.html#a98290342578155b2daf04c51811e3d01">ConstCommandButtonPtr</a> button = <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l04992" name="l04992"></a><span class="lineno"> 4992</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="_debug_window_8cpp.html#aa09f8db39b7f30bb54209b7caaca64ce">value</a>.isNotEmpty())</div>
<div class="line"><a id="l04993" name="l04993"></a><span class="lineno"> 4993</span>                {</div>
<div class="line"><a id="l04994" name="l04994"></a><span class="lineno"> 4994</span>                    button = <a class="code hl_variable" href="_control_bar_8h.html#a2fc730445768f7da72770274a791997b">TheControlBar</a>-&gt;findCommandButton(<a class="code hl_variable" href="_debug_window_8cpp.html#aa09f8db39b7f30bb54209b7caaca64ce">value</a>);</div>
<div class="line"><a id="l04995" name="l04995"></a><span class="lineno"> 4995</span>                    <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(button != <a class="code hl_define" href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (<span class="stringliteral">&quot;Could not find button %s\n&quot;</span>,<a class="code hl_variable" href="_debug_window_8cpp.html#aa09f8db39b7f30bb54209b7caaca64ce">value</a>.str()));</div>
<div class="line"><a id="l04996" name="l04996"></a><span class="lineno"> 4996</span>                }</div>
<div class="line"><a id="l04997" name="l04997"></a><span class="lineno"> 4997</span>                m_controlBarOverrides[name] = button;</div>
<div class="line"><a id="l04998" name="l04998"></a><span class="lineno"> 4998</span>            }</div>
<div class="line"><a id="l04999" name="l04999"></a><span class="lineno"> 4999</span>        }</div>
<div class="line"><a id="l05000" name="l05000"></a><span class="lineno"> 5000</span>    }</div>
<div class="line"><a id="l05001" name="l05001"></a><span class="lineno"> 5001</span> </div>
<div class="line"><a id="l05002" name="l05002"></a><span class="lineno"> 5002</span>    <span class="keywordflow">if</span> (version &gt;= 9)</div>
<div class="line"><a id="l05003" name="l05003"></a><span class="lineno"> 5003</span>    {</div>
<div class="line"><a id="l05004" name="l05004"></a><span class="lineno"> 5004</span>        <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferInt(&amp;m_rankPointsToAddAtGameStart);</div>
<div class="line"><a id="l05005" name="l05005"></a><span class="lineno"> 5005</span>    }</div>
<div class="line"><a id="l05006" name="l05006"></a><span class="lineno"> 5006</span> </div>
<div class="line"><a id="l05007" name="l05007"></a><span class="lineno"> 5007</span>  <span class="keywordflow">if</span> ( version &gt;= 10 )</div>
<div class="line"><a id="l05008" name="l05008"></a><span class="lineno"> 5008</span>  {</div>
<div class="line"><a id="l05009" name="l05009"></a><span class="lineno"> 5009</span>    <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;xferUnsignedShort( &amp;m_superweaponRestriction );</div>
<div class="line"><a id="l05010" name="l05010"></a><span class="lineno"> 5010</span>  }</div>
<div class="line"><a id="l05011" name="l05011"></a><span class="lineno"> 5011</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code hl_function" href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">xfer</a>-&gt;getXferMode() == <a class="code hl_enumvalue" href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9a01c0e0a4ca7ad29a20262f65e854588e">XFER_LOAD</a> )</div>
<div class="line"><a id="l05012" name="l05012"></a><span class="lineno"> 5012</span>  {</div>
<div class="line"><a id="l05013" name="l05013"></a><span class="lineno"> 5013</span>    m_superweaponRestriction = 0;</div>
<div class="line"><a id="l05014" name="l05014"></a><span class="lineno"> 5014</span>  }</div>
<div class="line"><a id="l05015" name="l05015"></a><span class="lineno"> 5015</span>}  <span class="comment">// end xfer</span></div>
</div>
<div class="line"><a id="l05016" name="l05016"></a><span class="lineno"> 5016</span> </div>
<div class="line"><a id="l05017" name="l05017"></a><span class="lineno"> 5017</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l05019" name="l05019"></a><span class="lineno"> 5019</span><span class="comment">// ------------------------------------------------------------------------------------------------</span></div>
<div class="foldopen" id="foldopen05020" data-start="{" data-end="}">
<div class="line"><a id="l05020" name="l05020"></a><span class="lineno"><a class="line" href="class_game_logic.html#a84eae8a32352a38c1931bdb82ffb18bd"> 5020</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_game_logic.html#a84eae8a32352a38c1931bdb82ffb18bd">GameLogic::loadPostProcess</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a id="l05021" name="l05021"></a><span class="lineno"> 5021</span>{</div>
<div class="line"><a id="l05022" name="l05022"></a><span class="lineno"> 5022</span> </div>
<div class="line"><a id="l05023" name="l05023"></a><span class="lineno"> 5023</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05024" name="l05024"></a><span class="lineno"> 5024</span>    <span class="comment">// the act of loading objects can (theoretically) as a side effect create other objects, </span></div>
<div class="line"><a id="l05025" name="l05025"></a><span class="lineno"> 5025</span>    <span class="comment">// our m_nextObjID that we maintain to give objects unique ID is also continually</span></div>
<div class="line"><a id="l05026" name="l05026"></a><span class="lineno"> 5026</span>    <span class="comment">// climbing higher and higher due to us allocating objects during load (even though</span></div>
<div class="line"><a id="l05027" name="l05027"></a><span class="lineno"> 5027</span>    <span class="comment">// those objects have their ids overwritten with data from the file.  To prevent the</span></div>
<div class="line"><a id="l05028" name="l05028"></a><span class="lineno"> 5028</span>    <span class="comment">// m_nextObjID from getting un-necessarily high we will set it to the next available</span></div>
<div class="line"><a id="l05029" name="l05029"></a><span class="lineno"> 5029</span>    <span class="comment">// id from the objects that are now in the world and actually in use</span></div>
<div class="line"><a id="l05030" name="l05030"></a><span class="lineno"> 5030</span>    <span class="comment">//</span></div>
<div class="line"><a id="l05031" name="l05031"></a><span class="lineno"> 5031</span>    m_nextObjID = <a class="code hl_enumvalue" href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5a789b09c76a8e51e8db09218745ca3039">INVALID_ID</a>;</div>
<div class="line"><a id="l05032" name="l05032"></a><span class="lineno"> 5032</span>    <a class="code hl_class" href="class_object.html">Object</a> *obj;</div>
<div class="line"><a id="l05033" name="l05033"></a><span class="lineno"> 5033</span>    <span class="keywordflow">for</span>( obj = <a class="code hl_function" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">getFirstObject</a>(); obj; obj = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>() )</div>
<div class="line"><a id="l05034" name="l05034"></a><span class="lineno"> 5034</span>        <span class="keywordflow">if</span>( obj-&gt;<a class="code hl_function" href="class_object.html#a6c17829820a29ded73578abd29906943">getID</a>() &gt;= m_nextObjID )</div>
<div class="line"><a id="l05035" name="l05035"></a><span class="lineno"> 5035</span>            m_nextObjID = (<a class="code hl_enumeration" href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5">ObjectID</a>)((<a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a>)obj-&gt;<a class="code hl_function" href="class_object.html#a6c17829820a29ded73578abd29906943">getID</a>() + 1);</div>
<div class="line"><a id="l05036" name="l05036"></a><span class="lineno"> 5036</span> </div>
<div class="line"><a id="l05037" name="l05037"></a><span class="lineno"> 5037</span>    <span class="comment">// blow away the sleepy update and normal update module lists</span></div>
<div class="line"><a id="l05038" name="l05038"></a><span class="lineno"> 5038</span>    <span class="keywordflow">for</span> (std::vector&lt;UpdateModulePtr&gt;::iterator it = m_sleepyUpdates.begin(); it != m_sleepyUpdates.end(); ++it)</div>
<div class="line"><a id="l05039" name="l05039"></a><span class="lineno"> 5039</span>    {</div>
<div class="line"><a id="l05040" name="l05040"></a><span class="lineno"> 5040</span>        (*it)-&gt;friend_setIndexInLogic(-1);</div>
<div class="line"><a id="l05041" name="l05041"></a><span class="lineno"> 5041</span>    }</div>
<div class="line"><a id="l05042" name="l05042"></a><span class="lineno"> 5042</span>    m_sleepyUpdates.clear();</div>
<div class="line"><a id="l05043" name="l05043"></a><span class="lineno"> 5043</span><span class="preprocessor">#ifdef ALLOW_NONSLEEPY_UPDATES</span></div>
<div class="line"><a id="l05044" name="l05044"></a><span class="lineno"> 5044</span>    m_normalUpdates.clear();</div>
<div class="line"><a id="l05045" name="l05045"></a><span class="lineno"> 5045</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l05046" name="l05046"></a><span class="lineno"> 5046</span>    <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> now = <a class="code hl_variable" href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a>-&gt;getFrame();</div>
<div class="line"><a id="l05047" name="l05047"></a><span class="lineno"> 5047</span>    <span class="keywordflow">if</span> (now == 0)</div>
<div class="line"><a id="l05048" name="l05048"></a><span class="lineno"> 5048</span>        now = 1;</div>
<div class="line"><a id="l05049" name="l05049"></a><span class="lineno"> 5049</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l05050" name="l05050"></a><span class="lineno"> 5050</span> </div>
<div class="line"><a id="l05051" name="l05051"></a><span class="lineno"> 5051</span>    <span class="comment">// go through all objects, examine each update module and put it on the appropriate update list</span></div>
<div class="line"><a id="l05052" name="l05052"></a><span class="lineno"> 5052</span>    <span class="keywordflow">for</span>( obj = <a class="code hl_function" href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">getFirstObject</a>(); obj; obj = obj-&gt;<a class="code hl_function" href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">getNextObject</a>() )</div>
<div class="line"><a id="l05053" name="l05053"></a><span class="lineno"> 5053</span>    {</div>
<div class="line"><a id="l05054" name="l05054"></a><span class="lineno"> 5054</span> </div>
<div class="line"><a id="l05055" name="l05055"></a><span class="lineno"> 5055</span>        <span class="comment">// get the update list of modules for this object</span></div>
<div class="line"><a id="l05056" name="l05056"></a><span class="lineno"> 5056</span>        <span class="keywordflow">for</span>( <a class="code hl_class" href="class_behavior_module.html">BehaviorModule</a>** b = obj-&gt;<a class="code hl_function" href="class_object.html#ac31c977e6871a6a24c903af3a0210f26">getBehaviorModules</a>(); *b; ++b )</div>
<div class="line"><a id="l05057" name="l05057"></a><span class="lineno"> 5057</span>        {</div>
<div class="line"><a id="l05058" name="l05058"></a><span class="lineno"> 5058</span><span class="preprocessor">#ifdef DIRECT_UPDATEMODULE_ACCESS</span></div>
<div class="line"><a id="l05059" name="l05059"></a><span class="lineno"> 5059</span>            <span class="comment">// evil, but necessary at this point. (srj)</span></div>
<div class="line"><a id="l05060" name="l05060"></a><span class="lineno"> 5060</span>            <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> u = (<a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a>)((*b)-&gt;getUpdate());</div>
<div class="line"><a id="l05061" name="l05061"></a><span class="lineno"> 5061</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l05062" name="l05062"></a><span class="lineno"> 5062</span>            <a class="code hl_typedef" href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a> u = (*b)-&gt;<a class="code hl_function" href="class_update_module.html#aa37942111accd25746e982f3e6968eb8">getUpdate</a>();</div>
<div class="line"><a id="l05063" name="l05063"></a><span class="lineno"> 5063</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l05064" name="l05064"></a><span class="lineno"> 5064</span>            <span class="keywordflow">if</span> (!u)</div>
<div class="line"><a id="l05065" name="l05065"></a><span class="lineno"> 5065</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05066" name="l05066"></a><span class="lineno"> 5066</span>            </div>
<div class="line"><a id="l05067" name="l05067"></a><span class="lineno"> 5067</span>            <a class="code hl_define" href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a>(u-&gt;<a class="code hl_function" href="class_update_module.html#a29a244154731002ae604872755bbe31a">friend_getIndexInLogic</a>() == -1, (<span class="stringliteral">&quot;Hmm, expected index to be -1 here&quot;</span>));</div>
<div class="line"><a id="l05068" name="l05068"></a><span class="lineno"> 5068</span> </div>
<div class="line"><a id="l05069" name="l05069"></a><span class="lineno"> 5069</span>            <span class="comment">// check each update module</span></div>
<div class="line"><a id="l05070" name="l05070"></a><span class="lineno"> 5070</span>            <a class="code hl_typedef" href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a> when = u-&gt;<a class="code hl_function" href="class_update_module.html#acadd3ba8e983f98462e2cd3c686dbdae">friend_getNextCallFrame</a>();</div>
<div class="line"><a id="l05071" name="l05071"></a><span class="lineno"> 5071</span><span class="preprocessor">#ifdef ALLOW_NONSLEEPY_UPDATES</span></div>
<div class="line"><a id="l05072" name="l05072"></a><span class="lineno"> 5072</span>            <span class="keywordflow">if</span>( when == 0 )</div>
<div class="line"><a id="l05073" name="l05073"></a><span class="lineno"> 5073</span>            {</div>
<div class="line"><a id="l05074" name="l05074"></a><span class="lineno"> 5074</span>                <span class="comment">// zero if the magic value for &quot;never sleeps&quot;</span></div>
<div class="line"><a id="l05075" name="l05075"></a><span class="lineno"> 5075</span>                m_normalUpdates.push_back(u);</div>
<div class="line"><a id="l05076" name="l05076"></a><span class="lineno"> 5076</span>            }</div>
<div class="line"><a id="l05077" name="l05077"></a><span class="lineno"> 5077</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l05078" name="l05078"></a><span class="lineno"> 5078</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l05079" name="l05079"></a><span class="lineno"> 5079</span>            <span class="comment">// note that &#39;when&#39; will only be zero for legacy save files.</span></div>
<div class="line"><a id="l05080" name="l05080"></a><span class="lineno"> 5080</span>            <span class="keywordflow">if</span> (when == 0)</div>
<div class="line"><a id="l05081" name="l05081"></a><span class="lineno"> 5081</span>                u-&gt;<a class="code hl_function" href="class_update_module.html#a80a8350bb3eb30648299487d2003cbb8">friend_setNextCallFrame</a>(now);</div>
<div class="line"><a id="l05082" name="l05082"></a><span class="lineno"> 5082</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l05083" name="l05083"></a><span class="lineno"> 5083</span>            {</div>
<div class="line"><a id="l05084" name="l05084"></a><span class="lineno"> 5084</span>                m_sleepyUpdates.push_back(u);</div>
<div class="line"><a id="l05085" name="l05085"></a><span class="lineno"> 5085</span>                u-&gt;<a class="code hl_function" href="class_update_module.html#ac584fba98913584d40e64a90cb878487">friend_setIndexInLogic</a>(m_sleepyUpdates.size() - 1);</div>
<div class="line"><a id="l05086" name="l05086"></a><span class="lineno"> 5086</span>            }</div>
<div class="line"><a id="l05087" name="l05087"></a><span class="lineno"> 5087</span>                </div>
<div class="line"><a id="l05088" name="l05088"></a><span class="lineno"> 5088</span>        }  <span class="comment">// end for, u</span></div>
<div class="line"><a id="l05089" name="l05089"></a><span class="lineno"> 5089</span> </div>
<div class="line"><a id="l05090" name="l05090"></a><span class="lineno"> 5090</span>    }  <span class="comment">// end for, obj</span></div>
<div class="line"><a id="l05091" name="l05091"></a><span class="lineno"> 5091</span> </div>
<div class="line"><a id="l05092" name="l05092"></a><span class="lineno"> 5092</span>    <span class="comment">// re-sort the priority queue all at once now that all modules are on it</span></div>
<div class="line"><a id="l05093" name="l05093"></a><span class="lineno"> 5093</span>    remakeSleepyUpdate();</div>
<div class="line"><a id="l05094" name="l05094"></a><span class="lineno"> 5094</span> </div>
<div class="line"><a id="l05095" name="l05095"></a><span class="lineno"> 5095</span>}  <span class="comment">// end loadPostProcess</span></div>
</div>
<div class="line"><a id="l05096" name="l05096"></a><span class="lineno"> 5096</span> </div>
<div class="line"><a id="l05097" name="l05097"></a><span class="lineno"> 5097</span> </div>
<div class="ttc" id="a_a_i_8h_html"><div class="ttname"><a href="_a_i_8h.html">AI.h</a></div></div>
<div class="ttc" id="a_a_i_8h_html_a6da3dcc6a16c628eb39ef5a65241b0f4"><div class="ttname"><a href="_a_i_8h.html#a6da3dcc6a16c628eb39ef5a65241b0f4">TheAI</a></div><div class="ttdeci">AI * TheAI</div><div class="ttdoc">the Artificial Intelligence singleton</div><div class="ttdef"><b>Definition</b> <a href="_a_i_8cpp_source.html#l00304">AI.cpp:304</a></div></div>
<div class="ttc" id="a_a_i_pathfind_8h_html"><div class="ttname"><a href="_a_i_pathfind_8h.html">AIPathfind.h</a></div></div>
<div class="ttc" id="a_a_i_update_8h_html"><div class="ttname"><a href="_a_i_update_8h.html">AIUpdate.h</a></div></div>
<div class="ttc" id="a_audio_affect_8h_html"><div class="ttname"><a href="_audio_affect_8h.html">AudioAffect.h</a></div></div>
<div class="ttc" id="a_audio_affect_8h_html_a0dac6709f2df26f730915db924023d68"><div class="ttname"><a href="_audio_affect_8h.html#a0dac6709f2df26f730915db924023d68">AudioAffect</a></div><div class="ttdeci">AudioAffect</div><div class="ttdef"><b>Definition</b> <a href="_audio_affect_8h_source.html#l00035">AudioAffect.h:36</a></div></div>
<div class="ttc" id="a_audio_affect_8h_html_a0dac6709f2df26f730915db924023d68a540dde80a8ec871660364f5401cdfedf"><div class="ttname"><a href="_audio_affect_8h.html#a0dac6709f2df26f730915db924023d68a540dde80a8ec871660364f5401cdfedf">AudioAffect_All</a></div><div class="ttdeci">@ AudioAffect_All</div><div class="ttdef"><b>Definition</b> <a href="_audio_affect_8h_source.html#l00041">AudioAffect.h:41</a></div></div>
<div class="ttc" id="a_audio_affect_8h_html_a0dac6709f2df26f730915db924023d68a5c766d8c07bcbd6c70d2f83abef91cf2"><div class="ttname"><a href="_audio_affect_8h.html#a0dac6709f2df26f730915db924023d68a5c766d8c07bcbd6c70d2f83abef91cf2">AudioAffect_Music</a></div><div class="ttdeci">@ AudioAffect_Music</div><div class="ttdef"><b>Definition</b> <a href="_audio_affect_8h_source.html#l00037">AudioAffect.h:37</a></div></div>
<div class="ttc" id="a_audio_handle_special_values_8h_html"><div class="ttname"><a href="_audio_handle_special_values_8h.html">AudioHandleSpecialValues.h</a></div></div>
<div class="ttc" id="a_base_type_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="_base_type_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00092">BaseType.h:92</a></div></div>
<div class="ttc" id="a_base_type_8h_html_a14225aed20ec8648b7e87b04aa650d04"><div class="ttname"><a href="_base_type_8h.html#a14225aed20ec8648b7e87b04aa650d04">sqr</a></div><div class="ttdeci">NUM sqr(NUM x)</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00144">BaseType.h:144</a></div></div>
<div class="ttc" id="a_base_type_8h_html_a76a8b016e5ad61faf9062cc387df5016"><div class="ttname"><a href="_base_type_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a></div><div class="ttdeci">bool Bool</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00132">BaseType.h:132</a></div></div>
<div class="ttc" id="a_base_type_8h_html_a7cc214a236ad3bb6ad435bdcf5262a3f"><div class="ttname"><a href="_base_type_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a></div><div class="ttdeci">int Int</div><div class="ttdoc">Signed integer value.</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00125">BaseType.h:125</a></div></div>
<div class="ttc" id="a_base_type_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="_base_type_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00109">BaseType.h:109</a></div></div>
<div class="ttc" id="a_base_type_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="_base_type_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00113">BaseType.h:113</a></div></div>
<div class="ttc" id="a_base_type_8h_html_ab685845059e8a2c92743427d9a698c70"><div class="ttname"><a href="_base_type_8h.html#ab685845059e8a2c92743427d9a698c70">Real</a></div><div class="ttdeci">float Real</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00124">BaseType.h:124</a></div></div>
<div class="ttc" id="a_base_type_8h_html_accf2bdf590f4e906ebad9216ebb7c698"><div class="ttname"><a href="_base_type_8h.html#accf2bdf590f4e906ebad9216ebb7c698">UnsignedInt</a></div><div class="ttdeci">unsigned int UnsignedInt</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00126">BaseType.h:126</a></div></div>
<div class="ttc" id="a_base_type_8h_html_aff6fae7bebd4c30bdb0196edfb3637b9"><div class="ttname"><a href="_base_type_8h.html#aff6fae7bebd4c30bdb0196edfb3637b9">UnsignedShort</a></div><div class="ttdeci">unsigned short UnsignedShort</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00127">BaseType.h:127</a></div></div>
<div class="ttc" id="a_body_module_8h_html"><div class="ttname"><a href="_body_module_8h.html">BodyModule.h</a></div></div>
<div class="ttc" id="a_buddy_thread_8h_html"><div class="ttname"><a href="_buddy_thread_8h.html">BuddyThread.h</a></div></div>
<div class="ttc" id="a_buddy_thread_8h_html_a3d461c6ded3da3111657380a7732e71b"><div class="ttname"><a href="_buddy_thread_8h.html#a3d461c6ded3da3111657380a7732e71b">TheGameSpyBuddyMessageQueue</a></div><div class="ttdeci">GameSpyBuddyMessageQueueInterface * TheGameSpyBuddyMessageQueue</div><div class="ttdef"><b>Definition</b> <a href="_buddy_thread_8cpp_source.html#l00090">BuddyThread.cpp:90</a></div></div>
<div class="ttc" id="a_build_assistant_8h_html"><div class="ttname"><a href="_build_assistant_8h.html">BuildAssistant.h</a></div></div>
<div class="ttc" id="a_build_assistant_8h_html_aac51a4d03c2c52f384f91d8d94b05409"><div class="ttname"><a href="_build_assistant_8h.html#aac51a4d03c2c52f384f91d8d94b05409">TheBuildAssistant</a></div><div class="ttdeci">BuildAssistant * TheBuildAssistant</div><div class="ttdef"><b>Definition</b> <a href="_build_assistant_8cpp_source.html#l00060">BuildAssistant.cpp:60</a></div></div>
<div class="ttc" id="a_c_r_c_debug_8h_html"><div class="ttname"><a href="_c_r_c_debug_8h.html">CRCDebug.h</a></div></div>
<div class="ttc" id="a_c_r_c_debug_8h_html_a023b97a0c1e8b6ca71beb11b8f091617"><div class="ttname"><a href="_c_r_c_debug_8h.html#a023b97a0c1e8b6ca71beb11b8f091617">CRCDEBUG_LOG</a></div><div class="ttdeci">#define CRCDEBUG_LOG(x)</div><div class="ttdef"><b>Definition</b> <a href="_c_r_c_debug_8h_source.html#l00117">CRCDebug.h:117</a></div></div>
<div class="ttc" id="a_c_r_c_debug_8h_html_a25e0b30a470846c4ad2472f42475f278"><div class="ttname"><a href="_c_r_c_debug_8h.html#a25e0b30a470846c4ad2472f42475f278">REPLAY_CRC_INTERVAL</a></div><div class="ttdeci">Int REPLAY_CRC_INTERVAL</div><div class="ttdef"><b>Definition</b> <a href="_recorder_8cpp_source.html#l00054">Recorder.cpp:54</a></div></div>
<div class="ttc" id="a_c_r_c_debug_8h_html_a9bf4719cf42eb6c25a094cb7f750e10d"><div class="ttname"><a href="_c_r_c_debug_8h.html#a9bf4719cf42eb6c25a094cb7f750e10d">DUMPCOORD3D</a></div><div class="ttdeci">#define DUMPCOORD3D(x)</div><div class="ttdef"><b>Definition</b> <a href="_c_r_c_debug_8h_source.html#l00109">CRCDebug.h:109</a></div></div>
<div class="ttc" id="a_c_r_c_debug_8h_html_ae16eaf682463a59549ecb28c09b89dcd"><div class="ttname"><a href="_c_r_c_debug_8h.html#ae16eaf682463a59549ecb28c09b89dcd">CRCGEN_LOG</a></div><div class="ttdeci">#define CRCGEN_LOG(x)</div><div class="ttdef"><b>Definition</b> <a href="_c_r_c_debug_8h_source.html#l00119">CRCDebug.h:119</a></div></div>
<div class="ttc" id="a_campaign_manager_8h_html"><div class="ttname"><a href="_campaign_manager_8h.html">CampaignManager.h</a></div></div>
<div class="ttc" id="a_campaign_manager_8h_html_afd7ce7f7a3f20ff00212a798910d50db"><div class="ttname"><a href="_campaign_manager_8h.html#afd7ce7f7a3f20ff00212a798910d50db">TheCampaignManager</a></div><div class="ttdeci">CampaignManager * TheCampaignManager</div><div class="ttdef"><b>Definition</b> <a href="_campaign_manager_8cpp_source.html#l00066">CampaignManager.cpp:66</a></div></div>
<div class="ttc" id="a_cave_system_8h_html"><div class="ttname"><a href="_cave_system_8h.html">CaveSystem.h</a></div></div>
<div class="ttc" id="a_cave_system_8h_html_a835c54dd12a454be2e944b5b11031650"><div class="ttname"><a href="_cave_system_8h.html#a835c54dd12a454be2e944b5b11031650">TheCaveSystem</a></div><div class="ttdeci">CaveSystem * TheCaveSystem</div><div class="ttdef"><b>Definition</b> <a href="_cave_system_8cpp_source.html#l00037">CaveSystem.cpp:37</a></div></div>
<div class="ttc" id="a_challenge_generals_8h_html_a8af75611f9a13ced88b3dc2f8baa4ebe"><div class="ttname"><a href="_challenge_generals_8h.html#a8af75611f9a13ced88b3dc2f8baa4ebe">TheChallengeGenerals</a></div><div class="ttdeci">ChallengeGenerals * TheChallengeGenerals</div><div class="ttdef"><b>Definition</b> <a href="_challenge_generals_8cpp_source.html#l00040">ChallengeGenerals.cpp:40</a></div></div>
<div class="ttc" id="a_control_bar_8h_html"><div class="ttname"><a href="_control_bar_8h.html">ControlBar.h</a></div></div>
<div class="ttc" id="a_control_bar_8h_html_a2fc730445768f7da72770274a791997b"><div class="ttname"><a href="_control_bar_8h.html#a2fc730445768f7da72770274a791997b">TheControlBar</a></div><div class="ttdeci">ControlBar * TheControlBar</div><div class="ttdef"><b>Definition</b> <a href="_control_bar_8cpp_source.html#l00093">ControlBar.cpp:93</a></div></div>
<div class="ttc" id="a_copy_protection_8h_html"><div class="ttname"><a href="_copy_protection_8h.html">CopyProtection.h</a></div></div>
<div class="ttc" id="a_crate_system_8h_html"><div class="ttname"><a href="_crate_system_8h.html">CrateSystem.h</a></div></div>
<div class="ttc" id="a_create_module_8h_html"><div class="ttname"><a href="_create_module_8h.html">CreateModule.h</a></div></div>
<div class="ttc" id="a_data_chunk_8h_html"><div class="ttname"><a href="_data_chunk_8h.html">DataChunk.h</a></div></div>
<div class="ttc" id="a_debug_window_8cpp_html_aa09f8db39b7f30bb54209b7caaca64ce"><div class="ttname"><a href="_debug_window_8cpp.html#aa09f8db39b7f30bb54209b7caaca64ce">value</a></div><div class="ttdeci">void const char * value</div><div class="ttdef"><b>Definition</b> <a href="_debug_window_8cpp_source.html#l00205">DebugWindow.cpp:206</a></div></div>
<div class="ttc" id="a_destroy_module_8h_html"><div class="ttname"><a href="_destroy_module_8h.html">DestroyModule.h</a></div></div>
<div class="ttc" id="a_disabled_types_8h_html_a1ae38e5cd6e16e9f8689c0711849a964"><div class="ttname"><a href="_disabled_types_8h.html#a1ae38e5cd6e16e9f8689c0711849a964">DisabledMaskType</a></div><div class="ttdeci">BitFlags&lt; DISABLED_COUNT &gt; DisabledMaskType</div><div class="ttdef"><b>Definition</b> <a href="_disabled_types_8h_source.html#l00067">DisabledTypes.h:67</a></div></div>
<div class="ttc" id="a_display_8h_html_af0e94ff29c3f0eaefc701cb5c71479e6"><div class="ttname"><a href="_display_8h.html#af0e94ff29c3f0eaefc701cb5c71479e6">TheDisplay</a></div><div class="ttdeci">Display * TheDisplay</div><div class="ttdoc">The Display singleton instance.</div><div class="ttdef"><b>Definition</b> <a href="_display_8cpp_source.html#l00041">Display.cpp:41</a></div></div>
<div class="ttc" id="a_drawable_8h_html"><div class="ttname"><a href="_drawable_8h.html">Drawable.h</a></div></div>
<div class="ttc" id="a_drawable_8h_html_a526cc3a830b78c55ad850db018a40403a672d93ad5409fcb60966da42eae95625"><div class="ttname"><a href="_drawable_8h.html#a526cc3a830b78c55ad850db018a40403a672d93ad5409fcb60966da42eae95625">DRAWABLE_STATUS_DRAWS_IN_MIRROR</a></div><div class="ttdeci">@ DRAWABLE_STATUS_DRAWS_IN_MIRROR</div><div class="ttdoc">drawable can reflect</div><div class="ttdef"><b>Definition</b> <a href="_drawable_8h_source.html#l00234">Drawable.h:234</a></div></div>
<div class="ttc" id="a_drawable_8h_html_a526cc3a830b78c55ad850db018a40403aff2de2c3642428be0eaee54c1e72b9a0"><div class="ttname"><a href="_drawable_8h.html#a526cc3a830b78c55ad850db018a40403aff2de2c3642428be0eaee54c1e72b9a0">DRAWABLE_STATUS_NONE</a></div><div class="ttdeci">@ DRAWABLE_STATUS_NONE</div><div class="ttdoc">no status</div><div class="ttdef"><b>Definition</b> <a href="_drawable_8h_source.html#l00233">Drawable.h:233</a></div></div>
<div class="ttc" id="a_f_p_u_control_8h_html"><div class="ttname"><a href="_f_p_u_control_8h.html">FPUControl.h</a></div></div>
<div class="ttc" id="a_f_p_u_control_8h_html_ac898939fad383b7b6cb129bdd759cf0f"><div class="ttname"><a href="_f_p_u_control_8h.html#ac898939fad383b7b6cb129bdd759cf0f">setFPMode</a></div><div class="ttdeci">void setFPMode(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00198">GameLogic.cpp:198</a></div></div>
<div class="ttc" id="a_file_system_8h_html_af52760c133123201b3c138b6542c88ed"><div class="ttname"><a href="_file_system_8h.html#af52760c133123201b3c138b6542c88ed">TheFileSystem</a></div><div class="ttdeci">FileSystem * TheFileSystem</div><div class="ttdef"><b>Definition</b> <a href="_file_system_8cpp_source.html#l00104">FileSystem.cpp:104</a></div></div>
<div class="ttc" id="a_g_u_i_callbacks_8h_html"><div class="ttname"><a href="_g_u_i_callbacks_8h.html">GUICallbacks.h</a></div></div>
<div class="ttc" id="a_g_u_i_callbacks_8h_html_a235e9f10284bd5f5b07cadcfb4c12bf6"><div class="ttname"><a href="_g_u_i_callbacks_8h.html#a235e9f10284bd5f5b07cadcfb4c12bf6">HideControlBar</a></div><div class="ttdeci">void HideControlBar(Bool immediate=TRUE)</div><div class="ttdef"><b>Definition</b> <a href="_control_bar_callback_8cpp_source.html#l00536">ControlBarCallback.cpp:536</a></div></div>
<div class="ttc" id="a_g_u_i_callbacks_8h_html_ad6aae74c82f2b64a900f5050a499f469"><div class="ttname"><a href="_g_u_i_callbacks_8h.html#ad6aae74c82f2b64a900f5050a499f469">ShowControlBar</a></div><div class="ttdeci">void ShowControlBar(Bool immediate=TRUE)</div><div class="ttdef"><b>Definition</b> <a href="_control_bar_callback_8cpp_source.html#l00501">ControlBarCallback.cpp:501</a></div></div>
<div class="ttc" id="a_game_audio_8h_html"><div class="ttname"><a href="_game_audio_8h.html">GameAudio.h</a></div></div>
<div class="ttc" id="a_game_audio_8h_html_ac281ccd51f88bbbdc3fef71d1216227a"><div class="ttname"><a href="_game_audio_8h.html#ac281ccd51f88bbbdc3fef71d1216227a">TheAudio</a></div><div class="ttdeci">AudioManager * TheAudio</div><div class="ttdef"><b>Definition</b> <a href="_game_audio_8cpp_source.html#l00143">GameAudio.cpp:143</a></div></div>
<div class="ttc" id="a_game_client_8h_html"><div class="ttname"><a href="_game_client_8h.html">GameClient.h</a></div></div>
<div class="ttc" id="a_game_client_8h_html_a0d60187d4332c3b987d6d2cf5499639e"><div class="ttname"><a href="_game_client_8h.html#a0d60187d4332c3b987d6d2cf5499639e">TheGameClient</a></div><div class="ttdeci">GameClient * TheGameClient</div><div class="ttdoc">The GameClient singleton instance.</div><div class="ttdef"><b>Definition</b> <a href="_game_client_8cpp_source.html#l00095">GameClient.cpp:95</a></div></div>
<div class="ttc" id="a_game_common_8h_html_a022afd659100232d71e5cf905098a11aa0d7385205eaa38cd67abe052bc39e431"><div class="ttname"><a href="_game_common_8h.html#a022afd659100232d71e5cf905098a11aa0d7385205eaa38cd67abe052bc39e431">DIFFICULTY_HARD</a></div><div class="ttdeci">@ DIFFICULTY_HARD</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00145">GameCommon.h:145</a></div></div>
<div class="ttc" id="a_game_common_8h_html_a022afd659100232d71e5cf905098a11aa599e2a9348d6630a59c4224deee53991"><div class="ttname"><a href="_game_common_8h.html#a022afd659100232d71e5cf905098a11aa599e2a9348d6630a59c4224deee53991">DIFFICULTY_NORMAL</a></div><div class="ttdeci">@ DIFFICULTY_NORMAL</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00144">GameCommon.h:144</a></div></div>
<div class="ttc" id="a_game_common_8h_html_a022afd659100232d71e5cf905098a11aa95f48065472a7866854a3c9b9ea8347e"><div class="ttname"><a href="_game_common_8h.html#a022afd659100232d71e5cf905098a11aa95f48065472a7866854a3c9b9ea8347e">DIFFICULTY_EASY</a></div><div class="ttdeci">@ DIFFICULTY_EASY</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00143">GameCommon.h:143</a></div></div>
<div class="ttc" id="a_game_common_8h_html_a6b82567dea14f55d2df66aece04b0510"><div class="ttname"><a href="_game_common_8h.html#a6b82567dea14f55d2df66aece04b0510">normalizeAngle</a></div><div class="ttdeci">Real normalizeAngle(Real angle)</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8cpp_source.html#l00051">GameCommon.cpp:51</a></div></div>
<div class="ttc" id="a_game_common_8h_html_a80a13150ed5e8a5acfef387fd7fe43d6aa4c97af6efe4ef2a094b708ab7bac3d8"><div class="ttname"><a href="_game_common_8h.html#a80a13150ed5e8a5acfef387fd7fe43d6aa4c97af6efe4ef2a094b708ab7bac3d8">CMD_FROM_AI</a></div><div class="ttdeci">@ CMD_FROM_AI</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00230">GameCommon.h:230</a></div></div>
<div class="ttc" id="a_game_common_8h_html_a9c619318e7a6cdf38897480033ae8660aa33778b47f5c9394a6eb2c5164bcd3d5"><div class="ttname"><a href="_game_common_8h.html#a9c619318e7a6cdf38897480033ae8660aa33778b47f5c9394a6eb2c5164bcd3d5">MAX_PLAYER_COUNT</a></div><div class="ttdeci">@ MAX_PLAYER_COUNT</div><div class="ttdoc">max number of Players.</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00113">GameCommon.h:113</a></div></div>
<div class="ttc" id="a_game_common_8h_html_a9d625fe894d9313ec78df1d78553f32e"><div class="ttname"><a href="_game_common_8h.html#a9d625fe894d9313ec78df1d78553f32e">Relationship</a></div><div class="ttdeci">Relationship</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00498">GameCommon.h:499</a></div></div>
<div class="ttc" id="a_game_common_8h_html_a9d625fe894d9313ec78df1d78553f32ea34b0b186496be864abe64d22d95f7f22"><div class="ttname"><a href="_game_common_8h.html#a9d625fe894d9313ec78df1d78553f32ea34b0b186496be864abe64d22d95f7f22">ENEMIES</a></div><div class="ttdeci">@ ENEMIES</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00500">GameCommon.h:500</a></div></div>
<div class="ttc" id="a_game_common_8h_html_a9d625fe894d9313ec78df1d78553f32ead0a00add06fd8d61ef0f1f366bea2546"><div class="ttname"><a href="_game_common_8h.html#a9d625fe894d9313ec78df1d78553f32ead0a00add06fd8d61ef0f1f366bea2546">ALLIES</a></div><div class="ttdeci">@ ALLIES</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00502">GameCommon.h:502</a></div></div>
<div class="ttc" id="a_game_common_8h_html_a9d625fe894d9313ec78df1d78553f32eaf46d14eb9d5d71afc9f6e747689fcb56"><div class="ttname"><a href="_game_common_8h.html#a9d625fe894d9313ec78df1d78553f32eaf46d14eb9d5d71afc9f6e747689fcb56">NEUTRAL</a></div><div class="ttdeci">@ NEUTRAL</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00501">GameCommon.h:501</a></div></div>
<div class="ttc" id="a_game_common_8h_html_abe590f3c9109f404f003d5d7e4f0fccfa76e70a1268fda9d1b672cbf762b2f6e5"><div class="ttname"><a href="_game_common_8h.html#abe590f3c9109f404f003d5d7e4f0fccfa76e70a1268fda9d1b672cbf762b2f6e5">PLAYER_HUMAN</a></div><div class="ttdeci">@ PLAYER_HUMAN</div><div class="ttdoc">player is human-controlled</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00153">GameCommon.h:153</a></div></div>
<div class="ttc" id="a_game_common_8h_html_abe83707dc5d6c282831f5b9b5a652f7e"><div class="ttname"><a href="_game_common_8h.html#abe83707dc5d6c282831f5b9b5a652f7e">PlayerMaskType</a></div><div class="ttdeci">UnsignedShort PlayerMaskType</div><div class="ttdef"><b>Definition</b> <a href="_game_common_8h_source.html#l00121">GameCommon.h:121</a></div></div>
<div class="ttc" id="a_game_engine_2_include_2_common_2_debug_8h_html_a13364d3761c832c4d537af00a7fdc933"><div class="ttname"><a href="_game_engine_2_include_2_common_2_debug_8h.html#a13364d3761c832c4d537af00a7fdc933">DEBUG_ASSERTCRASH</a></div><div class="ttdeci">#define DEBUG_ASSERTCRASH(c, m)</div><div class="ttdef"><b>Definition</b> <a href="_game_engine_2_include_2_common_2_debug_8h_source.html#l00193">Debug.h:193</a></div></div>
<div class="ttc" id="a_game_engine_2_include_2_common_2_debug_8h_html_a56f05a8ad3518674e7a141dcfcd16a8d"><div class="ttname"><a href="_game_engine_2_include_2_common_2_debug_8h.html#a56f05a8ad3518674e7a141dcfcd16a8d">DEBUG_LOG</a></div><div class="ttdeci">#define DEBUG_LOG(m)</div><div class="ttdef"><b>Definition</b> <a href="_game_engine_2_include_2_common_2_debug_8h_source.html#l00157">Debug.h:157</a></div></div>
<div class="ttc" id="a_game_engine_2_include_2_common_2_debug_8h_html_a882bf35dd1d717c1cc8586776bcf5296"><div class="ttname"><a href="_game_engine_2_include_2_common_2_debug_8h.html#a882bf35dd1d717c1cc8586776bcf5296">RELEASE_CRASH</a></div><div class="ttdeci">#define RELEASE_CRASH(m)</div><div class="ttdef"><b>Definition</b> <a href="_game_engine_2_include_2_common_2_debug_8h_source.html#l00204">Debug.h:204</a></div></div>
<div class="ttc" id="a_game_engine_2_include_2_common_2_debug_8h_html_ae61da6cb696f996c3bd4b129ce9407f6"><div class="ttname"><a href="_game_engine_2_include_2_common_2_debug_8h.html#ae61da6cb696f996c3bd4b129ce9407f6">DEBUG_CRASH</a></div><div class="ttdeci">#define DEBUG_CRASH(m)</div><div class="ttdef"><b>Definition</b> <a href="_game_engine_2_include_2_common_2_debug_8h_source.html#l00192">Debug.h:192</a></div></div>
<div class="ttc" id="a_game_engine_2_include_2_common_2_i_n_i_8h_html"><div class="ttname"><a href="_game_engine_2_include_2_common_2_i_n_i_8h.html">INI.h</a></div></div>
<div class="ttc" id="a_game_engine_2_include_2_common_2_i_n_i_8h_html_a57a31fa9337c65e33e252ca1012eb504ab84c4bff7348781390e8c309b3553017"><div class="ttname"><a href="_game_engine_2_include_2_common_2_i_n_i_8h.html#a57a31fa9337c65e33e252ca1012eb504ab84c4bff7348781390e8c309b3553017">INI_LOAD_CREATE_OVERRIDES</a></div><div class="ttdeci">@ INI_LOAD_CREATE_OVERRIDES</div><div class="ttdoc">create new or load into new override data instance</div><div class="ttdef"><b>Definition</b> <a href="_game_engine_2_include_2_common_2_i_n_i_8h_source.html#l00054">INI.h:54</a></div></div>
<div class="ttc" id="a_game_engine_2_include_2_game_client_2_game_text_8h_html"><div class="ttname"><a href="_game_engine_2_include_2_game_client_2_game_text_8h.html">GameText.h</a></div></div>
<div class="ttc" id="a_game_engine_2_include_2_game_client_2_game_text_8h_html_a31e9c012208c1d10bb7f73848d34e5d3"><div class="ttname"><a href="_game_engine_2_include_2_game_client_2_game_text_8h.html#a31e9c012208c1d10bb7f73848d34e5d3">TheGameText</a></div><div class="ttdeci">GameTextInterface * TheGameText</div><div class="ttdef"><b>Definition</b> <a href="_game_engine_2_source_2_game_client_2_game_text_8cpp_source.html#l00212">GameText.cpp:212</a></div></div>
<div class="ttc" id="a_game_engine_2_include_2_game_logic_2_script_conditions_8h_html"><div class="ttname"><a href="_game_engine_2_include_2_game_logic_2_script_conditions_8h.html">ScriptConditions.h</a></div></div>
<div class="ttc" id="a_game_engine_2_include_2_game_logic_2_script_conditions_8h_html_ac5f94909bd75f9fd27b9b3bc9898de0a"><div class="ttname"><a href="_game_engine_2_include_2_game_logic_2_script_conditions_8h.html#ac5f94909bd75f9fd27b9b3bc9898de0a">TheScriptConditions</a></div><div class="ttdeci">ScriptConditionsInterface * TheScriptConditions</div><div class="ttdoc">singleton definition</div><div class="ttdef"><b>Definition</b> <a href="_game_engine_2_source_2_game_logic_2_script_engine_2_script_conditions_8cpp_source.html#l00103">ScriptConditions.cpp:103</a></div></div>
<div class="ttc" id="a_game_engine_8h_html"><div class="ttname"><a href="_game_engine_8h.html">GameEngine.h</a></div></div>
<div class="ttc" id="a_game_engine_8h_html_a7b087ae962882e2f9b42ce0a7bd53309"><div class="ttname"><a href="_game_engine_8h.html#a7b087ae962882e2f9b42ce0a7bd53309">TheGameEngine</a></div><div class="ttdeci">GameEngine * TheGameEngine</div><div class="ttdoc">The GameEngine singleton instance.</div><div class="ttdef"><b>Definition</b> <a href="_game_engine_8cpp_source.html#l00156">GameEngine.cpp:156</a></div></div>
<div class="ttc" id="a_game_info_8h_html_a305296fcc0f6b0cfb0310e7f170287c0a09547da2ebf73f1fd78b99b47098cd75"><div class="ttname"><a href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a09547da2ebf73f1fd78b99b47098cd75">PLAYERTEMPLATE_RANDOM</a></div><div class="ttdeci">@ PLAYERTEMPLATE_RANDOM</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00051">GameInfo.h:51</a></div></div>
<div class="ttc" id="a_game_info_8h_html_a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3"><div class="ttname"><a href="_game_info_8h.html#a305296fcc0f6b0cfb0310e7f170287c0a780fbb540a59c3ac59534ab2666881d3">PLAYERTEMPLATE_OBSERVER</a></div><div class="ttdeci">@ PLAYERTEMPLATE_OBSERVER</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00052">GameInfo.h:52</a></div></div>
<div class="ttc" id="a_game_info_8h_html_a668626b88b7bde6490b9146b8c587a22"><div class="ttname"><a href="_game_info_8h.html#a668626b88b7bde6490b9146b8c587a22">TheGameInfo</a></div><div class="ttdeci">GameInfo * TheGameInfo</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00055">GameInfo.cpp:55</a></div></div>
<div class="ttc" id="a_game_info_8h_html_a6dceaf27b902936176bb32b7b1ea7436a0165ed2df1f949da38e4d8118ae371dc"><div class="ttname"><a href="_game_info_8h.html#a6dceaf27b902936176bb32b7b1ea7436a0165ed2df1f949da38e4d8118ae371dc">SLOT_MED_AI</a></div><div class="ttdeci">@ SLOT_MED_AI</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00044">GameInfo.h:44</a></div></div>
<div class="ttc" id="a_game_info_8h_html_a6dceaf27b902936176bb32b7b1ea7436a4d208760849537e2a790b3fe8ed02d49"><div class="ttname"><a href="_game_info_8h.html#a6dceaf27b902936176bb32b7b1ea7436a4d208760849537e2a790b3fe8ed02d49">SLOT_EASY_AI</a></div><div class="ttdeci">@ SLOT_EASY_AI</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00043">GameInfo.h:43</a></div></div>
<div class="ttc" id="a_game_info_8h_html_a6dceaf27b902936176bb32b7b1ea7436ae72ff76a235f2295d3a763258ac1561b"><div class="ttname"><a href="_game_info_8h.html#a6dceaf27b902936176bb32b7b1ea7436ae72ff76a235f2295d3a763258ac1561b">SLOT_BRUTAL_AI</a></div><div class="ttdeci">@ SLOT_BRUTAL_AI</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00045">GameInfo.h:45</a></div></div>
<div class="ttc" id="a_game_info_8h_html_a7c536799f93fe8c010176c8fc20941a6"><div class="ttname"><a href="_game_info_8h.html#a7c536799f93fe8c010176c8fc20941a6">TheChallengeGameInfo</a></div><div class="ttdeci">SkirmishGameInfo * TheChallengeGameInfo</div><div class="ttdef"><b>Definition</b> <a href="_challenge_menu_8cpp_source.html#l00064">ChallengeMenu.cpp:64</a></div></div>
<div class="ttc" id="a_game_info_8h_html_a9179e0b132fd565e5e5962402d1e6c47"><div class="ttname"><a href="_game_info_8h.html#a9179e0b132fd565e5e5962402d1e6c47">TheSkirmishGameInfo</a></div><div class="ttdeci">SkirmishGameInfo * TheSkirmishGameInfo</div><div class="ttdef"><b>Definition</b> <a href="_skirmish_game_options_menu_8cpp_source.html#l00078">SkirmishGameOptionsMenu.cpp:78</a></div></div>
<div class="ttc" id="a_game_l_o_d_8h_html"><div class="ttname"><a href="_game_l_o_d_8h.html">GameLOD.h</a></div></div>
<div class="ttc" id="a_game_l_o_d_8h_html_a2acfb8ac2fec0f7fc8f2e8676214fdea"><div class="ttname"><a href="_game_l_o_d_8h.html#a2acfb8ac2fec0f7fc8f2e8676214fdea">TheGameLODManager</a></div><div class="ttdeci">GameLODManager * TheGameLODManager</div><div class="ttdef"><b>Definition</b> <a href="_game_l_o_d_8cpp_source.html#l00055">GameLOD.cpp:55</a></div></div>
<div class="ttc" id="a_game_l_o_d_8h_html_ae7eb59bc41294a2692dca729ae674acba891b6b81e13eca81f248312fc34e2508"><div class="ttname"><a href="_game_l_o_d_8h.html#ae7eb59bc41294a2692dca729ae674acba891b6b81e13eca81f248312fc34e2508">STATIC_GAME_LOD_CUSTOM</a></div><div class="ttdeci">@ STATIC_GAME_LOD_CUSTOM</div><div class="ttdef"><b>Definition</b> <a href="_game_l_o_d_8h_source.html#l00051">GameLOD.h:51</a></div></div>
<div class="ttc" id="a_game_l_o_d_8h_html_ae7eb59bc41294a2692dca729ae674acbad3de3925cd95f974e9198f0b42fbe537"><div class="ttname"><a href="_game_l_o_d_8h.html#ae7eb59bc41294a2692dca729ae674acbad3de3925cd95f974e9198f0b42fbe537">STATIC_GAME_LOD_HIGH</a></div><div class="ttdeci">@ STATIC_GAME_LOD_HIGH</div><div class="ttdef"><b>Definition</b> <a href="_game_l_o_d_8h_source.html#l00050">GameLOD.h:50</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a0ab8bf9c2f4d489cc33868c0d35f4c9a"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a0ab8bf9c2f4d489cc33868c0d35f4c9a">LOAD_PROGRESS_POST_VICTORY_CONDITION_SET_VICTORY_CONDITION</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_VICTORY_CONDITION_SET_VICTORY_CONDITION</div><div class="ttdef"><b>Definition</b> <a href="#l00164">GameLogic.cpp:164</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a2add60c090efb19d795853a5ee655d67"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2add60c090efb19d795853a5ee655d67">LOAD_PROGRESS_POST_TERRAIN_LOGIC_NEW_MAP</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_TERRAIN_LOGIC_NEW_MAP</div><div class="ttdef"><b>Definition</b> <a href="#l00166">GameLogic.cpp:166</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a2c2fa8217cf7eb250c0f01137ed58c9d"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2c2fa8217cf7eb250c0f01137ed58c9d">LOAD_PROGRESS_POST_INITIAL_NETWORK_BUILDINGS</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_INITIAL_NETWORK_BUILDINGS</div><div class="ttdef"><b>Definition</b> <a href="#l00174">GameLogic.cpp:174</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a2f506e7307098fe1446af85aca344277"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a2f506e7307098fe1446af85aca344277">LOAD_PROGRESS_SIDE_POPULATION</a></div><div class="ttdeci">@ LOAD_PROGRESS_SIDE_POPULATION</div><div class="ttdef"><b>Definition</b> <a href="#l00159">GameLogic.cpp:159</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a340b12b0b911214e8001157bb7124a23"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a340b12b0b911214e8001157bb7124a23">LOAD_PROGRESS_LOOP_ALL_THE_FREAKN_OBJECTS</a></div><div class="ttdeci">@ LOAD_PROGRESS_LOOP_ALL_THE_FREAKN_OBJECTS</div><div class="ttdef"><b>Definition</b> <a href="#l00170">GameLogic.cpp:170</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a3b9f1b73e085fc1e9c3a4233d9fc8988"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a3b9f1b73e085fc1e9c3a4233d9fc8988">LOAD_PROGRESS_POST_STARTING_CAMERA</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_STARTING_CAMERA</div><div class="ttdef"><b>Definition</b> <a href="#l00177">GameLogic.cpp:177</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a3e47e39a419e759be759bf064fa67725"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a3e47e39a419e759be759bf064fa67725">LOAD_PROGRESS_START</a></div><div class="ttdeci">@ LOAD_PROGRESS_START</div><div class="ttdef"><b>Definition</b> <a href="#l00156">GameLogic.cpp:156</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a407040a0a1a136686862ff000d3e4fa3"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a407040a0a1a136686862ff000d3e4fa3">LOAD_PROGRESS_POST_BRIDGE_LOAD</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_BRIDGE_LOAD</div><div class="ttdef"><b>Definition</b> <a href="#l00167">GameLogic.cpp:167</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a4909a69faed1e61725130db4e06aded7"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4909a69faed1e61725130db4e06aded7">LOAD_PROGRESS_POST_SIDE_LIST_INIT</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_SIDE_LIST_INIT</div><div class="ttdef"><b>Definition</b> <a href="#l00160">GameLogic.cpp:160</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a4b6b4dae8f5dfd7ce8aa67be3bd7257f"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4b6b4dae8f5dfd7ce8aa67be3bd7257f">LOAD_PROGRESS_POST_PRELOAD_ASSETS</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_PRELOAD_ASSETS</div><div class="ttdef"><b>Definition</b> <a href="#l00176">GameLogic.cpp:176</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a4f33f6d6d87a3c96413210ce83b6e713"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a4f33f6d6d87a3c96413210ce83b6e713">LOAD_PROGRESS_POST_PARTICLE_INI_LOAD</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_PARTICLE_INI_LOAD</div><div class="ttdef"><b>Definition</b> <a href="#l00157">GameLogic.cpp:157</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a5fdb38ef82870c121ee3291dbfd32683"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a5fdb38ef82870c121ee3291dbfd32683">LOAD_PROGRESS_POST_STARTING_CAMERA_2</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_STARTING_CAMERA_2</div><div class="ttdef"><b>Definition</b> <a href="#l00178">GameLogic.cpp:178</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078a64185d9b8a0774657697848e1eb552c1"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078a64185d9b8a0774657697848e1eb552c1">LOAD_PROGRESS_POST_PATHFINDER_NEW_MAP</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_PATHFINDER_NEW_MAP</div><div class="ttdef"><b>Definition</b> <a href="#l00168">GameLogic.cpp:168</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078aac03a90876860f854d16252d7b912331"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078aac03a90876860f854d16252d7b912331">LOAD_PROGRESS_POST_SCRIPT_ENGINE_NEW_MAP</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_SCRIPT_ENGINE_NEW_MAP</div><div class="ttdef"><b>Definition</b> <a href="#l00162">GameLogic.cpp:162</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078abc7da6018cb124960e629c7c9f41f5d9"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078abc7da6018cb124960e629c7c9f41f5d9">LOAD_PROGRESS_POST_GHOST_OBJECT_MANAGER_RESET</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_GHOST_OBJECT_MANAGER_RESET</div><div class="ttdef"><b>Definition</b> <a href="#l00165">GameLogic.cpp:165</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078ac618133255d5254282192dbf3228e4eb"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ac618133255d5254282192dbf3228e4eb">LOAD_PROGRESS_MAX_ALL_THE_FREAKN_OBJECTS</a></div><div class="ttdeci">@ LOAD_PROGRESS_MAX_ALL_THE_FREAKN_OBJECTS</div><div class="ttdef"><b>Definition</b> <a href="#l00171">GameLogic.cpp:171</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078ac68a8ab5d06c826e4966eff6ec700069"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ac68a8ab5d06c826e4966eff6ec700069">LOAD_PROGRESS_POST_PLAYER_LIST_RESET</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_PLAYER_LIST_RESET</div><div class="ttdef"><b>Definition</b> <a href="#l00161">GameLogic.cpp:161</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078ace735895822780026d0b9a8fa926f32e"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ace735895822780026d0b9a8fa926f32e">LOAD_PROGRESS_POST_VICTORY_CONDITION_SETUP</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_VICTORY_CONDITION_SETUP</div><div class="ttdef"><b>Definition</b> <a href="#l00163">GameLogic.cpp:163</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078ad51e96c1d571e42099fc49262e2de4ab"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ad51e96c1d571e42099fc49262e2de4ab">LOAD_PROGRESS_LOOP_INITIAL_NETWORK_BUILDINGS</a></div><div class="ttdeci">@ LOAD_PROGRESS_LOOP_INITIAL_NETWORK_BUILDINGS</div><div class="ttdef"><b>Definition</b> <a href="#l00173">GameLogic.cpp:173</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078ad6bf0ed607c199f5dcddc10c1b57fa44"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ad6bf0ed607c199f5dcddc10c1b57fa44">LOAD_PROGRESS_POST_LOAD_MAP</a></div><div class="ttdeci">@ LOAD_PROGRESS_POST_LOAD_MAP</div><div class="ttdef"><b>Definition</b> <a href="#l00158">GameLogic.cpp:158</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a0c653ed769489703566a711179c45078ae3e9c9d448da068dfa8d1b5bad24a4a8"><div class="ttname"><a href="_game_logic_8cpp.html#a0c653ed769489703566a711179c45078ae3e9c9d448da068dfa8d1b5bad24a4a8">LOAD_PROGRESS_END</a></div><div class="ttdeci">@ LOAD_PROGRESS_END</div><div class="ttdef"><b>Definition</b> <a href="#l00179">GameLogic.cpp:179</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a10e76c8febfd93e5cc2ae4258697e440"><div class="ttname"><a href="_game_logic_8cpp.html#a10e76c8febfd93e5cc2ae4258697e440">handleNameChange</a></div><div class="ttdeci">void handleNameChange(MapObject *mapObj)</div><div class="ttdef"><b>Definition</b> <a href="#l00664">GameLogic.cpp:664</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_a907454c8770ffb3f895115a8059490cd"><div class="ttname"><a href="_game_logic_8cpp.html#a907454c8770ffb3f895115a8059490cd">isLowerPriority</a></div><div class="ttdeci">Bool isLowerPriority(const UpdateModulePtr a, const UpdateModulePtr b)</div><div class="ttdef"><b>Definition</b> <a href="#l02785">GameLogic.cpp:2785</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_ac2527b31255f98602bb90b294898b750a71d5bfd8044506fc901ad00c15ca377f"><div class="ttname"><a href="_game_logic_8cpp.html#ac2527b31255f98602bb90b294898b750a71d5bfd8044506fc901ad00c15ca377f">OBJ_HASH_SIZE</a></div><div class="ttdeci">@ OBJ_HASH_SIZE</div><div class="ttdef"><b>Definition</b> <a href="#l00143">GameLogic.cpp:143</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_ac898939fad383b7b6cb129bdd759cf0f"><div class="ttname"><a href="_game_logic_8cpp.html#ac898939fad383b7b6cb129bdd759cf0f">setFPMode</a></div><div class="ttdeci">void setFPMode(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00198">GameLogic.cpp:198</a></div></div>
<div class="ttc" id="a_game_logic_8cpp_html_ad7bff3cc7d8e00209d1769b7d21dd5eb"><div class="ttname"><a href="_game_logic_8cpp.html#ad7bff3cc7d8e00209d1769b7d21dd5eb">inCRCGen</a></div><div class="ttdeci">Bool inCRCGen</div><div class="ttdef"><b>Definition</b> <a href="#l04011">GameLogic.cpp:4011</a></div></div>
<div class="ttc" id="a_game_logic_8h_html"><div class="ttname"><a href="_game_logic_8h.html">GameLogic.h</a></div></div>
<div class="ttc" id="a_game_logic_8h_html_a190948c860ef2bf66df9ce6f12ce649aab6e809120e579343360eeccbd0426a7b"><div class="ttname"><a href="_game_logic_8h.html#a190948c860ef2bf66df9ce6f12ce649aab6e809120e579343360eeccbd0426a7b">CRC_RECALC</a></div><div class="ttdeci">@ CRC_RECALC</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00089">GameLogic.h:89</a></div></div>
<div class="ttc" id="a_game_logic_8h_html_a40bc947a7513bad8cf7fa8cef206635aa32b74fc29edec4aaf73e05477d1f5602"><div class="ttname"><a href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa32b74fc29edec4aaf73e05477d1f5602">GAME_NONE</a></div><div class="ttdeci">@ GAME_NONE</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00083">GameLogic.h:83</a></div></div>
<div class="ttc" id="a_game_logic_8h_html_a40bc947a7513bad8cf7fa8cef206635aa56de6b891eaab5ce88f6ca0d48e6750c"><div class="ttname"><a href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa56de6b891eaab5ce88f6ca0d48e6750c">GAME_INTERNET</a></div><div class="ttdeci">@ GAME_INTERNET</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00082">GameLogic.h:82</a></div></div>
<div class="ttc" id="a_game_logic_8h_html_a40bc947a7513bad8cf7fa8cef206635aa6cb49fab20f61c2ca2931eb2ff138178"><div class="ttname"><a href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa6cb49fab20f61c2ca2931eb2ff138178">GAME_SKIRMISH</a></div><div class="ttdeci">@ GAME_SKIRMISH</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00079">GameLogic.h:79</a></div></div>
<div class="ttc" id="a_game_logic_8h_html_a40bc947a7513bad8cf7fa8cef206635aa79dfaaa99c696274de2cc199568ac473"><div class="ttname"><a href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aa79dfaaa99c696274de2cc199568ac473">GAME_LAN</a></div><div class="ttdeci">@ GAME_LAN</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00078">GameLogic.h:78</a></div></div>
<div class="ttc" id="a_game_logic_8h_html_a40bc947a7513bad8cf7fa8cef206635aaa68174262e15b5ba918b03bb8b56b04f"><div class="ttname"><a href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaa68174262e15b5ba918b03bb8b56b04f">GAME_SHELL</a></div><div class="ttdeci">@ GAME_SHELL</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00081">GameLogic.h:81</a></div></div>
<div class="ttc" id="a_game_logic_8h_html_a40bc947a7513bad8cf7fa8cef206635aac6fc8943a041e5db95cc3e770e862470"><div class="ttname"><a href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aac6fc8943a041e5db95cc3e770e862470">GAME_REPLAY</a></div><div class="ttdeci">@ GAME_REPLAY</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00080">GameLogic.h:80</a></div></div>
<div class="ttc" id="a_game_logic_8h_html_a40bc947a7513bad8cf7fa8cef206635aaee1a5a47561a06e03984ff31602e2529"><div class="ttname"><a href="_game_logic_8h.html#a40bc947a7513bad8cf7fa8cef206635aaee1a5a47561a06e03984ff31602e2529">GAME_SINGLE_PLAYER</a></div><div class="ttdeci">@ GAME_SINGLE_PLAYER</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00077">GameLogic.h:77</a></div></div>
<div class="ttc" id="a_game_logic_8h_html_a98290342578155b2daf04c51811e3d01"><div class="ttname"><a href="_game_logic_8h.html#a98290342578155b2daf04c51811e3d01">ConstCommandButtonPtr</a></div><div class="ttdeci">const CommandButton * ConstCommandButtonPtr</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00072">GameLogic.h:72</a></div></div>
<div class="ttc" id="a_game_logic_8h_html_a9848d8d95263edf086306e6eb3d3c9bc"><div class="ttname"><a href="_game_logic_8h.html#a9848d8d95263edf086306e6eb3d3c9bc">TheGameLogic</a></div><div class="ttdeci">GameLogic * TheGameLogic</div><div class="ttdoc">The GameLogic singleton instance.</div><div class="ttdef"><b>Definition</b> <a href="#l00146">GameLogic.cpp:146</a></div></div>
<div class="ttc" id="a_game_memory_8h_html_a35fee562c05ae9f944ce2568013ea71c"><div class="ttname"><a href="_game_memory_8h.html#a35fee562c05ae9f944ce2568013ea71c">newInstance</a></div><div class="ttdeci">#define newInstance(ARGCLASS)</div><div class="ttdef"><b>Definition</b> <a href="_game_memory_8h_source.html#l00204">GameMemory.h:204</a></div></div>
<div class="ttc" id="a_game_mtl_8cpp_html_aa1230864bc0353a2618c7203a063c1fa"><div class="ttname"><a href="_game_mtl_8cpp.html#aa1230864bc0353a2618c7203a063c1fa">scale</a></div><div class="ttdeci">Color scale(const Color &amp;a, const Color &amp;b)</div><div class="ttdef"><b>Definition</b> <a href="_game_mtl_8cpp_source.html#l00722">GameMtl.cpp:722</a></div></div>
<div class="ttc" id="a_game_spy_misc_preferences_8h_html"><div class="ttname"><a href="_game_spy_misc_preferences_8h.html">GameSpyMiscPreferences.h</a></div></div>
<div class="ttc" id="a_game_state_8h_html"><div class="ttname"><a href="_game_state_8h.html">GameState.h</a></div></div>
<div class="ttc" id="a_game_state_8h_html_a20058921fe5602a8f70b082e98b2aae2"><div class="ttname"><a href="_game_state_8h.html#a20058921fe5602a8f70b082e98b2aae2">TheGameState</a></div><div class="ttdeci">GameState * TheGameState</div><div class="ttdef"><b>Definition</b> <a href="_game_state_8cpp_source.html#l00069">GameState.cpp:69</a></div></div>
<div class="ttc" id="a_game_state_8h_html_a610107232beb9d581d24f3f9bc59f9b6ae829e00e9e786b2503e474e8556189f5"><div class="ttname"><a href="_game_state_8h.html#a610107232beb9d581d24f3f9bc59f9b6ae829e00e9e786b2503e474e8556189f5">SNAPSHOT_DEEPCRC_LOGICONLY</a></div><div class="ttdeci">@ SNAPSHOT_DEEPCRC_LOGICONLY</div><div class="ttdef"><b>Definition</b> <a href="_game_state_8h_source.html#l00144">GameState.h:144</a></div></div>
<div class="ttc" id="a_game_state_8h_html_ad8799b8b1af97748f1daa98e85399e90a1b32afe93f193db3ad8ce92eff34e91c"><div class="ttname"><a href="_game_state_8h.html#ad8799b8b1af97748f1daa98e85399e90a1b32afe93f193db3ad8ce92eff34e91c">SC_INVALID_DATA</a></div><div class="ttdeci">@ SC_INVALID_DATA</div><div class="ttdef"><b>Definition</b> <a href="_game_state_8h_source.html#l00138">GameState.h:138</a></div></div>
<div class="ttc" id="a_game_type_8h_html_a17ed37b2bbccb4dd5a5c070cd9d06ef5"><div class="ttname"><a href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5">ObjectID</a></div><div class="ttdeci">ObjectID</div><div class="ttdoc">A unique, generic &quot;identifier&quot; used to access Objects.</div><div class="ttdef"><b>Definition</b> <a href="_game_type_8h_source.html#l00041">GameType.h:42</a></div></div>
<div class="ttc" id="a_game_type_8h_html_a17ed37b2bbccb4dd5a5c070cd9d06ef5a789b09c76a8e51e8db09218745ca3039"><div class="ttname"><a href="_game_type_8h.html#a17ed37b2bbccb4dd5a5c070cd9d06ef5a789b09c76a8e51e8db09218745ca3039">INVALID_ID</a></div><div class="ttdeci">@ INVALID_ID</div><div class="ttdef"><b>Definition</b> <a href="_game_type_8h_source.html#l00043">GameType.h:43</a></div></div>
<div class="ttc" id="a_game_type_8h_html_a458f126bc12933b550a9292a42eb5b94"><div class="ttname"><a href="_game_type_8h.html#a458f126bc12933b550a9292a42eb5b94">TimeOfDay</a></div><div class="ttdeci">TimeOfDay</div><div class="ttdef"><b>Definition</b> <a href="_game_type_8h_source.html#l00068">GameType.h:69</a></div></div>
<div class="ttc" id="a_game_type_8h_html_a458f126bc12933b550a9292a42eb5b94a2178e2ee077874b54c232b6f9d35ef80"><div class="ttname"><a href="_game_type_8h.html#a458f126bc12933b550a9292a42eb5b94a2178e2ee077874b54c232b6f9d35ef80">TIME_OF_DAY_COUNT</a></div><div class="ttdeci">@ TIME_OF_DAY_COUNT</div><div class="ttdef"><b>Definition</b> <a href="_game_type_8h_source.html#l00077">GameType.h:77</a></div></div>
<div class="ttc" id="a_game_type_8h_html_a458f126bc12933b550a9292a42eb5b94a38230108079211c60cc174e37181b873"><div class="ttname"><a href="_game_type_8h.html#a458f126bc12933b550a9292a42eb5b94a38230108079211c60cc174e37181b873">TIME_OF_DAY_FIRST</a></div><div class="ttdeci">@ TIME_OF_DAY_FIRST</div><div class="ttdef"><b>Definition</b> <a href="_game_type_8h_source.html#l00071">GameType.h:71</a></div></div>
<div class="ttc" id="a_game_type_8h_html_a6fd5a65863598cf1d82736a1a91abab3"><div class="ttname"><a href="_game_type_8h.html#a6fd5a65863598cf1d82736a1a91abab3">DEFAULT_WORLD_WIDTH</a></div><div class="ttdeci">#define DEFAULT_WORLD_WIDTH</div><div class="ttdef"><b>Definition</b> <a href="_game_type_8h_source.html#l00037">GameType.h:37</a></div></div>
<div class="ttc" id="a_game_type_8h_html_ac681bef95b630ddeda5bb36410870977"><div class="ttname"><a href="_game_type_8h.html#ac681bef95b630ddeda5bb36410870977">DEFAULT_WORLD_HEIGHT</a></div><div class="ttdeci">#define DEFAULT_WORLD_HEIGHT</div><div class="ttdef"><b>Definition</b> <a href="_game_type_8h_source.html#l00038">GameType.h:38</a></div></div>
<div class="ttc" id="a_game_type_8h_html_ad3f93f81e65d56ae3f63a604a262a7c5"><div class="ttname"><a href="_game_type_8h.html#ad3f93f81e65d56ae3f63a604a262a7c5">PathfindLayerEnum</a></div><div class="ttdeci">PathfindLayerEnum</div><div class="ttdef"><b>Definition</b> <a href="_game_type_8h_source.html#l00191">GameType.h:191</a></div></div>
<div class="ttc" id="a_game_type_8h_html_ad3f93f81e65d56ae3f63a604a262a7c5a5dfdb3bdd47dd17758e834c7b7d33b78"><div class="ttname"><a href="_game_type_8h.html#ad3f93f81e65d56ae3f63a604a262a7c5a5dfdb3bdd47dd17758e834c7b7d33b78">LAYER_GROUND</a></div><div class="ttdeci">@ LAYER_GROUND</div><div class="ttdef"><b>Definition</b> <a href="_game_type_8h_source.html#l00191">GameType.h:191</a></div></div>
<div class="ttc" id="a_game_window_manager_8h_html_a801a121f8f968f2f359bb3492d2642f2"><div class="ttname"><a href="_game_window_manager_8h.html#a801a121f8f968f2f359bb3492d2642f2">TheWindowManager</a></div><div class="ttdeci">GameWindowManager * TheWindowManager</div><div class="ttdoc">singleton extern definition</div><div class="ttdef"><b>Definition</b> <a href="_game_window_manager_8cpp_source.html#l00058">GameWindowManager.cpp:58</a></div></div>
<div class="ttc" id="a_game_window_transitions_8h_html"><div class="ttname"><a href="_game_window_transitions_8h.html">GameWindowTransitions.h</a></div></div>
<div class="ttc" id="a_game_window_transitions_8h_html_adaf97fac49e60b8298db8a43a93a01da"><div class="ttname"><a href="_game_window_transitions_8h.html#adaf97fac49e60b8298db8a43a93a01da">TheTransitionHandler</a></div><div class="ttdeci">GameWindowTransitionsHandler * TheTransitionHandler</div><div class="ttdef"><b>Definition</b> <a href="_game_window_transitions_8cpp_source.html#l00066">GameWindowTransitions.cpp:66</a></div></div>
<div class="ttc" id="a_ghost_object_8h_html"><div class="ttname"><a href="_ghost_object_8h.html">GhostObject.h</a></div></div>
<div class="ttc" id="a_ghost_object_8h_html_a026d8f8301288c28b954b0eb5ea3283f"><div class="ttname"><a href="_ghost_object_8h.html#a026d8f8301288c28b954b0eb5ea3283f">TheGhostObjectManager</a></div><div class="ttdeci">GhostObjectManager * TheGhostObjectManager</div><div class="ttdef"><b>Definition</b> <a href="_ghost_object_8cpp_source.html#l00037">GhostObject.cpp:37</a></div></div>
<div class="ttc" id="a_global_data_8h_html_a7f12c962dc4b6f8f107af4edeb4f1ba6"><div class="ttname"><a href="_global_data_8h.html#a7f12c962dc4b6f8f107af4edeb4f1ba6">TheGlobalData</a></div><div class="ttdeci">#define TheGlobalData</div><div class="ttdef"><b>Definition</b> <a href="_global_data_8h_source.html#l00543">GlobalData.h:543</a></div></div>
<div class="ttc" id="a_global_data_8h_html_af21446132278f7786d102327938763d2"><div class="ttname"><a href="_global_data_8h.html#af21446132278f7786d102327938763d2">TheWritableGlobalData</a></div><div class="ttdeci">GlobalData * TheWritableGlobalData</div><div class="ttdoc">The global data singleton.</div><div class="ttdef"><b>Definition</b> <a href="_global_data_8cpp_source.html#l00060">GlobalData.cpp:60</a></div></div>
<div class="ttc" id="a_in_game_u_i_8h_html"><div class="ttname"><a href="_in_game_u_i_8h.html">InGameUI.h</a></div></div>
<div class="ttc" id="a_in_game_u_i_8h_html_a0de3624c7699c1ad0dea332a3c44c931"><div class="ttname"><a href="_in_game_u_i_8h.html#a0de3624c7699c1ad0dea332a3c44c931">TheInGameUI</a></div><div class="ttdeci">InGameUI * TheInGameUI</div><div class="ttdoc">The InGameUI singleton instance.</div><div class="ttdef"><b>Definition</b> <a href="_in_game_u_i_8cpp_source.html#l00106">InGameUI.cpp:106</a></div></div>
<div class="ttc" id="a_include_2rts_2profile_8h_html"><div class="ttname"><a href="_include_2rts_2profile_8h.html">profile.h</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44b"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44b">KindOfType</a></div><div class="ttdeci">KindOfType</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00044">KindOf.h:45</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44ba2351603429c1853dd6f9e98bca45bc6e"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba2351603429c1853dd6f9e98bca45bc6e">KINDOF_BRIDGE</a></div><div class="ttdeci">@ KINDOF_BRIDGE</div><div class="ttdoc">a Bridge. (special structure)</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00072">KindOf.h:72</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44ba37a5f865d7cfc71dafebcd7ddfc20161"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba37a5f865d7cfc71dafebcd7ddfc20161">KINDOF_INFANTRY</a></div><div class="ttdeci">@ KINDOF_INFANTRY</div><div class="ttdoc">unit like soldier etc</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00056">KindOf.h:56</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44ba408d50c624ea9e764c39a3c11206ebee"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba408d50c624ea9e764c39a3c11206ebee">KINDOF_SHRUBBERY</a></div><div class="ttdeci">@ KINDOF_SHRUBBERY</div><div class="ttdoc">tree, bush, etc.</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00054">KindOf.h:54</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44ba6233ebfa55eca2ce51104aa269e7eeff"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba6233ebfa55eca2ce51104aa269e7eeff">KINDOF_IMMOBILE</a></div><div class="ttdeci">@ KINDOF_IMMOBILE</div><div class="ttdoc">fixed in location</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00050">KindOf.h:50</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44ba6423a64f42ab2e86cf87533b395d021c"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba6423a64f42ab2e86cf87533b395d021c">KINDOF_PROP</a></div><div class="ttdeci">@ KINDOF_PROP</div><div class="ttdoc">A prop, visual only, doesn&#39;t interact with other objects (rock, street sign, inert fire hydrant)</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00158">KindOf.h:158</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44ba8f4cd61a1eb1e8142722876c9fe5d07f"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44ba8f4cd61a1eb1e8142722876c9fe5d07f">KINDOF_STRUCTURE</a></div><div class="ttdeci">@ KINDOF_STRUCTURE</div><div class="ttdoc">structure of some sort (buildable or not)</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00055">KindOf.h:55</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44baa70ee392142dc2de3e74212f91749945"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa70ee392142dc2de3e74212f91749945">KINDOF_VEHICLE</a></div><div class="ttdeci">@ KINDOF_VEHICLE</div><div class="ttdoc">unit like tank, jeep, plane, helicopter, etc.</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00057">KindOf.h:57</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44baa7f7eb0418b3065bbdd152f9ae454ab3"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa7f7eb0418b3065bbdd152f9ae454ab3">KINDOF_CLEARED_BY_BUILD</a></div><div class="ttdeci">@ KINDOF_CLEARED_BY_BUILD</div><div class="ttdoc">is auto-cleared from the map when built over via construction</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00103">KindOf.h:103</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44baa985d5f63f13b78714246ab248d55b3f"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44baa985d5f63f13b78714246ab248d55b3f">KINDOF_WALK_ON_TOP_OF_WALL</a></div><div class="ttdeci">@ KINDOF_WALK_ON_TOP_OF_WALL</div><div class="ttdoc">Units can walk on top of a wall made of these kind of objects.</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00112">KindOf.h:112</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44bac5435ae11d322e3163ae71aa93db7d40"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44bac5435ae11d322e3163ae71aa93db7d40">KINDOF_CAN_CAST_REFLECTIONS</a></div><div class="ttdeci">@ KINDOF_CAN_CAST_REFLECTIONS</div><div class="ttdoc">can cast reflections in water</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00053">KindOf.h:53</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44bad02923ddccb6f02c0bb5e44678cd45ec"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44bad02923ddccb6f02c0bb5e44678cd45ec">KINDOF_COMMANDCENTER</a></div><div class="ttdeci">@ KINDOF_COMMANDCENTER</div><div class="ttdoc">a command center</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00062">KindOf.h:62</a></div></div>
<div class="ttc" id="a_kind_of_8h_html_a10872f4a2f419ad52b17492586d5a44badb098d27919361dd3aaabe859e1b0280"><div class="ttname"><a href="_kind_of_8h.html#a10872f4a2f419ad52b17492586d5a44badb098d27919361dd3aaabe859e1b0280">KINDOF_OPTIMIZED_TREE</a></div><div class="ttdeci">@ KINDOF_OPTIMIZED_TREE</div><div class="ttdoc">An optimized, client side only tree. (The only good kind of tree. jba)</div><div class="ttdef"><b>Definition</b> <a href="_kind_of_8h_source.html#l00159">KindOf.h:159</a></div></div>
<div class="ttc" id="a_l_a_n_a_p_i_callbacks_8h_html"><div class="ttname"><a href="_l_a_n_a_p_i_callbacks_8h.html">LANAPICallbacks.h</a></div></div>
<div class="ttc" id="a_l_a_n_a_p_i_callbacks_8h_html_a1c5a01c95e368937f01fcb2e5d5c33d8"><div class="ttname"><a href="_l_a_n_a_p_i_callbacks_8h.html#a1c5a01c95e368937f01fcb2e5d5c33d8">TheLAN</a></div><div class="ttdeci">LANAPI * TheLAN</div><div class="ttdef"><b>Definition</b> <a href="_l_a_n_a_p_i_callbacks_8cpp_source.html#l00050">LANAPICallbacks.cpp:50</a></div></div>
<div class="ttc" id="a_latch_restore_8h_html"><div class="ttname"><a href="_latch_restore_8h.html">LatchRestore.h</a></div></div>
<div class="ttc" id="a_load_screen_8h_html"><div class="ttname"><a href="_load_screen_8h.html">LoadScreen.h</a></div></div>
<div class="ttc" id="a_locomotor_8h_html"><div class="ttname"><a href="_locomotor_8h.html">Locomotor.h</a></div></div>
<div class="ttc" id="a_locomotor_8h_html_af918fa7c16f5e537db22eed07bfe545e"><div class="ttname"><a href="_locomotor_8h.html#af918fa7c16f5e537db22eed07bfe545e">TheLocomotorStore</a></div><div class="ttdeci">LocomotorStore * TheLocomotorStore</div><div class="ttdoc">the Locomotor store definition</div><div class="ttdef"><b>Definition</b> <a href="_locomotor_8cpp_source.html#l00063">Locomotor.cpp:63</a></div></div>
<div class="ttc" id="a_logic_random_value_8h_html_a08fef680b145104e4eba32092fe8809b"><div class="ttname"><a href="_logic_random_value_8h.html#a08fef680b145104e4eba32092fe8809b">GameLogicRandomValue</a></div><div class="ttdeci">#define GameLogicRandomValue(lo, hi)</div><div class="ttdef"><b>Definition</b> <a href="_logic_random_value_8h_source.html#l00042">LogicRandomValue.h:42</a></div></div>
<div class="ttc" id="a_map_object_8h_html"><div class="ttname"><a href="_map_object_8h.html">MapObject.h</a></div></div>
<div class="ttc" id="a_map_object_8h_html_af97f51458499ef9ba19c259cd65c0c55a77278735cf1f0142c2d12e698cde6a80"><div class="ttname"><a href="_map_object_8h.html#af97f51458499ef9ba19c259cd65c0c55a77278735cf1f0142c2d12e698cde6a80">FLAG_DRAWS_IN_MIRROR</a></div><div class="ttdeci">@ FLAG_DRAWS_IN_MIRROR</div><div class="ttdoc">If set, draws in water mirror.</div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00065">MapObject.h:65</a></div></div>
<div class="ttc" id="a_map_object_8h_html_af97f51458499ef9ba19c259cd65c0c55a7b6db8bf7098b1e5ebf4790479d311ff"><div class="ttname"><a href="_map_object_8h.html#af97f51458499ef9ba19c259cd65c0c55a7b6db8bf7098b1e5ebf4790479d311ff">FLAG_ROAD_FLAGS</a></div><div class="ttdeci">@ FLAG_ROAD_FLAGS</div><div class="ttdoc">If nonzero, object is a road piece.</div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00068">MapObject.h:68</a></div></div>
<div class="ttc" id="a_map_object_8h_html_af97f51458499ef9ba19c259cd65c0c55ad1b8795a3c7f204224fbce28ada13397"><div class="ttname"><a href="_map_object_8h.html#af97f51458499ef9ba19c259cd65c0c55ad1b8795a3c7f204224fbce28ada13397">FLAG_BRIDGE_FLAGS</a></div><div class="ttdeci">@ FLAG_BRIDGE_FLAGS</div><div class="ttdoc">If nonzero, object is a bridge piece.</div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00072">MapObject.h:72</a></div></div>
<div class="ttc" id="a_map_util_8h_html"><div class="ttname"><a href="_map_util_8h.html">MapUtil.h</a></div></div>
<div class="ttc" id="a_map_util_8h_html_a2f01cf10092dbdc0eeafefe3ea67cb18"><div class="ttname"><a href="_map_util_8h.html#a2f01cf10092dbdc0eeafefe3ea67cb18">TheMapCache</a></div><div class="ttdeci">MapCache * TheMapCache</div><div class="ttdef"><b>Definition</b> <a href="_map_util_8cpp_source.html#l00784">MapUtil.cpp:784</a></div></div>
<div class="ttc" id="a_message_stream_8h_html_a64f312c54b1608454f378973ddf8ebd0"><div class="ttname"><a href="_message_stream_8h.html#a64f312c54b1608454f378973ddf8ebd0">TheCommandList</a></div><div class="ttdeci">CommandList * TheCommandList</div><div class="ttdef"><b>Definition</b> <a href="_message_stream_8cpp_source.html#l00041">MessageStream.cpp:41</a></div></div>
<div class="ttc" id="a_message_stream_8h_html_ab9dc75a3dc61c4ad88171b9f604e2bf0"><div class="ttname"><a href="_message_stream_8h.html#ab9dc75a3dc61c4ad88171b9f604e2bf0">TheMessageStream</a></div><div class="ttdeci">MessageStream * TheMessageStream</div><div class="ttdoc">The singleton message stream for messages going to TheGameLogic.</div><div class="ttdef"><b>Definition</b> <a href="_message_stream_8cpp_source.html#l00040">MessageStream.cpp:40</a></div></div>
<div class="ttc" id="a_model_state_8h_html_a5038f4bd0e6fedc55329a5cfccab742f"><div class="ttname"><a href="_model_state_8h.html#a5038f4bd0e6fedc55329a5cfccab742f">ModelConditionFlags</a></div><div class="ttdeci">BitFlags&lt; MODELCONDITION_COUNT &gt; ModelConditionFlags</div><div class="ttdef"><b>Definition</b> <a href="_model_state_8h_source.html#l00250">ModelState.h:250</a></div></div>
<div class="ttc" id="a_module_factory_8h_html_ae950955a0584f81e1e0d08e6b4eae292"><div class="ttname"><a href="_module_factory_8h.html#ae950955a0584f81e1e0d08e6b4eae292">TheModuleFactory</a></div><div class="ttdeci">ModuleFactory * TheModuleFactory</div><div class="ttdoc">singleton definition</div><div class="ttdef"><b>Definition</b> <a href="_module_factory_8cpp_source.html#l00285">ModuleFactory.cpp:285</a></div></div>
<div class="ttc" id="a_mouse_8h_html"><div class="ttname"><a href="_mouse_8h.html">Mouse.h</a></div></div>
<div class="ttc" id="a_mouse_8h_html_a8874928c689c1d5e8446353aea92f975"><div class="ttname"><a href="_mouse_8h.html#a8874928c689c1d5e8446353aea92f975">TheMouse</a></div><div class="ttdeci">Mouse * TheMouse</div><div class="ttdoc">extern mouse singleton definition</div><div class="ttdef"><b>Definition</b> <a href="_mouse_8cpp_source.html#l00057">Mouse.cpp:57</a></div></div>
<div class="ttc" id="a_multiplayer_settings_8h_html"><div class="ttname"><a href="_multiplayer_settings_8h.html">MultiplayerSettings.h</a></div></div>
<div class="ttc" id="a_multiplayer_settings_8h_html_afa7bab8d42a3c23accb7fa0f172ea106"><div class="ttname"><a href="_multiplayer_settings_8h.html#afa7bab8d42a3c23accb7fa0f172ea106">TheMultiplayerSettings</a></div><div class="ttdeci">MultiplayerSettings * TheMultiplayerSettings</div><div class="ttdoc">The MultiplayerSettings singleton.</div><div class="ttdef"><b>Definition</b> <a href="_multiplayer_settings_8cpp_source.html#l00041">MultiplayerSettings.cpp:41</a></div></div>
<div class="ttc" id="a_name_key_generator_8h_html_a06f232010c61d0e4a122ca7832f7d22e"><div class="ttname"><a href="_name_key_generator_8h.html#a06f232010c61d0e4a122ca7832f7d22e">TheNameKeyGenerator</a></div><div class="ttdeci">NameKeyGenerator * TheNameKeyGenerator</div><div class="ttdoc">just one namespace for now</div><div class="ttdef"><b>Definition</b> <a href="_name_key_generator_8cpp_source.html#l00034">NameKeyGenerator.cpp:34</a></div></div>
<div class="ttc" id="a_name_key_generator_8h_html_a0928e3a3f7bf4833b472cc839d35b1ae"><div class="ttname"><a href="_name_key_generator_8h.html#a0928e3a3f7bf4833b472cc839d35b1ae">NAMEKEY</a></div><div class="ttdeci">NameKeyType NAMEKEY(const AsciiString &amp;name)</div><div class="ttdef"><b>Definition</b> <a href="_name_key_generator_8h_source.html#l00137">NameKeyGenerator.h:137</a></div></div>
<div class="ttc" id="a_name_key_generator_8h_html_ab7c32cd34773bce0b60659d7fa4fbee1"><div class="ttname"><a href="_name_key_generator_8h.html#ab7c32cd34773bce0b60659d7fa4fbee1">KEYNAME</a></div><div class="ttdeci">AsciiString KEYNAME(NameKeyType nk)</div><div class="ttdef"><b>Definition</b> <a href="_name_key_generator_8h_source.html#l00140">NameKeyGenerator.h:140</a></div></div>
<div class="ttc" id="a_network_defs_8h_html_ac95c198d107b19ff8e4f1f8436f33e13"><div class="ttname"><a href="_network_defs_8h.html#ac95c198d107b19ff8e4f1f8436f33e13">TheNetwork</a></div><div class="ttdeci">NetworkInterface * TheNetwork</div><div class="ttdoc">The Network singleton instance.</div><div class="ttdef"><b>Definition</b> <a href="_network_8cpp_source.html#l00098">Network.cpp:98</a></div></div>
<div class="ttc" id="a_network_interface_8h_html"><div class="ttname"><a href="_network_interface_8h.html">NetworkInterface.h</a></div></div>
<div class="ttc" id="a_object_8h_html"><div class="ttname"><a href="_object_8h.html">Object.h</a></div></div>
<div class="ttc" id="a_object_status_types_8h_html_a26a61339803564a7b29a0b9577b1e3d8"><div class="ttname"><a href="_object_status_types_8h.html#a26a61339803564a7b29a0b9577b1e3d8">ObjectStatusMaskType</a></div><div class="ttdeci">BitFlags&lt; OBJECT_STATUS_COUNT &gt; ObjectStatusMaskType</div><div class="ttdef"><b>Definition</b> <a href="_object_status_types_8h_source.html#l00098">ObjectStatusTypes.h:98</a></div></div>
<div class="ttc" id="a_object_status_types_8h_html_a582a0a1fdc9ebd748af0895c66e3e137aec219f57229834c71dfd37ee55fd52a8"><div class="ttname"><a href="_object_status_types_8h.html#a582a0a1fdc9ebd748af0895c66e3e137aec219f57229834c71dfd37ee55fd52a8">OBJECT_STATUS_DESTROYED</a></div><div class="ttdeci">@ OBJECT_STATUS_DESTROYED</div><div class="ttdoc">has been destroyed, pending delete</div><div class="ttdef"><b>Definition</b> <a href="_object_status_types_8h_source.html#l00048">ObjectStatusTypes.h:48</a></div></div>
<div class="ttc" id="a_object_status_types_8h_html_a81157df570ed226f5f71006d81d305a4"><div class="ttname"><a href="_object_status_types_8h.html#a81157df570ed226f5f71006d81d305a4">MAKE_OBJECT_STATUS_MASK</a></div><div class="ttdeci">#define MAKE_OBJECT_STATUS_MASK(k)</div><div class="ttdef"><b>Definition</b> <a href="_object_status_types_8h_source.html#l00100">ObjectStatusTypes.h:100</a></div></div>
<div class="ttc" id="a_open_contain_8h_html"><div class="ttname"><a href="_open_contain_8h.html">OpenContain.h</a></div></div>
<div class="ttc" id="a_options_menu_8cpp_html_a38ec2e55ad51a493102f2d60343cfbec"><div class="ttname"><a href="_options_menu_8cpp.html#a38ec2e55ad51a493102f2d60343cfbec">timer</a></div><div class="ttdeci">Int timer</div></div>
<div class="ttc" id="a_particle_sys_8h_html"><div class="ttname"><a href="_particle_sys_8h.html">ParticleSys.h</a></div></div>
<div class="ttc" id="a_particle_sys_8h_html_a13566d206afdddac74b85ff32975004f"><div class="ttname"><a href="_particle_sys_8h.html#a13566d206afdddac74b85ff32975004f">TheParticleSystemManager</a></div><div class="ttdeci">ParticleSystemManager * TheParticleSystemManager</div><div class="ttdoc">The particle system manager singleton.</div><div class="ttdef"><b>Definition</b> <a href="_particle_sys_8cpp_source.html#l00066">ParticleSys.cpp:66</a></div></div>
<div class="ttc" id="a_partition_manager_8h_html"><div class="ttname"><a href="_partition_manager_8h.html">PartitionManager.h</a></div></div>
<div class="ttc" id="a_partition_manager_8h_html_a66c9e7cf318215602c669733b3c73a42"><div class="ttname"><a href="_partition_manager_8h.html#a66c9e7cf318215602c669733b3c73a42">ThePartitionManager</a></div><div class="ttdeci">PartitionManager * ThePartitionManager</div><div class="ttdoc">object manager singleton</div><div class="ttdef"><b>Definition</b> <a href="_partition_manager_8cpp_source.html#l00976">PartitionManager.cpp:976</a></div></div>
<div class="ttc" id="a_peer_defs_8h_html"><div class="ttname"><a href="_peer_defs_8h.html">PeerDefs.h</a></div></div>
<div class="ttc" id="a_peer_defs_8h_html_aed3b185ffc93626cf677446b83c549b7"><div class="ttname"><a href="_peer_defs_8h.html#aed3b185ffc93626cf677446b83c549b7">TheGameSpyInfo</a></div><div class="ttdeci">GameSpyInfoInterface * TheGameSpyInfo</div><div class="ttdef"><b>Definition</b> <a href="_peer_defs_8cpp_source.html#l00055">PeerDefs.cpp:55</a></div></div>
<div class="ttc" id="a_perf_timer_8h_html"><div class="ttname"><a href="_perf_timer_8h.html">PerfTimer.h</a></div></div>
<div class="ttc" id="a_perf_timer_8h_html_a7d02d33334b68a982bf218d69c748d08"><div class="ttname"><a href="_perf_timer_8h.html#a7d02d33334b68a982bf218d69c748d08">DECLARE_PERF_TIMER</a></div><div class="ttdeci">#define DECLARE_PERF_TIMER(id)</div><div class="ttdef"><b>Definition</b> <a href="_perf_timer_8h_source.html#l00325">PerfTimer.h:325</a></div></div>
<div class="ttc" id="a_perf_timer_8h_html_ad68ab3b473763dd774c368adee36e9a7"><div class="ttname"><a href="_perf_timer_8h.html#ad68ab3b473763dd774c368adee36e9a7">USE_PERF_TIMER</a></div><div class="ttdeci">#define USE_PERF_TIMER(id)</div><div class="ttdef"><b>Definition</b> <a href="_perf_timer_8h_source.html#l00327">PerfTimer.h:327</a></div></div>
<div class="ttc" id="a_persistent_storage_thread_8h_html"><div class="ttname"><a href="_persistent_storage_thread_8h.html">PersistentStorageThread.h</a></div></div>
<div class="ttc" id="a_player_8h_html"><div class="ttname"><a href="_player_8h.html">Player.h</a></div></div>
<div class="ttc" id="a_player_list_8h_html"><div class="ttname"><a href="_player_list_8h.html">PlayerList.h</a></div></div>
<div class="ttc" id="a_player_list_8h_html_a365ca4fd9d87866471e752a423d0dca8a8234e58111fd7351b16b5a20257761bb"><div class="ttname"><a href="_player_list_8h.html#a365ca4fd9d87866471e752a423d0dca8a8234e58111fd7351b16b5a20257761bb">ALLOW_ENEMIES</a></div><div class="ttdeci">@ ALLOW_ENEMIES</div><div class="ttdoc">allow objects that m_obj considers enemy</div><div class="ttdef"><b>Definition</b> <a href="_player_list_8h_source.html#l00067">PlayerList.h:67</a></div></div>
<div class="ttc" id="a_player_list_8h_html_abb7d0e0d6f88abc29c39a4c4b7a18957"><div class="ttname"><a href="_player_list_8h.html#abb7d0e0d6f88abc29c39a4c4b7a18957">ThePlayerList</a></div><div class="ttdeci">PlayerList * ThePlayerList</div><div class="ttdoc">singleton instance of PlayerList</div><div class="ttdef"><b>Definition</b> <a href="_player_list_8cpp_source.html#l00070">PlayerList.cpp:70</a></div></div>
<div class="ttc" id="a_player_template_8h_html"><div class="ttname"><a href="_player_template_8h.html">PlayerTemplate.h</a></div></div>
<div class="ttc" id="a_player_template_8h_html_a5805755846028c077129d86a215e711f"><div class="ttname"><a href="_player_template_8h.html#a5805755846028c077129d86a215e711f">MAX_MP_STARTING_UNITS</a></div><div class="ttdeci">#define MAX_MP_STARTING_UNITS</div><div class="ttdef"><b>Definition</b> <a href="_player_template_8h_source.html#l00070">PlayerTemplate.h:70</a></div></div>
<div class="ttc" id="a_player_template_8h_html_ab6e7afaf7ba2554fc608b56960460a28"><div class="ttname"><a href="_player_template_8h.html#ab6e7afaf7ba2554fc608b56960460a28">ThePlayerTemplateStore</a></div><div class="ttdeci">PlayerTemplateStore * ThePlayerTemplateStore</div><div class="ttdoc">singleton instance of PlayerTemplateStore</div><div class="ttdef"><b>Definition</b> <a href="_player_template_8cpp_source.html#l00261">PlayerTemplate.cpp:261</a></div></div>
<div class="ttc" id="a_polygon_trigger_8h_html"><div class="ttname"><a href="_polygon_trigger_8h.html">PolygonTrigger.h</a></div></div>
<div class="ttc" id="a_pre_r_t_s_8h_html"><div class="ttname"><a href="_pre_r_t_s_8h.html">PreRTS.h</a></div></div>
<div class="ttc" id="a_radar_8h_html"><div class="ttname"><a href="_radar_8h.html">Radar.h</a></div></div>
<div class="ttc" id="a_radar_8h_html_af392ab5e5de710c69949cefe3f4676b6"><div class="ttname"><a href="_radar_8h.html#af392ab5e5de710c69949cefe3f4676b6">TheRadar</a></div><div class="ttdeci">Radar * TheRadar</div><div class="ttdoc">the radar singleton extern</div><div class="ttdef"><b>Definition</b> <a href="_radar_8cpp_source.html#l00063">Radar.cpp:63</a></div></div>
<div class="ttc" id="a_random_value_8h_html"><div class="ttname"><a href="_random_value_8h.html">RandomValue.h</a></div></div>
<div class="ttc" id="a_random_value_8h_html_ad5bdbd358527333bbfbe271b645ceef2"><div class="ttname"><a href="_random_value_8h.html#ad5bdbd358527333bbfbe271b645ceef2">GetGameLogicRandomSeed</a></div><div class="ttdeci">UnsignedInt GetGameLogicRandomSeed(void)</div><div class="ttdoc">Get the seed (used for replays)</div><div class="ttdef"><b>Definition</b> <a href="_random_value_8cpp_source.html#l00144">RandomValue.cpp:144</a></div></div>
<div class="ttc" id="a_random_value_8h_html_af7c78f482afe6ff0c1a3938d39c2a5f1"><div class="ttname"><a href="_random_value_8h.html#af7c78f482afe6ff0c1a3938d39c2a5f1">GetGameLogicRandomSeedCRC</a></div><div class="ttdeci">UnsignedInt GetGameLogicRandomSeedCRC(void)</div><div class="ttdoc">Get the seed (used for CRCs)</div><div class="ttdef"><b>Definition</b> <a href="_random_value_8cpp_source.html#l00149">RandomValue.cpp:149</a></div></div>
<div class="ttc" id="a_recorder_8h_html"><div class="ttname"><a href="_recorder_8h.html">Recorder.h</a></div></div>
<div class="ttc" id="a_recorder_8h_html_abebff8e1caf81029565d318be12ea230a4236aa876d9bb2efcb5da861afe2f5ba"><div class="ttname"><a href="_recorder_8h.html#abebff8e1caf81029565d318be12ea230a4236aa876d9bb2efcb5da861afe2f5ba">RECORDERMODETYPE_PLAYBACK</a></div><div class="ttdeci">@ RECORDERMODETYPE_PLAYBACK</div><div class="ttdef"><b>Definition</b> <a href="_recorder_8h_source.html#l00050">Recorder.h:50</a></div></div>
<div class="ttc" id="a_recorder_8h_html_ac6a9c1a6f4bbedf078efa4dc68f08c3a"><div class="ttname"><a href="_recorder_8h.html#ac6a9c1a6f4bbedf078efa4dc68f08c3a">TheRecorder</a></div><div class="ttdeci">RecorderClass * TheRecorder</div><div class="ttdef"><b>Definition</b> <a href="_recorder_8cpp_source.html#l00359">Recorder.cpp:359</a></div></div>
<div class="ttc" id="a_s_t_l_typedefs_8h_html_ad2c789ebd1e357c3b69d2dcf79ebd156"><div class="ttname"><a href="_s_t_l_typedefs_8h.html#ad2c789ebd1e357c3b69d2dcf79ebd156">ObjectPointerListIterator</a></div><div class="ttdeci">std::list&lt; Object * &gt;::iterator ObjectPointerListIterator</div><div class="ttdef"><b>Definition</b> <a href="_s_t_l_typedefs_8h_source.html#l00089">STLTypedefs.h:89</a></div></div>
<div class="ttc" id="a_script_actions_8h_html"><div class="ttname"><a href="_script_actions_8h.html">ScriptActions.h</a></div></div>
<div class="ttc" id="a_script_actions_8h_html_a0b725c73e6f96faa7917f2c08b5c7e08"><div class="ttname"><a href="_script_actions_8h.html#a0b725c73e6f96faa7917f2c08b5c7e08">TheScriptActions</a></div><div class="ttdeci">ScriptActionsInterface * TheScriptActions</div><div class="ttdoc">singleton definition</div><div class="ttdef"><b>Definition</b> <a href="_script_actions_8cpp_source.html#l00129">ScriptActions.cpp:129</a></div></div>
<div class="ttc" id="a_script_engine_8h_html"><div class="ttname"><a href="_script_engine_8h.html">ScriptEngine.h</a></div></div>
<div class="ttc" id="a_script_engine_8h_html_a2f0c2a28b1e214a57566c923f26eeacb"><div class="ttname"><a href="_script_engine_8h.html#a2f0c2a28b1e214a57566c923f26eeacb">TheScriptEngine</a></div><div class="ttdeci">ScriptEngine * TheScriptEngine</div><div class="ttdoc">singleton definition</div><div class="ttdef"><b>Definition</b> <a href="_script_engine_8cpp_source.html#l00143">ScriptEngine.cpp:143</a></div></div>
<div class="ttc" id="a_scripts_8h_html"><div class="ttname"><a href="_scripts_8h.html">Scripts.h</a></div></div>
<div class="ttc" id="a_shell_8h_html_a2afa78b8811c042f7d61dcffa19fba95"><div class="ttname"><a href="_shell_8h.html#a2afa78b8811c042f7d61dcffa19fba95">TheShell</a></div><div class="ttdeci">Shell * TheShell</div><div class="ttdoc">the shell external interface</div><div class="ttdef"><b>Definition</b> <a href="_shell_8cpp_source.html#l00048">Shell.cpp:48</a></div></div>
<div class="ttc" id="a_sides_list_8h_html"><div class="ttname"><a href="_sides_list_8h.html">SidesList.h</a></div></div>
<div class="ttc" id="a_sides_list_8h_html_a17ae77f929dc1b8d38b381d55204f94e"><div class="ttname"><a href="_sides_list_8h.html#a17ae77f929dc1b8d38b381d55204f94e">TheSidesList</a></div><div class="ttdeci">SidesList * TheSidesList</div><div class="ttdoc">singleton instance of SidesList</div><div class="ttdef"><b>Definition</b> <a href="_sides_list_8cpp_source.html#l00202">SidesList.cpp:202</a></div></div>
<div class="ttc" id="a_snow_8h_html"><div class="ttname"><a href="_snow_8h.html">Snow.h</a></div></div>
<div class="ttc" id="a_snow_8h_html_a4123cca1e6cb5c0f7e82b19fc9b7b0d7"><div class="ttname"><a href="_snow_8h.html#a4123cca1e6cb5c0f7e82b19fc9b7b0d7">TheWeatherSetting</a></div><div class="ttdeci">OVERRIDE&lt; WeatherSetting &gt; TheWeatherSetting</div><div class="ttdef"><b>Definition</b> <a href="_snow_8cpp_source.html#l00104">Snow.cpp:104</a></div></div>
<div class="ttc" id="a_staging_room_game_info_8h_html_a5a7f6f896bca06403d708f72e912c05c"><div class="ttname"><a href="_staging_room_game_info_8h.html#a5a7f6f896bca06403d708f72e912c05c">TheGameSpyGame</a></div><div class="ttdeci">GameSpyStagingRoom * TheGameSpyGame</div><div class="ttdef"><b>Definition</b> <a href="_game_spy_game_info_8cpp_source.html#l00049">GameSpyGameInfo.cpp:49</a></div></div>
<div class="ttc" id="a_stats_collector_8h_html"><div class="ttname"><a href="_stats_collector_8h.html">StatsCollector.h</a></div></div>
<div class="ttc" id="a_stats_collector_8h_html_a37ff26b22956783a5eb4aef155579af0"><div class="ttname"><a href="_stats_collector_8h.html#a37ff26b22956783a5eb4aef155579af0">TheStatsCollector</a></div><div class="ttdeci">StatsCollector * TheStatsCollector</div><div class="ttdoc">we need a singleton</div><div class="ttdef"><b>Definition</b> <a href="_stats_collector_8cpp_source.html#l00068">StatsCollector.cpp:68</a></div></div>
<div class="ttc" id="a_team_8h_html"><div class="ttname"><a href="_team_8h.html">Team.h</a></div></div>
<div class="ttc" id="a_team_8h_html_a3a04fc491dc4566b61f2f8100b070cd6"><div class="ttname"><a href="_team_8h.html#a3a04fc491dc4566b61f2f8100b070cd6">TheTeamFactory</a></div><div class="ttdeci">TeamFactory * TheTeamFactory</div><div class="ttdef"><b>Definition</b> <a href="_team_8cpp_source.html#l00063">Team.cpp:63</a></div></div>
<div class="ttc" id="a_terrain_logic_8h_html_aa42359a5e8439f039f075e2bbfdbb8cf"><div class="ttname"><a href="_terrain_logic_8h.html#aa42359a5e8439f039f075e2bbfdbb8cf">TheTerrainLogic</a></div><div class="ttdeci">TerrainLogic * TheTerrainLogic</div><div class="ttdoc">singleton definition</div><div class="ttdef"><b>Definition</b> <a href="_terrain_logic_8cpp_source.html#l00069">TerrainLogic.cpp:69</a></div></div>
<div class="ttc" id="a_terrain_roads_8h_html_a2975ccf96cb696f99dc3f3f8ecd8702ba6bfc49836893ef99d0d153d709ab06b0"><div class="ttname"><a href="_terrain_roads_8h.html#a2975ccf96cb696f99dc3f3f8ecd8702ba6bfc49836893ef99d0d153d709ab06b0">BRIDGE_MAX_TOWERS</a></div><div class="ttdeci">@ BRIDGE_MAX_TOWERS</div><div class="ttdoc">keep this last</div><div class="ttdef"><b>Definition</b> <a href="_terrain_roads_8h_source.html#l00055">TerrainRoads.h:55</a></div></div>
<div class="ttc" id="a_terrain_visual_8h_html"><div class="ttname"><a href="_terrain_visual_8h.html">TerrainVisual.h</a></div></div>
<div class="ttc" id="a_terrain_visual_8h_html_ae0df8d943c5de97fa7786e3a64c604a7"><div class="ttname"><a href="_terrain_visual_8h.html#ae0df8d943c5de97fa7786e3a64c604a7">TheTerrainVisual</a></div><div class="ttdeci">TerrainVisual * TheTerrainVisual</div><div class="ttdoc">singleton extern</div><div class="ttdef"><b>Definition</b> <a href="_terrain_visual_8cpp_source.html#l00044">TerrainVisual.cpp:44</a></div></div>
<div class="ttc" id="a_thing_factory_8h_html"><div class="ttname"><a href="_thing_factory_8h.html">ThingFactory.h</a></div></div>
<div class="ttc" id="a_thing_factory_8h_html_aa5484cbacdf0aae13a1fc2e9c35bb6c6"><div class="ttname"><a href="_thing_factory_8h.html#aa5484cbacdf0aae13a1fc2e9c35bb6c6">TheThingFactory</a></div><div class="ttdeci">ThingFactory * TheThingFactory</div><div class="ttdoc">the template singleton</div><div class="ttdef"><b>Definition</b> <a href="_thing_factory_8cpp_source.html#l00060">ThingFactory.cpp:60</a></div></div>
<div class="ttc" id="a_thing_template_8h_html"><div class="ttname"><a href="_thing_template_8h.html">ThingTemplate.h</a></div></div>
<div class="ttc" id="a_thing_template_8h_html_a6cdcf604627ad670996d9057d1bd9e0c"><div class="ttname"><a href="_thing_template_8h.html#a6cdcf604627ad670996d9057d1bd9e0c">BuildableStatus</a></div><div class="ttdeci">BuildableStatus</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00217">ThingTemplate.h:218</a></div></div>
<div class="ttc" id="a_thread_utils_8h_html"><div class="ttname"><a href="_thread_utils_8h.html">ThreadUtils.h</a></div></div>
<div class="ttc" id="a_thread_utils_8h_html_a0ac3f0d3c3ff1e719f4d40593d98644a"><div class="ttname"><a href="_thread_utils_8h.html#a0ac3f0d3c3ff1e719f4d40593d98644a">WideCharStringToMultiByte</a></div><div class="ttdeci">std::string WideCharStringToMultiByte(const WideChar *orig)</div><div class="ttdef"><b>Definition</b> <a href="_thread_utils_8cpp_source.html#l00065">ThreadUtils.cpp:65</a></div></div>
<div class="ttc" id="a_update_module_8h_html_a2c378b1fe6fab232d6fa78a465d13eca"><div class="ttname"><a href="_update_module_8h.html#a2c378b1fe6fab232d6fa78a465d13eca">UpdateModulePtr</a></div><div class="ttdeci">UpdateModule * UpdateModulePtr</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00244">UpdateModule.h:244</a></div></div>
<div class="ttc" id="a_update_module_8h_html_ad3ba22c5173a5e8b7b5f01cff5346b50"><div class="ttname"><a href="_update_module_8h.html#ad3ba22c5173a5e8b7b5f01cff5346b50">UpdateSleepTime</a></div><div class="ttdeci">UpdateSleepTime</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00068">UpdateModule.h:69</a></div></div>
<div class="ttc" id="a_update_module_8h_html_ad3ba22c5173a5e8b7b5f01cff5346b50a935864379b04030d6fee8c1b0d6a0ee3"><div class="ttname"><a href="_update_module_8h.html#ad3ba22c5173a5e8b7b5f01cff5346b50a935864379b04030d6fee8c1b0d6a0ee3">UPDATE_SLEEP_NONE</a></div><div class="ttdeci">@ UPDATE_SLEEP_NONE</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00071">UpdateModule.h:71</a></div></div>
<div class="ttc" id="a_victory_conditions_8h_html"><div class="ttname"><a href="_victory_conditions_8h.html">VictoryConditions.h</a></div></div>
<div class="ttc" id="a_victory_conditions_8h_html_a57662e4d1d248e4cfa1382870a550794a2e721c91499ee367ef6bb800ab9d4454"><div class="ttname"><a href="_victory_conditions_8h.html#a57662e4d1d248e4cfa1382870a550794a2e721c91499ee367ef6bb800ab9d4454">VICTORY_NOBUILDINGS</a></div><div class="ttdeci">@ VICTORY_NOBUILDINGS</div><div class="ttdef"><b>Definition</b> <a href="_victory_conditions_8h_source.html#l00044">VictoryConditions.h:44</a></div></div>
<div class="ttc" id="a_victory_conditions_8h_html_a8d23f837125a00053da4631eac1be46d"><div class="ttname"><a href="_victory_conditions_8h.html#a8d23f837125a00053da4631eac1be46d">TheVictoryConditions</a></div><div class="ttdeci">VictoryConditionsInterface * TheVictoryConditions</div><div class="ttdef"><b>Definition</b> <a href="_victory_conditions_8cpp_source.html#l00065">VictoryConditions.cpp:65</a></div></div>
<div class="ttc" id="a_view_8h_html"><div class="ttname"><a href="_view_8h.html">View.h</a></div></div>
<div class="ttc" id="a_view_8h_html_ae9cd55d65d5bfd2aa4639d20699f7d0f"><div class="ttname"><a href="_view_8h.html#ae9cd55d65d5bfd2aa4639d20699f7d0f">TheTacticalView</a></div><div class="ttdeci">View * TheTacticalView</div><div class="ttdoc">the main tactical interface to the game world</div><div class="ttdef"><b>Definition</b> <a href="_view_8cpp_source.html#l00039">View.cpp:39</a></div></div>
<div class="ttc" id="a_water_8h_html"><div class="ttname"><a href="_water_8h.html">Water.h</a></div></div>
<div class="ttc" id="a_water_8h_html_a41a96d36a0d764a140a0225f54975f75"><div class="ttname"><a href="_water_8h.html#a41a96d36a0d764a140a0225f54975f75">TheWaterTransparency</a></div><div class="ttdeci">OVERRIDE&lt; WaterTransparencySetting &gt; TheWaterTransparency</div><div class="ttdef"><b>Definition</b> <a href="_water_8cpp_source.html#l00038">Water.cpp:38</a></div></div>
<div class="ttc" id="a_weapon_8h_html"><div class="ttname"><a href="_weapon_8h.html">Weapon.h</a></div></div>
<div class="ttc" id="a_weapon_8h_html_a80aae8ce3a57cc36f07a466bd82187f8"><div class="ttname"><a href="_weapon_8h.html#a80aae8ce3a57cc36f07a466bd82187f8">TheWeaponStore</a></div><div class="ttdeci">WeaponStore * TheWeaponStore</div><div class="ttdoc">the weapon store definition</div><div class="ttdef"><b>Definition</b> <a href="_weapon_8cpp_source.html#l00161">Weapon.cpp:161</a></div></div>
<div class="ttc" id="a_well_known_keys_8h_html"><div class="ttname"><a href="_well_known_keys_8h.html">WellKnownKeys.h</a></div></div>
<div class="ttc" id="a_xfer_8h_html"><div class="ttname"><a href="_xfer_8h.html">Xfer.h</a></div></div>
<div class="ttc" id="a_xfer_8h_html_a0f6166a10050bb6c901b18b9dffb3cd9a01c0e0a4ca7ad29a20262f65e854588e"><div class="ttname"><a href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9a01c0e0a4ca7ad29a20262f65e854588e">XFER_LOAD</a></div><div class="ttdeci">@ XFER_LOAD</div><div class="ttdef"><b>Definition</b> <a href="_xfer_8h_source.html#l00062">Xfer.h:62</a></div></div>
<div class="ttc" id="a_xfer_8h_html_a0f6166a10050bb6c901b18b9dffb3cd9a173cd17ae59bad305971d5561afc6336"><div class="ttname"><a href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9a173cd17ae59bad305971d5561afc6336">XFER_CRC</a></div><div class="ttdeci">@ XFER_CRC</div><div class="ttdef"><b>Definition</b> <a href="_xfer_8h_source.html#l00063">Xfer.h:63</a></div></div>
<div class="ttc" id="a_xfer_8h_html_a0f6166a10050bb6c901b18b9dffb3cd9ae98b808068bc78b6b9031cddbfddeccd"><div class="ttname"><a href="_xfer_8h.html#a0f6166a10050bb6c901b18b9dffb3cd9ae98b808068bc78b6b9031cddbfddeccd">XFER_SAVE</a></div><div class="ttdeci">@ XFER_SAVE</div><div class="ttdef"><b>Definition</b> <a href="_xfer_8h_source.html#l00061">Xfer.h:61</a></div></div>
<div class="ttc" id="a_xfer_8h_html_a5290038bf1e80fe9b1a9e415814ddc13"><div class="ttname"><a href="_xfer_8h.html#a5290038bf1e80fe9b1a9e415814ddc13">XferVersion</a></div><div class="ttdeci">UnsignedByte XferVersion</div><div class="ttdef"><b>Definition</b> <a href="_xfer_8h_source.html#l00053">Xfer.h:53</a></div></div>
<div class="ttc" id="a_xfer_c_r_c_8h_html"><div class="ttname"><a href="_xfer_c_r_c_8h.html">XferCRC.h</a></div></div>
<div class="ttc" id="a_xfer_deep_c_r_c_8h_html"><div class="ttname"><a href="_xfer_deep_c_r_c_8h.html">XferDeepCRC.h</a></div></div>
<div class="ttc" id="abase64_8cpp_html_a29fd18bed01c4d836c7ebfe73a125c3f"><div class="ttname"><a href="base64_8cpp.html#a29fd18bed01c4d836c7ebfe73a125c3f">END</a></div><div class="ttdeci">#define END</div><div class="ttdef"><b>Definition</b> <a href="base64_8cpp_source.html#l00061">base64.cpp:61</a></div></div>
<div class="ttc" id="aclass_a_i_command_interface_html_ace9c9c07f03a68ac4d6f18ee3dd6a3da"><div class="ttname"><a href="class_a_i_command_interface.html#ace9c9c07f03a68ac4d6f18ee3dd6a3da">AICommandInterface::aiAttackPosition</a></div><div class="ttdeci">void aiAttackPosition(const Coord3D *pos, Int maxShotsToFire, CommandSourceType cmdSource)</div><div class="ttdef"><b>Definition</b> <a href="_a_i_8h_source.html#l00596">AI.h:596</a></div></div>
<div class="ttc" id="aclass_a_i_group_html"><div class="ttname"><a href="class_a_i_group.html">AIGroup</a></div><div class="ttdef"><b>Definition</b> <a href="_a_i_8h_source.html#l00873">AI.h:874</a></div></div>
<div class="ttc" id="aclass_a_i_group_html_a358e8392e3575db3fb5edd177fe040c9"><div class="ttname"><a href="class_a_i_group.html#a358e8392e3575db3fb5edd177fe040c9">AIGroup::remove</a></div><div class="ttdeci">Bool remove(Object *obj)</div><div class="ttdef"><b>Definition</b> <a href="_a_i_group_8cpp_source.html#l00206">AIGroup.cpp:206</a></div></div>
<div class="ttc" id="aclass_a_i_group_html_abfc7b602502e699fc0df3cf545102a12"><div class="ttname"><a href="class_a_i_group.html#abfc7b602502e699fc0df3cf545102a12">AIGroup::add</a></div><div class="ttdeci">void add(Object *obj)</div><div class="ttdoc">add object to group</div><div class="ttdef"><b>Definition</b> <a href="_a_i_group_8cpp_source.html#l00170">AIGroup.cpp:170</a></div></div>
<div class="ttc" id="aclass_a_i_update_interface_html"><div class="ttname"><a href="class_a_i_update_interface.html">AIUpdateInterface</a></div><div class="ttdef"><b>Definition</b> <a href="_a_i_update_8h_source.html#l00234">AIUpdate.h:235</a></div></div>
<div class="ttc" id="aclass_a_i_update_interface_html_a04904287e58084fa3d934b326b2b6dbd"><div class="ttname"><a href="class_a_i_update_interface.html#a04904287e58084fa3d934b326b2b6dbd">AIUpdateInterface::setLocomotorGoalNone</a></div><div class="ttdeci">virtual void setLocomotorGoalNone()</div><div class="ttdef"><b>Definition</b> <a href="_a_i_update_8cpp_source.html#l02357">AIUpdate.cpp:2357</a></div></div>
<div class="ttc" id="aclass_a_i_update_interface_html_a04eaa188e8119692276f2e247cd1e412"><div class="ttname"><a href="class_a_i_update_interface.html#a04eaa188e8119692276f2e247cd1e412">AIUpdateInterface::isWaitingForPath</a></div><div class="ttdeci">Bool isWaitingForPath(void) const</div><div class="ttdef"><b>Definition</b> <a href="_a_i_update_8h_source.html#l00469">AIUpdate.h:469</a></div></div>
<div class="ttc" id="aclass_a_i_update_interface_html_a94a9d2eb0b8b1c81b9200afd12eedd39"><div class="ttname"><a href="class_a_i_update_interface.html#a94a9d2eb0b8b1c81b9200afd12eedd39">AIUpdateInterface::isMoving</a></div><div class="ttdeci">Bool isMoving() const</div><div class="ttdef"><b>Definition</b> <a href="_a_i_update_8cpp_source.html#l03193">AIUpdate.cpp:3193</a></div></div>
<div class="ttc" id="aclass_a_i_update_interface_html_a9d1bacc674f8a0d6021504f594f8b096"><div class="ttname"><a href="class_a_i_update_interface.html#a9d1bacc674f8a0d6021504f594f8b096">AIUpdateInterface::getLocomotorSet</a></div><div class="ttdeci">const LocomotorSet &amp; getLocomotorSet(void) const</div><div class="ttdef"><b>Definition</b> <a href="_a_i_update_8h_source.html#l00505">AIUpdate.h:505</a></div></div>
<div class="ttc" id="aclass_a_i_update_interface_html_ac4c0b10f48d5ffd6079556203a115ecd"><div class="ttname"><a href="class_a_i_update_interface.html#ac4c0b10f48d5ffd6079556203a115ecd">AIUpdateInterface::isAttacking</a></div><div class="ttdeci">virtual Bool isAttacking() const</div><div class="ttdef"><b>Definition</b> <a href="_a_i_update_8cpp_source.html#l03130">AIUpdate.cpp:3130</a></div></div>
<div class="ttc" id="aclass_a_i_update_interface_html_ad2a34cb1d20040d0b936060fbb51882d"><div class="ttname"><a href="class_a_i_update_interface.html#ad2a34cb1d20040d0b936060fbb51882d">AIUpdateInterface::destroyPath</a></div><div class="ttdeci">void destroyPath(void)</div><div class="ttdoc">destroy the current path, setting it to NULL</div><div class="ttdef"><b>Definition</b> <a href="_a_i_update_8cpp_source.html#l02025">AIUpdate.cpp:2025</a></div></div>
<div class="ttc" id="aclass_ascii_string_html"><div class="ttname"><a href="class_ascii_string.html">AsciiString</a></div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8h_source.html#l00086">AsciiString.h:87</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_a10c2a0dd04ceb04514f3244943ef7daf"><div class="ttname"><a href="class_ascii_string.html#a10c2a0dd04ceb04514f3244943ef7daf">AsciiString::startsWith</a></div><div class="ttdeci">Bool startsWith(const char *p) const</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8cpp_source.html#l00306">AsciiString.cpp:306</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_a1fc6bac368662343097a55184c7cbf75"><div class="ttname"><a href="class_ascii_string.html#a1fc6bac368662343097a55184c7cbf75">AsciiString::isNotEmpty</a></div><div class="ttdeci">Bool isNotEmpty() const</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8h_source.html#l00328">AsciiString.h:328</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_a396495f839d5f880b2754f36a79a9bb1"><div class="ttname"><a href="class_ascii_string.html#a396495f839d5f880b2754f36a79a9bb1">AsciiString::concat</a></div><div class="ttdeci">void concat(const AsciiString &amp;stringSrc)</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8h_source.html#l00528">AsciiString.h:528</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_a5dd96b28d1e8a60b0000691f0c845c70"><div class="ttname"><a href="class_ascii_string.html#a5dd96b28d1e8a60b0000691f0c845c70">AsciiString::compare</a></div><div class="ttdeci">int compare(const AsciiString &amp;stringSrc) const</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8h_source.html#l00546">AsciiString.h:546</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_a5e31a06b00465f1d1daba2e209a5fa0e"><div class="ttname"><a href="class_ascii_string.html#a5e31a06b00465f1d1daba2e209a5fa0e">AsciiString::endsWith</a></div><div class="ttdeci">Bool endsWith(const char *p) const</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8cpp_source.html#l00334">AsciiString.cpp:334</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_a8c758f8373f92905ade4a5294866c52a"><div class="ttname"><a href="class_ascii_string.html#a8c758f8373f92905ade4a5294866c52a">AsciiString::str</a></div><div class="ttdeci">const char * str() const</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8h_source.html#l00440">AsciiString.h:440</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_a9dfe04dc3a0bc8d7a1923193e90f146a"><div class="ttname"><a href="class_ascii_string.html#a9dfe04dc3a0bc8d7a1923193e90f146a">AsciiString::set</a></div><div class="ttdeci">void set(const AsciiString &amp;stringSrc)</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8h_source.html#l00448">AsciiString.h:448</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_aa469ba29748958e5d120d6b806e45249"><div class="ttname"><a href="class_ascii_string.html#aa469ba29748958e5d120d6b806e45249">AsciiString::TheEmptyString</a></div><div class="ttdeci">static AsciiString TheEmptyString</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8h_source.html#l00133">AsciiString.h:133</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_ac437c02220eb93cc667a308b86e15223"><div class="ttname"><a href="class_ascii_string.html#ac437c02220eb93cc667a308b86e15223">AsciiString::format</a></div><div class="ttdeci">void format(AsciiString format,...)</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8cpp_source.html#l00262">AsciiString.cpp:262</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_ac6de156d7974b64a9440ef3fa9915257"><div class="ttname"><a href="class_ascii_string.html#ac6de156d7974b64a9440ef3fa9915257">AsciiString::translate</a></div><div class="ttdeci">void translate(const UnicodeString &amp;stringSrc)</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8cpp_source.html#l00178">AsciiString.cpp:178</a></div></div>
<div class="ttc" id="aclass_ascii_string_html_ae9efb39159f617363aa0acdb6cdecab8"><div class="ttname"><a href="class_ascii_string.html#ae9efb39159f617363aa0acdb6cdecab8">AsciiString::isEmpty</a></div><div class="ttdeci">Bool isEmpty() const</div><div class="ttdef"><b>Definition</b> <a href="_ascii_string_8h_source.html#l00417">AsciiString.h:417</a></div></div>
<div class="ttc" id="aclass_behavior_module_html"><div class="ttname"><a href="class_behavior_module.html">BehaviorModule</a></div><div class="ttdef"><b>Definition</b> <a href="_behavior_module_8h_source.html#l00146">BehaviorModule.h:147</a></div></div>
<div class="ttc" id="aclass_bit_flags_html_aba510e8ca5da3576e536b8c8f191ca0a"><div class="ttname"><a href="class_bit_flags.html#aba510e8ca5da3576e536b8c8f191ca0a">BitFlags::any</a></div><div class="ttdeci">Bool any() const</div><div class="ttdef"><b>Definition</b> <a href="_bit_flags_8h_source.html#l00193">BitFlags.h:193</a></div></div>
<div class="ttc" id="aclass_bit_flags_html_ac2aa6f31e3e6c5d10e77b71e7ba215de"><div class="ttname"><a href="class_bit_flags.html#ac2aa6f31e3e6c5d10e77b71e7ba215de">BitFlags::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition</b> <a href="_bit_flags_8h_source.html#l00203">BitFlags.h:203</a></div></div>
<div class="ttc" id="aclass_bit_flags_html_afa383102abc0caafd17fec30f4599719"><div class="ttname"><a href="class_bit_flags.html#afa383102abc0caafd17fec30f4599719">BitFlags::anyIntersectionWith</a></div><div class="ttdeci">Bool anyIntersectionWith(const BitFlags &amp;that) const</div><div class="ttdef"><b>Definition</b> <a href="_bit_flags_8h_source.html#l00223">BitFlags.h:223</a></div></div>
<div class="ttc" id="aclass_bridge_html_a2b79cf748d494c9dca1e10f51fb253d2"><div class="ttname"><a href="class_bridge.html#a2b79cf748d494c9dca1e10f51fb253d2">Bridge::peekBridgeInfo</a></div><div class="ttdeci">const BridgeInfo * peekBridgeInfo(void) const</div><div class="ttdef"><b>Definition</b> <a href="_terrain_logic_8h_source.html#l00200">TerrainLogic.h:200</a></div></div>
<div class="ttc" id="aclass_bridge_info_html_a52da7e81a95339188bc54e4c75543772"><div class="ttname"><a href="class_bridge_info.html#a52da7e81a95339188bc54e4c75543772">BridgeInfo::towerObjectID</a></div><div class="ttdeci">ObjectID towerObjectID[BRIDGE_MAX_TOWERS]</div><div class="ttdef"><b>Definition</b> <a href="_terrain_logic_8h_source.html#l00145">TerrainLogic.h:145</a></div></div>
<div class="ttc" id="aclass_bridge_info_html_a73b326556a1ee5869504b6987bfefc25"><div class="ttname"><a href="class_bridge_info.html#a73b326556a1ee5869504b6987bfefc25">BridgeInfo::bridgeObjectID</a></div><div class="ttdeci">ObjectID bridgeObjectID</div><div class="ttdef"><b>Definition</b> <a href="_terrain_logic_8h_source.html#l00144">TerrainLogic.h:144</a></div></div>
<div class="ttc" id="aclass_buddy_request_html"><div class="ttname"><a href="class_buddy_request.html">BuddyRequest</a></div><div class="ttdef"><b>Definition</b> <a href="_buddy_thread_8h_source.html#l00039">BuddyThread.h:40</a></div></div>
<div class="ttc" id="aclass_buddy_request_html_a4c88e57b2e0c98526ac4b9cb1606d1f9acf869c4f0c08c04706d640dc11124af5"><div class="ttname"><a href="class_buddy_request.html#a4c88e57b2e0c98526ac4b9cb1606d1f9acf869c4f0c08c04706d640dc11124af5">BuddyRequest::BUDDYREQUEST_SETSTATUS</a></div><div class="ttdeci">@ BUDDYREQUEST_SETSTATUS</div><div class="ttdef"><b>Definition</b> <a href="_buddy_thread_8h_source.html#l00054">BuddyThread.h:54</a></div></div>
<div class="ttc" id="aclass_buddy_request_html_a517a70544621f9e16b296bbd07d02509"><div class="ttname"><a href="class_buddy_request.html#a517a70544621f9e16b296bbd07d02509">BuddyRequest::arg</a></div><div class="ttdeci">union BuddyRequest::@107227146301030347314113170030212044221012145255 arg</div></div>
<div class="ttc" id="aclass_buddy_request_html_ad3623210a69654248f082f98dc62dca9"><div class="ttname"><a href="class_buddy_request.html#ad3623210a69654248f082f98dc62dca9">BuddyRequest::buddyRequestType</a></div><div class="ttdeci">enum BuddyRequest::@240014013011130070033067345210074372042360177067 buddyRequestType</div></div>
<div class="ttc" id="aclass_buddy_request_html_ad3d0df4e47003727a428b12168b1b278"><div class="ttname"><a href="class_buddy_request.html#ad3d0df4e47003727a428b12168b1b278">BuddyRequest::status</a></div><div class="ttdeci">GPEnum status</div><div class="ttdef"><b>Definition</b> <a href="_buddy_thread_8h_source.html#l00088">BuddyThread.h:88</a></div></div>
<div class="ttc" id="aclass_cached_file_input_stream_html"><div class="ttname"><a href="class_cached_file_input_stream.html">CachedFileInputStream</a></div><div class="ttdef"><b>Definition</b> <a href="_map_reader_writer_info_8h_source.html#l00085">MapReaderWriterInfo.h:86</a></div></div>
<div class="ttc" id="aclass_cached_file_input_stream_html_aacf153f06b4317624617ca728a309bec"><div class="ttname"><a href="class_cached_file_input_stream.html#aacf153f06b4317624617ca728a309bec">CachedFileInputStream::open</a></div><div class="ttdeci">Bool open(AsciiString path)</div><div class="ttdoc">Returns true if open succeeded.</div><div class="ttdef"><b>Definition</b> <a href="_data_chunk_8cpp_source.html#l00053">DataChunk.cpp:53</a></div></div>
<div class="ttc" id="aclass_campaign_html"><div class="ttname"><a href="class_campaign.html">Campaign</a></div><div class="ttdef"><b>Definition</b> <a href="_campaign_manager_8h_source.html#l00091">CampaignManager.h:92</a></div></div>
<div class="ttc" id="aclass_campaign_html_a90093c60335f4b154635c190cf72b737"><div class="ttname"><a href="class_campaign.html#a90093c60335f4b154635c190cf72b737">Campaign::m_isChallengeCampaign</a></div><div class="ttdeci">Bool m_isChallengeCampaign</div><div class="ttdef"><b>Definition</b> <a href="_campaign_manager_8h_source.html#l00113">CampaignManager.h:113</a></div></div>
<div class="ttc" id="aclass_campaign_manager_html_a28868fa91221a4074bc1ce4e95eb6bc7"><div class="ttname"><a href="class_campaign_manager.html#a28868fa91221a4074bc1ce4e95eb6bc7">CampaignManager::getCurrentCampaign</a></div><div class="ttdeci">Campaign * getCurrentCampaign(void)</div><div class="ttdoc">Returns a point to the current Campaign.</div><div class="ttdef"><b>Definition</b> <a href="_campaign_manager_8cpp_source.html#l00258">CampaignManager.cpp:258</a></div></div>
<div class="ttc" id="aclass_chunk_input_stream_html"><div class="ttname"><a href="class_chunk_input_stream.html">ChunkInputStream</a></div><div class="ttdef"><b>Definition</b> <a href="_map_reader_writer_info_8h_source.html#l00076">MapReaderWriterInfo.h:76</a></div></div>
<div class="ttc" id="aclass_command_list_html"><div class="ttname"><a href="class_command_list.html">CommandList</a></div><div class="ttdef"><b>Definition</b> <a href="_message_stream_8h_source.html#l00794">MessageStream.h:795</a></div></div>
<div class="ttc" id="aclass_create_module_interface_html"><div class="ttname"><a href="class_create_module_interface.html">CreateModuleInterface</a></div><div class="ttdef"><b>Definition</b> <a href="_create_module_8h_source.html#l00041">CreateModule.h:42</a></div></div>
<div class="ttc" id="aclass_create_module_interface_html_a87fb59cb29bead86fd61a4a8db938453"><div class="ttname"><a href="class_create_module_interface.html#a87fb59cb29bead86fd61a4a8db938453">CreateModuleInterface::onBuildComplete</a></div><div class="ttdeci">virtual void onBuildComplete()=0</div><div class="ttdoc">This is called when you are a finished game object.</div></div>
<div class="ttc" id="aclass_data_chunk_input_html"><div class="ttname"><a href="class_data_chunk_input.html">DataChunkInput</a></div><div class="ttdef"><b>Definition</b> <a href="_data_chunk_8h_source.html#l00174">DataChunk.h:175</a></div></div>
<div class="ttc" id="aclass_data_chunk_input_html_a18a2ccd8de5cd2733f9b7d2d85176300"><div class="ttname"><a href="class_data_chunk_input.html#a18a2ccd8de5cd2733f9b7d2d85176300">DataChunkInput::registerParser</a></div><div class="ttdeci">void registerParser(const AsciiString &amp;label, const AsciiString &amp;parentLabel, DataChunkParserPtr parser, void *userData=NULL)</div><div class="ttdef"><b>Definition</b> <a href="_data_chunk_8cpp_source.html#l00610">DataChunk.cpp:610</a></div></div>
<div class="ttc" id="aclass_data_chunk_input_html_a53c55822ea5f10bf49a7029c877c75f1"><div class="ttname"><a href="class_data_chunk_input.html#a53c55822ea5f10bf49a7029c877c75f1">DataChunkInput::parse</a></div><div class="ttdeci">Bool parse(void *userData=NULL)</div><div class="ttdef"><b>Definition</b> <a href="_data_chunk_8cpp_source.html#l00628">DataChunk.cpp:628</a></div></div>
<div class="ttc" id="aclass_destroy_module_interface_html"><div class="ttname"><a href="class_destroy_module_interface.html">DestroyModuleInterface</a></div><div class="ttdef"><b>Definition</b> <a href="_destroy_module_8h_source.html#l00041">DestroyModule.h:42</a></div></div>
<div class="ttc" id="aclass_destroy_module_interface_html_af2f1ec48d104271afded1406f698038f"><div class="ttname"><a href="class_destroy_module_interface.html#af2f1ec48d104271afded1406f698038f">DestroyModuleInterface::onDestroy</a></div><div class="ttdeci">virtual void onDestroy()=0</div></div>
<div class="ttc" id="aclass_dict_html"><div class="ttname"><a href="class_dict.html">Dict</a></div><div class="ttdef"><b>Definition</b> <a href="_dict_8h_source.html#l00066">Dict.h:67</a></div></div>
<div class="ttc" id="aclass_dict_html_a359a727d62aeb4ed07136e2301104a99a4b920a83e4a740004815eed7247aa05c"><div class="ttname"><a href="class_dict.html#a359a727d62aeb4ed07136e2301104a99a4b920a83e4a740004815eed7247aa05c">Dict::DICT_ASCIISTRING</a></div><div class="ttdeci">@ DICT_ASCIISTRING</div><div class="ttdef"><b>Definition</b> <a href="_dict_8h_source.html#l00080">Dict.h:80</a></div></div>
<div class="ttc" id="aclass_dict_html_a3806c8ea0782591ee380217216e31048"><div class="ttname"><a href="class_dict.html#a3806c8ea0782591ee380217216e31048">Dict::setAsciiString</a></div><div class="ttdeci">void setAsciiString(NameKeyType key, const AsciiString &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="_dict_8cpp_source.html#l00496">Dict.cpp:496</a></div></div>
<div class="ttc" id="aclass_dict_html_a5021fe67d7478087d5d248d72e48ba80"><div class="ttname"><a href="class_dict.html#a5021fe67d7478087d5d248d72e48ba80">Dict::setBool</a></div><div class="ttdeci">void setBool(NameKeyType key, Bool value)</div><div class="ttdef"><b>Definition</b> <a href="_dict_8cpp_source.html#l00466">Dict.cpp:466</a></div></div>
<div class="ttc" id="aclass_dict_html_a87de1ba756c8a038a654a452bf46efad"><div class="ttname"><a href="class_dict.html#a87de1ba756c8a038a654a452bf46efad">Dict::setUnicodeString</a></div><div class="ttdeci">void setUnicodeString(NameKeyType key, const UnicodeString &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="_dict_8cpp_source.html#l00506">Dict.cpp:506</a></div></div>
<div class="ttc" id="aclass_dict_html_abf50a79a1369ac6aca3f7e5f57148aaf"><div class="ttname"><a href="class_dict.html#abf50a79a1369ac6aca3f7e5f57148aaf">Dict::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition</b> <a href="_dict_8cpp_source.html#l00201">Dict.cpp:201</a></div></div>
<div class="ttc" id="aclass_dict_html_adc07f7a7cc04b4e2718a284e99acf490"><div class="ttname"><a href="class_dict.html#adc07f7a7cc04b4e2718a284e99acf490">Dict::setInt</a></div><div class="ttdeci">void setInt(NameKeyType key, Int value)</div><div class="ttdef"><b>Definition</b> <a href="_dict_8cpp_source.html#l00476">Dict.cpp:476</a></div></div>
<div class="ttc" id="aclass_dict_html_ae7bcd4b77d4a3786450f4453114c782b"><div class="ttname"><a href="class_dict.html#ae7bcd4b77d4a3786450f4453114c782b">Dict::getType</a></div><div class="ttdeci">DataType getType(NameKeyType key) const</div><div class="ttdef"><b>Definition</b> <a href="_dict_8cpp_source.html#l00259">Dict.cpp:259</a></div></div>
<div class="ttc" id="aclass_dict_html_af33cc96ce013f19a52e658222b7ef20d"><div class="ttname"><a href="class_dict.html#af33cc96ce013f19a52e658222b7ef20d">Dict::getAsciiString</a></div><div class="ttdeci">AsciiString getAsciiString(NameKeyType key, Bool *exists=NULL) const</div><div class="ttdef"><b>Definition</b> <a href="_dict_8cpp_source.html#l00314">Dict.cpp:314</a></div></div>
<div class="ttc" id="aclass_drawable_html"><div class="ttname"><a href="class_drawable.html">Drawable</a></div><div class="ttdef"><b>Definition</b> <a href="_drawable_8h_source.html#l00286">Drawable.h:288</a></div></div>
<div class="ttc" id="aclass_drawable_html_a321ab53564ec72eed151e789734e871d"><div class="ttname"><a href="class_drawable.html#a321ab53564ec72eed151e789734e871d">Drawable::getNextDrawable</a></div><div class="ttdeci">Drawable * getNextDrawable(void) const</div><div class="ttdoc">return the next drawable in the global list</div><div class="ttdef"><b>Definition</b> <a href="_drawable_8h_source.html#l00299">Drawable.h:299</a></div></div>
<div class="ttc" id="aclass_drawable_html_ab913bb62dae7de6d56b5280dac30bd4a"><div class="ttname"><a href="class_drawable.html#ab913bb62dae7de6d56b5280dac30bd4a">Drawable::stopAmbientSound</a></div><div class="ttdeci">void stopAmbientSound(void)</div><div class="ttdef"><b>Definition</b> <a href="_drawable_8cpp_source.html#l04571">Drawable.cpp:4571</a></div></div>
<div class="ttc" id="aclass_drawable_html_ab92ffacaf5f1b28ed591abbef0598a18"><div class="ttname"><a href="class_drawable.html#ab92ffacaf5f1b28ed591abbef0598a18">Drawable::onLevelStart</a></div><div class="ttdeci">void onLevelStart()</div><div class="ttdoc">run from GameLogic::startNewGame</div><div class="ttdef"><b>Definition</b> <a href="_drawable_8cpp_source.html#l01344">Drawable.cpp:1344</a></div></div>
<div class="ttc" id="aclass_drawable_html_af804e667925c1c180798c65adfe9bd7b"><div class="ttname"><a href="class_drawable.html#af804e667925c1c180798c65adfe9bd7b">Drawable::startAmbientSound</a></div><div class="ttdeci">void startAmbientSound(Bool onlyIfPermanent=false)</div><div class="ttdef"><b>Definition</b> <a href="_drawable_8cpp_source.html#l04552">Drawable.cpp:4552</a></div></div>
<div class="ttc" id="aclass_game_info_html"><div class="ttname"><a href="class_game_info.html">GameInfo</a></div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00155">GameInfo.h:156</a></div></div>
<div class="ttc" id="aclass_game_info_html_a01fda0d1ea81d32f32c3ebd6bd285257"><div class="ttname"><a href="class_game_info.html#a01fda0d1ea81d32f32c3ebd6bd285257">GameInfo::getSlotNum</a></div><div class="ttdeci">Int getSlotNum(AsciiString userName) const</div><div class="ttdoc">Get the slot number corresponding to a specific user, or -1 if he&#39;s not present.</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00487">GameInfo.cpp:487</a></div></div>
<div class="ttc" id="aclass_game_info_html_a2346634808275bc30ac62bc13565bd4f"><div class="ttname"><a href="class_game_info.html#a2346634808275bc30ac62bc13565bd4f">GameInfo::getSlot</a></div><div class="ttdeci">GameSlot * getSlot(Int slotNum)</div><div class="ttdoc">Get the slot.</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00451">GameInfo.cpp:451</a></div></div>
<div class="ttc" id="aclass_game_info_html_a2a6e7c2ab46179fd86cb5e89c1ef44c2"><div class="ttname"><a href="class_game_info.html#a2a6e7c2ab46179fd86cb5e89c1ef44c2">GameInfo::getConstSlot</a></div><div class="ttdeci">const GameSlot * getConstSlot(Int slotNum) const</div><div class="ttdoc">Get the slot.</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00460">GameInfo.cpp:460</a></div></div>
<div class="ttc" id="aclass_game_info_html_a390b9a38b30cec984bb724c2a7334908"><div class="ttname"><a href="class_game_info.html#a390b9a38b30cec984bb724c2a7334908">GameInfo::isPlayerPreorder</a></div><div class="ttdeci">Bool isPlayerPreorder(Int index)</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00335">GameInfo.cpp:335</a></div></div>
<div class="ttc" id="aclass_game_info_html_a47906ed9d2c4d978d962c1fd08027c22"><div class="ttname"><a href="class_game_info.html#a47906ed9d2c4d978d962c1fd08027c22">GameInfo::getLocalSlotNum</a></div><div class="ttdeci">virtual Int getLocalSlotNum(void) const</div><div class="ttdoc">Get the local slot number, or -1 if we&#39;re not present.</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00469">GameInfo.cpp:469</a></div></div>
<div class="ttc" id="aclass_game_info_html_a4d94f11e0772377d42687d84503becc8"><div class="ttname"><a href="class_game_info.html#a4d94f11e0772377d42687d84503becc8">GameInfo::isColorTaken</a></div><div class="ttdeci">Bool isColorTaken(Int colorIdx, Int slotToIgnore=-1) const</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00712">GameInfo.cpp:712</a></div></div>
<div class="ttc" id="aclass_game_info_html_abdca6b2a03f70690ced38035cfe93ca5"><div class="ttname"><a href="class_game_info.html#abdca6b2a03f70690ced38035cfe93ca5">GameInfo::getMap</a></div><div class="ttdeci">AsciiString getMap(void) const</div><div class="ttdoc">Get the game map.</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00263">GameInfo.h:263</a></div></div>
<div class="ttc" id="aclass_game_info_html_ae98082cf410e55274a4879d1e4b92387"><div class="ttname"><a href="class_game_info.html#ae98082cf410e55274a4879d1e4b92387">GameInfo::oldFactionsOnly</a></div><div class="ttdeci">Bool oldFactionsOnly(void) const</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00276">GameInfo.h:276</a></div></div>
<div class="ttc" id="aclass_game_info_html_aff38b24c5f14fb61daa1578ac3c6f681"><div class="ttname"><a href="class_game_info.html#aff38b24c5f14fb61daa1578ac3c6f681">GameInfo::isStartPositionTaken</a></div><div class="ttdeci">Bool isStartPositionTaken(Int positionIdx, Int slotToIgnore=-1) const</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00723">GameInfo.cpp:723</a></div></div>
<div class="ttc" id="aclass_game_logic_html"><div class="ttname"><a href="class_game_logic.html">GameLogic</a></div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00104">GameLogic.h:105</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a018210368c32d8fffa0fc798d0763a76"><div class="ttname"><a href="class_game_logic.html#a018210368c32d8fffa0fc798d0763a76">GameLogic::getGameMode</a></div><div class="ttdeci">Int getGameMode(void)</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00401">GameLogic.h:401</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a01eacf2f133b4ab7bcbb1c6fa5c9b291"><div class="ttname"><a href="class_game_logic.html#a01eacf2f133b4ab7bcbb1c6fa5c9b291">GameLogic::setControlBarOverride</a></div><div class="ttdeci">void setControlBarOverride(const AsciiString &amp;commandSetName, Int slot, ConstCommandButtonPtr commandButton)</div><div class="ttdef"><b>Definition</b> <a href="#l04413">GameLogic.cpp:4413</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a05b41c6ec4bfe67676ab8a5c1d55722c"><div class="ttname"><a href="class_game_logic.html#a05b41c6ec4bfe67676ab8a5c1d55722c">GameLogic::addObjectToLookupTable</a></div><div class="ttdeci">void addObjectToLookupTable(Object *obj)</div><div class="ttdoc">add object ID to hash lookup table</div><div class="ttdef"><b>Definition</b> <a href="#l03851">GameLogic.cpp:3851</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a0c600344a281cef3e68a172a9a06ce4e"><div class="ttname"><a href="class_game_logic.html#a0c600344a281cef3e68a172a9a06ce4e">GameLogic::friend_createObject</a></div><div class="ttdeci">Object * friend_createObject(const ThingTemplate *thing, const ObjectStatusMaskType &amp;objectStatusMask, Team *team)</div><div class="ttdoc">create an object given the thing template. (Only for use by ThingFactory.)</div><div class="ttdef"><b>Definition</b> <a href="#l03946">GameLogic.cpp:3946</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a0cde8293c73dbadb6b0af2d99578ded9"><div class="ttname"><a href="class_game_logic.html#a0cde8293c73dbadb6b0af2d99578ded9">GameLogic::crc</a></div><div class="ttdeci">virtual void crc(Xfer *xfer)</div><div class="ttdef"><b>Definition</b> <a href="#l04476">GameLogic.cpp:4476</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a0d5219701c72bf800156370d0f575698"><div class="ttname"><a href="class_game_logic.html#a0d5219701c72bf800156370d0f575698">GameLogic::getFirstObject</a></div><div class="ttdeci">Object * getFirstObject(void)</div><div class="ttdoc">Returns the &quot;first&quot; object in the world. When used with the object method &quot;getNextObject()&quot;,...</div><div class="ttdef"><b>Definition</b> <a href="#l03832">GameLogic.cpp:3832</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a11c1bfd7580029022fe63e84f0eb694d"><div class="ttname"><a href="class_game_logic.html#a11c1bfd7580029022fe63e84f0eb694d">GameLogic::GameLogic</a></div><div class="ttdeci">GameLogic(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00223">GameLogic.cpp:223</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a18ff9040f0bae50c985949d18946ffa0"><div class="ttname"><a href="class_game_logic.html#a18ff9040f0bae50c985949d18946ffa0">GameLogic::isProgressComplete</a></div><div class="ttdeci">Bool isProgressComplete(void)</div><div class="ttdoc">@TODO: Add check to account for timeouts</div><div class="ttdef"><b>Definition</b> <a href="#l04294">GameLogic.cpp:4294</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a1b4ff734e63a1ed08f7699397e07514b"><div class="ttname"><a href="class_game_logic.html#a1b4ff734e63a1ed08f7699397e07514b">GameLogic::loadMapINI</a></div><div class="ttdeci">void loadMapINI(AsciiString mapName)</div><div class="ttdef"><b>Definition</b> <a href="#l02391">GameLogic.cpp:2391</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a1f9ab9f4b55320572d8f9b4772b9c88e"><div class="ttname"><a href="class_game_logic.html#a1f9ab9f4b55320572d8f9b4772b9c88e">GameLogic::setGamePaused</a></div><div class="ttdeci">void setGamePaused(Bool paused, Bool pauseMusic=TRUE)</div><div class="ttdef"><b>Definition</b> <a href="#l04188">GameLogic.cpp:4188</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a21afe87aa4d7194faf958982a93f77d8"><div class="ttname"><a href="class_game_logic.html#a21afe87aa4d7194faf958982a93f77d8">GameLogic::startNewGame</a></div><div class="ttdeci">void startNewGame(Bool loadSaveGame)</div><div class="ttdef"><b>Definition</b> <a href="#l01105">GameLogic.cpp:1105</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a256fa1df1af2a06383672ef71cc64307"><div class="ttname"><a href="class_game_logic.html#a256fa1df1af2a06383672ef71cc64307">GameLogic::registerObject</a></div><div class="ttdeci">void registerObject(Object *obj)</div><div class="ttdoc">Given an object, register it with the GameLogic and give it a unique ID.</div><div class="ttdef"><b>Definition</b> <a href="#l03887">GameLogic.cpp:3887</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a279e112e6bd4a5511b0c9938a073b711"><div class="ttname"><a href="class_game_logic.html#a279e112e6bd4a5511b0c9938a073b711">GameLogic::isInSinglePlayerGame</a></div><div class="ttdeci">Bool isInSinglePlayerGame(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00299">GameLogic.cpp:299</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a3365b830514f5d854743d6d71f4d0f15"><div class="ttname"><a href="class_game_logic.html#a3365b830514f5d854743d6d71f4d0f15">GameLogic::sendObjectDestroyed</a></div><div class="ttdeci">void sendObjectDestroyed(Object *obj)</div><div class="ttdef"><b>Definition</b> <a href="#l04158">GameLogic.cpp:4158</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a3513962a3721dfba9cd21f6035aa9571"><div class="ttname"><a href="class_game_logic.html#a3513962a3721dfba9cd21f6035aa9571">GameLogic::allocateObjectID</a></div><div class="ttdeci">ObjectID allocateObjectID(void)</div><div class="ttdoc">Returns a new unique object id.</div><div class="ttdef"><b>Definition</b> <a href="#l03840">GameLogic.cpp:3840</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a39053c1c656152b0735e162acb0d9486"><div class="ttname"><a href="class_game_logic.html#a39053c1c656152b0735e162acb0d9486">GameLogic::isInMultiplayerGame</a></div><div class="ttdeci">Bool isInMultiplayerGame(void)</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00404">GameLogic.h:404</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a3f5df93136fb3689934822b7e5d726e5"><div class="ttname"><a href="class_game_logic.html#a3f5df93136fb3689934822b7e5d726e5">GameLogic::getCRC</a></div><div class="ttdeci">UnsignedInt getCRC(Int mode=CRC_CACHED, AsciiString deepCRCFileName=AsciiString::TheEmptyString)</div><div class="ttdoc">Returns the CRC.</div><div class="ttdef"><b>Definition</b> <a href="#l04012">GameLogic.cpp:4012</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a3f7618eb22e8b5ad02b26ea3e2c10b5c"><div class="ttname"><a href="class_game_logic.html#a3f7618eb22e8b5ad02b26ea3e2c10b5c">GameLogic::deleteLoadScreen</a></div><div class="ttdeci">void deleteLoadScreen(void)</div><div class="ttdef"><b>Definition</b> <a href="#l01088">GameLogic.cpp:1088</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a43367bf5405f3413e49de58ffe619c25"><div class="ttname"><a href="class_game_logic.html#a43367bf5405f3413e49de58ffe619c25">GameLogic::selectObject</a></div><div class="ttdeci">void selectObject(Object *obj, Bool createNewSelection, PlayerMaskType playerMask, Bool affectClient=FALSE)</div><div class="ttdef"><b>Definition</b> <a href="#l02619">GameLogic.cpp:2619</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a4f1c0381f832810be87a2cf10e887c71"><div class="ttname"><a href="class_game_logic.html#a4f1c0381f832810be87a2cf10e887c71">GameLogic::friend_awakenUpdateModule</a></div><div class="ttdeci">void friend_awakenUpdateModule(Object *obj, UpdateModulePtr update, UnsignedInt whenToWakeUp)</div><div class="ttdef"><b>Definition</b> <a href="#l02983">GameLogic.cpp:2983</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a50a656afa006216dbfc0f4d7a4210841"><div class="ttname"><a href="class_game_logic.html#a50a656afa006216dbfc0f4d7a4210841">GameLogic::reset</a></div><div class="ttdeci">virtual void reset(void)</div><div class="ttdoc">Reset the logic system.</div><div class="ttdef"><b>Definition</b> <a href="#l00434">GameLogic.cpp:434</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a5172bbb2a741a118a49b8b29385ae17c"><div class="ttname"><a href="class_game_logic.html#a5172bbb2a741a118a49b8b29385ae17c">GameLogic::isInShellGame</a></div><div class="ttdeci">Bool isInShellGame(void)</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00407">GameLogic.h:407</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a5875c63d5b64103411d99060d68c5623"><div class="ttname"><a href="class_game_logic.html#a5875c63d5b64103411d99060d68c5623">GameLogic::destroyObject</a></div><div class="ttdeci">void destroyObject(Object *obj)</div><div class="ttdoc">Mark object as destroyed for later deletion.</div><div class="ttdef"><b>Definition</b> <a href="#l03959">GameLogic.cpp:3959</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a5ce2d8228a33ebf6fd4c9927b4bf0c09"><div class="ttname"><a href="class_game_logic.html#a5ce2d8228a33ebf6fd4c9927b4bf0c09">GameLogic::initTimeOutValues</a></div><div class="ttdeci">void initTimeOutValues(void)</div><div class="ttdef"><b>Definition</b> <a href="#l04350">GameLogic.cpp:4350</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a60eafce8ea2554e2a18193d302ef3d01"><div class="ttname"><a href="class_game_logic.html#a60eafce8ea2554e2a18193d302ef3d01">GameLogic::isIntroMoviePlaying</a></div><div class="ttdeci">Bool isIntroMoviePlaying()</div><div class="ttdef"><b>Definition</b> <a href="#l02611">GameLogic.cpp:2611</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a63a7acf778535b5f74d469de2cd39b16"><div class="ttname"><a href="class_game_logic.html#a63a7acf778535b5f74d469de2cd39b16">GameLogic::~GameLogic</a></div><div class="ttdeci">virtual ~GameLogic()</div><div class="ttdef"><b>Definition</b> <a href="#l00330">GameLogic.cpp:330</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a793f6a731bc5dee8f8c95c1419484fd0"><div class="ttname"><a href="class_game_logic.html#a793f6a731bc5dee8f8c95c1419484fd0">GameLogic::getFrame</a></div><div class="ttdeci">UnsignedInt getFrame(void)</div><div class="ttdoc">Returns the current simulation frame number.</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00397">GameLogic.h:397</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a7c2b54d759dc0d9013383df961edb083"><div class="ttname"><a href="class_game_logic.html#a7c2b54d759dc0d9013383df961edb083">GameLogic::findControlBarOverride</a></div><div class="ttdeci">Bool findControlBarOverride(const AsciiString &amp;commandSetName, Int slot, ConstCommandButtonPtr &amp;commandButton) const</div><div class="ttdef"><b>Definition</b> <a href="#l04422">GameLogic.cpp:4422</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a7eb269c0a597fe23cc06967a2231eec2"><div class="ttname"><a href="class_game_logic.html#a7eb269c0a597fe23cc06967a2231eec2">GameLogic::processProgressComplete</a></div><div class="ttdeci">void processProgressComplete(Int playerId)</div><div class="ttdef"><b>Definition</b> <a href="#l04274">GameLogic.cpp:4274</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a84eae8a32352a38c1931bdb82ffb18bd"><div class="ttname"><a href="class_game_logic.html#a84eae8a32352a38c1931bdb82ffb18bd">GameLogic::loadPostProcess</a></div><div class="ttdeci">virtual void loadPostProcess(void)</div><div class="ttdef"><b>Definition</b> <a href="#l05020">GameLogic.cpp:5020</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a8edd77410b1adede844e79fec01398aa"><div class="ttname"><a href="class_game_logic.html#a8edd77410b1adede844e79fec01398aa">GameLogic::isInReplayGame</a></div><div class="ttdeci">Bool isInReplayGame(void)</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00405">GameLogic.h:405</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a913eedf62e8766f559e53887c46910b7"><div class="ttname"><a href="class_game_logic.html#a913eedf62e8766f559e53887c46910b7">GameLogic::isGamePaused</a></div><div class="ttdeci">Bool isGamePaused(void)</div><div class="ttdef"><b>Definition</b> <a href="#l04181">GameLogic.cpp:4181</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a940eaebd466e8d037c6531347f321db1"><div class="ttname"><a href="class_game_logic.html#a940eaebd466e8d037c6531347f321db1">GameLogic::init</a></div><div class="ttdeci">virtual void init(void)</div><div class="ttdoc">Initialize or re-initialize the instance.</div><div class="ttdef"><b>Definition</b> <a href="#l00374">GameLogic.cpp:374</a></div></div>
<div class="ttc" id="aclass_game_logic_html_a96258c03c3a75335705345fa9de00df9"><div class="ttname"><a href="class_game_logic.html#a96258c03c3a75335705345fa9de00df9">GameLogic::removeObjectFromLookupTable</a></div><div class="ttdeci">void removeObjectFromLookupTable(Object *obj)</div><div class="ttdoc">remove object ID from hash lookup table</div><div class="ttdef"><b>Definition</b> <a href="#l03871">GameLogic.cpp:3871</a></div></div>
<div class="ttc" id="aclass_game_logic_html_aa4c12e352d1e4fe6da0835a1860dff0c"><div class="ttname"><a href="class_game_logic.html#aa4c12e352d1e4fe6da0835a1860dff0c">GameLogic::sendObjectCreated</a></div><div class="ttdeci">void sendObjectCreated(Object *obj)</div><div class="ttdef"><b>Definition</b> <a href="#l04137">GameLogic.cpp:4137</a></div></div>
<div class="ttc" id="aclass_game_logic_html_aafcfb28a34c3f4886bc15e7cc9e3a435"><div class="ttname"><a href="class_game_logic.html#aafcfb28a34c3f4886bc15e7cc9e3a435">GameLogic::setBuildableStatusOverride</a></div><div class="ttdeci">void setBuildableStatusOverride(const ThingTemplate *tt, BuildableStatus bs)</div><div class="ttdef"><b>Definition</b> <a href="#l04389">GameLogic.cpp:4389</a></div></div>
<div class="ttc" id="aclass_game_logic_html_ab01f256fd66e7dcbc052c4a26f099980"><div class="ttname"><a href="class_game_logic.html#ab01f256fd66e7dcbc052c4a26f099980">GameLogic::xfer</a></div><div class="ttdeci">virtual void xfer(Xfer *xfer)</div><div class="ttdef"><b>Definition</b> <a href="#l04690">GameLogic.cpp:4690</a></div></div>
<div class="ttc" id="aclass_game_logic_html_abc21d1fd02b824ec45f596a220072ade"><div class="ttname"><a href="class_game_logic.html#abc21d1fd02b824ec45f596a220072ade">GameLogic::timeOutGameStart</a></div><div class="ttdeci">void timeOutGameStart(void)</div><div class="ttdef"><b>Definition</b> <a href="#l04342">GameLogic.cpp:4342</a></div></div>
<div class="ttc" id="aclass_game_logic_html_abd661c781e9c8b2f66536a0987a51183"><div class="ttname"><a href="class_game_logic.html#abd661c781e9c8b2f66536a0987a51183">GameLogic::isInInternetGame</a></div><div class="ttdeci">Bool isInInternetGame(void)</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00406">GameLogic.h:406</a></div></div>
<div class="ttc" id="aclass_game_logic_html_ac0be2f1e336da7b17bee7346722b65aa"><div class="ttname"><a href="class_game_logic.html#ac0be2f1e336da7b17bee7346722b65aa">GameLogic::getObjectCount</a></div><div class="ttdeci">UnsignedInt getObjectCount(void)</div><div class="ttdef"><b>Definition</b> <a href="#l04363">GameLogic.cpp:4363</a></div></div>
<div class="ttc" id="aclass_game_logic_html_acd99727d591f59035e4af7c4ff6c96ae"><div class="ttname"><a href="class_game_logic.html#acd99727d591f59035e4af7c4ff6c96ae">GameLogic::isInGameLogicUpdate</a></div><div class="ttdeci">Bool isInGameLogicUpdate(void) const</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00138">GameLogic.h:138</a></div></div>
<div class="ttc" id="aclass_game_logic_html_ad2e016ba1b3054fb7c1e25ef15830bd0"><div class="ttname"><a href="class_game_logic.html#ad2e016ba1b3054fb7c1e25ef15830bd0">GameLogic::deselectObject</a></div><div class="ttdeci">void deselectObject(Object *obj, PlayerMaskType playerMask, Bool affectClient=FALSE)</div><div class="ttdef"><b>Definition</b> <a href="#l02670">GameLogic.cpp:2670</a></div></div>
<div class="ttc" id="aclass_game_logic_html_ad3749d20bd572e16715b55c4a4eee44c"><div class="ttname"><a href="class_game_logic.html#ad3749d20bd572e16715b55c4a4eee44c">GameLogic::findBuildableStatusOverride</a></div><div class="ttdeci">Bool findBuildableStatusOverride(const ThingTemplate *tt, BuildableStatus &amp;bs) const</div><div class="ttdef"><b>Definition</b> <a href="#l04398">GameLogic.cpp:4398</a></div></div>
<div class="ttc" id="aclass_game_logic_html_ad3f0aaf6bc0839f003da794ab4fe97c0"><div class="ttname"><a href="class_game_logic.html#ad3f0aaf6bc0839f003da794ab4fe97c0">GameLogic::bindObjectAndDrawable</a></div><div class="ttdeci">void bindObjectAndDrawable(Object *obj, Drawable *draw)</div><div class="ttdef"><b>Definition</b> <a href="#l04149">GameLogic.cpp:4149</a></div></div>
<div class="ttc" id="aclass_game_logic_html_ad505d6858477cf10a468d6a50371b49c"><div class="ttname"><a href="class_game_logic.html#ad505d6858477cf10a468d6a50371b49c">GameLogic::updateLoadProgress</a></div><div class="ttdeci">void updateLoadProgress(Int progress)</div><div class="ttdef"><b>Definition</b> <a href="#l01077">GameLogic.cpp:1077</a></div></div>
<div class="ttc" id="aclass_game_logic_html_ad980155edd303f2f942a058d9f2e439b"><div class="ttname"><a href="class_game_logic.html#ad980155edd303f2f942a058d9f2e439b">GameLogic::update</a></div><div class="ttdeci">virtual void update(void)</div><div class="ttdoc">update the world</div><div class="ttdef"><b>Definition</b> <a href="#l03572">GameLogic.cpp:3572</a></div></div>
<div class="ttc" id="aclass_game_logic_html_ad9e803410ebd9db6df8da7c3dd27a1de"><div class="ttname"><a href="class_game_logic.html#ad9e803410ebd9db6df8da7c3dd27a1de">GameLogic::setLoadingMap</a></div><div class="ttdeci">void setLoadingMap(Bool loading)</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00169">GameLogic.h:169</a></div></div>
<div class="ttc" id="aclass_game_logic_html_ae3406dc6f412f86b803ea76765c54c97"><div class="ttname"><a href="class_game_logic.html#ae3406dc6f412f86b803ea76765c54c97">GameLogic::isInGame</a></div><div class="ttdeci">Bool isInGame(void)</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00399">GameLogic.h:399</a></div></div>
<div class="ttc" id="aclass_game_logic_html_aeed023c2695b71c013b20e9f15472faa"><div class="ttname"><a href="class_game_logic.html#aeed023c2695b71c013b20e9f15472faa">GameLogic::processCommandList</a></div><div class="ttdeci">void processCommandList(CommandList *list)</div><div class="ttdoc">process the command list</div><div class="ttdef"><b>Definition</b> <a href="#l02540">GameLogic.cpp:2540</a></div></div>
<div class="ttc" id="aclass_game_logic_html_af0d4caf4b6b26c00e5edd1892dee3e1d"><div class="ttname"><a href="class_game_logic.html#af0d4caf4b6b26c00e5edd1892dee3e1d">GameLogic::processProgress</a></div><div class="ttdeci">void processProgress(Int playerId, Int percentage)</div><div class="ttdef"><b>Definition</b> <a href="#l04263">GameLogic.cpp:4263</a></div></div>
<div class="ttc" id="aclass_game_logic_html_af5d964c86b3ee2ff3c85aff0bd6d4f6f"><div class="ttname"><a href="class_game_logic.html#af5d964c86b3ee2ff3c85aff0bd6d4f6f">GameLogic::findObjectByID</a></div><div class="ttdeci">Object * findObjectByID(ObjectID id)</div><div class="ttdoc">Given an ObjectID, return a pointer to the object.</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_8h_source.html#l00410">GameLogic.h:410</a></div></div>
<div class="ttc" id="aclass_game_logic_html_afb2f8a3fd6bb7d9fa507d0f8a5cd23ea"><div class="ttname"><a href="class_game_logic.html#afb2f8a3fd6bb7d9fa507d0f8a5cd23ea">GameLogic::logicMessageDispatcher</a></div><div class="ttdeci">void logicMessageDispatcher(GameMessage *msg, void *userData)</div><div class="ttdoc">Logic command list processing.</div><div class="ttdef"><b>Definition</b> <a href="_game_logic_dispatch_8cpp_source.html#l00352">GameLogicDispatch.cpp:352</a></div></div>
<div class="ttc" id="aclass_game_message_html"><div class="ttname"><a href="class_game_message.html">GameMessage</a></div><div class="ttdef"><b>Definition</b> <a href="_message_stream_8h_source.html#l00100">MessageStream.h:101</a></div></div>
<div class="ttc" id="aclass_game_message_html_a5613bf5264e1e3baea9464ab89c6a039a514262f8c0e4b06fdbf828f4ade75ba7"><div class="ttname"><a href="class_game_message.html#a5613bf5264e1e3baea9464ab89c6a039a514262f8c0e4b06fdbf828f4ade75ba7">GameMessage::MSG_SELF_DESTRUCT</a></div><div class="ttdeci">@ MSG_SELF_DESTRUCT</div><div class="ttdoc">Destroys a player&#39;s units (for copy protection or to quit to observer)</div><div class="ttdef"><b>Definition</b> <a href="_message_stream_8h_source.html#l00590">MessageStream.h:590</a></div></div>
<div class="ttc" id="aclass_game_message_html_a5613bf5264e1e3baea9464ab89c6a039a885c0a07608d8d1d944fffab8f0e5c12"><div class="ttname"><a href="class_game_message.html#a5613bf5264e1e3baea9464ab89c6a039a885c0a07608d8d1d944fffab8f0e5c12">GameMessage::MSG_CLEAR_GAME_DATA</a></div><div class="ttdeci">@ MSG_CLEAR_GAME_DATA</div><div class="ttdoc">Clear all game data in memory.</div><div class="ttdef"><b>Definition</b> <a href="_message_stream_8h_source.html#l00154">MessageStream.h:154</a></div></div>
<div class="ttc" id="aclass_game_message_html_a5613bf5264e1e3baea9464ab89c6a039a95eb1470575b0ae6b00969f7b1dc9a82"><div class="ttname"><a href="class_game_message.html#a5613bf5264e1e3baea9464ab89c6a039a95eb1470575b0ae6b00969f7b1dc9a82">GameMessage::MSG_LOGIC_CRC</a></div><div class="ttdeci">@ MSG_LOGIC_CRC</div><div class="ttdoc">CRC from the logic passed around in a network game :)</div><div class="ttdef"><b>Definition</b> <a href="_message_stream_8h_source.html#l00592">MessageStream.h:592</a></div></div>
<div class="ttc" id="aclass_game_message_list_html_a2e694a9a973979d64f5093a8c8751f86"><div class="ttname"><a href="class_game_message_list.html#a2e694a9a973979d64f5093a8c8751f86">GameMessageList::getFirstMessage</a></div><div class="ttdeci">GameMessage * getFirstMessage(void)</div><div class="ttdoc">Update system.</div><div class="ttdef"><b>Definition</b> <a href="_message_stream_8h_source.html#l00701">MessageStream.h:701</a></div></div>
<div class="ttc" id="aclass_game_slot_html"><div class="ttname"><a href="class_game_slot.html">GameSlot</a></div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00060">GameInfo.h:61</a></div></div>
<div class="ttc" id="aclass_game_slot_html_a00022f447c9409f0452671cfe3e710b1"><div class="ttname"><a href="class_game_slot.html#a00022f447c9409f0452671cfe3e710b1">GameSlot::saveOffOriginalInfo</a></div><div class="ttdeci">void saveOffOriginalInfo(void)</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00083">GameInfo.cpp:83</a></div></div>
<div class="ttc" id="aclass_game_slot_html_a02e19a62360f323af3b58b8f1febc1df"><div class="ttname"><a href="class_game_slot.html#a02e19a62360f323af3b58b8f1febc1df">GameSlot::setStartPos</a></div><div class="ttdeci">void setStartPos(Int startPos)</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00081">GameInfo.h:81</a></div></div>
<div class="ttc" id="aclass_game_slot_html_a0873a19870745dbe58a9dd9e25b18e70"><div class="ttname"><a href="class_game_slot.html#a0873a19870745dbe58a9dd9e25b18e70">GameSlot::getState</a></div><div class="ttdeci">SlotState getState(void) const</div><div class="ttdoc">Get the slot state.</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00076">GameInfo.h:76</a></div></div>
<div class="ttc" id="aclass_game_slot_html_a097db5289810a6b0d8886c0a60eda47c"><div class="ttname"><a href="class_game_slot.html#a097db5289810a6b0d8886c0a60eda47c">GameSlot::getPlayerTemplate</a></div><div class="ttdeci">Int getPlayerTemplate(void) const</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00089">GameInfo.h:89</a></div></div>
<div class="ttc" id="aclass_game_slot_html_a33de4f6783077e7b376774a01c1afa86"><div class="ttname"><a href="class_game_slot.html#a33de4f6783077e7b376774a01c1afa86">GameSlot::setPlayerTemplate</a></div><div class="ttdeci">void setPlayerTemplate(Int playerTemplate)</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00084">GameInfo.h:84</a></div></div>
<div class="ttc" id="aclass_game_slot_html_a345769e8467aeb9ace50242c5e01a758"><div class="ttname"><a href="class_game_slot.html#a345769e8467aeb9ace50242c5e01a758">GameSlot::getStartPos</a></div><div class="ttdeci">Int getStartPos(void) const</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00082">GameInfo.h:82</a></div></div>
<div class="ttc" id="aclass_game_slot_html_a427e84b7f792735c015b98e36b54d0a7"><div class="ttname"><a href="class_game_slot.html#a427e84b7f792735c015b98e36b54d0a7">GameSlot::isOccupied</a></div><div class="ttdeci">Bool isOccupied(void) const</div><div class="ttdoc">Is this slot occupied (by a human or an AI)?</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00255">GameInfo.cpp:255</a></div></div>
<div class="ttc" id="aclass_game_slot_html_a56ae6a4b522cefb0309f257fd5f998c6"><div class="ttname"><a href="class_game_slot.html#a56ae6a4b522cefb0309f257fd5f998c6">GameSlot::isAI</a></div><div class="ttdeci">Bool isAI(void) const</div><div class="ttdoc">Is this slot occupied by an AI?</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00260">GameInfo.cpp:260</a></div></div>
<div class="ttc" id="aclass_game_slot_html_a80adc49e687dd28bf330b881247cd7fb"><div class="ttname"><a href="class_game_slot.html#a80adc49e687dd28bf330b881247cd7fb">GameSlot::setColor</a></div><div class="ttdeci">void setColor(Int color)</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00078">GameInfo.h:78</a></div></div>
<div class="ttc" id="aclass_game_slot_html_a9b32369af7f5fd37c9eba1cbd30f4738"><div class="ttname"><a href="class_game_slot.html#a9b32369af7f5fd37c9eba1cbd30f4738">GameSlot::isHuman</a></div><div class="ttdeci">Bool isHuman(void) const</div><div class="ttdoc">Is this slot occupied by a human player?</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8cpp_source.html#l00250">GameInfo.cpp:250</a></div></div>
<div class="ttc" id="aclass_game_slot_html_ae34ae3ab00e825e289ccf0d18fd49625"><div class="ttname"><a href="class_game_slot.html#ae34ae3ab00e825e289ccf0d18fd49625">GameSlot::getTeamNumber</a></div><div class="ttdeci">Int getTeamNumber(void) const</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00092">GameInfo.h:92</a></div></div>
<div class="ttc" id="aclass_game_slot_html_afb54c162a9a3bdae4b64cfb50aa2f10f"><div class="ttname"><a href="class_game_slot.html#afb54c162a9a3bdae4b64cfb50aa2f10f">GameSlot::getName</a></div><div class="ttdeci">UnicodeString getName(void) const</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00095">GameInfo.h:95</a></div></div>
<div class="ttc" id="aclass_game_slot_html_affc251c6fd75f08adbafa455d7d78c1f"><div class="ttname"><a href="class_game_slot.html#affc251c6fd75f08adbafa455d7d78c1f">GameSlot::getColor</a></div><div class="ttdeci">Int getColor(void) const</div><div class="ttdef"><b>Definition</b> <a href="_game_info_8h_source.html#l00079">GameInfo.h:79</a></div></div>
<div class="ttc" id="aclass_general_persona_html"><div class="ttname"><a href="class_general_persona.html">GeneralPersona</a></div><div class="ttdef"><b>Definition</b> <a href="_challenge_generals_8h_source.html#l00048">ChallengeGenerals.h:49</a></div></div>
<div class="ttc" id="aclass_general_persona_html_a87a510feeeb6446ababb9bdbd1629568"><div class="ttname"><a href="class_general_persona.html#a87a510feeeb6446ababb9bdbd1629568">GeneralPersona::isStartingEnabled</a></div><div class="ttdeci">const Bool isStartingEnabled() const</div><div class="ttdef"><b>Definition</b> <a href="_challenge_generals_8h_source.html#l00089">ChallengeGenerals.h:89</a></div></div>
<div class="ttc" id="aclass_geometry_info_html_a82ed0ab3866c6fac48a8a8251470a4ab"><div class="ttname"><a href="class_geometry_info.html#a82ed0ab3866c6fac48a8a8251470a4ab">GeometryInfo::getBoundingSphereRadius</a></div><div class="ttdeci">Real getBoundingSphereRadius() const</div><div class="ttdef"><b>Definition</b> <a href="_geometry_8h_source.html#l00151">Geometry.h:151</a></div></div>
<div class="ttc" id="aclass_ghost_object_manager_html"><div class="ttname"><a href="class_ghost_object_manager.html">GhostObjectManager</a></div><div class="ttdef"><b>Definition</b> <a href="_ghost_object_8h_source.html#l00081">GhostObject.h:82</a></div></div>
<div class="ttc" id="aclass_i_n_i_html"><div class="ttname"><a href="class_i_n_i.html">INI</a></div><div class="ttdef"><b>Definition</b> <a href="_game_engine_2_include_2_common_2_i_n_i_8h_source.html#l00168">INI.h:169</a></div></div>
<div class="ttc" id="aclass_i_n_i_html_a4895c47ddf2985ef600c112597649998"><div class="ttname"><a href="class_i_n_i.html#a4895c47ddf2985ef600c112597649998">INI::load</a></div><div class="ttdeci">void load(AsciiString filename, INILoadType loadType, Xfer *pXfer)</div><div class="ttdoc">load INI file</div><div class="ttdef"><b>Definition</b> <a href="_game_engine_2_source_2_common_2_i_n_i_2_i_n_i_8cpp_source.html#l00351">INI.cpp:351</a></div></div>
<div class="ttc" id="aclass_latch_restore_html"><div class="ttname"><a href="class_latch_restore.html">LatchRestore</a></div><div class="ttdef"><b>Definition</b> <a href="_latch_restore_8h_source.html#l00096">LatchRestore.h:97</a></div></div>
<div class="ttc" id="aclass_load_screen_html"><div class="ttname"><a href="class_load_screen.html">LoadScreen</a></div><div class="ttdef"><b>Definition</b> <a href="_load_screen_8h_source.html#l00057">LoadScreen.h:58</a></div></div>
<div class="ttc" id="aclass_map_meta_data_html"><div class="ttname"><a href="class_map_meta_data.html">MapMetaData</a></div><div class="ttdef"><b>Definition</b> <a href="_map_util_8h_source.html#l00074">MapUtil.h:75</a></div></div>
<div class="ttc" id="aclass_map_meta_data_html_a0f980135518636fcfde7a2e06bd25548"><div class="ttname"><a href="class_map_meta_data.html#a0f980135518636fcfde7a2e06bd25548">MapMetaData::m_numPlayers</a></div><div class="ttdeci">Int m_numPlayers</div><div class="ttdef"><b>Definition</b> <a href="_map_util_8h_source.html#l00080">MapUtil.h:80</a></div></div>
<div class="ttc" id="aclass_map_meta_data_html_a966662364b537af4ff412219bcb1106a"><div class="ttname"><a href="class_map_meta_data.html#a966662364b537af4ff412219bcb1106a">MapMetaData::m_waypoints</a></div><div class="ttdeci">WaypointMap m_waypoints</div><div class="ttdef"><b>Definition</b> <a href="_map_util_8h_source.html#l00089">MapUtil.h:89</a></div></div>
<div class="ttc" id="aclass_map_object_html"><div class="ttname"><a href="class_map_object.html">MapObject</a></div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00078">MapObject.h:79</a></div></div>
<div class="ttc" id="aclass_map_object_html_a20f6a62e3ac2e6370afdde01255d7771"><div class="ttname"><a href="class_map_object.html#a20f6a62e3ac2e6370afdde01255d7771">MapObject::setName</a></div><div class="ttdeci">void setName(AsciiString name)</div><div class="ttdoc">Sets the object name.</div><div class="ttdef"><b>Definition</b> <a href="_world_height_map_8cpp_source.html#l00342">WorldHeightMap.cpp:342</a></div></div>
<div class="ttc" id="aclass_map_object_html_a28c0b1eed74cc71be3e361444414a0bc"><div class="ttname"><a href="class_map_object.html#a28c0b1eed74cc71be3e361444414a0bc">MapObject::getLocation</a></div><div class="ttdeci">const Coord3D * getLocation(void) const</div><div class="ttdoc">Get the center point.</div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00126">MapObject.h:126</a></div></div>
<div class="ttc" id="aclass_map_object_html_a43d8ebadf0ff0a0d5c5fbcf90acdbe31"><div class="ttname"><a href="class_map_object.html#a43d8ebadf0ff0a0d5c5fbcf90acdbe31">MapObject::getThingTemplate</a></div><div class="ttdeci">const ThingTemplate * getThingTemplate(void) const</div><div class="ttdef"><b>Definition</b> <a href="_world_height_map_8cpp_source.html#l00364">WorldHeightMap.cpp:364</a></div></div>
<div class="ttc" id="aclass_map_object_html_a814161c97e5b497ab631333411e86a28"><div class="ttname"><a href="class_map_object.html#a814161c97e5b497ab631333411e86a28">MapObject::getProperties</a></div><div class="ttdeci">Dict * getProperties()</div><div class="ttdoc">return the object&#39;s property sheet.</div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00123">MapObject.h:123</a></div></div>
<div class="ttc" id="aclass_map_object_html_a828e198ddc383dc90586fdab44065575"><div class="ttname"><a href="class_map_object.html#a828e198ddc383dc90586fdab44065575">MapObject::getFirstMapObject</a></div><div class="ttdeci">static MapObject * getFirstMapObject(void)</div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00182">MapObject.h:182</a></div></div>
<div class="ttc" id="aclass_map_object_html_a8e43ce383edfca39680e698ed3b93f57"><div class="ttname"><a href="class_map_object.html#a8e43ce383edfca39680e698ed3b93f57">MapObject::getFlag</a></div><div class="ttdeci">Bool getFlag(Int flag) const</div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00141">MapObject.h:141</a></div></div>
<div class="ttc" id="aclass_map_object_html_a93586c6d08a76ab16102a72199730ff6"><div class="ttname"><a href="class_map_object.html#a93586c6d08a76ab16102a72199730ff6">MapObject::getName</a></div><div class="ttdeci">AsciiString getName(void) const</div><div class="ttdoc">Gets the object name.</div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00130">MapObject.h:130</a></div></div>
<div class="ttc" id="aclass_map_object_html_a9c57ed617e184687a50bf21eed9e4f8b"><div class="ttname"><a href="class_map_object.html#a9c57ed617e184687a50bf21eed9e4f8b">MapObject::setThingTemplate</a></div><div class="ttdeci">void setThingTemplate(const ThingTemplate *thing)</div><div class="ttdoc">set template</div><div class="ttdef"><b>Definition</b> <a href="_world_height_map_8cpp_source.html#l00335">WorldHeightMap.cpp:335</a></div></div>
<div class="ttc" id="aclass_map_object_html_ad84208bcfeba66aaf59e6412b282f235"><div class="ttname"><a href="class_map_object.html#ad84208bcfeba66aaf59e6412b282f235">MapObject::getNext</a></div><div class="ttdeci">MapObject * getNext(void) const</div><div class="ttdoc">Next map object in the list. Not a copy, don&#39;t delete it.</div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00134">MapObject.h:134</a></div></div>
<div class="ttc" id="aclass_map_object_html_adbb94f89e42f756f52a2625e4ee3eb61"><div class="ttname"><a href="class_map_object.html#adbb94f89e42f756f52a2625e4ee3eb61">MapObject::getAngle</a></div><div class="ttdeci">Real getAngle(void) const</div><div class="ttdoc">Get the angle.</div><div class="ttdef"><b>Definition</b> <a href="_map_object_8h_source.html#l00127">MapObject.h:127</a></div></div>
<div class="ttc" id="aclass_memory_pool_object_html_a39991eb8d6e0a3ef336a1551005753b1"><div class="ttname"><a href="class_memory_pool_object.html#a39991eb8d6e0a3ef336a1551005753b1">MemoryPoolObject::deleteInstance</a></div><div class="ttdeci">void deleteInstance()</div><div class="ttdef"><b>Definition</b> <a href="_game_memory_8h_source.html#l00730">GameMemory.h:730</a></div></div>
<div class="ttc" id="aclass_module_data_html"><div class="ttname"><a href="class_module_data.html">ModuleData</a></div><div class="ttdef"><b>Definition</b> <a href="_module_8h_source.html#l00103">Module.h:104</a></div></div>
<div class="ttc" id="aclass_module_data_html_aedbebada0c51983996f480cbf869b413"><div class="ttname"><a href="class_module_data.html#aedbebada0c51983996f480cbf869b413">ModuleData::getAsW3DModelDrawModuleData</a></div><div class="ttdeci">virtual const W3DModelDrawModuleData * getAsW3DModelDrawModuleData() const</div><div class="ttdef"><b>Definition</b> <a href="_module_8h_source.html#l00115">Module.h:115</a></div></div>
<div class="ttc" id="aclass_module_info_html"><div class="ttname"><a href="class_module_info.html">ModuleInfo</a></div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00250">ThingTemplate.h:251</a></div></div>
<div class="ttc" id="aclass_module_info_html_aa17e7c7922005d839dfeb9ce6f1bf44a"><div class="ttname"><a href="class_module_info.html#aa17e7c7922005d839dfeb9ce6f1bf44a">ModuleInfo::getCount</a></div><div class="ttdeci">Int getCount() const</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00284">ThingTemplate.h:284</a></div></div>
<div class="ttc" id="aclass_module_info_html_ae97b67d3db4f10e2f3909cdf5f2e4b80"><div class="ttname"><a href="class_module_info.html#ae97b67d3db4f10e2f3909cdf5f2e4b80">ModuleInfo::getNthData</a></div><div class="ttdeci">const ModuleData * getNthData(Int i) const</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00317">ThingTemplate.h:317</a></div></div>
<div class="ttc" id="aclass_mouse_html_a2d9117eb7411c5d3430c46bbb8660923aefef73e9eaae3495c333e519591ec824"><div class="ttname"><a href="class_mouse.html#a2d9117eb7411c5d3430c46bbb8660923aefef73e9eaae3495c333e519591ec824">Mouse::ARROW</a></div><div class="ttdeci">@ ARROW</div><div class="ttdef"><b>Definition</b> <a href="_mouse_8h_source.html#l00163">Mouse.h:163</a></div></div>
<div class="ttc" id="aclass_object_html"><div class="ttname"><a href="class_object.html">Object</a></div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00163">Object.h:164</a></div></div>
<div class="ttc" id="aclass_object_html_a11f54efedb1a62160740358a9bd666cd"><div class="ttname"><a href="class_object.html#a11f54efedb1a62160740358a9bd666cd">Object::setStatus</a></div><div class="ttdeci">void setStatus(ObjectStatusMaskType objectStatus, Bool set=true)</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l00978">Object.cpp:978</a></div></div>
<div class="ttc" id="aclass_object_html_a12a0ae5b7f0fbf915ba95bd4e5a85ab2"><div class="ttname"><a href="class_object.html#a12a0ae5b7f0fbf915ba95bd4e5a85ab2">Object::friend_deleteInstance</a></div><div class="ttdeci">void friend_deleteInstance()</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00414">Object.h:414</a></div></div>
<div class="ttc" id="aclass_object_html_a1617ab209b1b50a01e0c2e68bff15de9"><div class="ttname"><a href="class_object.html#a1617ab209b1b50a01e0c2e68bff15de9">Object::friend_bindToDrawable</a></div><div class="ttdeci">void friend_bindToDrawable(Drawable *draw)</div><div class="ttdoc">set drawable association. for use ONLY by GameLogic!</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l02975">Object.cpp:2975</a></div></div>
<div class="ttc" id="aclass_object_html_a1b678192887e2c7f6b97af5f36d08a30"><div class="ttname"><a href="class_object.html#a1b678192887e2c7f6b97af5f36d08a30">Object::isInList</a></div><div class="ttdeci">Bool isInList(Object **pListHead) const</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l02690">Object.cpp:2690</a></div></div>
<div class="ttc" id="aclass_object_html_a1d1b6d9787b5fd41324930b71427fc95"><div class="ttname"><a href="class_object.html#a1d1b6d9787b5fd41324930b71427fc95">Object::getDrawable</a></div><div class="ttdeci">Drawable * getDrawable() const</div><div class="ttdoc">drawable (if any) bound to obj</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00187">Object.h:187</a></div></div>
<div class="ttc" id="aclass_object_html_a2e29bc0d9a6d865db290f4f74d2d3595"><div class="ttname"><a href="class_object.html#a2e29bc0d9a6d865db290f4f74d2d3595">Object::hasAnySpecialPower</a></div><div class="ttdeci">Bool hasAnySpecialPower() const</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l03082">Object.cpp:3082</a></div></div>
<div class="ttc" id="aclass_object_html_a385c1cb6707129788e07e5e24568b6c4"><div class="ttname"><a href="class_object.html#a385c1cb6707129788e07e5e24568b6c4">Object::getControllingPlayer</a></div><div class="ttdeci">Player * getControllingPlayer() const</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l01599">Object.cpp:1599</a></div></div>
<div class="ttc" id="aclass_object_html_a3f8804c815acb4c685bdd0fce6cae78c"><div class="ttname"><a href="class_object.html#a3f8804c815acb4c685bdd0fce6cae78c">Object::getNextObject</a></div><div class="ttdeci">Object * getNextObject()</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00179">Object.h:179</a></div></div>
<div class="ttc" id="aclass_object_html_a406550409b828a9b9985f828f43d2f40"><div class="ttname"><a href="class_object.html#a406550409b828a9b9985f828f43d2f40">Object::isDestroyed</a></div><div class="ttdeci">Bool isDestroyed() const</div><div class="ttdoc">Returns TRUE if object has been destroyed.</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00213">Object.h:213</a></div></div>
<div class="ttc" id="aclass_object_html_a455e7057ef0ad7f34470dbd10841fb3c"><div class="ttname"><a href="class_object.html#a455e7057ef0ad7f34470dbd10841fb3c">Object::isLocallyControlled</a></div><div class="ttdeci">Bool isLocallyControlled() const</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l01693">Object.cpp:1693</a></div></div>
<div class="ttc" id="aclass_object_html_a479266462a8ceb0be975d351f259bfa4"><div class="ttname"><a href="class_object.html#a479266462a8ceb0be975d351f259bfa4">Object::getGeometryInfo</a></div><div class="ttdeci">const GeometryInfo &amp; getGeometryInfo() const</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00273">Object.h:273</a></div></div>
<div class="ttc" id="aclass_object_html_a551e20771c012a247a605df8795a097a"><div class="ttname"><a href="class_object.html#a551e20771c012a247a605df8795a097a">Object::updateObjValuesFromMapProperties</a></div><div class="ttdeci">void updateObjValuesFromMapProperties(Dict *properties)</div><div class="ttdoc">Brings in properties set in the editor.</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l03449">Object.cpp:3449</a></div></div>
<div class="ttc" id="aclass_object_html_a56bfc96e67806256d53a74ac0a7e9c64"><div class="ttname"><a href="class_object.html#a56bfc96e67806256d53a74ac0a7e9c64">Object::onDestroy</a></div><div class="ttdeci">void onDestroy()</div><div class="ttdoc">run during TheGameLogic::destroyObject</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l00746">Object.cpp:746</a></div></div>
<div class="ttc" id="aclass_object_html_a5cc06ec18801e7edc6f92a4dbbff89e3"><div class="ttname"><a href="class_object.html#a5cc06ec18801e7edc6f92a4dbbff89e3">Object::setLayer</a></div><div class="ttdeci">void setLayer(PathfindLayerEnum layer)</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l02723">Object.cpp:2723</a></div></div>
<div class="ttc" id="aclass_object_html_a6c17829820a29ded73578abd29906943"><div class="ttname"><a href="class_object.html#a6c17829820a29ded73578abd29906943">Object::getID</a></div><div class="ttdeci">ObjectID getID() const</div><div class="ttdoc">this object&#39;s unique ID</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00185">Object.h:185</a></div></div>
<div class="ttc" id="aclass_object_html_a7c53b900c1a2fad0076a2cfd80a8f53f"><div class="ttname"><a href="class_object.html#a7c53b900c1a2fad0076a2cfd80a8f53f">Object::removeFromList</a></div><div class="ttdeci">void removeFromList(Object **pListHead)</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l02785">Object.cpp:2785</a></div></div>
<div class="ttc" id="aclass_object_html_a807afc5d357eb6d93cdfde600b8f6b80"><div class="ttname"><a href="class_object.html#a807afc5d357eb6d93cdfde600b8f6b80">Object::isDisabled</a></div><div class="ttdeci">Bool isDisabled() const</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00583">Object.h:583</a></div></div>
<div class="ttc" id="aclass_object_html_a825a65435a8edc9a9176522bc4111d21"><div class="ttname"><a href="class_object.html#a825a65435a8edc9a9176522bc4111d21">Object::isMassSelectable</a></div><div class="ttdeci">Bool isMassSelectable() const</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l03048">Object.cpp:3048</a></div></div>
<div class="ttc" id="aclass_object_html_a9020ef44a0f8ae547f3321e7e9b7640c"><div class="ttname"><a href="class_object.html#a9020ef44a0f8ae547f3321e7e9b7640c">Object::checkDisabledStatus</a></div><div class="ttdeci">void checkDisabledStatus()</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l02341">Object.cpp:2341</a></div></div>
<div class="ttc" id="aclass_object_html_ac31c977e6871a6a24c903af3a0210f26"><div class="ttname"><a href="class_object.html#ac31c977e6871a6a24c903af3a0210f26">Object::getBehaviorModules</a></div><div class="ttdeci">BehaviorModule ** getBehaviorModules() const</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00288">Object.h:288</a></div></div>
<div class="ttc" id="aclass_object_html_ac50efcf2ad2e22d1f83125ac238c6f45"><div class="ttname"><a href="class_object.html#ac50efcf2ad2e22d1f83125ac238c6f45">Object::getAI</a></div><div class="ttdeci">AIUpdateInterface * getAI()</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00301">Object.h:301</a></div></div>
<div class="ttc" id="aclass_object_html_ad67789da3db49c3827e5a2abf8fe68a0"><div class="ttname"><a href="class_object.html#ad67789da3db49c3827e5a2abf8fe68a0">Object::getAIUpdateInterface</a></div><div class="ttdeci">AIUpdateInterface * getAIUpdateInterface()</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00298">Object.h:298</a></div></div>
<div class="ttc" id="aclass_object_html_adc11c0b96c1a4f39b5db1741457f0fda"><div class="ttname"><a href="class_object.html#adc11c0b96c1a4f39b5db1741457f0fda">Object::prependToList</a></div><div class="ttdeci">void prependToList(Object **pListHead)</div><div class="ttdef"><b>Definition</b> <a href="_object_8cpp_source.html#l02710">Object.cpp:2710</a></div></div>
<div class="ttc" id="aclass_object_html_ae01ce1bc174eda3f452d632f4f73af05"><div class="ttname"><a href="class_object.html#ae01ce1bc174eda3f452d632f4f73af05">Object::getDisabledFlags</a></div><div class="ttdeci">DisabledMaskType getDisabledFlags() const</div><div class="ttdef"><b>Definition</b> <a href="_object_8h_source.html#l00582">Object.h:582</a></div></div>
<div class="ttc" id="aclass_overridable_html_a05af2dea9b733421367c222b163296f3"><div class="ttname"><a href="class_overridable.html#a05af2dea9b733421367c222b163296f3">Overridable::deleteOverrides</a></div><div class="ttdeci">Overridable * deleteOverrides(void)</div><div class="ttdef"><b>Definition</b> <a href="_overridable_8h_source.html#l00105">Overridable.h:105</a></div></div>
<div class="ttc" id="aclass_partition_manager_html"><div class="ttname"><a href="class_partition_manager.html">PartitionManager</a></div><div class="ttdef"><b>Definition</b> <a href="_partition_manager_8h_source.html#l01231">PartitionManager.h:1232</a></div></div>
<div class="ttc" id="aclass_player_html"><div class="ttname"><a href="class_player.html">Player</a></div><div class="ttdef"><b>Definition</b> <a href="_player_8h_source.html#l00208">Player.h:209</a></div></div>
<div class="ttc" id="aclass_player_html_a01de9a4ddde29da6e22a1fba4987d4ce"><div class="ttname"><a href="class_player.html#a01de9a4ddde29da6e22a1fba4987d4ce">Player::getCurrentSelectionAsAIGroup</a></div><div class="ttdeci">void getCurrentSelectionAsAIGroup(AIGroup *group)</div><div class="ttdef"><b>Definition</b> <a href="_player_8cpp_source.html#l03741">Player.cpp:3741</a></div></div>
<div class="ttc" id="aclass_player_html_a055ea4f18367e339df53e90dd408acba"><div class="ttname"><a href="class_player.html#a055ea4f18367e339df53e90dd408acba">Player::setPlayerRelationship</a></div><div class="ttdeci">void setPlayerRelationship(const Player *that, Relationship r)</div><div class="ttdoc">set the relationship between this-&gt;that. (note that this doesn&#39;t affect the that-&gt;this relationship....</div><div class="ttdef"><b>Definition</b> <a href="_player_8cpp_source.html#l00607">Player.cpp:607</a></div></div>
<div class="ttc" id="aclass_player_html_a0edc41192c6424e9b37abb5c024d9b74"><div class="ttname"><a href="class_player.html#a0edc41192c6424e9b37abb5c024d9b74">Player::getDefaultTeam</a></div><div class="ttdeci">Team * getDefaultTeam()</div><div class="ttdef"><b>Definition</b> <a href="_player_8h_source.html#l00512">Player.h:512</a></div></div>
<div class="ttc" id="aclass_player_html_a1189c38f2319c6d0272a482508d06b05"><div class="ttname"><a href="class_player.html#a1189c38f2319c6d0272a482508d06b05">Player::isPlayerActive</a></div><div class="ttdeci">Bool isPlayerActive(void) const</div><div class="ttdef"><b>Definition</b> <a href="_player_8cpp_source.html#l03955">Player.cpp:3955</a></div></div>
<div class="ttc" id="aclass_player_html_a35d214720d51f6897d172a6086110098"><div class="ttname"><a href="class_player.html#a35d214720d51f6897d172a6086110098">Player::addAIGroupToCurrentSelection</a></div><div class="ttdeci">void addAIGroupToCurrentSelection(AIGroup *group)</div><div class="ttdef"><b>Definition</b> <a href="_player_8cpp_source.html#l03805">Player.cpp:3805</a></div></div>
<div class="ttc" id="aclass_player_html_a4527b616c20539cd97695ebb016370c8"><div class="ttname"><a href="class_player.html#a4527b616c20539cd97695ebb016370c8">Player::setCurrentlySelectedAIGroup</a></div><div class="ttdeci">void setCurrentlySelectedAIGroup(AIGroup *group)</div><div class="ttdef"><b>Definition</b> <a href="_player_8cpp_source.html#l03750">Player.cpp:3750</a></div></div>
<div class="ttc" id="aclass_player_html_a88975e3025e7f2cc48539b8ede59f556"><div class="ttname"><a href="class_player.html#a88975e3025e7f2cc48539b8ede59f556">Player::onStructureConstructionComplete</a></div><div class="ttdeci">void onStructureConstructionComplete(Object *builder, Object *structure, Bool isRebuild)</div><div class="ttdoc">a structure that was under construction has become completed</div><div class="ttdef"><b>Definition</b> <a href="_player_8cpp_source.html#l01668">Player.cpp:1668</a></div></div>
<div class="ttc" id="aclass_player_html_a8b5ebaa7ac0053aa545d5dfa4be5bbcd"><div class="ttname"><a href="class_player.html#a8b5ebaa7ac0053aa545d5dfa4be5bbcd">Player::addSkillPoints</a></div><div class="ttdeci">Bool addSkillPoints(Int delta)</div><div class="ttdoc">returns TRUE if the player gained/lost levels as a result.</div><div class="ttdef"><b>Definition</b> <a href="_player_8cpp_source.html#l02469">Player.cpp:2469</a></div></div>
<div class="ttc" id="aclass_player_html_a965771701be0d9bdafdffe39c3b4e71d"><div class="ttname"><a href="class_player.html#a965771701be0d9bdafdffe39c3b4e71d">Player::iterateObjects</a></div><div class="ttdeci">void iterateObjects(ObjectIterateFunc func, void *userData) const</div><div class="ttdef"><b>Definition</b> <a href="_player_8cpp_source.html#l01798">Player.cpp:1798</a></div></div>
<div class="ttc" id="aclass_player_html_ab0e83f07d1399949f6162c31b7eda951"><div class="ttname"><a href="class_player.html#ab0e83f07d1399949f6162c31b7eda951">Player::getPlayerIndex</a></div><div class="ttdeci">PlayerIndex getPlayerIndex() const</div><div class="ttdef"><b>Definition</b> <a href="_player_8h_source.html#l00256">Player.h:256</a></div></div>
<div class="ttc" id="aclass_player_html_abc2ed87b6c05581e558b847857b6765d"><div class="ttname"><a href="class_player.html#abc2ed87b6c05581e558b847857b6765d">Player::getPlayerMask</a></div><div class="ttdeci">PlayerMaskType getPlayerMask() const</div><div class="ttdoc">return a bitmask that is unique to this player.</div><div class="ttdef"><b>Definition</b> <a href="_player_8h_source.html#l00259">Player.h:259</a></div></div>
<div class="ttc" id="aclass_player_html_ad8c11f93daa076d7ee15c3a6579fc8ea"><div class="ttname"><a href="class_player.html#ad8c11f93daa076d7ee15c3a6579fc8ea">Player::getPlayerType</a></div><div class="ttdeci">PlayerType getPlayerType() const</div><div class="ttdoc">return the type of controller</div><div class="ttdef"><b>Definition</b> <a href="_player_8h_source.html#l00253">Player.h:253</a></div></div>
<div class="ttc" id="aclass_player_html_ae0fd3a0c125a79124fbec71815c8fba4"><div class="ttname"><a href="class_player.html#ae0fd3a0c125a79124fbec71815c8fba4">Player::onUnitCreated</a></div><div class="ttdeci">void onUnitCreated(Object *factory, Object *unit)</div><div class="ttdoc">A unit was just created and is ready to control.</div><div class="ttdef"><b>Definition</b> <a href="_player_8cpp_source.html#l01590">Player.cpp:1590</a></div></div>
<div class="ttc" id="aclass_player_html_af4f86ea6bed3a1a4aec20dee8caf6c88"><div class="ttname"><a href="class_player.html#af4f86ea6bed3a1a4aec20dee8caf6c88">Player::getPlayerDisplayName</a></div><div class="ttdeci">UnicodeString getPlayerDisplayName()</div><div class="ttdef"><b>Definition</b> <a href="_player_8h_source.html#l00223">Player.h:223</a></div></div>
<div class="ttc" id="aclass_player_html_af89ee8c6dbb2904e3cb4c86ea01cfd06"><div class="ttname"><a href="class_player.html#af89ee8c6dbb2904e3cb4c86ea01cfd06">Player::onStructureCreated</a></div><div class="ttdeci">void onStructureCreated(Object *builder, Object *structure)</div><div class="ttdoc">a structuer was just created, but is under construction</div><div class="ttdef"><b>Definition</b> <a href="_player_8cpp_source.html#l01660">Player.cpp:1660</a></div></div>
<div class="ttc" id="aclass_player_template_html"><div class="ttname"><a href="class_player_template.html">PlayerTemplate</a></div><div class="ttdef"><b>Definition</b> <a href="_player_template_8h_source.html#l00073">PlayerTemplate.h:74</a></div></div>
<div class="ttc" id="aclass_player_template_html_a5f8632f1c6458b5de88e5f6af3ccfa91"><div class="ttname"><a href="class_player_template.html#a5f8632f1c6458b5de88e5f6af3ccfa91">PlayerTemplate::isOldFaction</a></div><div class="ttdeci">Bool isOldFaction(void) const</div><div class="ttdef"><b>Definition</b> <a href="_player_template_8h_source.html#l00139">PlayerTemplate.h:139</a></div></div>
<div class="ttc" id="aclass_player_template_html_a7351c0cf4411380b95468cad521605d9"><div class="ttname"><a href="class_player_template.html#a7351c0cf4411380b95468cad521605d9">PlayerTemplate::getNameKey</a></div><div class="ttdeci">NameKeyType getNameKey() const</div><div class="ttdef"><b>Definition</b> <a href="_player_template_8h_source.html#l00082">PlayerTemplate.h:82</a></div></div>
<div class="ttc" id="aclass_player_template_html_a75fe39cbc6827fcc63b288f91ada837d"><div class="ttname"><a href="class_player_template.html#a75fe39cbc6827fcc63b288f91ada837d">PlayerTemplate::getStartingUnit</a></div><div class="ttdeci">AsciiString getStartingUnit(Int i) const</div><div class="ttdef"><b>Definition</b> <a href="_player_template_8cpp_source.html#l00132">PlayerTemplate.cpp:132</a></div></div>
<div class="ttc" id="aclass_player_template_html_aa58192adcbb169f23bc6af0ceddcba25"><div class="ttname"><a href="class_player_template.html#aa58192adcbb169f23bc6af0ceddcba25">PlayerTemplate::getStartingBuilding</a></div><div class="ttdeci">AsciiString getStartingBuilding(void) const</div><div class="ttdef"><b>Definition</b> <a href="_player_template_8h_source.html#l00098">PlayerTemplate.h:98</a></div></div>
<div class="ttc" id="aclass_player_template_html_abd70efc4be868d8ac02493f54b46987f"><div class="ttname"><a href="class_player_template.html#abd70efc4be868d8ac02493f54b46987f">PlayerTemplate::getName</a></div><div class="ttdeci">AsciiString getName() const</div><div class="ttdef"><b>Definition</b> <a href="_player_template_8h_source.html#l00083">PlayerTemplate.h:83</a></div></div>
<div class="ttc" id="aclass_player_template_html_af9ee5b148f14290cdc2d7a17ea176db5"><div class="ttname"><a href="class_player_template.html#af9ee5b148f14290cdc2d7a17ea176db5">PlayerTemplate::getDisplayName</a></div><div class="ttdeci">UnicodeString getDisplayName() const</div><div class="ttdef"><b>Definition</b> <a href="_player_template_8h_source.html#l00085">PlayerTemplate.h:85</a></div></div>
<div class="ttc" id="aclass_polygon_trigger_html"><div class="ttname"><a href="class_polygon_trigger.html">PolygonTrigger</a></div><div class="ttdef"><b>Definition</b> <a href="_polygon_trigger_8h_source.html#l00067">PolygonTrigger.h:69</a></div></div>
<div class="ttc" id="aclass_polygon_trigger_html_a68499623c02940cb78dd8d4ec33a457c"><div class="ttname"><a href="class_polygon_trigger.html#a68499623c02940cb78dd8d4ec33a457c">PolygonTrigger::getID</a></div><div class="ttdeci">Int getID(void) const</div><div class="ttdef"><b>Definition</b> <a href="_polygon_trigger_8h_source.html#l00140">PolygonTrigger.h:140</a></div></div>
<div class="ttc" id="aclass_polygon_trigger_html_ab3a5bfea73db915b19d116e1f9c15d2c"><div class="ttname"><a href="class_polygon_trigger.html#ab3a5bfea73db915b19d116e1f9c15d2c">PolygonTrigger::getNext</a></div><div class="ttdeci">PolygonTrigger * getNext(void)</div><div class="ttdef"><b>Definition</b> <a href="_polygon_trigger_8h_source.html#l00141">PolygonTrigger.h:141</a></div></div>
<div class="ttc" id="aclass_polygon_trigger_html_ad093b0b82d63c19c0a11c4b05d2f3f83"><div class="ttname"><a href="class_polygon_trigger.html#ad093b0b82d63c19c0a11c4b05d2f3f83">PolygonTrigger::getPolygonTriggerByID</a></div><div class="ttdeci">static PolygonTrigger * getPolygonTriggerByID(Int triggerID)</div><div class="ttdef"><b>Definition</b> <a href="_polygon_trigger_8cpp_source.html#l00115">PolygonTrigger.cpp:115</a></div></div>
<div class="ttc" id="aclass_polygon_trigger_html_afdbbe5145a0c821c02957e2d5ec71d43"><div class="ttname"><a href="class_polygon_trigger.html#afdbbe5145a0c821c02957e2d5ec71d43">PolygonTrigger::getFirstPolygonTrigger</a></div><div class="ttdeci">static PolygonTrigger * getFirstPolygonTrigger(void)</div><div class="ttdef"><b>Definition</b> <a href="_polygon_trigger_8h_source.html#l00108">PolygonTrigger.h:108</a></div></div>
<div class="ttc" id="aclass_profile_html_a2eef5e173080dfb289c3959241cea63b"><div class="ttname"><a href="class_profile.html#a2eef5e173080dfb289c3959241cea63b">Profile::StartRange</a></div><div class="ttdeci">static void StartRange(const char *range=0)</div><div class="ttdoc">Starts range recording.</div><div class="ttdef"><b>Definition</b> <a href="profile_8cpp_source.html#l00161">profile.cpp:161</a></div></div>
<div class="ttc" id="aclass_profile_html_af3e5146df92f171179ee7b23294dec90"><div class="ttname"><a href="class_profile.html#af3e5146df92f171179ee7b23294dec90">Profile::StopRange</a></div><div class="ttdeci">static void StopRange(const char *range=0)</div><div class="ttdoc">Stops range recording.</div><div class="ttdef"><b>Definition</b> <a href="profile_8cpp_source.html#l00265">profile.cpp:265</a></div></div>
<div class="ttc" id="aclass_script_actions_html"><div class="ttname"><a href="class_script_actions.html">ScriptActions</a></div><div class="ttdef"><b>Definition</b> <a href="_script_actions_8h_source.html#l00072">ScriptActions.h:73</a></div></div>
<div class="ttc" id="aclass_script_conditions_html"><div class="ttname"><a href="class_script_conditions.html">ScriptConditions</a></div><div class="ttdef"><b>Definition</b> <a href="_game_engine_2_include_2_game_logic_2_script_conditions_8h_source.html#l00069">ScriptConditions.h:70</a></div></div>
<div class="ttc" id="aclass_script_engine_html"><div class="ttname"><a href="class_script_engine.html">ScriptEngine</a></div><div class="ttdef"><b>Definition</b> <a href="_script_engine_8h_source.html#l00219">ScriptEngine.h:221</a></div></div>
<div class="ttc" id="aclass_script_html"><div class="ttname"><a href="class_script.html">Script</a></div><div class="ttdef"><b>Definition</b> <a href="_scripts_8h_source.html#l00604">Scripts.h:605</a></div></div>
<div class="ttc" id="aclass_script_html_a509ab330ee27705de3f369386bf57031"><div class="ttname"><a href="class_script.html#a509ab330ee27705de3f369386bf57031">Script::duplicate</a></div><div class="ttdeci">Script * duplicate(void) const</div><div class="ttdef"><b>Definition</b> <a href="_scripts_8cpp_source.html#l01003">Scripts.cpp:1003</a></div></div>
<div class="ttc" id="aclass_script_html_afdaed0fb8742f81901882ddcc048af38"><div class="ttname"><a href="class_script.html#afdaed0fb8742f81901882ddcc048af38">Script::getNext</a></div><div class="ttdeci">Script * getNext(void) const</div><div class="ttdef"><b>Definition</b> <a href="_scripts_8h_source.html#l00686">Scripts.h:686</a></div></div>
<div class="ttc" id="aclass_script_list_html"><div class="ttname"><a href="class_script_list.html">ScriptList</a></div><div class="ttdoc">List of scripts. May have one level of hierarchy in the ScriptGroup list.</div><div class="ttdef"><b>Definition</b> <a href="_scripts_8h_source.html#l01086">Scripts.h:1089</a></div></div>
<div class="ttc" id="aclass_script_list_html_a6f1c53a392d3f89ea50c2c922310fcb8"><div class="ttname"><a href="class_script_list.html#a6f1c53a392d3f89ea50c2c922310fcb8">ScriptList::addScript</a></div><div class="ttdeci">void addScript(Script *pScr, Int ndx)</div><div class="ttdef"><b>Definition</b> <a href="_scripts_8cpp_source.html#l00454">Scripts.cpp:454</a></div></div>
<div class="ttc" id="aclass_script_list_html_a6fb4b162e518f3c0a0ee4343b3744ed6"><div class="ttname"><a href="class_script_list.html#a6fb4b162e518f3c0a0ee4343b3744ed6">ScriptList::getReadScripts</a></div><div class="ttdeci">static Int getReadScripts(ScriptList *scriptLists[MAX_PLAYER_COUNT])</div><div class="ttdef"><b>Definition</b> <a href="_scripts_8cpp_source.html#l00563">Scripts.cpp:563</a></div></div>
<div class="ttc" id="aclass_script_list_html_a946ba75bdfd5fdf1f8c0d17918ccac6d"><div class="ttname"><a href="class_script_list.html#a946ba75bdfd5fdf1f8c0d17918ccac6d">ScriptList::ParseScriptsDataChunk</a></div><div class="ttdeci">static Bool ParseScriptsDataChunk(DataChunkInput &amp;file, DataChunkInfo *info, void *userData)</div><div class="ttdoc">Reads a set of scripts into m_readScripts. Use getReadScripts to access.</div><div class="ttdef"><b>Definition</b> <a href="_scripts_8cpp_source.html#l00531">Scripts.cpp:531</a></div></div>
<div class="ttc" id="aclass_script_list_html_afab0b7fd509a69aab993c5fdd4ea2ad1"><div class="ttname"><a href="class_script_list.html#afab0b7fd509a69aab993c5fdd4ea2ad1">ScriptList::getScript</a></div><div class="ttdeci">Script * getScript(void)</div><div class="ttdef"><b>Definition</b> <a href="_scripts_8h_source.html#l01116">Scripts.h:1116</a></div></div>
<div class="ttc" id="aclass_snapshot_html_a1fb8ea7071efdcde04a6a7f5772bc9e2"><div class="ttname"><a href="class_snapshot.html#a1fb8ea7071efdcde04a6a7f5772bc9e2">Snapshot::XferCRC</a></div><div class="ttdeci">friend class XferCRC</div><div class="ttdef"><b>Definition</b> <a href="_snapshot_8h_source.html#l00050">Snapshot.h:50</a></div></div>
<div class="ttc" id="aclass_stats_collector_html"><div class="ttname"><a href="class_stats_collector.html">StatsCollector</a></div><div class="ttdef"><b>Definition</b> <a href="_stats_collector_8h_source.html#l00068">StatsCollector.h:69</a></div></div>
<div class="ttc" id="aclass_subsystem_interface_html_adf4bdd5f0ee352e3beac01d65edc993a"><div class="ttname"><a href="class_subsystem_interface.html#adf4bdd5f0ee352e3beac01d65edc993a">SubsystemInterface::draw</a></div><div class="ttdeci">virtual void draw(void)</div><div class="ttdef"><b>Definition</b> <a href="_subsystem_interface_8h_source.html#l00113">SubsystemInterface.h:113</a></div></div>
<div class="ttc" id="aclass_subsystem_interface_html_af1318825b8697d6cb57c69491f04807c"><div class="ttname"><a href="class_subsystem_interface.html#af1318825b8697d6cb57c69491f04807c">SubsystemInterface::getName</a></div><div class="ttdeci">AsciiString getName(void)</div><div class="ttdef"><b>Definition</b> <a href="_subsystem_interface_8h_source.html#l00140">SubsystemInterface.h:140</a></div></div>
<div class="ttc" id="aclass_team_html"><div class="ttname"><a href="class_team.html">Team</a></div><div class="ttdef"><b>Definition</b> <a href="_team_8h_source.html#l00181">Team.h:183</a></div></div>
<div class="ttc" id="aclass_team_html_ac6c120cfa0b92e90b9d1c8c48139a0e0"><div class="ttname"><a href="class_team.html#ac6c120cfa0b92e90b9d1c8c48139a0e0">Team::setActive</a></div><div class="ttdeci">void setActive(void)</div><div class="ttdef"><b>Definition</b> <a href="_team_8h_source.html#l00312">Team.h:312</a></div></div>
<div class="ttc" id="aclass_terrain_logic_html"><div class="ttname"><a href="class_terrain_logic.html">TerrainLogic</a></div><div class="ttdef"><b>Definition</b> <a href="_terrain_logic_8h_source.html#l00217">TerrainLogic.h:219</a></div></div>
<div class="ttc" id="aclass_terrain_logic_html_af62142f26b658e470c385b5fa38016a1"><div class="ttname"><a href="class_terrain_logic.html#af62142f26b658e470c385b5fa38016a1">TerrainLogic::findBridgeAt</a></div><div class="ttdeci">virtual Bridge * findBridgeAt(const Coord3D *pLoc) const</div><div class="ttdoc">Find the bridge at a location. NULL means no bridge.</div><div class="ttdef"><b>Definition</b> <a href="_terrain_logic_8cpp_source.html#l01655">TerrainLogic.cpp:1655</a></div></div>
<div class="ttc" id="aclass_thing_html_a7120292125b19f38f560eb113fb79f72"><div class="ttname"><a href="class_thing.html#a7120292125b19f38f560eb113fb79f72">Thing::getPosition</a></div><div class="ttdeci">const Coord3D * getPosition() const</div><div class="ttdef"><b>Definition</b> <a href="_thing_8h_source.html#l00122">Thing.h:122</a></div></div>
<div class="ttc" id="aclass_thing_html_a7978985fe2e1e1b1b91bb822f62df5e9"><div class="ttname"><a href="class_thing.html#a7978985fe2e1e1b1b91bb822f62df5e9">Thing::isKindOf</a></div><div class="ttdeci">Bool isKindOf(KindOfType t) const</div><div class="ttdef"><b>Definition</b> <a href="_thing_8cpp_source.html#l00269">Thing.cpp:269</a></div></div>
<div class="ttc" id="aclass_thing_html_a8028ae31000ce547b400838afe6eb335"><div class="ttname"><a href="class_thing.html#a8028ae31000ce547b400838afe6eb335">Thing::getTemplate</a></div><div class="ttdeci">const ThingTemplate * getTemplate() const</div><div class="ttdef"><b>Definition</b> <a href="_thing_8cpp_source.html#l00094">Thing.cpp:94</a></div></div>
<div class="ttc" id="aclass_thing_html_a93da041338677d5058d9948cb424fb6f"><div class="ttname"><a href="class_thing.html#a93da041338677d5058d9948cb424fb6f">Thing::setOrientation</a></div><div class="ttdeci">void setOrientation(Real angle)</div><div class="ttdef"><b>Definition</b> <a href="_thing_8cpp_source.html#l00198">Thing.cpp:198</a></div></div>
<div class="ttc" id="aclass_thing_html_a9fcbcf27ec45b3aa4883a03a56663bd9"><div class="ttname"><a href="class_thing.html#a9fcbcf27ec45b3aa4883a03a56663bd9">Thing::setPosition</a></div><div class="ttdeci">void setPosition(const Coord3D *pos)</div><div class="ttdef"><b>Definition</b> <a href="_thing_8cpp_source.html#l00169">Thing.cpp:169</a></div></div>
<div class="ttc" id="aclass_thing_template_html"><div class="ttname"><a href="class_thing_template.html">ThingTemplate</a></div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00348">ThingTemplate.h:349</a></div></div>
<div class="ttc" id="aclass_thing_template_html_a0198b90dc4417df78d26bcf1da4daa29"><div class="ttname"><a href="class_thing_template.html#a0198b90dc4417df78d26bcf1da4daa29">ThingTemplate::getPlacementViewAngle</a></div><div class="ttdeci">Real getPlacementViewAngle(void) const</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00595">ThingTemplate.h:595</a></div></div>
<div class="ttc" id="aclass_thing_template_html_a2737061e56af11729efc010b898be704"><div class="ttname"><a href="class_thing_template.html#a2737061e56af11729efc010b898be704">ThingTemplate::getDrawModuleInfo</a></div><div class="ttdeci">const ModuleInfo &amp; getDrawModuleInfo() const</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00448">ThingTemplate.h:448</a></div></div>
<div class="ttc" id="aclass_thing_template_html_a3a76269a04cb28565f44d77af2cecebd"><div class="ttname"><a href="class_thing_template.html#a3a76269a04cb28565f44d77af2cecebd">ThingTemplate::isKindOf</a></div><div class="ttdeci">Bool isKindOf(KindOfType t) const</div><div class="ttdoc">return true iff the template has the specified kindOf flag set.</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00398">ThingTemplate.h:398</a></div></div>
<div class="ttc" id="aclass_thing_template_html_a508419e7bb9bdce6140782f2c241b6aa"><div class="ttname"><a href="class_thing_template.html#a508419e7bb9bdce6140782f2c241b6aa">ThingTemplate::getName</a></div><div class="ttdeci">const AsciiString &amp; getName() const</div><div class="ttdoc">return the name of this template</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00389">ThingTemplate.h:389</a></div></div>
<div class="ttc" id="aclass_thing_template_html_a596466af5fb261343bdae29b96bd68eb"><div class="ttname"><a href="class_thing_template.html#a596466af5fb261343bdae29b96bd68eb">ThingTemplate::getDefaultOwningSide</a></div><div class="ttdeci">const AsciiString &amp; getDefaultOwningSide() const</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00588">ThingTemplate.h:588</a></div></div>
<div class="ttc" id="aclass_thing_template_html_a7cfa59eb309ad5e9acb02cf21c152d6a"><div class="ttname"><a href="class_thing_template.html#a7cfa59eb309ad5e9acb02cf21c152d6a">ThingTemplate::getFenceWidth</a></div><div class="ttdeci">Real getFenceWidth() const</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00422">ThingTemplate.h:422</a></div></div>
<div class="ttc" id="aclass_thing_template_html_ab7d99df4c7290e60593e7b5d58961b9a"><div class="ttname"><a href="class_thing_template.html#ab7d99df4c7290e60593e7b5d58961b9a">ThingTemplate::friend_getNextTemplate</a></div><div class="ttdeci">ThingTemplate * friend_getNextTemplate() const</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00545">ThingTemplate.h:545</a></div></div>
<div class="ttc" id="aclass_thing_template_html_afb2fa64bc3507e5599a3cec2cbf85e2f"><div class="ttname"><a href="class_thing_template.html#afb2fa64bc3507e5599a3cec2cbf85e2f">ThingTemplate::isBridge</a></div><div class="ttdeci">Bool isBridge() const</div><div class="ttdef"><b>Definition</b> <a href="_thing_template_8h_source.html#l00426">ThingTemplate.h:426</a></div></div>
<div class="ttc" id="aclass_unicode_string_html"><div class="ttname"><a href="class_unicode_string.html">UnicodeString</a></div><div class="ttdef"><b>Definition</b> <a href="_unicode_string_8h_source.html#l00084">UnicodeString.h:85</a></div></div>
<div class="ttc" id="aclass_unicode_string_html_ab80e621deccff2aa3abfaebc99c5c170"><div class="ttname"><a href="class_unicode_string.html#ab80e621deccff2aa3abfaebc99c5c170">UnicodeString::str</a></div><div class="ttdeci">const WideChar * str() const</div><div class="ttdef"><b>Definition</b> <a href="_unicode_string_8h_source.html#l00346">UnicodeString.h:346</a></div></div>
<div class="ttc" id="aclass_unicode_string_html_ac14da6f02dc1c81ee9211923e9e0a786"><div class="ttname"><a href="class_unicode_string.html#ac14da6f02dc1c81ee9211923e9e0a786">UnicodeString::compare</a></div><div class="ttdeci">int compare(const UnicodeString &amp;stringSrc) const</div><div class="ttdef"><b>Definition</b> <a href="_unicode_string_8h_source.html#l00390">UnicodeString.h:390</a></div></div>
<div class="ttc" id="aclass_update_module_html_a26adefdc17fde06e53304dc8995d71bc"><div class="ttname"><a href="class_update_module.html#a26adefdc17fde06e53304dc8995d71bc">UpdateModule::getDisabledTypesToProcess</a></div><div class="ttdeci">DisabledMaskType getDisabledTypesToProcess() const</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00178">UpdateModule.h:178</a></div></div>
<div class="ttc" id="aclass_update_module_html_a29a244154731002ae604872755bbe31a"><div class="ttname"><a href="class_update_module.html#a29a244154731002ae604872755bbe31a">UpdateModule::friend_getIndexInLogic</a></div><div class="ttdeci">UPDATEMODULE_FRIEND_DECLARATOR Int friend_getIndexInLogic() const</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00214">UpdateModule.h:214</a></div></div>
<div class="ttc" id="aclass_update_module_html_a4b721623b028ed8f213e7c10fb887dd3"><div class="ttname"><a href="class_update_module.html#a4b721623b028ed8f213e7c10fb887dd3">UpdateModule::friend_getObject</a></div><div class="ttdeci">UPDATEMODULE_FRIEND_DECLARATOR const Object * friend_getObject() const</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00224">UpdateModule.h:224</a></div></div>
<div class="ttc" id="aclass_update_module_html_a751c222a6cf7ab056509da1008c7bca0"><div class="ttname"><a href="class_update_module.html#a751c222a6cf7ab056509da1008c7bca0">UpdateModule::friend_getPriority</a></div><div class="ttdeci">UPDATEMODULE_FRIEND_DECLARATOR UnsignedInt friend_getPriority() const</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00190">UpdateModule.h:190</a></div></div>
<div class="ttc" id="aclass_update_module_html_a80a8350bb3eb30648299487d2003cbb8"><div class="ttname"><a href="class_update_module.html#a80a8350bb3eb30648299487d2003cbb8">UpdateModule::friend_setNextCallFrame</a></div><div class="ttdeci">UPDATEMODULE_FRIEND_DECLARATOR void friend_setNextCallFrame(UnsignedInt frame)</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00205">UpdateModule.h:205</a></div></div>
<div class="ttc" id="aclass_update_module_html_aa37942111accd25746e982f3e6968eb8"><div class="ttname"><a href="class_update_module.html#aa37942111accd25746e982f3e6968eb8">UpdateModule::getUpdate</a></div><div class="ttdeci">virtual UpdateModuleInterface * getUpdate()</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00173">UpdateModule.h:173</a></div></div>
<div class="ttc" id="aclass_update_module_html_ac584fba98913584d40e64a90cb878487"><div class="ttname"><a href="class_update_module.html#ac584fba98913584d40e64a90cb878487">UpdateModule::friend_setIndexInLogic</a></div><div class="ttdeci">UPDATEMODULE_FRIEND_DECLARATOR void friend_setIndexInLogic(Int i)</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00219">UpdateModule.h:219</a></div></div>
<div class="ttc" id="aclass_update_module_html_acadd3ba8e983f98462e2cd3c686dbdae"><div class="ttname"><a href="class_update_module.html#acadd3ba8e983f98462e2cd3c686dbdae">UpdateModule::friend_getNextCallFrame</a></div><div class="ttdeci">UPDATEMODULE_FRIEND_DECLARATOR UnsignedInt friend_getNextCallFrame() const</div><div class="ttdef"><b>Definition</b> <a href="_update_module_8h_source.html#l00195">UpdateModule.h:195</a></div></div>
<div class="ttc" id="aclass_update_module_html_ad339accf924ac436066ca6763123de36"><div class="ttname"><a href="class_update_module.html#ad339accf924ac436066ca6763123de36">UpdateModule::update</a></div><div class="ttdeci">virtual UpdateSleepTime update()=0</div></div>
<div class="ttc" id="aclass_w3_d_model_draw_module_data_html"><div class="ttname"><a href="class_w3_d_model_draw_module_data.html">W3DModelDrawModuleData</a></div><div class="ttdef"><b>Definition</b> <a href="_w3_d_model_draw_8h_source.html#l00281">W3DModelDraw.h:282</a></div></div>
<div class="ttc" id="aclass_w3_d_model_draw_module_data_html_ab2c7b1c8a269e8e39fd8c2dfd6813aa7"><div class="ttname"><a href="class_w3_d_model_draw_module_data.html#ab2c7b1c8a269e8e39fd8c2dfd6813aa7">W3DModelDrawModuleData::getBestModelNameForWB</a></div><div class="ttdeci">AsciiString getBestModelNameForWB(const ModelConditionFlags &amp;c) const</div><div class="ttdef"><b>Definition</b> <a href="_w3_d_model_draw_8cpp_source.html#l01138">W3DModelDraw.cpp:1138</a></div></div>
<div class="ttc" id="aclass_water_transparency_setting_html"><div class="ttname"><a href="class_water_transparency_setting.html">WaterTransparencySetting</a></div><div class="ttdef"><b>Definition</b> <a href="_water_8h_source.html#l00077">Water.h:78</a></div></div>
<div class="ttc" id="aclass_waypoint_html"><div class="ttname"><a href="class_waypoint.html">Waypoint</a></div><div class="ttdef"><b>Definition</b> <a href="_terrain_logic_8h_source.html#l00064">TerrainLogic.h:65</a></div></div>
<div class="ttc" id="aclass_waypoint_html_a69182fc2ac0a792b330e71407012ff6b"><div class="ttname"><a href="class_waypoint.html#a69182fc2ac0a792b330e71407012ff6b">Waypoint::getLocation</a></div><div class="ttdeci">const Coord3D * getLocation(void) const</div><div class="ttdoc">Get the waypoint&#39;s position.</div><div class="ttdef"><b>Definition</b> <a href="_terrain_logic_8h_source.html#l00116">TerrainLogic.h:116</a></div></div>
<div class="ttc" id="aclass_weather_setting_html"><div class="ttname"><a href="class_weather_setting.html">WeatherSetting</a></div><div class="ttdef"><b>Definition</b> <a href="_snow_8h_source.html#l00036">Snow.h:37</a></div></div>
<div class="ttc" id="aclass_xfer_c_r_c_html_a3aa8dcc6885b964641b4f98abc43bda0"><div class="ttname"><a href="class_xfer_c_r_c.html#a3aa8dcc6885b964641b4f98abc43bda0">XferCRC::xferSnapshot</a></div><div class="ttdeci">virtual void xferSnapshot(Snapshot *snapshot)</div><div class="ttdoc">entry point for xfering a snapshot</div><div class="ttdef"><b>Definition</b> <a href="_xfer_c_r_c_8cpp_source.html#l00122">XferCRC.cpp:122</a></div></div>
<div class="ttc" id="aclass_xfer_c_r_c_html_a3e39d6503bffe065a1378e19f33d3082"><div class="ttname"><a href="class_xfer_c_r_c.html#a3e39d6503bffe065a1378e19f33d3082">XferCRC::close</a></div><div class="ttdeci">virtual void close(void)</div><div class="ttdoc">stop CRC session</div><div class="ttdef"><b>Definition</b> <a href="_xfer_c_r_c_8cpp_source.html#l00075">XferCRC.cpp:75</a></div></div>
<div class="ttc" id="aclass_xfer_c_r_c_html_a4566be764efd6e0b646a18555a633cd2"><div class="ttname"><a href="class_xfer_c_r_c.html#a4566be764efd6e0b646a18555a633cd2">XferCRC::getCRC</a></div><div class="ttdeci">virtual UnsignedInt getCRC(void)</div><div class="ttdoc">get computed CRC in network byte order</div><div class="ttdef"><b>Definition</b> <a href="_xfer_c_r_c_8cpp_source.html#l00179">XferCRC.cpp:179</a></div></div>
<div class="ttc" id="aclass_xfer_c_r_c_html_ad5f341494a5f997930faa0bb6f5087be"><div class="ttname"><a href="class_xfer_c_r_c.html#ad5f341494a5f997930faa0bb6f5087be">XferCRC::open</a></div><div class="ttdeci">virtual void open(AsciiString identifier)</div><div class="ttdoc">start a CRC session with this xfer instance</div><div class="ttdef"><b>Definition</b> <a href="_xfer_c_r_c_8cpp_source.html#l00061">XferCRC.cpp:61</a></div></div>
<div class="ttc" id="aclass_xfer_deep_c_r_c_html"><div class="ttname"><a href="class_xfer_deep_c_r_c.html">XferDeepCRC</a></div><div class="ttdef"><b>Definition</b> <a href="_xfer_deep_c_r_c_8h_source.html#l00044">XferDeepCRC.h:45</a></div></div>
<div class="ttc" id="aclass_xfer_html"><div class="ttname"><a href="class_xfer.html">Xfer</a></div><div class="ttdef"><b>Definition</b> <a href="_xfer_8h_source.html#l00111">Xfer.h:112</a></div></div>
<div class="ttc" id="aclass_xfer_html_a98c88fedc5aa3b613c8238cb575a6b63"><div class="ttname"><a href="class_xfer.html#a98c88fedc5aa3b613c8238cb575a6b63">Xfer::getXferMode</a></div><div class="ttdeci">virtual XferMode getXferMode(void)</div><div class="ttdef"><b>Definition</b> <a href="_xfer_8h_source.html#l00119">Xfer.h:119</a></div></div>
<div class="ttc" id="aclass_xfer_html_ab5eaba115944e624a09dc6c72a6ae218"><div class="ttname"><a href="class_xfer.html#ab5eaba115944e624a09dc6c72a6ae218">Xfer::xferAsciiString</a></div><div class="ttdeci">virtual void xferAsciiString(AsciiString *asciiStringData)</div><div class="ttdef"><b>Definition</b> <a href="_xfer_8cpp_source.html#l00191">Xfer.cpp:191</a></div></div>
<div class="ttc" id="aclass_xfer_html_ab6a4459e27d00af4b407e616ecdf6b61"><div class="ttname"><a href="class_xfer.html#ab6a4459e27d00af4b407e616ecdf6b61">Xfer::xferUnsignedInt</a></div><div class="ttdeci">virtual void xferUnsignedInt(UnsignedInt *unsignedIntData)</div><div class="ttdef"><b>Definition</b> <a href="_xfer_8cpp_source.html#l00139">Xfer.cpp:139</a></div></div>
<div class="ttc" id="amatchbot_2main_8cpp_html_a82b8e21bd452d01ad6d32a0d73fbfdc8"><div class="ttname"><a href="matchbot_2main_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a></div><div class="ttdeci">#define sleep(x)</div><div class="ttdef"><b>Definition</b> <a href="matchbot_2main_8cpp_source.html#l00052">main.cpp:52</a></div></div>
<div class="ttc" id="apatch_8cpp_html_ac13bc459ae800248eabb652b9f6dc8ed"><div class="ttname"><a href="patch_8cpp.html#ac13bc459ae800248eabb652b9f6dc8ed">msg</a></div><div class="ttdeci">MSG msg</div><div class="ttdef"><b>Definition</b> <a href="patch_8cpp_source.html#l00409">patch.cpp:409</a></div></div>
<div class="ttc" id="astruct_coord3_d_html"><div class="ttname"><a href="struct_coord3_d.html">Coord3D</a></div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00331">BaseType.h:332</a></div></div>
<div class="ttc" id="astruct_coord3_d_html_a39afe152a72e7018134f775479d414a2"><div class="ttname"><a href="struct_coord3_d.html#a39afe152a72e7018134f775479d414a2">Coord3D::x</a></div><div class="ttdeci">Real x</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00333">BaseType.h:333</a></div></div>
<div class="ttc" id="astruct_coord3_d_html_a63f578e93f531915d51a0292b2547e41"><div class="ttname"><a href="struct_coord3_d.html#a63f578e93f531915d51a0292b2547e41">Coord3D::y</a></div><div class="ttdeci">Real y</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00333">BaseType.h:333</a></div></div>
<div class="ttc" id="astruct_coord3_d_html_a8553013d0fabd891803924a4df2c0a8d"><div class="ttname"><a href="struct_coord3_d.html#a8553013d0fabd891803924a4df2c0a8d">Coord3D::z</a></div><div class="ttdeci">Real z</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00333">BaseType.h:333</a></div></div>
<div class="ttc" id="astruct_find_position_options_html"><div class="ttname"><a href="struct_find_position_options.html">FindPositionOptions</a></div><div class="ttdef"><b>Definition</b> <a href="_partition_manager_8h_source.html#l00127">PartitionManager.h:128</a></div></div>
<div class="ttc" id="astruct_find_position_options_html_a156fa438782b4e067b6784835cc1f909"><div class="ttname"><a href="struct_find_position_options.html#a156fa438782b4e067b6784835cc1f909">FindPositionOptions::maxRadius</a></div><div class="ttdeci">Real maxRadius</div><div class="ttdoc">max radius to search around</div><div class="ttdef"><b>Definition</b> <a href="_partition_manager_8h_source.html#l00142">PartitionManager.h:142</a></div></div>
<div class="ttc" id="astruct_find_position_options_html_ac99bca759f2d16c3aa141891e682cfb2"><div class="ttname"><a href="struct_find_position_options.html#ac99bca759f2d16c3aa141891e682cfb2">FindPositionOptions::minRadius</a></div><div class="ttdeci">Real minRadius</div><div class="ttdoc">min radius to search around</div><div class="ttdef"><b>Definition</b> <a href="_partition_manager_8h_source.html#l00141">PartitionManager.h:141</a></div></div>
<div class="ttc" id="astruct_region3_d_html"><div class="ttname"><a href="struct_region3_d.html">Region3D</a></div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00428">BaseType.h:429</a></div></div>
<div class="ttc" id="astruct_region3_d_html_a65bfbbfbf1402ac0abc7dad049a70557"><div class="ttname"><a href="struct_region3_d.html#a65bfbbfbf1402ac0abc7dad049a70557">Region3D::hi</a></div><div class="ttdeci">Coord3D hi</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00430">BaseType.h:430</a></div></div>
<div class="ttc" id="astruct_region3_d_html_a88e23dece4caa6c4c0680e72486e09b9"><div class="ttname"><a href="struct_region3_d.html#a88e23dece4caa6c4c0680e72486e09b9">Region3D::lo</a></div><div class="ttdeci">Coord3D lo</div><div class="ttdef"><b>Definition</b> <a href="_base_type_8h_source.html#l00430">BaseType.h:430</a></div></div>
<div class="ttc" id="atest6_8cpp_html_a1bd3f5fbccb1628eb13dda4cd02633a4"><div class="ttname"><a href="test6_8cpp.html#a1bd3f5fbccb1628eb13dda4cd02633a4">test</a></div><div class="ttdeci">int test</div><div class="ttdef"><b>Definition</b> <a href="test6_8cpp_source.html#l00032">test6.cpp:32</a></div></div>
<div class="ttc" id="atiming_test_8cpp_html_afb66d20624c8efed5b7aa8f8287a096f"><div class="ttname"><a href="timing_test_8cpp.html#afb66d20624c8efed5b7aa8f8287a096f">GetPrecisionTimer</a></div><div class="ttdeci">void GetPrecisionTimer(INT64 *t)</div><div class="ttdef"><b>Definition</b> <a href="timing_test_8cpp_source.html#l00034">timingTest.cpp:34</a></div></div>
<div class="ttc" id="aunion_int_html"><div class="ttname"><a href="union_int.html">Int</a></div><div class="ttdef"><b>Definition</b> <a href="blowfish_8cpp_source.html#l00055">blowfish.cpp:55</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_23fdee2f6995db16c755697cdf620cf4.html">Code</a></li><li class="navelem"><a class="el" href="dir_2afaf83f7f326cb9149ef5259e9dd5d1.html">GameEngine</a></li><li class="navelem"><a class="el" href="dir_f892522411a591b84ce68f5d7c1c43fe.html">Source</a></li><li class="navelem"><a class="el" href="dir_3e81504a01ebb246e57ea329aea022ed.html">GameLogic</a></li><li class="navelem"><a class="el" href="dir_0487406d751e491b0778a14ff29e7f38.html">System</a></li><li class="navelem"><a class="el" href="_game_logic_8cpp.html">GameLogic.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
